```{r echo = FALSE}
pacman::p_load(tidyverse, readxl, knitr, kableExtra, Hmisc)
```

# Korrelation

![](images/caution.png){fig-align="center" width="50%"}

::: {.callout-caution collapse="true"}
## Ein Wort zur Klausur

Wir nutzen folgende
:::

## Genutzte R Pakete für das Kapitel

Wir wollen folgende R Pakete in diesem Kapitel nutzen.

```{r echo = TRUE}
#| message: false
pacman::p_load(tidyverse, magrittr, conflicted, broom,
               multcomp, emmeans, ggpubr)
conflict_prefer("select", "dplyr")
conflict_prefer("filter", "dplyr")
conflict_prefer("mutate", "dplyr")
```

Am Ende des Kapitels findest du nochmal den gesamten R Code in einem Rutsch zum selber durchführen oder aber kopieren.

## Daten

```{r}
#| message: false

model_tbl <- read_csv2("data/flea_dog_cat_length_weight.csv") %>%
  mutate(animal = as_factor(animal))
```

In der @tbl-model-1 ist der Datensatz `model_tbl` nochmal dargestellt.

```{r}
#| message: false
#| echo: false
#| tbl-cap: Selektierter Datensatz mit einer normalverteilten Variable `jump_length` sowie der multinominalverteilten Variable `grade` und einem Faktor `animal` mit drei Leveln.
#| label: tbl-model-1

model_tbl %>% head(15) %>% kable(align = "c", "pipe")
```

![Visualisierung der Korrelation.](images/statistical_modeling_lm){#fig-corr2 fig-align="center" width="100%"}

## Korrelation theoretisch

$$
\rho = r_{x,y} = \cfrac{s_{x,y}}{s_x \cdot s_y}
$$

$$
s_{x,y} = \sum_{i=1}^n(x_i-\bar{x})(y_i-\bar{y})
$$

$$
s_x = \sum\_{i=1}^n(x_i-^\bar{x})2
$$

$$
s_y = \sum_{i=1}^n(y_i-\bar{y})^2
$$

::: column-page
![Visualisierung der Korrelation.](images/statistical_modeling_corr){#fig-corr1 fig-align="center" width="80%"}
:::

![Visualisierung der Korrelation.](images/statistical_modeling_corr_2){fig-align="center" width="80%"}

## Korrelation in R

Korrplot...

Spearman vs Pearson...

## Bestimmtheitsmaß $R^2$

::: column-page
![Visualisierung der Korrelation.](images/statistical_modeling_rsquare){#fig-rsquare fig-align="center" width="60%"}
:::
