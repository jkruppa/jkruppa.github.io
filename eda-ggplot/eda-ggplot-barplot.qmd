Der Barplot oder das Balkendiagramm auch Säulendiagramm ist eigentlich veraltet. Wir haben mit dem Boxplot eine viel bessere Methode um eine Verteilung und *gleichzeitig* auch die Gruppenunterschiede zu visualisieren. Warum nutzen wir jetzt so viel den Barplot? Das hat damit zu tun, dass früher - oder besser bis vor kurzem - in Excel kein Boxplot möglich war. Daher nutzte jeder der mit Excel seine Daten auswertet den Barplot. Und was der Bauer nicht kennt... deshalb ist hier auch der Barplot dargestellt. Ich persönlich mag den Barplot eher weniger. Der Barplot ist einfach schlechter als der Boxplot. Wir haben nur die Standardabweichung als Maßzahl für die Streuung. Beim Boxplot haben wir das IQR, was uns mehr über die Streuung aussagt. Aber gut, häufig musst du den Barplot in deiner Abschlussarbeit machen. Also dann hier der Barplot. Wie erstellen wir nun einen Barplot in R? Zuerst laden wir die Daten mit der Funktion `read_excel()` in R, wenn du die Daten als `.xlsx` Datei vorliegen hast.

```{r}
#| message: false
flea_dog_cat_tbl <- read_excel("data/flea_dog_cat.xlsx")
```

Wir müssen jetzt für `ggplot()` noch den Mittelwert und die Streuung für die Gruppen berechnen. Du kannst als Streuung die Standardabweichung oder den Standardfehler nehmen. Ich würde die Standardabweichung bei kleinen Fallzahlen kleiner als 20 Beobachtungen nehmen.

```{r}
stat_tbl <- flea_dog_cat_tbl %>% 
  group_by(animal) %>% 
  summarise(mean = mean(jump_length),
            sd = sd(jump_length),
            se = sd/sqrt(n()))
```

Wir nutzen nun das Objekt `stat_tbl` um den Barplot mit der Funktion `ggplot()` zu erstellen. Dabei müssen wir zum einen schauen, dass die Balken nicht übereinander angeordnet sind. Nebeneinander angeordnete Balken kriegen wir mit der Option `stat = "identity"` in dem `geom_bar()`. Dann müssen wir noch die Fehlerbalken ergänzen mit dem `geom_errorbar`. Hier kann nochmal mit der Option `width =` an der Länge der Fehlerenden gedreht werden.

```{r}
#| message: false

ggplot(stat_tbl, aes(x = animal, y = mean, fill = animal)) + 
  theme_bw() +
  geom_bar(stat = "identity") +
  geom_errorbar(aes(ymin = mean-sd, ymax = mean+sd),
                width = 0.2)
```

Schau doch auch mal in den ein oder anderen Zerforschenkasten, da findest du dann noch mehr Inspiration aus anderen Abbildungen, die ich nachgebaut habe.

::: {.callout-note collapse="true"}
## Zerforschen: Einfaktorieller Barplot mit *compact letter display*

{{< include zerforschen/zerforschen-simple-barplot.qmd >}}
:::

::: {.callout-note collapse="true"}
## Zerforschen: Zweifaktorieller Barplot mit *compact letter display*

{{< include zerforschen/zerforschen-barplot-2fac-target.qmd >}}
:::
