<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="de" xml:lang="de"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="Ein Kochbuch mit Rezepten aus der Bio Data Science, Biostatistik, Biometrie und Statistik zum selber nachkochen!">

<title>55&nbsp; Multinomiale / Ordinale Regression – Bio Data Science</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./stat-modeling-logistic.html" rel="next">
<link href="./stat-modeling-beta.html" rel="prev">
<link href="./cover2024_favi.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-05fe91a66cf75bbbb8c9664867fe5124.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-05a8b96638736df272eeeeef67138371.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Keine Treffer",
    "search-matching-documents-text": "Treffer",
    "search-copy-link-title": "Link in die Suche kopieren",
    "search-hide-matches-text": "Zusätzliche Treffer verbergen",
    "search-more-match-text": "weitere Treffer in diesem Dokument",
    "search-more-matches-text": "weitere Treffer in diesem Dokument",
    "search-clear-button-title": "Zurücksetzen",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Abbrechen",
    "search-submit-button-title": "Abschicken",
    "search-label": "Suchen"
  }
}</script>
<link href="site_libs/tabwid-1.1.3/tabwid.css" rel="stylesheet">
<script src="site_libs/tabwid-1.1.3/tabwid.js"></script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<meta property="og:title" content="55&nbsp; Multinomiale / Ordinale Regression – Bio Data Science">
<meta property="og:description" content="Ein Kochbuch mit Rezepten der Bio Data Science, Biostatistik, Biometrie und Statistik">
<meta property="og:image" content="https://github.com/jkruppa/jkruppa.github.io/raw/master/cover2024.png">
<meta property="og:site_name" content="Bio Data Science">
</head>

<body class="nav-sidebar floating slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Seitenleiste umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./stat-modeling-preface.html">Statistisches Modellieren</a></li><li class="breadcrumb-item"><a href="./stat-modeling-multinom.html"><span class="chapter-number">55</span>&nbsp; <span class="chapter-title">Multinomiale / Ordinale Regression</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Seitenleiste umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Suchen" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Bio Data Science</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/jkruppa/jkruppa.github.io/" title="Quellcode" class="quarto-navigation-tool px-1" aria-label="Quellcode"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" role="link" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=|url|">
              <i class="bi bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=|url|">
              <i class="bi bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=|url|">
              <i class="bi bi-linkedin pe-1"></i>
            LinkedIn
            </a>
          </li>
      </ul>
    </div>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Suchen"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Willkommen</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./organisation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Organisation</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./literature.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Bibliothek</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./forschungsprozess.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Forschungsprozess</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./abschlussarbeit.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Abschlussarbeit</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./example-preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Datenbeispiele</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./example-fleas-dogs-cats.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Von Flöhen auf Tieren</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./example-gummi-bears.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Von Gummibärchen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./example-complex.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Von komplexeren Daten</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./example-database.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Von Datenbanken</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./programing-preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Programmieren in R</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./programing-letters-numbers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Daten in R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./programing-basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Operatoren, Funktionen und Pakete</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./programing-import.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Daten einlesen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./programing-dplyr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Daten bearbeiten</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./programing-strings.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Reguläre Ausdrücke</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./programing-purrr-furrr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Ein <code>purrr</code> Cookbook</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./programing-quarto-shiny.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Quarto und Shiny App</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./eda-preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Explorative Datenanalyse</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./eda-descriptive.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Deskriptive Statistik</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./eda-ggplot.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Visualisierung von Daten</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./eda-distribution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Verteilung von Daten</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./eda-transform.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Transformieren von Daten</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./stat-tests-preface-theory.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Testen von Hypothesen</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-basic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Die Testentscheidung</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-theorie.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Die Testtheorie</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-effect.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Der Effektschätzer</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-pretest.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Der Pre-Test oder Vortest</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./experimental-design-preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Experimentelle Designs</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./experimental-design-r.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Versuchsplanung in R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./experimental-design-basic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Einfache Designs</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./experimental-design-advanced.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Fortgeschrittene Designs</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./experimental-design-samplesize.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Fallzahlplanung</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./stat-tests-preface-app.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Statistische Gruppenvergleiche</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Testen in R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-ttest.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Der t-Test</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-anova2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">Die ANOVA</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-ancova2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">Die ANCOVA</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-anova-mixed.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">Die repeated / mixed ANOVA</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-anova-manova.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">Die MANOVA</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-utest.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">Der Wilcoxon-Mann-Whitney-Test</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-kruskal.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">35</span>&nbsp; <span class="chapter-title">Der Kruskal-Wallis-Test</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-friedman.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">36</span>&nbsp; <span class="chapter-title">Der Friedman Test</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-chi-test.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">37</span>&nbsp; <span class="chapter-title">Der <span class="math inline">\(\mathcal{X}^2\)</span>-Test</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-anteil-test.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">38</span>&nbsp; <span class="chapter-title">Der Anteilstest</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-diagnostic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">39</span>&nbsp; <span class="chapter-title">Der diagnostische Test</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-trendtest.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">40</span>&nbsp; <span class="chapter-title">Der Trendtest</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-permutationstest.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">41</span>&nbsp; <span class="chapter-title">Der Permutationstest</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-posthoc2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">42</span>&nbsp; <span class="chapter-title">Der Post-hoc Test</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./stat-linear-reg-preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Grundlagen des Modellierens</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-linear-reg-basic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">43</span>&nbsp; <span class="chapter-title">Simple lineare Regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-basic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">44</span>&nbsp; <span class="chapter-title">Multiple lineare Regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-linear-reg-quality.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">45</span>&nbsp; <span class="chapter-title">Modelgüte</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-linear-reg-corr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">46</span>&nbsp; <span class="chapter-title">Korrelation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-outlier.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">47</span>&nbsp; <span class="chapter-title">Ausreißer</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-variable-selection.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">48</span>&nbsp; <span class="chapter-title">Variablenselektion</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-missing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">49</span>&nbsp; <span class="chapter-title">Fehlende Werte</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-sensitivity.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">50</span>&nbsp; <span class="chapter-title">Sensitivitätsanalyse</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./stat-modeling-preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Statistisches Modellieren</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">51</span>&nbsp; <span class="chapter-title">Modellieren in R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-gaussian.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">52</span>&nbsp; <span class="chapter-title">Gaussian Regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-poisson.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">53</span>&nbsp; <span class="chapter-title">Poisson Regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-beta.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">54</span>&nbsp; <span class="chapter-title">Beta Regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-multinom.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">55</span>&nbsp; <span class="chapter-title">Multinomiale / Ordinale Regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-logistic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">56</span>&nbsp; <span class="chapter-title">Logistische Regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-prob-model.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">57</span>&nbsp; <span class="chapter-title">Linear Probability Model</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-mixed.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">58</span>&nbsp; <span class="chapter-title">Lineare gemischte Modelle</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-gee.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">59</span>&nbsp; <span class="chapter-title">Generalized Estimating Equations (GEE)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-non-linear.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">60</span>&nbsp; <span class="chapter-title">Nicht lineare Regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-robust-quantile.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">61</span>&nbsp; <span class="chapter-title">Robuste und Quantilesregression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-survival.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">62</span>&nbsp; <span class="chapter-title">Überlebenszeitanalysen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-noninferiority.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">63</span>&nbsp; <span class="chapter-title">Äquivalenz oder Nichtunterlegenheit</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-meta.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">64</span>&nbsp; <span class="chapter-title">Metaanalysen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-cluster.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">65</span>&nbsp; <span class="chapter-title">Clusteranalysen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-pca.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">66</span>&nbsp; <span class="chapter-title">Multivariate Verfahren</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-survey.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">67</span>&nbsp; <span class="chapter-title">Fragebogenanalyse</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./time-space-preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Zeitliche und räumliche Analysen</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./time-space-pseudo-time-series.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">68</span>&nbsp; <span class="chapter-title">Pseudo Zeitreihen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./time-space-time-series.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">69</span>&nbsp; <span class="chapter-title">Zeitreihen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./time-space-spatial-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">70</span>&nbsp; <span class="chapter-title">Räumliche Daten</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./classification-preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Klassifikation oder maschinelles Lernen</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./classification-basic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">71</span>&nbsp; <span class="chapter-title">Grundlagen der Klassifikation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./classification-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">72</span>&nbsp; <span class="chapter-title">Data splitting</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./classification-pre-processing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">73</span>&nbsp; <span class="chapter-title">Data preprocessing</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./classification-model-compare.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">74</span>&nbsp; <span class="chapter-title">Vergleich von Algorithmen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./classification-knn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">75</span>&nbsp; <span class="chapter-title"><span class="math inline">\(k\)</span> nearest neighbor</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./classification-randomforest.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">76</span>&nbsp; <span class="chapter-title">Decision trees</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./classification-svm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">77</span>&nbsp; <span class="chapter-title">Support vector machines</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./classification-neural-networks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">78</span>&nbsp; <span class="chapter-title">Neural networks</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./abspann.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Abspann</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-11" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app-spielecke.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">79</span>&nbsp; <span class="chapter-title">Spielecke</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="2">
    <h2 id="toc-title">Inhaltsverzeichnis</h2>
   
  <ul>
  <li><a href="#annahmen-an-die-daten" id="toc-annahmen-an-die-daten" class="nav-link active" data-scroll-target="#annahmen-an-die-daten"><span class="header-section-number">55.1</span> Annahmen an die Daten</a></li>
  <li><a href="#genutzte-r-pakete" id="toc-genutzte-r-pakete" class="nav-link" data-scroll-target="#genutzte-r-pakete"><span class="header-section-number">55.2</span> Genutzte R Pakete</a></li>
  <li><a href="#daten" id="toc-daten" class="nav-link" data-scroll-target="#daten"><span class="header-section-number">55.3</span> Daten</a></li>
  <li><a href="#sec-ordinal" id="toc-sec-ordinal" class="nav-link" data-scroll-target="#sec-ordinal"><span class="header-section-number">55.4</span> Ordinale logistische Regression</a></li>
  <li><a href="#sec-mult-comp-ord-reg" id="toc-sec-mult-comp-ord-reg" class="nav-link" data-scroll-target="#sec-mult-comp-ord-reg"><span class="header-section-number">55.5</span> Gruppenvergleich</a></li>
  <li><a href="#sec-multinom" id="toc-sec-multinom" class="nav-link" data-scroll-target="#sec-multinom"><span class="header-section-number">55.6</span> Multinomiale logistische Regression</a></li>
  <li><a href="#logistische-regression-als-ausweg" id="toc-logistische-regression-als-ausweg" class="nav-link" data-scroll-target="#logistische-regression-als-ausweg"><span class="header-section-number">55.7</span> Logistische Regression als Ausweg</a></li>
  <li><a href="#referenzen" id="toc-referenzen" class="nav-link" data-scroll-target="#referenzen">Referenzen</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/jkruppa/jkruppa.github.io/edit/master/stat-modeling-multinom.qmd" class="toc-action"><i class="bi bi-github"></i>Seite editieren</a></li><li><a href="https://github.com/jkruppa/jkruppa.github.io/issues/new" class="toc-action"><i class="bi empty"></i>Problem melden</a></li><li><a href="https://github.com/jkruppa/jkruppa.github.io/blob/master/stat-modeling-multinom.qmd" class="toc-action"><i class="bi empty"></i>Quellcode anzeigen</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./stat-modeling-preface.html">Statistisches Modellieren</a></li><li class="breadcrumb-item"><a href="./stat-modeling-multinom.html"><span class="chapter-number">55</span>&nbsp; <span class="chapter-title">Multinomiale / Ordinale Regression</span></a></li></ol></nav>
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title"><span id="sec-multinom-ordinal" class="quarto-section-identifier"><span class="chapter-number">55</span>&nbsp; <span class="chapter-title">Multinomiale / Ordinale Regression</span></span></h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Gesamten Code zeigen</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Gesamten Code verbergen</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">Quellcode anzeigen</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p><em>Letzte Änderung am 25. March 2024 um 08:41:34</em></p>
<blockquote class="blockquote">
<p><em>“The amateur does not know what to do. The master knows what not to do.” — James Clear</em></p>
</blockquote>
<p>Was machen wir wenn wir ein Outcome haben mit mehr als zwei Kategorien. Wenn wir nur zwei Kategorien hätten, dann würden wir eine logistische Regression rechnen. Wenn wir mehr als zwei Kategorien haben, dann sind wir in dem Fall der multinomialen / ordinalen logistischen Regression. Wir rechnen eine multinomialen Regression, wenn wir keine Ordnung in den Kategorien in dem Outcome haben. Wenn wir eine Ordnung vorliegen haben, dann nutzen wir die ordinale Regression. Wir werden uns erstmal eine ordinale Regression anschauen mit nur drei geordneten Stufen. Dann schauen wir uns einmal wie wir eine ordinale Regression auf Boniturnoten in der Likert-Skala rechnen. Wir machen das getrennt, denn wir sind bei wenigen geordneten Kategorien meistens noch am Effekt zwischen den Kategorien interessiert. Im Gegensatz wollen wir bei einem Outcome mit Boniturnoten einen Gruppenvergleich rechnen. Dann interessiert uns der Unterschied und die Effekte zwischen den Boniturnoten nicht. Deshalb trennen wir das hier etwas auf.</p>
<p>Im zweiten Teil wollen wir uns dann noch eine multinominale Regression auf ungeordneten Kategorien eines Outcomes anschauen. Korrekterweise tun wir nur so, als wäre unser vorher geordnetes Outcome dann eben ungeordnet. Das macht dann aber bei deiner Anwendung dann keinen großen Unterschied. Als eine Alternative zur multinationalen Regression stelle ich dann noch die logistische Regression vor. Wir können nämlich einfach unsere Daten nach dem Outcome jeweils in kleinere Datensätze mit nur jeweils zwei der Kategorien aufspalten. Das ist zwar nicht schön, aber auch eine Möglichkeit mit einem Problem umzugehen.</p>
<p>Ich gehe hier nicht auf die Theorie hinter der multinomialen / ordinalen logistischen Regression ein. Wenn dich dazu mehr interessiert findest du in den jeweiligen Abschnitten dann noch eine passende Referenz. Da kannst du dann schauen, welche Informationen du noch zusätzlich findest.</p>
<section id="annahmen-an-die-daten" class="level2" data-number="55.1">
<h2 data-number="55.1" class="anchored" data-anchor-id="annahmen-an-die-daten"><span class="header-section-number">55.1</span> Annahmen an die Daten</h2>
<p>Im folgenden Kapitel zu der multinomialen / ordinalen logistischen linearen Regression gehen wir davon aus, dass die Daten in der vorliegenden Form <em>ideal</em> sind. Das heißt wir haben weder fehlende Werte vorliegen, noch haben wir mögliche Ausreißer in den Daten. Auch wollen wir keine Variablen selektieren. Wir nehmen alles was wir haben mit ins Modell. Sollte eine oder mehre Bedingungen nicht zutreffen, dann schaue dir einfach die folgenden Kapitel an.</p>
<ul>
<li>Wenn du fehlende Werte in deinen Daten vorliegen hast, dann schaue bitte nochmal in das <a href="stat-modeling-missing.html" class="quarto-xref"><span>Kapitel 49</span></a> zu Imputation von fehlenden Werten.</li>
<li>Wenn du denkst, dass du Ausreißer oder auffälige Werte in deinen Daten hast, dann schaue doch bitte nochmal in das <a href="stat-modeling-outlier.html" class="quarto-xref"><span>Kapitel 47</span></a> zu Ausreißer in den Daten.</li>
<li>Wenn du denkst, dass du zu viele Variablen in deinem Modell hast, dann hilft dir das <a href="stat-modeling-variable-selection.html" class="quarto-xref"><span>Kapitel 48</span></a> bei der Variablenselektion.</li>
</ul>
<p>Daher sieht unser Modell wie folgt aus. Wir haben ein <span class="math inline">\(y\)</span> und <span class="math inline">\(p\)</span>-mal <span class="math inline">\(x\)</span>. Wobei <span class="math inline">\(p\)</span> für die Anzahl an Variablen auf der rechten Seite des Modells steht. Im Weiteren folgt unser <span class="math inline">\(y\)</span> einer Multinomialverteilung. Damit finden wir im Outcome im Falle der multinomialen logistischen linearen Regression <em>ungeordnete</em> Kategorien und im Falle der ordinalen logistischen linearen Regression <em>geordnete</em> Kategorien.</p>
<p><span class="math display">\[
y \sim x_1 + x_2 + ... + x_p
\]</span></p>
<p>Wir können in dem Modell auch Faktoren <span class="math inline">\(f\)</span> haben, aber es geht hier nicht um einen Gruppenvergleich. Das ist ganz wichtig. Wenn du einen Gruppenvergleich rechnen willst, dann musst du in <a href="stat-tests-posthoc2.html" class="quarto-xref"><span>Kapitel 42</span></a> nochmal nachlesen.</p>
</section>
<section id="genutzte-r-pakete" class="level2" data-number="55.2">
<h2 data-number="55.2" class="anchored" data-anchor-id="genutzte-r-pakete"><span class="header-section-number">55.2</span> Genutzte R Pakete</h2>
<p>Wir wollen folgende R Pakete in diesem Kapitel nutzen.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(tidyverse, magrittr, broom,</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>               parameters, performance, gtsummary,</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>               ordinal, janitor, MASS, nnet, flextable,</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>               emmeans, multcomp, ordinal, see, scales,</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>               janitor, conflicted)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">conflicts_prefer</span>(dplyr<span class="sc">::</span>select)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">conflicts_prefer</span>(dplyr<span class="sc">::</span>filter)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">conflicts_prefer</span>(magrittr<span class="sc">::</span>extract)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>An der Seite des Kapitels findest du den Link <em>Quellcode anzeigen</em>, über den du Zugang zum gesamten R-Code dieses Kapitels erhältst.</p>
</section>
<section id="daten" class="level2 page-columns page-full" data-number="55.3">
<h2 data-number="55.3" class="anchored" data-anchor-id="daten"><span class="header-section-number">55.3</span> Daten</h2>
<p>Im Folgenden wollen wir uns die Daten von den infizierten Ferkeln noch einmal anschauen. Wir nehmen als Outcome die Spalte <code>frailty</code> und damit die Gebrechlichkeit der Ferkel. Die Spalte ordnen wir einmal nach <em>robust</em>, <em>pre-frail</em> und <em>frail</em>. Wobei <em>robust</em> ein gesundes Ferkel beschreibt und <em>frail</em> ein gebrechliches Ferkel. Damit wir später die Richtung des Effekts richtig interpretieren können, müssen wir von <em>gut</em> nach <em>schlecht</em> sortieren. Das brauchen wir nicht, wenn wir Boniturnoten haben, dazu mehr in einem eigenen Abschnitt. Wir bauen uns dann noch einen Faktor mit ebenfalls der Spalte <code>frailty</code> in der wir so tun, als gebe es diese Ordnung nicht. Wir werden dann die ordinale Regression mit dem Outcome <code>frailty_ord</code> rechnen und die multinominale Regression dann mit dem Outcome <code>frailty_fac</code> durchführen.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>pig_tbl <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"data/infected_pigs.xlsx"</span>) <span class="sc">|&gt;</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">frailty_ord =</span> <span class="fu">ordered</span>(frailty, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"robust"</span>, <span class="st">"pre-frail"</span>, <span class="st">"frail"</span>)),</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">frailty_fac =</span> <span class="fu">as_factor</span>(frailty)) <span class="sc">|&gt;</span> </span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>infected)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Schauen wir uns nochmal einen Ausschnitt der Daten in der <a href="#tbl-multinom-pigs" class="quarto-xref">Tabelle&nbsp;<span>55.1</span></a> an.</p>
<div class="cell page-columns page-full">
<div id="tbl-multinom-pigs" class="cell quarto-float quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="quarto-float quarto-float-tbl figure page-columns page-full">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-multinom-pigs-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabelle&nbsp;55.1— Auszug aus dem Daten zu den kranken Ferkeln.
</figcaption>
<div aria-describedby="tbl-multinom-pigs-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca" class="page-columns page-full">
<div class="cell-output-display column-page">
<table class="do-not-create-environment cell caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 4%">
<col style="width: 7%">
<col style="width: 9%">
<col style="width: 8%">
<col style="width: 6%">
<col style="width: 9%">
<col style="width: 13%">
<col style="width: 7%">
<col style="width: 9%">
<col style="width: 11%">
<col style="width: 11%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">age</th>
<th style="text-align: center;">sex</th>
<th style="text-align: center;">location</th>
<th style="text-align: center;">activity</th>
<th style="text-align: center;">crp</th>
<th style="text-align: center;">frailty</th>
<th style="text-align: center;">bloodpressure</th>
<th style="text-align: center;">weight</th>
<th style="text-align: center;">creatinin</th>
<th style="text-align: center;">frailty_ord</th>
<th style="text-align: center;">frailty_fac</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">61</td>
<td style="text-align: center;">male</td>
<td style="text-align: center;">northeast</td>
<td style="text-align: center;">15.31</td>
<td style="text-align: center;">22.38</td>
<td style="text-align: center;">robust</td>
<td style="text-align: center;">62.24</td>
<td style="text-align: center;">19.05</td>
<td style="text-align: center;">4.44</td>
<td style="text-align: center;">robust</td>
<td style="text-align: center;">robust</td>
</tr>
<tr class="even">
<td style="text-align: center;">53</td>
<td style="text-align: center;">male</td>
<td style="text-align: center;">northwest</td>
<td style="text-align: center;">13.01</td>
<td style="text-align: center;">18.64</td>
<td style="text-align: center;">robust</td>
<td style="text-align: center;">54.21</td>
<td style="text-align: center;">17.68</td>
<td style="text-align: center;">3.87</td>
<td style="text-align: center;">robust</td>
<td style="text-align: center;">robust</td>
</tr>
<tr class="odd">
<td style="text-align: center;">66</td>
<td style="text-align: center;">female</td>
<td style="text-align: center;">northeast</td>
<td style="text-align: center;">11.31</td>
<td style="text-align: center;">18.76</td>
<td style="text-align: center;">robust</td>
<td style="text-align: center;">57.94</td>
<td style="text-align: center;">16.76</td>
<td style="text-align: center;">3.01</td>
<td style="text-align: center;">robust</td>
<td style="text-align: center;">robust</td>
</tr>
<tr class="even">
<td style="text-align: center;">59</td>
<td style="text-align: center;">female</td>
<td style="text-align: center;">north</td>
<td style="text-align: center;">13.33</td>
<td style="text-align: center;">19.37</td>
<td style="text-align: center;">robust</td>
<td style="text-align: center;">56.15</td>
<td style="text-align: center;">19.05</td>
<td style="text-align: center;">4.35</td>
<td style="text-align: center;">robust</td>
<td style="text-align: center;">robust</td>
</tr>
<tr class="odd">
<td style="text-align: center;">63</td>
<td style="text-align: center;">male</td>
<td style="text-align: center;">northwest</td>
<td style="text-align: center;">14.71</td>
<td style="text-align: center;">21.57</td>
<td style="text-align: center;">robust</td>
<td style="text-align: center;">55.38</td>
<td style="text-align: center;">18.44</td>
<td style="text-align: center;">5.27</td>
<td style="text-align: center;">robust</td>
<td style="text-align: center;">robust</td>
</tr>
<tr class="even">
<td style="text-align: center;">55</td>
<td style="text-align: center;">male</td>
<td style="text-align: center;">northwest</td>
<td style="text-align: center;">15.81</td>
<td style="text-align: center;">21.45</td>
<td style="text-align: center;">robust</td>
<td style="text-align: center;">60.29</td>
<td style="text-align: center;">18.42</td>
<td style="text-align: center;">4.78</td>
<td style="text-align: center;">robust</td>
<td style="text-align: center;">robust</td>
</tr>
<tr class="odd">
<td style="text-align: center;">…</td>
<td style="text-align: center;">…</td>
<td style="text-align: center;">…</td>
<td style="text-align: center;">…</td>
<td style="text-align: center;">…</td>
<td style="text-align: center;">…</td>
<td style="text-align: center;">…</td>
<td style="text-align: center;">…</td>
<td style="text-align: center;">…</td>
<td style="text-align: center;">…</td>
<td style="text-align: center;">…</td>
</tr>
<tr class="even">
<td style="text-align: center;">54</td>
<td style="text-align: center;">female</td>
<td style="text-align: center;">north</td>
<td style="text-align: center;">11.82</td>
<td style="text-align: center;">21.5</td>
<td style="text-align: center;">pre-frail</td>
<td style="text-align: center;">55.32</td>
<td style="text-align: center;">19.75</td>
<td style="text-align: center;">3.92</td>
<td style="text-align: center;">pre-frail</td>
<td style="text-align: center;">pre-frail</td>
</tr>
<tr class="odd">
<td style="text-align: center;">56</td>
<td style="text-align: center;">male</td>
<td style="text-align: center;">west</td>
<td style="text-align: center;">13.91</td>
<td style="text-align: center;">20.8</td>
<td style="text-align: center;">frail</td>
<td style="text-align: center;">58.37</td>
<td style="text-align: center;">17.28</td>
<td style="text-align: center;">7.44</td>
<td style="text-align: center;">frail</td>
<td style="text-align: center;">frail</td>
</tr>
<tr class="even">
<td style="text-align: center;">57</td>
<td style="text-align: center;">male</td>
<td style="text-align: center;">northwest</td>
<td style="text-align: center;">12.49</td>
<td style="text-align: center;">21.95</td>
<td style="text-align: center;">pre-frail</td>
<td style="text-align: center;">56.66</td>
<td style="text-align: center;">16.86</td>
<td style="text-align: center;">2.44</td>
<td style="text-align: center;">pre-frail</td>
<td style="text-align: center;">pre-frail</td>
</tr>
<tr class="odd">
<td style="text-align: center;">61</td>
<td style="text-align: center;">male</td>
<td style="text-align: center;">northwest</td>
<td style="text-align: center;">15.26</td>
<td style="text-align: center;">23.1</td>
<td style="text-align: center;">robust</td>
<td style="text-align: center;">57.18</td>
<td style="text-align: center;">15.55</td>
<td style="text-align: center;">3.08</td>
<td style="text-align: center;">robust</td>
<td style="text-align: center;">robust</td>
</tr>
<tr class="even">
<td style="text-align: center;">59</td>
<td style="text-align: center;">female</td>
<td style="text-align: center;">north</td>
<td style="text-align: center;">13.13</td>
<td style="text-align: center;">20.23</td>
<td style="text-align: center;">robust</td>
<td style="text-align: center;">56.64</td>
<td style="text-align: center;">18.6</td>
<td style="text-align: center;">3.41</td>
<td style="text-align: center;">robust</td>
<td style="text-align: center;">robust</td>
</tr>
<tr class="odd">
<td style="text-align: center;">63</td>
<td style="text-align: center;">female</td>
<td style="text-align: center;">north</td>
<td style="text-align: center;">10.01</td>
<td style="text-align: center;">19.89</td>
<td style="text-align: center;">robust</td>
<td style="text-align: center;">57.46</td>
<td style="text-align: center;">18.6</td>
<td style="text-align: center;">4.2</td>
<td style="text-align: center;">robust</td>
<td style="text-align: center;">robust</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>Das wären dann die Daten, die wir für unsere Modelle dann brauchen. Schauen wir mal was wir jetzt bei der ordinalen Regression herausbekommen.</p>
</section>
<section id="sec-ordinal" class="level2 page-columns page-full" data-number="55.4">
<h2 data-number="55.4" class="anchored" data-anchor-id="sec-ordinal"><span class="header-section-number">55.4</span> Ordinale logistische Regression</h2>
<p>Es gibt sicherlich einiges an Paketen in R um eine ordinale Regression durchzuführen. Ich nutze gerne die Funktion <code>polr()</code> aus dem R Paket <code>{MASS}</code>. Daneben gibt es auch noch das R Paket <code>{ordinal}</code> mit der Funktion <code>clm()</code>, die wir dann noch im Anschluss besprechen werden. Ich nutze jetzt erstmal die Funktion <code>polr()</code>, da wir hier noch eine externe Referenz haben, die uns noch detailliertere Informationen liefern kann.</p>

<div class="no-row-height column-margin column-container"><div class="">
<p>Ich verweise gerne hier auf das tolle Tutorium <a href="https://stats.oarc.ucla.edu/r/dae/ordinal-logistic-regression/">Ordinal Logistic Regression | R Data Analysis Examples</a>. Hier erfährst du noch mehr über die Analyse der ordinalen logistischen Regression.</p>
</div></div><p>Wir schon erwähnt sparen wir usn die mathematischen Details und utzen gleich die Funktion <code>polr</code> auf unserem Outcome <code>frailty</code>. Wir müssen keine Verteilungsfamilie extra angeben, dass haben wir schon mit der Auswahl der Funktion getan. Die Funktion <code>polr</code> kann nur eine ordinale Regression rechnen und wird einen Fehler ausgeben, wenn das Outcome <span class="math inline">\(y\)</span> nicht passt.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>ologit_fit <span class="ot">&lt;-</span> <span class="fu">polr</span>(frailty_ord <span class="sc">~</span> age <span class="sc">+</span> sex <span class="sc">+</span> location <span class="sc">+</span> activity <span class="sc">+</span> crp <span class="sc">+</span> </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>                     bloodpressure <span class="sc">+</span> weight <span class="sc">+</span> creatinin, </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> pig_tbl)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Schauen wir uns einmal die Ausgabe des Modellfits der ordinalen Regression mit der Funktion <code>summary()</code> an. Wir sehen eine Menge Zahlen und das wichtigste für uns ist ja, dass wir zum einen Wissen, dass wir auch die ordinale Regression auf der <span class="math inline">\(link\)</span>-Funktion rechnen. Wir erhalten also wieder eine Transformation des Zusammenhangs zurück, wie wir es schon bei der Poisson Regression sowie bei der logistischen Regression hatten.</p>
<div class="page-columns page-full"><p></p><div class="no-row-height column-margin column-container"><span class="margin-aside">Hier gibt es nur die Kurzfassung der <em>link</em>-Funktion. <span class="citation" data-cites="dormann2013parametrische">Dormann (<a href="#ref-dormann2013parametrische" role="doc-biblioref">2013</a>)</span> liefert hierzu in Kapitel 7.1.3 nochmal ein Einführung in das Thema.</span></div></div>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>ologit_fit <span class="sc">|&gt;</span> <span class="fu">summary</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
polr(formula = frailty_ord ~ age + sex + location + activity + 
    crp + bloodpressure + weight + creatinin, data = pig_tbl)

Coefficients:
                     Value Std. Error t value
age                0.03191    0.02168  1.4718
sexmale            0.06970    0.26447  0.2635
locationnortheast -0.27291    0.28063 -0.9725
locationnorthwest  0.07598    0.24883  0.3054
locationwest       0.24400    0.27285  0.8942
activity          -0.06970    0.07267 -0.9591
crp                0.06499    0.06820  0.9529
bloodpressure     -0.05051    0.03037 -1.6632
weight             0.06190    0.06649  0.9310
creatinin         -0.01100    0.06854 -0.1605

Intercepts:
                 Value   Std. Error t value
robust|pre-frail  0.6494  3.0697     0.2116
pre-frail|frail   2.4716  3.0724     0.8044

Residual Deviance: 794.6938 
AIC: 818.6938 </code></pre>
</div>
</div>
<p>Unsere Ausgabe teilt sich in zwei Teile auf. In dem oberen Teil sehen wir die Koeffizienten des Modells zusammen mit dem Fehler und der Teststatistik. Was wir nicht sehen, ist ein <span class="math inline">\(p\)</span>-Wert. Die Funktion rechnet uns keinen Signifikanztest aus. Das können wir aber gleich selber machen. In dem Abschnitt <code>Intercepts</code> finden wir die Werte für die Gruppeneinteilung auf der <em>link</em>-Funktion wieder. Wir transformieren ja unsere drei Outcomekategorien in einen kontinuierliche Zahlenzusammenhang. Trotzdem müssen ja die drei Gruppen auch wieder auftauchen. In dem Abschnitt <code>Intercepts</code> finden wir die Grenzen für die drei Gruppen auf der <em>link</em>-Funktion.</p>

<div class="no-row-height column-margin column-container"><div class="">
<p>Wir gibt auch ein Tutorial für <a href="https://stats.oarc.ucla.edu/r/faq/ologit-coefficients/">How do I interpret the coefficients in an ordinal logistic regression in R?</a></p>
</div></div><p>Berechnen wir jetzt einmal die <span class="math inline">\(p\)</span>-Werte per Hand. Dafür brauchen wir die absoluten Werte aus der <code>t value</code> Spalte aus der <code>summary</code> des Modellobjekts. Leider ist die Spalte nicht schön formatiert und so müssen wir uns etwas strecken um die Koeffizienten sauber aufzuarbeiten. Wir erhalten dann das Objekt <code>coef_tbl</code> wieder.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>coef_tbl <span class="ot">&lt;-</span> <span class="fu">summary</span>(ologit_fit) <span class="sc">|&gt;</span> </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coef</span>() <span class="sc">|&gt;</span> </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>(<span class="at">rownames =</span> <span class="st">"term"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>() <span class="sc">|&gt;</span> </span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">t_value =</span> <span class="fu">abs</span>(t_value))</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>coef_tbl</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 4
   term                value std_error t_value
   &lt;chr&gt;               &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;
 1 age                0.0319    0.0217   1.47 
 2 sexmale            0.0697    0.264    0.264
 3 locationnortheast -0.273     0.281    0.973
 4 locationnorthwest  0.0760    0.249    0.305
 5 locationwest       0.244     0.273    0.894
 6 activity          -0.0697    0.0727   0.959
 7 crp                0.0650    0.0682   0.953
 8 bloodpressure     -0.0505    0.0304   1.66 
 9 weight             0.0619    0.0665   0.931
10 creatinin         -0.0110    0.0685   0.161
11 robust|pre-frail   0.649     3.07     0.212
12 pre-frail|frail    2.47      3.07     0.804</code></pre>
</div>
</div>
<p>Um die Fläche rechts von dem <span class="math inline">\(t\)</span>-Wert zu berechnen, können wir zwei Funktionen nutzen. Die Funktion <code>pnorm()</code> nimmt eine Standradnormalverteilung an und die Funktion <code>pt()</code> vergleicht zu einer <span class="math inline">\(t\)</span>-Verteilung. Wenn wir <em>rechts</em> von der Verteilung schauen wollen, dann müssen wir die Option <code>lower.tail = FALSE</code> wählen. Da wir auch zweiseitig statistisch Testen, müssen wir den ausgerechneten <span class="math inline">\(p\)</span>-Wert mal zwei nehmen. Hier einmal als Beispiel für den <span class="math inline">\(t\)</span>-Wert von <span class="math inline">\(1.96\)</span>. Mit <code>pnorm(1.96, lower.tail = FALSE) * 2</code> erhalten wir <span class="math inline">\(0.05\)</span> als Ausgabe. Das ist unser <span class="math inline">\(p\)</span>-Wert. Was uns ja nicht weiter überrascht. Denn rechts neben dem Wert von <span class="math inline">\(1.96\)</span> in einer Standardnormalverteilung ist ja <span class="math inline">\(0.05\)</span>. Wenn wir einen <span class="math inline">\(t\)</span>-Test rechnen würden, dann müssten wir noch die Freiheitsgrade <code>df</code> mit angeben. Mit steigendem <span class="math inline">\(n\)</span> nähert sich die <span class="math inline">\(t\)</span>-Verteilung der Standardnormalverteilung an. Wir haben mehr als <span class="math inline">\(n = 400\)</span> Beobachtungen, daher können wir auch <code>df = 400</code> setzen. Da kommt es auf eine Zahl nicht an. Wir erhalten mit <code>pt(1.96, lower.tail = FALSE, df = 400) * 2</code> dann eine Ausgabe von <span class="math inline">\(0.0507\)</span>. Also <em>fast</em> den gleichen <span class="math inline">\(p\)</span>-Wert.</p>
<p>Im Folgenden setzte ich die Freiheitsgrade <code>df = 3</code> dammit wir was sehen. Bei so hohen Fallzahlen wir in unserem beispiel würden wir sonst keine Unterschiede sehen.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>coef_tbl <span class="sc">|&gt;</span> </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">p_n =</span> <span class="fu">pnorm</span>(t_value, <span class="at">lower.tail =</span> <span class="cn">FALSE</span>) <span class="sc">*</span> <span class="dv">2</span>,</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">p_t =</span> <span class="fu">pt</span>(t_value, <span class="at">lower.tail =</span> <span class="cn">FALSE</span>, <span class="at">df =</span> <span class="dv">3</span>) <span class="sc">*</span> <span class="dv">2</span>) <span class="sc">|&gt;</span> </span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), round, <span class="dv">3</span>))</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 6
   term               value std_error t_value   p_n   p_t
   &lt;chr&gt;              &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 age                0.032     0.022   1.47  0.141 0.237
 2 sexmale            0.07      0.264   0.264 0.792 0.809
 3 locationnortheast -0.273     0.281   0.973 0.331 0.403
 4 locationnorthwest  0.076     0.249   0.305 0.76  0.78 
 5 locationwest       0.244     0.273   0.894 0.371 0.437
 6 activity          -0.07      0.073   0.959 0.338 0.408
 7 crp                0.065     0.068   0.953 0.341 0.411
 8 bloodpressure     -0.051     0.03    1.66  0.096 0.195
 9 weight             0.062     0.066   0.931 0.352 0.421
10 creatinin         -0.011     0.069   0.161 0.872 0.883
11 robust|pre-frail   0.649     3.07    0.212 0.832 0.846
12 pre-frail|frail    2.47      3.07    0.804 0.421 0.48 </code></pre>
</div>
</div>
<p>Damit haben wir einmal händisch uns die <span class="math inline">\(p\)</span>-Werte ausgerechnet. Jetzt könnte man sagen, dass ist ja etwas mühselig. Gibt es da nicht auch einen einfacheren Weg? Ja wir können zum einen die Funktion <code>tidy()</code> nutzen um die 95% Konfidenzintervalle und die exponierten Effektschätzer aus der ordinalen Regresssion zu erhalten. Wir erhalten aber wieder keine <span class="math inline">\(p\)</span>-Werte sondern müssten uns diese <span class="math inline">\(p\)</span>- Werte dann wieder selber berechnen.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>ologit_fit <span class="sc">|&gt;</span> </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tidy</span>(<span class="at">conf.int =</span> <span class="cn">TRUE</span>, <span class="at">exponentiate =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>coef.type)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 6
   term              estimate std.error statistic conf.low conf.high
   &lt;chr&gt;                &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
 1 age                  1.03     0.0217     1.47     0.990      1.08
 2 sexmale              1.07     0.264      0.264    0.639      1.80
 3 locationnortheast    0.761    0.281     -0.973    0.437      1.32
 4 locationnorthwest    1.08     0.249      0.305    0.662      1.76
 5 locationwest         1.28     0.273      0.894    0.747      2.18
 6 activity             0.933    0.0727    -0.959    0.808      1.08
 7 crp                  1.07     0.0682     0.953    0.934      1.22
 8 bloodpressure        0.951    0.0304    -1.66     0.896      1.01
 9 weight               1.06     0.0665     0.931    0.934      1.21
10 creatinin            0.989    0.0685    -0.161    0.865      1.13
11 robust|pre-frail     1.91     3.07       0.212   NA         NA   
12 pre-frail|frail     11.8      3.07       0.804   NA         NA   </code></pre>
</div>
</div>
<p>Um all dieses Berechnen zu umgehen, können wir dann auch die Funktion <code>model_parameters()</code> nutzen. Hier berechnen wir dann die <span class="math inline">\(p\)</span>-Wert mit <span class="math inline">\(df = 400\)</span> aus einer <span class="math inline">\(t\)</span>-Verteilung. Damit umgehen wir das Problem, dass unser Modellfit keine <span class="math inline">\(p\)</span>-Werte liefert.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>ologit_fit <span class="sc">|&gt;</span> </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">model_parameters</span>() </span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># alpha

Parameter        | Log-Odds |   SE |        95% CI | t(400) |     p
-------------------------------------------------------------------
robust|pre-frail |     0.65 | 3.07 | [-5.39, 6.68] |   0.21 | 0.833
pre-frail|frail  |     2.47 | 3.07 | [-3.57, 8.51] |   0.80 | 0.422

# beta

Parameter            | Log-Odds |   SE |        95% CI | t(400) |     p
-----------------------------------------------------------------------
age                  |     0.03 | 0.02 | [-0.01, 0.07] |   1.47 | 0.142
sex [male]           |     0.07 | 0.26 | [-0.45, 0.59] |   0.26 | 0.792
location [northeast] |    -0.27 | 0.28 | [-0.83, 0.27] |  -0.97 | 0.331
location [northwest] |     0.08 | 0.25 | [-0.41, 0.56] |   0.31 | 0.760
location [west]      |     0.24 | 0.27 | [-0.29, 0.78] |   0.89 | 0.372
activity             |    -0.07 | 0.07 | [-0.21, 0.07] |  -0.96 | 0.338
crp                  |     0.06 | 0.07 | [-0.07, 0.20] |   0.95 | 0.341
bloodpressure        |    -0.05 | 0.03 | [-0.11, 0.01] |  -1.66 | 0.097
weight               |     0.06 | 0.07 | [-0.07, 0.19] |   0.93 | 0.352
creatinin            |    -0.01 | 0.07 | [-0.15, 0.12] |  -0.16 | 0.873</code></pre>
</div>
</div>
<p>In <a href="#tbl-regression-ordinal" class="quarto-xref">Tabelle&nbsp;<span>55.2</span></a> sehen wir nochmal die Ergebnisse der ordinalen Regression einmal anders aufgearbeitet. Wir aber schon bei der Funktion <code>tidy()</code> fehlen in der Tabelle die <span class="math inline">\(p\)</span>-Werte. Wir können aber natürlich auch eine Entscheidung über die 95% Konfidenzintervalle treffen. Wenn die 1 mit im 95% Konfidenzintervall ist, dann können wir die Nullhypothese nicht ablehnen.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>ologit_fit <span class="sc">|&gt;</span> </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tbl_regression</span>(<span class="at">exponentiate =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_flex_table</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="tbl-regression-ordinal" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-regression-ordinal-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabelle&nbsp;55.2— Tabelle der Ergebnisse der ordinalen Regression.
</figcaption>
<div aria-describedby="tbl-regression-ordinal-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-620c7a0a{}.cl-620924f4{font-family:'Helvetica';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-62092508{font-family:'Helvetica';font-size:6.6pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;position: relative;bottom:3.3pt;}.cl-62092509{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-620a7d04{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2pt;padding-top:2pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-620a7d0e{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2pt;padding-top:2pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-620a7d18{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-620a7d19{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-620a7d22{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:15pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-620a7d23{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-620a87b8{width:1.304in;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-620a87b9{width:0.583in;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-620a87ba{width:0.965in;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-620a87c2{width:1.304in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-620a87cc{width:0.583in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-620a87cd{width:0.965in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-620a87ce{width:1.304in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-620a87d6{width:0.583in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-620a87d7{width:0.965in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-620a87d8{width:1.304in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-620a87d9{width:0.583in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-620a87e0{width:0.965in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-620a87e1{width:1.304in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-620a87e2{width:0.583in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-620a87e3{width:0.965in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-620a87ea{width:1.304in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-620a87eb{width:0.583in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-620a87ec{width:0.965in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-620a87ed{width:1.304in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-620a87ee{width:0.583in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-620a87f4{width:0.965in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-620a87f5{width:1.304in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-620a87f6{width:0.583in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-620a87fe{width:0.965in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-620a87ff{width:1.304in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-620a8800{width:0.583in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-620a8801{width:0.965in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-620a8808{width:1.304in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-620a8809{width:0.583in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-620a880a{width:0.965in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-620a880b{width:1.304in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-620a8812{width:0.583in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-620a8813{width:0.965in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-620a8814{width:1.304in;background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-620a8815{width:0.583in;background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-620a881c{width:0.965in;background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-620a881d{width:1.304in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-620a881e{width:0.583in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-620a8826{width:0.965in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-620c7a0a"><thead><tr style="overflow-wrap:break-word;"><th class="cl-620a87b8"><p class="cl-620a7d04"><span class="cl-620924f4">Characteristic</span></p></th><th class="cl-620a87b9"><p class="cl-620a7d0e"><span class="cl-620924f4">OR</span><span class="cl-62092508">1</span></p></th><th class="cl-620a87ba"><p class="cl-620a7d0e"><span class="cl-620924f4">95% CI</span><span class="cl-62092508">1</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-620a87c2"><p class="cl-620a7d18"><span class="cl-62092509">age</span></p></td><td class="cl-620a87cc"><p class="cl-620a7d19"><span class="cl-62092509">1.03</span></p></td><td class="cl-620a87cd"><p class="cl-620a7d19"><span class="cl-62092509">0.99, 1.08</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-620a87ce"><p class="cl-620a7d18"><span class="cl-62092509">sex</span></p></td><td class="cl-620a87d6"><p class="cl-620a7d19"><span class="cl-62092509"></span></p></td><td class="cl-620a87d7"><p class="cl-620a7d19"><span class="cl-62092509"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-620a87d8"><p class="cl-620a7d22"><span class="cl-62092509">female</span></p></td><td class="cl-620a87d9"><p class="cl-620a7d19"><span class="cl-62092509">—</span></p></td><td class="cl-620a87e0"><p class="cl-620a7d19"><span class="cl-62092509">—</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-620a87e1"><p class="cl-620a7d22"><span class="cl-62092509">male</span></p></td><td class="cl-620a87e2"><p class="cl-620a7d19"><span class="cl-62092509">1.07</span></p></td><td class="cl-620a87e3"><p class="cl-620a7d19"><span class="cl-62092509">0.64, 1.80</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-620a87ea"><p class="cl-620a7d18"><span class="cl-62092509">location</span></p></td><td class="cl-620a87eb"><p class="cl-620a7d19"><span class="cl-62092509"></span></p></td><td class="cl-620a87ec"><p class="cl-620a7d19"><span class="cl-62092509"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-620a87ed"><p class="cl-620a7d22"><span class="cl-62092509">north</span></p></td><td class="cl-620a87ee"><p class="cl-620a7d19"><span class="cl-62092509">—</span></p></td><td class="cl-620a87f4"><p class="cl-620a7d19"><span class="cl-62092509">—</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-620a87f5"><p class="cl-620a7d22"><span class="cl-62092509">northeast</span></p></td><td class="cl-620a87f6"><p class="cl-620a7d19"><span class="cl-62092509">0.76</span></p></td><td class="cl-620a87fe"><p class="cl-620a7d19"><span class="cl-62092509">0.44, 1.32</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-620a87e1"><p class="cl-620a7d22"><span class="cl-62092509">northwest</span></p></td><td class="cl-620a87e2"><p class="cl-620a7d19"><span class="cl-62092509">1.08</span></p></td><td class="cl-620a87e3"><p class="cl-620a7d19"><span class="cl-62092509">0.66, 1.76</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-620a87f5"><p class="cl-620a7d22"><span class="cl-62092509">west</span></p></td><td class="cl-620a87f6"><p class="cl-620a7d19"><span class="cl-62092509">1.28</span></p></td><td class="cl-620a87fe"><p class="cl-620a7d19"><span class="cl-62092509">0.75, 2.18</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-620a87ff"><p class="cl-620a7d18"><span class="cl-62092509">activity</span></p></td><td class="cl-620a8800"><p class="cl-620a7d19"><span class="cl-62092509">0.93</span></p></td><td class="cl-620a8801"><p class="cl-620a7d19"><span class="cl-62092509">0.81, 1.08</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-620a87f5"><p class="cl-620a7d18"><span class="cl-62092509">crp</span></p></td><td class="cl-620a87f6"><p class="cl-620a7d19"><span class="cl-62092509">1.07</span></p></td><td class="cl-620a87fe"><p class="cl-620a7d19"><span class="cl-62092509">0.93, 1.22</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-620a8808"><p class="cl-620a7d18"><span class="cl-62092509">bloodpressure</span></p></td><td class="cl-620a8809"><p class="cl-620a7d19"><span class="cl-62092509">0.95</span></p></td><td class="cl-620a880a"><p class="cl-620a7d19"><span class="cl-62092509">0.90, 1.01</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-620a880b"><p class="cl-620a7d18"><span class="cl-62092509">weight</span></p></td><td class="cl-620a8812"><p class="cl-620a7d19"><span class="cl-62092509">1.06</span></p></td><td class="cl-620a8813"><p class="cl-620a7d19"><span class="cl-62092509">0.93, 1.21</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-620a8814"><p class="cl-620a7d18"><span class="cl-62092509">creatinin</span></p></td><td class="cl-620a8815"><p class="cl-620a7d19"><span class="cl-62092509">0.99</span></p></td><td class="cl-620a881c"><p class="cl-620a7d19"><span class="cl-62092509">0.86, 1.13</span></p></td></tr></tbody><tfoot><tr style="overflow-wrap:break-word;"><td colspan="3" class="cl-620a881d"><p class="cl-620a7d23"><span class="cl-62092508">1</span><span class="cl-62092509">OR = Odds Ratio, CI = Confidence Interval</span></p></td></tr></tfoot></table></div>
</div>
</div>
</figure>
</div>
</div>
<p>Wi es im gazen Kapitel schon durchscheint, die Interpreation der <span class="math inline">\(OR\)</span> aus einer ordinalen Regression ist nicht einfach, geschweige den intuitiv. Was wir haben ist der Trend. Wir haben unser Outcome von <em>robust</em> zu <em>frail</em> sortiert und damit von <em>gut</em> nach <em>schlecht</em>. Wir können so die Richtung der Variablen in unserem Modell interpretieren. Das heißt, dass männliche Ferkel eher von einer Gebrechlichkeit betroffen sind als weibliche Ferkel. Oder wir sagen, dass ein ansteigender CRP Wert führt zu weniger Gebrechlichkeit. Auf diesem Niveau lassen sich die <span class="math inline">\(OR\)</span> einer ordinalen Regression gut interpretieren.</p>
</section>
<section id="sec-mult-comp-ord-reg" class="level2" data-number="55.5">
<h2 data-number="55.5" class="anchored" data-anchor-id="sec-mult-comp-ord-reg"><span class="header-section-number">55.5</span> Gruppenvergleich</h2>
<p>In diesem Abschnitt wollen wir Gruppenvergleich mit dem <em>Cumulative Link Models (CLM)</em> für ordinale Daten rechnen. Oder andersherum, wir haben Boniturdaten vorliegen und wollen hierfür einen multipen Vergleich rechnen. Mehr zu dem Modell findest du im Tutorium zu <a href="https://rcompanion.org/handbook/G_01.html">Introduction to Cumulative Link Models (CLM) for Ordinal Data</a>. Wir konzentrieren uns hier direkt auf die Auswertung an einem Spieldatensatz. Daran können wir dann einfacher erkennen, was bei einem Vergleich rauskommt, wenn wir wissen was wir reingesteckt haben. Wenn du mehr zu dem Thema lesen willst, dann hilft eventuell auch die Hilfeseite zu <a href="https://cran.r-project.org/web/packages/emmeans/vignettes/sophisticated.html#ordinal">Ordinal models with {emmeans}</a>. Ich muss aber sagen, dass die Seite etwas theoretisch ist.</p>
<p>Wir bauen uns jetzt einen Spieldatensatz mit zwanzig Boniturnoten für drei Tierarten. Ich nehme hier nur fünf Notenschritte, da sonst die Sachlage sehr unübersichtlich wird. Im Prinzip generieren wir uns mit der Funktion <code>sample</code> nach vorgegeben Wahrscheinlichkeiten für jede Note zwanzig Boniturnoten für jede Tierart. Dabei haben Katzen eine niedrigere Note als Hunde und die Hunde haben schlechtere Noten als die Füchse. Am Ende brauchen wir dann noch einen geordneten Faktor <code>likert_ord</code> damit wir die ordinale Regression rechnen können. Die ursprünglichen Noten behalte ich als numerisch um die Daten besser in <code>{ggplot}</code> abbilden zu können.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">20231201</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>n_grp <span class="ot">&lt;-</span> <span class="dv">20</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>grade_tbl <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">trt =</span> <span class="fu">gl</span>(<span class="dv">3</span>, n_grp, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"cat"</span>, <span class="st">"dog"</span>, <span class="st">"fox"</span>)),</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">likert =</span> <span class="fu">c</span>(<span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">size =</span> n_grp, <span class="at">replace =</span> <span class="cn">TRUE</span>, <span class="at">prob =</span> <span class="fu">c</span>(<span class="fl">0.2</span>, <span class="fl">0.5</span>, <span class="fl">0.2</span>, <span class="fl">0.1</span>, <span class="fl">0.0</span>)),</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>                               <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">size =</span> n_grp, <span class="at">replace =</span> <span class="cn">TRUE</span>, <span class="at">prob =</span> <span class="fu">c</span>(<span class="fl">0.1</span>, <span class="fl">0.2</span>, <span class="fl">0.5</span>, <span class="fl">0.2</span>, <span class="fl">0.0</span>)),</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>                               <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">size =</span> n_grp, <span class="at">replace =</span> <span class="cn">TRUE</span>, <span class="at">prob =</span> <span class="fu">c</span>(<span class="fl">0.0</span>, <span class="fl">0.0</span>, <span class="fl">0.2</span>, <span class="fl">0.5</span>, <span class="fl">0.3</span>)))) <span class="sc">|&gt;</span> </span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">likert_ord =</span> <span class="fu">ordered</span>(likert))</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Dann berechnen wir einmal die mittleren Boniturnoten für die drei Tierarten. Wir sehen, dass wir ziemlich gerade Durchschnittsnoten haben.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>grade_tbl <span class="sc">|&gt;</span> </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(trt) <span class="sc">|&gt;</span> </span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">mean</span>(likert))</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  trt   `mean(likert)`
  &lt;fct&gt;          &lt;dbl&gt;
1 cat              2  
2 dog              3  
3 fox              4.1</code></pre>
</div>
</div>
<p>Jetzt können wir die Daten auch schon in die ordinale Regression mit <code>clm()</code> stecken. Da die Noten alle den gleichen Abstand zueinander haben, nutzen wir die Option <code>threshold = "symmetric"</code>. Wir brauchen hier die Ausgabe der Moelldierung gar nicht weiter im Detail. Wir nutzen den Fit dann gleich in der ANOVA und <code>{emmeans}</code> für den Gruppenvergleich der mittleren Boniturnoten.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>clm_fit <span class="ot">&lt;-</span> <span class="fu">clm</span>(likert_ord <span class="sc">~</span> trt, <span class="at">data =</span> grade_tbl,</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>               <span class="at">threshold =</span> <span class="st">"symmetric"</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Die ANOVA funktioniert wie gewohnt. Wir müssen hier auch nichts anpassen, wir kriegen einfach so unsere p-Werte geliefert. Wir haben einen signifikanten Effekt der Tierarten, was ja auch zu erwarten war. Die Boniturnoten unterscheiden sich zwischen Katzen, Hunden und Füchsen.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">anova</span>(clm_fit)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Type I Analysis of Deviance Table with Wald chi-square tests

    Df  Chisq Pr(&gt;Chisq)    
trt  2 33.628  4.986e-08 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
<p>Dann können wir auch schon den multipen Gruppenvergleich rechnen. Da wir die mittleren Boniturnoten wiedergegeben haben wollen, nutzen wir die Option <code>mode = "mean.class"</code>. Sonst würden wir andere Werte erhalten, die dann wirklich schwer zu interpretieren sind. Wie du siehst, sind es die gleichen Werte die wir auch oben für unsere Mittelwerte über die Boniturnoten berechnet haben.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>emm_obj <span class="ot">&lt;-</span> clm_fit <span class="sc">|&gt;</span> </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">emmeans</span>(<span class="sc">~</span> trt, <span class="at">mode =</span> <span class="st">"mean.class"</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Dann können wir uns auch schon das <em>compact letter display</em> wiedergeben lassen. Auch hier gibt es keine Überraschung, die drei Tierarten unterscheiden sich. Mit der Ausgabe könnten wir dann auch gleich ein Säulendigramm erstellen, aber das zeige ich gleich mal in dem zweiten Beispiel für zwei Faktoren und der Bonitur von Weizen.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>emm_obj <span class="sc">|&gt;</span> </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cld</span>(<span class="at">Letters =</span> letters)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> trt mean.class    SE  df asymp.LCL asymp.UCL .group
 cat       1.98 0.169 Inf      1.65      2.31  a    
 dog       3.00 0.162 Inf      2.68      3.32   b   
 fox       4.09 0.162 Inf      3.77      4.40    c  

Confidence level used: 0.95 
P value adjustment: tukey method for comparing a family of 3 estimates 
significance level used: alpha = 0.05 
NOTE: If two or more means share the same grouping symbol,
      then we cannot show them to be different.
      But we also did not show them to be the same. </code></pre>
</div>
</div>
<p>In unserem zweiten Beispiel schauen wir uns einen zweifaktoriellen Datensatz einmal an. Wir haben Weizen angepflanzt und bonitieren die Weizenpflanzen nach der Likert Skala. Dabei bedeutet dann eine 1 ein schlechte Note und eine 9 die bestmögliche Note. Wir hätten natürlich hier auch einen Kurskal-Wallis-Test rechnen können und dann im Anschluss einen paarweisen Wilcoxon Test. Nun modellieren wir hier aber die Boniturnoten mal mit einer ordinalen Regression und rechnen den anschließenden Gruppenvergleich dann mit dem R Paket <code>{emmeans}</code>.</p>
<p>Unser Datensatz <code>grade_tbl</code> enthält den Faktor <code>block</code> mit drei Levels sowie den Faktor <code>variety</code> mit fünf Leveln. Jedes Level repräsentiert dabei eine Weizensorte. Wichtig ist hier, dass wir die Noten als <em>geordneten</em> Faktor mit der Funktion <code>ordered</code> erstellen. Nur dann haben die Noten eine Ordnung und die folgenden Funktionen erkennen dann auch die Spalte <code>grade_ord</code> als eine ordinale Spalte mit Noten.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>grade_tbl <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">block =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"I"</span>, <span class="st">"II"</span>, <span class="st">"III"</span>), <span class="at">each =</span> <span class="dv">3</span>),</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">A =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">1</span>),</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">B =</span> <span class="fu">c</span>(<span class="dv">7</span>, <span class="dv">9</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">6</span>, <span class="dv">7</span>),</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">C =</span> <span class="fu">c</span>(<span class="dv">6</span>, <span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">4</span>, <span class="dv">7</span>, <span class="dv">6</span>),</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">D =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>),</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>                    <span class="at">E =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">7</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">5</span>)) <span class="sc">|&gt;</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gather</span>(<span class="at">key =</span> variety, <span class="at">value =</span> grade, A<span class="sc">:</span>E) <span class="sc">|&gt;</span> </span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">grade_ord =</span> <span class="fu">ordered</span>(grade))</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Wir schauen uns nochmal den Datensatz an und sehen, dass wir einmal die Spalte <code>grade</code> als numerische Spalte vorliegen haben und einmal als geordneten Faktor. Wir brauchen die numerische Spalte um die Daten besser in <code>ggplot()</code> darstellen zu können.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>grade_tbl <span class="sc">|&gt;</span> <span class="fu">head</span>(<span class="dv">4</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 4
  block variety grade grade_ord
  &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt; &lt;ord&gt;    
1 I     A           2 2        
2 I     A           3 3        
3 I     A           4 4        
4 II    A           3 3        </code></pre>
</div>
</div>
<p>In <a href="#fig-clm-dot" class="quarto-xref">Abbildung&nbsp;<span>55.1</span></a> sehen wir einmal die Daten als Dotplot dargestellt. Auf der x-Achse sind die Weizensorten und auf der y-Achse die Boniturnoten. Ich habe noch die zusätzlichen Linien für jede einzelne Note mit eingezeichnet.</p>
<div class="cell" data-layout-align="center">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(grade_tbl, <span class="fu">aes</span>(variety, grade, <span class="at">fill =</span> block)) <span class="sc">+</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_dotplot</span>(<span class="at">binaxis =</span> <span class="st">"y"</span>, <span class="at">stackdir=</span><span class="st">'center'</span>, </span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">position=</span><span class="fu">position_dodge</span>(<span class="fl">0.6</span>), <span class="at">dotsize =</span> <span class="fl">0.75</span>) <span class="sc">+</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>, <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">9</span>)) <span class="sc">+</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_okabeito</span>() </span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-clm-dot" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-clm-dot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="stat-modeling-multinom_files/figure-html/fig-clm-dot-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1" title="Abbildung&nbsp;55.1— Dotplot des Datenbeispiels für die Bonitur von fünf Weizensorten."><img src="stat-modeling-multinom_files/figure-html/fig-clm-dot-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="576"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-clm-dot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;55.1— Dotplot des Datenbeispiels für die Bonitur von fünf Weizensorten.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Jetzt können wir schon die Funktion <code>clm()</code> aus dem R Paket <code>{ordinal}</code> verwenden um die ordinale Regression zu rechnen. Wir haben in dem R Paket <code>{ordinal}</code> noch weitere Modelle zu Verfügung mit denen wir auch komplexere Designs bis hin zu linearen gemischten Modellen für eine ordinale Regresssion rechnen können. Da wir mit Boniturnoten als Outcome arbeiten setzen wir auch die Option <code>threshold = "symmetric"</code>. Damit teilen wir der Funktion <code>clm()</code> mit, dass wir es mit einer symmetrischen Notenskala zu tun haben. Wenn du das nicht hast, dass kannst du die Option auch auf <code>"flexible"</code> stellen. Dann wird eine nicht symmetrische Verteilung des Outcomes angenommen.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>clm_fit <span class="ot">&lt;-</span> <span class="fu">clm</span>(grade_ord <span class="sc">~</span> variety <span class="sc">+</span> block <span class="sc">+</span> variety<span class="sc">:</span>block, <span class="at">data =</span> grade_tbl,</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>               <span class="at">threshold =</span> <span class="st">"symmetric"</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Es ist auch möglich auf dem Modellfit eine ANOVA zu rechnen. Wir machen das hier einmal, aber wir erwarten natürlich einen signifikanten Effekt von der Sorte. Die Signifikanz konnten wir ja schon oben im Dotplot sehen.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">anova</span>(clm_fit)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Type I Analysis of Deviance Table with Wald chi-square tests

              Df   Chisq Pr(&gt;Chisq)    
variety        4 38.7587  7.813e-08 ***
block          2  0.0987     0.9518    
variety:block  8  4.9452     0.7634    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
<p>Jetzt nutzen wir wieder den Modellfit für unseren Gruppenvergleich in <code>{emmeans}</code>. Wir nutzen dafür wieder die Funktion <code>emmeans()</code> und lassen uns das <em>compact letter display</em> über die Funktion <code>cld()</code> wiedergeben. Da wir hier eigentlich keinen signifikanten Effekt der Blöcke vorliegen haben, könnten wir auch einfach die Option <code>~ variety</code> nutzen und den Block weglassen. Dann wäre auch die Ausgabe mit den <em>compact letter display</em> etwas übersichtlicher. Ich habe dann noch die Ausgabe einmal nach den Sorten sortiert und nicht nach dem <em>compact letter display</em> um hier etwas mehr Übersicht zu erhalten.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>emm_obj <span class="ot">&lt;-</span> clm_fit <span class="sc">|&gt;</span> </span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">emmeans</span>(<span class="sc">~</span> variety <span class="sc">*</span> block, <span class="at">mode =</span> <span class="st">"mean.class"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cld</span>(<span class="at">Letters =</span> letters) <span class="sc">|&gt;</span> </span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(variety)</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>emm_obj</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> variety block mean.class    SE  df asymp.LCL asymp.UCL .group 
 A       III         2.23 0.600 Inf     1.054      3.41  abc   
 A       II          2.68 0.484 Inf     1.737      3.63  abc   
 A       I           3.02 0.540 Inf     1.960      4.08  abcd  
 B       III         7.17 0.623 Inf     5.949      8.39      ef
 B       I           7.97 0.502 Inf     6.985      8.95       f
 B       II          7.97 0.502 Inf     6.985      8.95       f
 C       I           5.32 0.550 Inf     4.238      6.40     de 
 C       III         5.76 0.672 Inf     4.441      7.08     def
 C       II          5.98 0.582 Inf     4.835      7.12      ef
 D       II          1.39 0.349 Inf     0.709      2.08  a     
 D       III         1.76 0.417 Inf     0.938      2.57  ab    
 D       I           2.03 0.502 Inf     1.048      3.02  ab    
 E       I           4.34 0.739 Inf     2.888      5.78   bcde 
 E       II          5.00 0.597 Inf     3.829      6.17    cde 
 E       III         5.58 0.616 Inf     4.369      6.78     def

Confidence level used: 0.95 
P value adjustment: tukey method for comparing a family of 15 estimates 
significance level used: alpha = 0.05 
NOTE: If two or more means share the same grouping symbol,
      then we cannot show them to be different.
      But we also did not show them to be the same. </code></pre>
</div>
</div>
<p>In der <a href="#fig-log-mod-ordinal-weizen" class="quarto-xref">Abbildung&nbsp;<span>55.2</span></a> siehst du dann einmal die Ausgabe des multipen Gruppenvergleichs visualisiert. Hier wäre es dann schon fast sinnvoll über die Blöcke zu mitteln und daher den Block aus dem Modell zu nehmen. Der Block hat keinen Effekt und sorgt aber für noch mehr Vergleiche, die gerechnet werden müssen. Du kannst dann ja oben nochmal die Funktion <code>emmeans()</code> anpassen und gemittelt über alle Blöcke mit der Option <code>~ variety</code> rechnen. Die Funktion <code>str_trim()</code> entfernt dann noch die Leerzeichen von dem <em>compact letter display</em> und zentriert damit alles schön.</p>
<div class="cell" data-layout-align="center">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>emm_obj <span class="sc">|&gt;</span> </span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">|&gt;</span> </span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> variety, <span class="at">y =</span> mean.class, <span class="at">fill =</span> block)) <span class="sc">+</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> </span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Mittlere Boniturnote"</span>, <span class="at">x =</span> <span class="st">"Sorte"</span>,</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">"Block"</span>) <span class="sc">+</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, </span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.9</span>, <span class="at">preserve =</span> <span class="st">"single"</span>)) <span class="sc">+</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">str_trim</span>(.group), <span class="at">y =</span> mean.class <span class="sc">+</span> SE <span class="sc">+</span> <span class="fl">0.01</span>),  </span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.9</span>), <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.25</span>) <span class="sc">+</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> mean.class<span class="sc">-</span>SE, <span class="at">ymax =</span> mean.class<span class="sc">+</span>SE),</span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>                <span class="at">width =</span> <span class="fl">0.2</span>,  </span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>                <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.9</span>, <span class="at">preserve =</span> <span class="st">"single"</span>)) <span class="sc">+</span></span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_okabeito</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-log-mod-ordinal-weizen" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-log-mod-ordinal-weizen-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="stat-modeling-multinom_files/figure-html/fig-log-mod-ordinal-weizen-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2" title="Abbildung&nbsp;55.2— Säulendigramm der mittleren Boniturnote des Weizen aus einer ordinalen Regression. Das compact letter display wird dann in {emmeans} generiert. Teilweise kommt das compact letter display an seine visuellen Grenzen. Hier wäre es dann schon fast sinnvoll über die Blöcke zu mitteln und daher den Block aus dem Modell zu nehmen."><img src="stat-modeling-multinom_files/figure-html/fig-log-mod-ordinal-weizen-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="576"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-log-mod-ordinal-weizen-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;55.2— Säulendigramm der mittleren Boniturnote des Weizen aus einer ordinalen Regression. Das <em>compact letter display</em> wird dann in <code>{emmeans}</code> generiert. Teilweise kommt das <em>compact letter display</em> an seine visuellen Grenzen. Hier wäre es dann schon fast sinnvoll über die Blöcke zu mitteln und daher den Block aus dem Modell zu nehmen.
</figcaption>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Anwendungsbeispiel: Gruppenvergleich für eine Bonitur
</div>
</div>
<div class="callout-body-container callout-body">
<p>Im folgenden Beispiel schauen wir uns nochmal ein praktische Auswertung von einem agrarwissenschaftlichen Beispiel mit Brokkoli an. Wir haben uns in diesem Experiment verschiedene Dosen <code>fert_amount</code> von einem Dünger aufgebracht sowie verschiedene Zeitpunkte der Düngung <code>fert_time</code> berücksichtigt. Ziel ist es die Boniturnoten für den Stamm von Brokkoli miteinander zu vergleichen. Auch hier haben wir einige Besonderheiten in den Daten, da nicht jede Faktorkombination vorliegt. Wir ignorieren aber diese Probleme und rechnen einfach stumpf unseren Gruppenvergleich. Wir müssen aber ein paar Anpassungen durchführen. Unsere Noten müssen ein geordneter Faktor sein, daher nutzen wir die Funktion <code>ordered</code>. Darüber hinaus schmeißen wir die Düngerzeit <code>early</code> aus den Daten, da wir zu dem Zeitpunkt keine hohlen Stämme bonitiert haben.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>broc_tbl <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"data/broccoli_weight.xlsx"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">fert_time =</span> <span class="fu">factor</span>(fert_time, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"none"</span>, <span class="st">"early"</span>, <span class="st">"late"</span>)),</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">fert_amount =</span> <span class="fu">as_factor</span>(fert_amount),</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">block =</span> <span class="fu">as_factor</span>(block),</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">stem_hollowness_num =</span> stem_hollowness,</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">stem_hollowness =</span> <span class="fu">ordered</span>(stem_hollowness)) <span class="sc">|&gt;</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(fert_time <span class="sc">==</span> <span class="st">"early"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(fert_time, fert_amount, block, stem_hollowness, stem_hollowness_num) <span class="sc">|&gt;</span> </span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">droplevels</span>() <span class="sc">|&gt;</span> </span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Im Folgenden einmal die Tabelle mit <code>tabyl</code> aus dem R Paket <code>{janitor}</code>. Mehr dazu auf der Hilfeseite zu <a href="https://cran.r-project.org/web/packages/janitor/vignettes/tabyls.html">tabyls: a tidy, fully-featured approach to counting things</a>. Wir sehen, dass wir kaum schlechte Noten erhalten. Fast alle Brokkoliköpfe haben eine 1 erhalten, was für intakte Köpfe ohne einen hohlen Stamm spricht.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>broc_tbl <span class="sc">|&gt;</span> </span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(stem_hollowness, fert_amount) </span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> stem_hollowness 150 225 300
               1 213 329 154
               2   6  47  15
               3   4  32  22
               4   2  14  17
               5   1  10   4
               6   0   3   2
               8   0   1   0</code></pre>
</div>
</div>
<p>Die Tabelle sehen wir dann auch nochmal in der <a href="#fig-clm-broc-violin" class="quarto-xref">Abbildung&nbsp;<span>55.3</span></a> als Violinplot visualisiert. Wir sehen hier nochmal sehr drastisch, dass wir kaum Noten großer als Eins in den Daten vorliegen haben.</p>
<div class="cell" data-layout-align="center">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(broc_tbl, <span class="fu">aes</span>(fert_amount, stem_hollowness_num, <span class="at">fill =</span> fert_amount)) <span class="sc">+</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>() <span class="sc">+</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>, <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">9</span>)) <span class="sc">+</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_okabeito</span>() <span class="sc">+</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-clm-broc-violin" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-clm-broc-violin-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="stat-modeling-multinom_files/figure-html/fig-clm-broc-violin-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3" title="Abbildung&nbsp;55.3— Violinplot der Boniturnoten der Brokkolistämme. Klar ist die sehr schiefe Verteilung der Boniturnoten zu erkennen."><img src="stat-modeling-multinom_files/figure-html/fig-clm-broc-violin-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="384"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-clm-broc-violin-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;55.3— Violinplot der Boniturnoten der Brokkolistämme. Klar ist die sehr schiefe Verteilung der Boniturnoten zu erkennen.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Wir rechnen jetzt natürlich trotzdem eine ordinale Regression mit der Funktion <code>clm()</code>. Wir setzen die Option <code>theshold = "symmetric"</code> da wir davon ausgehen, dass unsere Noten alle den gleichen Abstand zueinander haben.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>clm_fit <span class="ot">&lt;-</span> <span class="fu">clm</span>(stem_hollowness <span class="sc">~</span> fert_amount, </span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>               <span class="at">data =</span> broc_tbl, <span class="at">threshold =</span> <span class="st">"symmetric"</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Jetzt rechnen wir in den beiden folgenden Tabs einmal die ANOVA und dann auch den multiplen Gruppenvergleich mit <code>{emmeans}</code>. Da wir hier ordinale Daten haben, können wir dann nicht einfach die Standardverfahren nehmen. Wir entscheiden uns dann für den Standardfehler bei der Darstellung.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" aria-current="page">ANOVA mit <code>anova()</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Gruppenvergleich mit <code>emmeans()</code></a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<p>Wir rechnen hier einmal die ANOVA und nutzen den <span class="math inline">\(\mathcal{X}^2\)</span>-Test für die Ermittelung der p-Werte. Wir müssen hier einen Test auswählen, da per Standardeinstellung kein Test gerechnet wird. Wir machen dann die Ausgabe nochmal schöner und fertig sind wir.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>clm_fit <span class="sc">|&gt;</span> </span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anova</span>() <span class="sc">|&gt;</span> </span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">model_parameters</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Parameter   | Chi2(2) |      p
------------------------------
fert_amount |   35.82 | &lt; .001

Anova Table (Type 1 tests)</code></pre>
</div>
</div>
<p>Wir sehen, dass der die Menge des Düngers signifikant ist. Wir haben nicht mehr Faktoren in dem Modell gehabt, so dass wir hier auch keine weiteren Aussagen tätigen können.</p>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<p>Im Folgenden rechnen wir einmal für den Faktor <code>fert_amount</code> einen Gruppenvergleich. Wir setzen hier die Option <code>mean.class</code> damit wir dann die mittleren Noten wiedergegeben bekommen. Mit den mittleren Noten können wir dann ein Säulendiagramm erstellen. Dann adjustieren wir noch nach Bonferroni und sind fertig.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>emm_obj <span class="ot">&lt;-</span> clm_fit <span class="sc">|&gt;</span> </span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">emmeans</span>(<span class="sc">~</span> fert_amount, <span class="at">mode =</span> <span class="st">"mean.class"</span>) <span class="sc">|&gt;</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cld</span>(<span class="at">Letters =</span> letters, <span class="at">adjust =</span> <span class="st">"bonferroni"</span>)</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>emm_obj</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> fert_amount mean.class     SE  df asymp.LCL asymp.UCL .group
 150               1.11 0.0308 Inf      1.04      1.18  a    
 225               1.50 0.0485 Inf      1.39      1.62   b   
 300               1.61 0.0753 Inf      1.43      1.79   b   

Confidence level used: 0.95 
Conf-level adjustment: bonferroni method for 3 estimates 
P value adjustment: bonferroni method for 3 tests 
significance level used: alpha = 0.05 
NOTE: If two or more means share the same grouping symbol,
      then we cannot show them to be different.
      But we also did not show them to be the same. </code></pre>
</div>
</div>
<p>Das <code>emm_obj</code> Objekt werden wir dann gleich einmal in <code>{ggplot}</code> visualisieren. Die <code>mean.class</code> stellt den mittleren Noten des Brokkoli für die Menge der Düngung dar. Wir nutzen dann auch hier die Standardfehler für die Abbildungen, da wir sonst schnelle Werte kleiner 0 und größer 9 erhalten. Dann können wir zum Abschluss auch das <em>compact letter display</em> anhand der Abbildung interpretieren.</p>
<p>Gerade in diesem Beispiel bietet es sich an, dass wir explizit <em>mindestens</em> einen Noten<em>punkt</em>unterschied vorliegen haben wollen, damit wir von einem relevanten Unterschied sprechen können. Die Funktion <code>cld()</code> erlaubt es ein <span class="math inline">\(\Delta\)</span> zu definieren, dass mindestens überschritten sein muss, damit wir einen Unterschied feststellen. Alles was in dem Bereich <span class="math inline">\(\pm\Delta\)</span> liegt, gilt dann als gleich auch wenn es sonst signifikant wäre. Deshalb setzen wir die Option <code>delta = 1</code> um sicherzustellen, dass nur <em>relevante</em> Unterschiede auch als solche angezeigt werden. Daher haben wir nach der Anpassung auch keine signifikanten Unterschiede mehr. Alle Gruppen sind gleich.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>clm_fit <span class="sc">|&gt;</span> </span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">emmeans</span>(<span class="sc">~</span> fert_amount, <span class="at">mode =</span> <span class="st">"mean.class"</span>) <span class="sc">|&gt;</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cld</span>(<span class="at">Letters =</span> letters, <span class="at">adjust =</span> <span class="st">"bonferroni"</span>, <span class="at">delta =</span> <span class="dv">1</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> fert_amount mean.class     SE  df asymp.LCL asymp.UCL .equiv.set
 150               1.11 0.0308 Inf      1.04      1.18  a        
 225               1.50 0.0485 Inf      1.39      1.62  a        
 300               1.61 0.0753 Inf      1.43      1.79  a        

Confidence level used: 0.95 
Conf-level adjustment: bonferroni method for 3 estimates 
P value adjustment: bonferroni method for 3 tests 
Statistics are tests of equivalence with a threshold of 1 
P values are left-tailed 
significance level used: alpha = 0.05 
Estimates sharing the same symbol test as equivalent </code></pre>
</div>
</div>
</div>
</div>
</div>
<p>In der <a href="stat-modeling-mixed.html#fig-log-mod-ordinal-broc" class="quarto-xref">Abbildung&nbsp;<span>58.22</span></a> siehst du das Ergebnis der Auswertung in einem Säulendiagramm. Zwar sind die mittleren Boniturnoten signifikant unterschiedlich, aber ist der Effekt auf der vollen Boniturnotenskala kaum zu sehen. Wir haben es hier mit knapp einer Notenstufe Unterschied zu tun und das ist wirklich wenig. Daher wäre hier mal der Fall, dass wir einen signifikanten aber nicht relevanten Unterschied vorliegen haben.</p>
<div class="cell" data-layout-nrow="1" data-layout-align="center">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>emm_obj <span class="sc">|&gt;</span> </span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">|&gt;</span> </span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> fert_amount, <span class="at">y =</span> mean.class, <span class="at">fill =</span> fert_amount)) <span class="sc">+</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> </span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Mittlere Boniturnote"</span>, <span class="at">x =</span> <span class="st">"Düngemenge [mg/l]"</span>,</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">"Düngemenge [mg/l]"</span>) <span class="sc">+</span></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">str_trim</span>(.group), <span class="at">y =</span> mean.class <span class="sc">+</span> SE <span class="sc">+</span> <span class="fl">0.01</span>), <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.25</span>) <span class="sc">+</span></span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> mean.class<span class="sc">-</span>SE, <span class="at">ymax =</span> mean.class<span class="sc">+</span>SE),</span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>                <span class="at">width =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_okabeito</span>() <span class="sc">+</span></span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.5</span>, <span class="fl">1.0</span>, <span class="fl">1.5</span>, <span class="fl">2.0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">2</span>))</span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a>emm_obj <span class="sc">|&gt;</span> </span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">|&gt;</span> </span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> fert_amount, <span class="at">y =</span> mean.class, <span class="at">fill =</span> fert_amount)) <span class="sc">+</span></span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> </span>
<span id="cb45-19"><a href="#cb45-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Mittlere Boniturnote"</span>, <span class="at">x =</span> <span class="st">"Düngemenge [mg/l]"</span>,</span>
<span id="cb45-20"><a href="#cb45-20" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">"Düngemenge [mg/l]"</span>) <span class="sc">+</span></span>
<span id="cb45-21"><a href="#cb45-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb45-22"><a href="#cb45-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">str_trim</span>(.group), <span class="at">y =</span> mean.class <span class="sc">+</span> SE <span class="sc">+</span> <span class="fl">0.01</span>), <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.25</span>) <span class="sc">+</span></span>
<span id="cb45-23"><a href="#cb45-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> mean.class<span class="sc">-</span>SE, <span class="at">ymax =</span> mean.class<span class="sc">+</span>SE),</span>
<span id="cb45-24"><a href="#cb45-24" aria-hidden="true" tabindex="-1"></a>                <span class="at">width =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb45-25"><a href="#cb45-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_okabeito</span>() <span class="sc">+</span></span>
<span id="cb45-26"><a href="#cb45-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb45-27"><a href="#cb45-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">9</span>, <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">9</span>))</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-log-mod-ordinal-broc" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-log-mod-ordinal-broc-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-log-mod-ordinal-broc" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-log-mod-ordinal-broc-1" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-log-mod-ordinal-broc-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="stat-modeling-multinom_files/figure-html/fig-log-mod-ordinal-broc-1.png" class="lightbox" data-gallery="fig-log-mod-ordinal-broc" title="Abbildung&nbsp;55.4&nbsp;(a)— Reduzierte Boniturskala."><img src="stat-modeling-multinom_files/figure-html/fig-log-mod-ordinal-broc-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" data-ref-parent="fig-log-mod-ordinal-broc" width="384"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-log-mod-ordinal-broc-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Reduzierte Boniturskala.
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-log-mod-ordinal-broc" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-log-mod-ordinal-broc-2" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-log-mod-ordinal-broc-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="stat-modeling-multinom_files/figure-html/fig-log-mod-ordinal-broc-2.png" class="lightbox" data-gallery="fig-log-mod-ordinal-broc" title="Abbildung&nbsp;55.4&nbsp;(b)— Volle Boniturskala."><img src="stat-modeling-multinom_files/figure-html/fig-log-mod-ordinal-broc-2.png" class="img-fluid quarto-figure quarto-figure-center figure-img" data-ref-parent="fig-log-mod-ordinal-broc" width="384"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-log-mod-ordinal-broc-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) Volle Boniturskala.
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-log-mod-ordinal-broc-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;55.4— Säulendigramm der mittleren Boniturnote des Brokkoli aus einer ordinalen Regression. Das <code>clm()</code>-Modell berechnet das mittlere Boniturnote für den Faktor <code>fert_amount</code>. Das <em>compact letter display</em> wird dann in <code>{emmeans}</code> generiert. Wir nutzen hier den Standardfehler, da die Standardabweichung mit der großen Fallzahl rießig wäre.
</figcaption>
</figure>
</div>
</div>
</div>
</div>
</section>
<section id="sec-multinom" class="level2 page-columns page-full" data-number="55.6">
<h2 data-number="55.6" class="anchored" data-anchor-id="sec-multinom"><span class="header-section-number">55.6</span> Multinomiale logistische Regression</h2>
<p>Was machen wir in eine multinomialen logistische Regression? Im Gegensatz zu der ordinalen Regression haben wir in der multinominalen Regression keine Ordnung in unserem Outcome. Das macht die Sache dann schon eine Nummer komplizierter. Und wir lösen dieses Problem indem wir ein Level des Outcomes oder eben eine Kategorie des Outcomes als <em>Referenz</em> definieren. Dann haben wir wieder unsere Ordnung drin. Und die Definition der Referenz ist auch manchmal das schwerste Unterfangen. Wenn ich keine Ordnung in meinem Outcome habe, wie soll ich dann die Referenz bestimmen? Aber das ist dann immer eine Frage an den konkreten Datensatz. Hier basteln wir uns ja die Fragestellung so hin, dass es passt.</p>

<div class="no-row-height column-margin column-container"><div class="">
<p>Ich verweise gerne hier auf das tolle Tutorium <a href="https://stats.oarc.ucla.edu/r/dae/multinomial-logistic-regression/">Multinomial Logistic Regression | R Data Analysis Examples</a>. Hier erfährst du noch mehr über die Analyse der multinominale logistischen Regression.</p>
</div></div><p>Um eine Referenz in dem Outcome zu definieren nutzen wir die Funktion <code>relevel()</code> und setzen als unsere Referenz das Level <code>frail</code> aus unserem Outcome <code>frailty</code>. Wir hätten auch jedes andere Level als Referenz nehmen können. Zu dieser Referenz werden wir jetzt unser Modell anpassen. Ich nehme immer als Referenz das <em>schlechteste</em> im Sinne von <em>nicht gut</em>. In unserem Fall ist das eben das Level <code>frail</code>.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>pig_tbl <span class="ot">&lt;-</span> pig_tbl <span class="sc">|&gt;</span> </span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">frailty_fac =</span> <span class="fu">relevel</span>(frailty_fac, <span class="at">ref =</span> <span class="st">"frail"</span>))</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Nachdem wir unsere Referenz definiert haben, können wir wieder recht einfach mit der Funktion <code>multinom()</code> aus dem Paket <code>{nnet}</code> die multinominalen Regression rechnen. Ich mache keinen Hehl daraus. Ich mag die Funktion nicht, da die Ausgabe der Funktion sehr unsortiert ist und uns nicht gerade die Arbeit erleichtert. Auch schweigt die Funktion nicht, sondern muss immer eine Ausgabe wiedergeben. Finde ich sehr unschön.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>multinom_fit <span class="ot">&lt;-</span> <span class="fu">multinom</span>(frailty_fac <span class="sc">~</span> age <span class="sc">+</span> sex <span class="sc">+</span> location <span class="sc">+</span> activity <span class="sc">+</span> crp <span class="sc">+</span> bloodpressure <span class="sc">+</span> weight <span class="sc">+</span> creatinin, </span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>                         <span class="at">data =</span> pig_tbl)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># weights:  36 (22 variable)
initial  value 452.628263 
iter  10 value 403.652821
iter  20 value 392.117661
iter  30 value 391.553171
final  value 391.549041 
converged</code></pre>
</div>
</div>
<p>Die Standardausgabe von <code>multinom()</code> hat wiederum keine <span class="math inline">\(p\)</span>-Werte und wir könnten uns über die Funktion <code>pnorm()</code> wiederum aus den <span class="math inline">\(t\)</span>-Werten unsere <span class="math inline">\(p\)</span>-Werte berechnen. Leider erspart sich <code>multinom()</code> selbst den Schritt die <span class="math inline">\(t\)</span>-Werte zu berechnen, so dass wir die <span class="math inline">\(t\)</span>-Werte selber berechnen müssen. Nicht das es ein Problem wäre, aber schön ist das alles nicht. Im Folgenden siehst du dann einmal die Berechnung der <span class="math inline">\(p\)</span>-Werte über die Berechnung der Teststatistik.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>z_mat <span class="ot">&lt;-</span> <span class="fu">summary</span>(multinom_fit)<span class="sc">$</span>coefficients<span class="sc">/</span><span class="fu">summary</span>(multinom_fit)<span class="sc">$</span>standard.errors</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>p_n <span class="ot">&lt;-</span> (<span class="dv">1</span> <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="fu">abs</span>(z_mat), <span class="dv">0</span>, <span class="dv">1</span>)) <span class="sc">*</span> <span class="dv">2</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>p_n</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>          (Intercept)       age    sexmale locationnortheast locationnorthwest
robust      0.9330415 0.8633078 0.16908717         0.4269151         0.6194343
pre-frail   0.7114684 0.1360834 0.03831569         0.7078459         0.6316654
          locationwest   activity       crp bloodpressure    weight creatinin
robust       0.6632781 0.09080926 0.3594687     0.1421612 0.1134502 0.7118954
pre-frail    0.7383270 0.06115011 0.5643200     0.4895252 0.0683936 0.6178310</code></pre>
</div>
</div>
<p>Jetzt müssten wir diese <span class="math inline">\(pp\)</span>-Werte aus der Matrix noch mit unseren Koeffizienten verbauen und da hört es dann bei mir auf. Insbesondere da wir ja mit <code>model_parameters()</code> eine Funktion haben, die uns in diesem Fall wirklich gut helfen kann. Wir nehmen hier zwar die <span class="math inline">\(t\)</span>-Verteilung an und haben damit leicht höre <span class="math inline">\(p\)</span>-Werte, aber da wir eine so große Anzahl an Beobachtungen haben, fällt dieser Unterschied nicht ins Gewicht.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>multinom_fit <span class="sc">|&gt;</span> <span class="fu">model_parameters</span>(<span class="at">exponentiate =</span> <span class="cn">TRUE</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># Response level: robust

Parameter            | Odds Ratio |   SE |           95% CI |     z |     p
---------------------------------------------------------------------------
(Intercept)          |       1.50 | 7.27 | [0.00, 19843.63] |  0.08 | 0.933
age                  |       0.99 | 0.03 | [0.93,     1.06] | -0.17 | 0.863
sex [male]           |       0.54 | 0.24 | [0.23,     1.29] | -1.38 | 0.169
location [northeast] |       1.45 | 0.67 | [0.58,     3.60] |  0.79 | 0.427
location [northwest] |       0.82 | 0.32 | [0.38,     1.77] | -0.50 | 0.619
location [west]      |       0.82 | 0.37 | [0.34,     1.98] | -0.44 | 0.663
activity             |       1.22 | 0.14 | [0.97,     1.54] |  1.69 | 0.091
crp                  |       0.91 | 0.10 | [0.73,     1.12] | -0.92 | 0.359
bloodpressure        |       1.07 | 0.05 | [0.98,     1.18] |  1.47 | 0.142
weight               |       0.84 | 0.09 | [0.68,     1.04] | -1.58 | 0.113
creatinin            |       1.04 | 0.11 | [0.84,     1.29] |  0.37 | 0.712

# Response level: pre-frail

Parameter            | Odds Ratio |   SE |          95% CI |     z |     p
--------------------------------------------------------------------------
(Intercept)          |       0.15 | 0.77 | [0.00, 3351.94] | -0.37 | 0.711
age                  |       1.06 | 0.04 | [0.98,    1.13] |  1.49 | 0.136
sex [male]           |       0.38 | 0.18 | [0.16,    0.95] | -2.07 | 0.038
location [northeast] |       1.20 | 0.60 | [0.46,    3.17] |  0.37 | 0.708
location [northwest] |       0.82 | 0.34 | [0.37,    1.84] | -0.48 | 0.632
location [west]      |       1.17 | 0.54 | [0.47,    2.90] |  0.33 | 0.738
activity             |       1.26 | 0.16 | [0.99,    1.61] |  1.87 | 0.061
crp                  |       0.94 | 0.11 | [0.75,    1.17] | -0.58 | 0.564
bloodpressure        |       1.04 | 0.05 | [0.94,    1.14] |  0.69 | 0.490
weight               |       0.81 | 0.09 | [0.65,    1.02] | -1.82 | 0.068
creatinin            |       1.06 | 0.12 | [0.85,    1.33] |  0.50 | 0.618</code></pre>
</div>
</div>
<p>Was sehen wir? Zuerst haben wir etwas Glück. Den unsere Referenzlevel macht dann doch Sinn. Wir vergleichen ja das Outcomelevel <code>robust</code> zu <code>frail</code> und das Outcomelevel <code>pre-frail</code> zu <code>frail</code>. Dann haben wir noch das Glück, dass durch unsere Ordnung dann auch <code>frail</code> das schlechtere Outcome ist, so dass wir die <span class="math inline">\(OR\)</span> als Risiko oder als protektiv interpretieren können. Nehmen wir als Beispiel einmal die Variable <code>crp</code>. Der CRP Wert höht das Risiko für <code>frail</code>. Das macht schonmal so Sinn. Und zum anderen ist der Effekt bei dem Vergleich von <code>pre-frail</code> zu <code>frail</code> mit <span class="math inline">\(1.16\)</span> nicht so große wie bei <code>robust</code> zu <code>frail</code> mit <span class="math inline">\(1.26\)</span>. Das macht auch Sinn. Deshalb passt es hier einigermaßen.</p>
<p>In <a href="#tbl-tbl-regression-multinom" class="quarto-xref">Tabelle&nbsp;<span>55.3</span></a> sehen wir nochmal die Ausgabe von einer multinominalen Regression durch die Funktion <code>tbl_regression()</code> aufgearbeitet.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>multinom_fit <span class="sc">|&gt;</span> </span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tbl_regression</span>(<span class="at">exponentiate =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_flex_table</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="tbl-tbl-regression-multinom" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-tbl-regression-multinom-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabelle&nbsp;55.3— Tabelle der Ergebnisse der multinominalen Regression.
</figcaption>
<div aria-describedby="tbl-tbl-regression-multinom-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-631d79bc{}.cl-6319f30a{font-family:'Helvetica';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-6319f314{font-family:'Helvetica';font-size:6.6pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;position: relative;bottom:3.3pt;}.cl-6319f31e{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-631b3dbe{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2pt;padding-top:2pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-631b3dbf{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2pt;padding-top:2pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-631b3dc8{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-631b3dc9{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-631b3dd2{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:15pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-631b3dd3{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-631b4818{width:0.947in;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b4822{width:1.304in;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b482c{width:0.583in;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b482d{width:0.965in;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b482e{width:0.82in;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b4836{width:0.947in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b4837{width:1.304in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b4838{width:0.583in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b4840{width:0.965in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b4841{width:0.82in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b484a{width:0.947in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b484b{width:1.304in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b484c{width:0.583in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b4854{width:0.965in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b4855{width:0.82in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b485e{width:0.947in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b485f{width:1.304in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b4860{width:0.583in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b4868{width:0.965in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b4869{width:0.82in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b486a{width:0.947in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b486b{width:1.304in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b4872{width:0.583in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b4873{width:0.965in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b487c{width:0.82in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b487d{width:0.947in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b487e{width:1.304in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b487f{width:0.583in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b4886{width:0.965in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b4887{width:0.82in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b4888{width:0.947in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b4890{width:1.304in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b4891{width:0.583in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b4892{width:0.965in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b489a{width:0.82in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b489b{width:0.947in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b489c{width:1.304in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b48a4{width:0.583in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b48a5{width:0.965in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b48a6{width:0.82in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b48a7{width:0.947in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b48ae{width:1.304in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b48af{width:0.583in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b48b8{width:0.965in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b48b9{width:0.82in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b48ba{width:0.947in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b48c2{width:1.304in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b48c3{width:0.583in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b48c4{width:0.965in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b48c5{width:0.82in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b48cc{width:0.947in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b48cd{width:1.304in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b48ce{width:0.583in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b48d6{width:0.965in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b48d7{width:0.82in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b48e0{width:0.947in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b48e1{width:1.304in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b48ea{width:0.583in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b48eb{width:0.965in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b48ec{width:0.82in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b48f4{width:0.947in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b48f5{width:1.304in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b48f6{width:0.583in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b48fe{width:0.965in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b48ff{width:0.82in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b4900{width:0.947in;background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b4908{width:1.304in;background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b4909{width:0.583in;background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b490a{width:0.965in;background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b4912{width:0.82in;background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b4913{width:0.947in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b4914{width:1.304in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b4915{width:0.583in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b491c{width:0.965in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-631b491d{width:0.82in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-631d79bc"><thead><tr style="overflow-wrap:break-word;"><th class="cl-631b4818"><p class="cl-631b3dbe"><span class="cl-6319f30a">Outcome</span></p></th><th class="cl-631b4822"><p class="cl-631b3dbe"><span class="cl-6319f30a">Characteristic</span></p></th><th class="cl-631b482c"><p class="cl-631b3dbf"><span class="cl-6319f30a">OR</span><span class="cl-6319f314">1</span></p></th><th class="cl-631b482d"><p class="cl-631b3dbf"><span class="cl-6319f30a">95% CI</span><span class="cl-6319f314">1</span></p></th><th class="cl-631b482e"><p class="cl-631b3dbf"><span class="cl-6319f30a">p-value</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-631b4836"><p class="cl-631b3dc8"><span class="cl-6319f31e">robust</span></p></td><td class="cl-631b4837"><p class="cl-631b3dc8"><span class="cl-6319f31e">age</span></p></td><td class="cl-631b4838"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.99</span></p></td><td class="cl-631b4840"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.93, 1.06</span></p></td><td class="cl-631b4841"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.9</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-631b484a"><p class="cl-631b3dc8"><span class="cl-6319f31e"></span></p></td><td class="cl-631b484b"><p class="cl-631b3dc8"><span class="cl-6319f31e">sex</span></p></td><td class="cl-631b484c"><p class="cl-631b3dc9"><span class="cl-6319f31e"></span></p></td><td class="cl-631b4854"><p class="cl-631b3dc9"><span class="cl-6319f31e"></span></p></td><td class="cl-631b4855"><p class="cl-631b3dc9"><span class="cl-6319f31e"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-631b485e"><p class="cl-631b3dc8"><span class="cl-6319f31e"></span></p></td><td class="cl-631b485f"><p class="cl-631b3dd2"><span class="cl-6319f31e">female</span></p></td><td class="cl-631b4860"><p class="cl-631b3dc9"><span class="cl-6319f31e">—</span></p></td><td class="cl-631b4868"><p class="cl-631b3dc9"><span class="cl-6319f31e">—</span></p></td><td class="cl-631b4869"><p class="cl-631b3dc9"><span class="cl-6319f31e"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-631b486a"><p class="cl-631b3dc8"><span class="cl-6319f31e"></span></p></td><td class="cl-631b486b"><p class="cl-631b3dd2"><span class="cl-6319f31e">male</span></p></td><td class="cl-631b4872"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.54</span></p></td><td class="cl-631b4873"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.23, 1.29</span></p></td><td class="cl-631b487c"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.2</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-631b487d"><p class="cl-631b3dc8"><span class="cl-6319f31e"></span></p></td><td class="cl-631b487e"><p class="cl-631b3dc8"><span class="cl-6319f31e">location</span></p></td><td class="cl-631b487f"><p class="cl-631b3dc9"><span class="cl-6319f31e"></span></p></td><td class="cl-631b4886"><p class="cl-631b3dc9"><span class="cl-6319f31e"></span></p></td><td class="cl-631b4887"><p class="cl-631b3dc9"><span class="cl-6319f31e"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-631b4888"><p class="cl-631b3dc8"><span class="cl-6319f31e"></span></p></td><td class="cl-631b4890"><p class="cl-631b3dd2"><span class="cl-6319f31e">north</span></p></td><td class="cl-631b4891"><p class="cl-631b3dc9"><span class="cl-6319f31e">—</span></p></td><td class="cl-631b4892"><p class="cl-631b3dc9"><span class="cl-6319f31e">—</span></p></td><td class="cl-631b489a"><p class="cl-631b3dc9"><span class="cl-6319f31e"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-631b4836"><p class="cl-631b3dc8"><span class="cl-6319f31e"></span></p></td><td class="cl-631b4837"><p class="cl-631b3dd2"><span class="cl-6319f31e">northeast</span></p></td><td class="cl-631b4838"><p class="cl-631b3dc9"><span class="cl-6319f31e">1.45</span></p></td><td class="cl-631b4840"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.58, 3.60</span></p></td><td class="cl-631b4841"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.4</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-631b489b"><p class="cl-631b3dc8"><span class="cl-6319f31e"></span></p></td><td class="cl-631b489c"><p class="cl-631b3dd2"><span class="cl-6319f31e">northwest</span></p></td><td class="cl-631b48a4"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.82</span></p></td><td class="cl-631b48a5"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.38, 1.77</span></p></td><td class="cl-631b48a6"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.6</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-631b489b"><p class="cl-631b3dc8"><span class="cl-6319f31e"></span></p></td><td class="cl-631b489c"><p class="cl-631b3dd2"><span class="cl-6319f31e">west</span></p></td><td class="cl-631b48a4"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.82</span></p></td><td class="cl-631b48a5"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.34, 1.98</span></p></td><td class="cl-631b48a6"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.7</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-631b48a7"><p class="cl-631b3dc8"><span class="cl-6319f31e"></span></p></td><td class="cl-631b48ae"><p class="cl-631b3dc8"><span class="cl-6319f31e">activity</span></p></td><td class="cl-631b48af"><p class="cl-631b3dc9"><span class="cl-6319f31e">1.22</span></p></td><td class="cl-631b48b8"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.97, 1.54</span></p></td><td class="cl-631b48b9"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.091</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-631b486a"><p class="cl-631b3dc8"><span class="cl-6319f31e"></span></p></td><td class="cl-631b486b"><p class="cl-631b3dc8"><span class="cl-6319f31e">crp</span></p></td><td class="cl-631b4872"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.91</span></p></td><td class="cl-631b4873"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.73, 1.12</span></p></td><td class="cl-631b487c"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.4</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-631b48ba"><p class="cl-631b3dc8"><span class="cl-6319f31e"></span></p></td><td class="cl-631b48c2"><p class="cl-631b3dc8"><span class="cl-6319f31e">bloodpressure</span></p></td><td class="cl-631b48c3"><p class="cl-631b3dc9"><span class="cl-6319f31e">1.07</span></p></td><td class="cl-631b48c4"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.98, 1.18</span></p></td><td class="cl-631b48c5"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.14</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-631b48cc"><p class="cl-631b3dc8"><span class="cl-6319f31e"></span></p></td><td class="cl-631b48cd"><p class="cl-631b3dc8"><span class="cl-6319f31e">weight</span></p></td><td class="cl-631b48ce"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.84</span></p></td><td class="cl-631b48d6"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.68, 1.04</span></p></td><td class="cl-631b48d7"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.11</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-631b486a"><p class="cl-631b3dc8"><span class="cl-6319f31e"></span></p></td><td class="cl-631b486b"><p class="cl-631b3dc8"><span class="cl-6319f31e">creatinin</span></p></td><td class="cl-631b4872"><p class="cl-631b3dc9"><span class="cl-6319f31e">1.04</span></p></td><td class="cl-631b4873"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.84, 1.29</span></p></td><td class="cl-631b487c"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.7</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-631b48e0"><p class="cl-631b3dc8"><span class="cl-6319f31e">pre-frail</span></p></td><td class="cl-631b48e1"><p class="cl-631b3dc8"><span class="cl-6319f31e">age</span></p></td><td class="cl-631b48ea"><p class="cl-631b3dc9"><span class="cl-6319f31e">1.06</span></p></td><td class="cl-631b48eb"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.98, 1.13</span></p></td><td class="cl-631b48ec"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.14</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-631b484a"><p class="cl-631b3dc8"><span class="cl-6319f31e"></span></p></td><td class="cl-631b484b"><p class="cl-631b3dc8"><span class="cl-6319f31e">sex</span></p></td><td class="cl-631b484c"><p class="cl-631b3dc9"><span class="cl-6319f31e"></span></p></td><td class="cl-631b4854"><p class="cl-631b3dc9"><span class="cl-6319f31e"></span></p></td><td class="cl-631b4855"><p class="cl-631b3dc9"><span class="cl-6319f31e"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-631b485e"><p class="cl-631b3dc8"><span class="cl-6319f31e"></span></p></td><td class="cl-631b485f"><p class="cl-631b3dd2"><span class="cl-6319f31e">female</span></p></td><td class="cl-631b4860"><p class="cl-631b3dc9"><span class="cl-6319f31e">—</span></p></td><td class="cl-631b4868"><p class="cl-631b3dc9"><span class="cl-6319f31e">—</span></p></td><td class="cl-631b4869"><p class="cl-631b3dc9"><span class="cl-6319f31e"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-631b4836"><p class="cl-631b3dc8"><span class="cl-6319f31e"></span></p></td><td class="cl-631b4837"><p class="cl-631b3dd2"><span class="cl-6319f31e">male</span></p></td><td class="cl-631b4838"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.38</span></p></td><td class="cl-631b4840"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.16, 0.95</span></p></td><td class="cl-631b4841"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.038</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-631b487d"><p class="cl-631b3dc8"><span class="cl-6319f31e"></span></p></td><td class="cl-631b487e"><p class="cl-631b3dc8"><span class="cl-6319f31e">location</span></p></td><td class="cl-631b487f"><p class="cl-631b3dc9"><span class="cl-6319f31e"></span></p></td><td class="cl-631b4886"><p class="cl-631b3dc9"><span class="cl-6319f31e"></span></p></td><td class="cl-631b4887"><p class="cl-631b3dc9"><span class="cl-6319f31e"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-631b4888"><p class="cl-631b3dc8"><span class="cl-6319f31e"></span></p></td><td class="cl-631b4890"><p class="cl-631b3dd2"><span class="cl-6319f31e">north</span></p></td><td class="cl-631b4891"><p class="cl-631b3dc9"><span class="cl-6319f31e">—</span></p></td><td class="cl-631b4892"><p class="cl-631b3dc9"><span class="cl-6319f31e">—</span></p></td><td class="cl-631b489a"><p class="cl-631b3dc9"><span class="cl-6319f31e"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-631b4836"><p class="cl-631b3dc8"><span class="cl-6319f31e"></span></p></td><td class="cl-631b4837"><p class="cl-631b3dd2"><span class="cl-6319f31e">northeast</span></p></td><td class="cl-631b4838"><p class="cl-631b3dc9"><span class="cl-6319f31e">1.20</span></p></td><td class="cl-631b4840"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.46, 3.17</span></p></td><td class="cl-631b4841"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.7</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-631b489b"><p class="cl-631b3dc8"><span class="cl-6319f31e"></span></p></td><td class="cl-631b489c"><p class="cl-631b3dd2"><span class="cl-6319f31e">northwest</span></p></td><td class="cl-631b48a4"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.82</span></p></td><td class="cl-631b48a5"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.37, 1.84</span></p></td><td class="cl-631b48a6"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.6</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-631b486a"><p class="cl-631b3dc8"><span class="cl-6319f31e"></span></p></td><td class="cl-631b486b"><p class="cl-631b3dd2"><span class="cl-6319f31e">west</span></p></td><td class="cl-631b4872"><p class="cl-631b3dc9"><span class="cl-6319f31e">1.17</span></p></td><td class="cl-631b4873"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.47, 2.90</span></p></td><td class="cl-631b487c"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.7</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-631b48a7"><p class="cl-631b3dc8"><span class="cl-6319f31e"></span></p></td><td class="cl-631b48ae"><p class="cl-631b3dc8"><span class="cl-6319f31e">activity</span></p></td><td class="cl-631b48af"><p class="cl-631b3dc9"><span class="cl-6319f31e">1.26</span></p></td><td class="cl-631b48b8"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.99, 1.61</span></p></td><td class="cl-631b48b9"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.061</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-631b48f4"><p class="cl-631b3dc8"><span class="cl-6319f31e"></span></p></td><td class="cl-631b48f5"><p class="cl-631b3dc8"><span class="cl-6319f31e">crp</span></p></td><td class="cl-631b48f6"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.94</span></p></td><td class="cl-631b48fe"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.75, 1.17</span></p></td><td class="cl-631b48ff"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.6</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-631b48ba"><p class="cl-631b3dc8"><span class="cl-6319f31e"></span></p></td><td class="cl-631b48c2"><p class="cl-631b3dc8"><span class="cl-6319f31e">bloodpressure</span></p></td><td class="cl-631b48c3"><p class="cl-631b3dc9"><span class="cl-6319f31e">1.04</span></p></td><td class="cl-631b48c4"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.94, 1.14</span></p></td><td class="cl-631b48c5"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.5</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-631b48cc"><p class="cl-631b3dc8"><span class="cl-6319f31e"></span></p></td><td class="cl-631b48cd"><p class="cl-631b3dc8"><span class="cl-6319f31e">weight</span></p></td><td class="cl-631b48ce"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.81</span></p></td><td class="cl-631b48d6"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.65, 1.02</span></p></td><td class="cl-631b48d7"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.068</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-631b4900"><p class="cl-631b3dc8"><span class="cl-6319f31e"></span></p></td><td class="cl-631b4908"><p class="cl-631b3dc8"><span class="cl-6319f31e">creatinin</span></p></td><td class="cl-631b4909"><p class="cl-631b3dc9"><span class="cl-6319f31e">1.06</span></p></td><td class="cl-631b490a"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.85, 1.33</span></p></td><td class="cl-631b4912"><p class="cl-631b3dc9"><span class="cl-6319f31e">0.6</span></p></td></tr></tbody><tfoot><tr style="overflow-wrap:break-word;"><td colspan="5" class="cl-631b4913"><p class="cl-631b3dd3"><span class="cl-6319f314">1</span><span class="cl-6319f31e">OR = Odds Ratio, CI = Confidence Interval</span></p></td></tr></tfoot></table></div>
</div>
</div>
</figure>
</div>
</div>
<p>Leider wird die Sache mit einer multinominalen Regression sehr unangenehm, wenn wir wirklich nicht sortierbare Level im Outcome haben. Dann haben wir aber noch ein Möglichkeit der multinominalen Regression zu entkommen. Wir rechnen einfach separate logistische Regressionen. Die logistischen Regressionen können wir dann ja separat gut interpretieren.</p>
</section>
<section id="logistische-regression-als-ausweg" class="level2" data-number="55.7">
<h2 data-number="55.7" class="anchored" data-anchor-id="logistische-regression-als-ausweg"><span class="header-section-number">55.7</span> Logistische Regression als Ausweg</h2>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Bitte Beachten bei der Berechung über separate logistische Regressionen
</div>
</div>
<div class="callout-body-container callout-body">
<p>Durch die Verwendung von separaten logistischen Regressionen vermindern wir die Fallzahl je gerechneter Regression, so dass wir <em>größere</em> <span class="math inline">\(p\)</span>-Werte erhalten werden als in einer multinominalen Regression. Oder andersherum, durch die verminderte Fallzahl in den separaten logistischen Regressionen haben wir eine geringere Power einen signifikanten Unterschied nachzuweisen.</p>
</div>
</div>
<p>Es gibt den einen Ring um sich zu knechten. Und das ist die logistische Regression. Gut die logistische Regression hilft jetzt nicht, wenn es mit Boniturnoten zu tun hast, aber wenn wir wenige Level im Outcome haben. In unserem Fall haben wir ja drei Level vorliegen, da können wir dann jeweils ein Level rausschmeißen und haben dann nur noch ein binäres Outcome. Das ist auch die zentrale Idee. Wir entfernen immer alle Level bis wir nur noch zwei Level in unserem Outcome haben und rechnen für diese beiden Level dann eine logistische Regression.</p>
<p>Schauen wir uns erstmal an, wie sich die Daten über die drei Kategorien in unserem Outcome verteilen. Wenn wir eine Kategorie im Outcome kaum vorliegen haben, könnten wir diese Daten vielleicht mit einer anderen Kategorie zusammenlegen oder aber müssen von unserer Idee hier Abstand nehmen.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>pig_tbl<span class="sc">$</span>frailty_fac <span class="sc">|&gt;</span> <span class="fu">tabyl</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> pig_tbl$frailty_fac   n   percent
               frail  55 0.1334951
              robust 214 0.5194175
           pre-frail 143 0.3470874</code></pre>
</div>
</div>
<p>Wir haben nicht so viele Beobachtungen in der Kategorie <code>frail</code>. Wir könnten also auch die beiden Faktorlevel <code>pre-frail</code> und <code>frail</code> zusammenlegen. Das R Paket <code>{forcats}</code> liefert sehr viele Funktion, die dir helfen Faktoren zu kodieren und zu ändern.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>pig_tbl<span class="sc">$</span>frailty_fac <span class="sc">|&gt;</span> </span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fct_recode</span>(<span class="at">frail_pre_frail =</span> <span class="st">"frail"</span>, <span class="at">frail_pre_frail =</span> <span class="st">"pre-frail"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> fct_recode(pig_tbl$frailty_fac, frail_pre_frail = "frail", frail_pre_frail = "pre-frail")
                                                                           frail_pre_frail
                                                                                    robust
   n   percent
 198 0.4805825
 214 0.5194175</code></pre>
</div>
</div>
<p>Das ist jetzt aber nur eine Demonstration für die Zusammenlegung. Wir wollen jetzt trotzdem unsere drei logistischen Regressionen rechnen. Warum drei? Wir haben ja drei Level in unserem Outcome und wir werden jetzt uns drei Datensätze so bauen, dass in jdem Datensatz unser Outcome immer nur zwei Level hat. Die einzelnen Datensätze speichern wir dann in einer Liste.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>pig_lst <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">robust_prefrail =</span> <span class="fu">filter</span>(pig_tbl, frailty_fac <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"robust"</span>, <span class="st">"pre-frail"</span>)),</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">robust_frail =</span> <span class="fu">filter</span>(pig_tbl, frailty_fac <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"robust"</span>, <span class="st">"frail"</span>)),</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">prefrail_frail =</span> <span class="fu">filter</span>(pig_tbl, frailty_fac <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"pre-frail"</span>, <span class="st">"frail"</span>)))</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Wir können das auch fancy. Und das demonstriere ich dann mal hier. Wenn wir die Funktion <code>combn()</code> nutzen erhalten wir eine Liste mit allen zweier Kombinationen wieder. Diese Liste können wir dann in die Funktion <code>map()</code> stecken, die dann über die Liste unserer Kombinationen iteriert. Pro Liste filtern <code>map()</code> dann den Datensatz für uns heraus. Ja, ist ein wenig <em>over the top</em>, aber ich wollte das mal für mich mit <code>map()</code> ausprobieren und es passte hier so schön.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>pig_fancy_lst <span class="ot">&lt;-</span> <span class="fu">combn</span>(<span class="fu">c</span>(<span class="st">"robust"</span>, <span class="st">"pre-frail"</span>, <span class="st">"frail"</span>), <span class="dv">2</span>, <span class="at">simplify =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="sc">~</span><span class="fu">filter</span>(pig_tbl, frailty_fac <span class="sc">%in%</span> .x)) </span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Egal wie du auf die Liste gekommen bist, wir müssen noch die überflüssigen Level <em>droppen</em>. Keine Ahnung was das deutsche Wort ist. Vermutlich ist das deutsche Wort dann entfernen. Dann können wir für jeden der Listeneinträge die logistische Regression rechnen. Am Ende lassen wir uns noch die exponierten Modellfits ausgeben. In der letzten Zeile entferne ich noch den Intercept von der Ausgabe des Modells. Den Intercept brauchen wir nun wirklich nicht.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>pig_lst <span class="sc">|&gt;</span> </span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="sc">~</span><span class="fu">mutate</span>(.x, <span class="at">frailty_fac =</span> <span class="fu">fct_drop</span>(frailty_fac))) <span class="sc">|&gt;</span> </span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="sc">~</span><span class="fu">glm</span>(frailty_fac <span class="sc">~</span> age <span class="sc">+</span> sex <span class="sc">+</span> location <span class="sc">+</span> activity <span class="sc">+</span> crp <span class="sc">+</span> bloodpressure <span class="sc">+</span> weight <span class="sc">+</span> creatinin, </span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">data =</span> .x, <span class="at">family =</span> binomial)) <span class="sc">|&gt;</span> </span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(model_parameters, <span class="at">exponentiate =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(extract, <span class="sc">-</span><span class="dv">1</span>, )</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>$robust_prefrail
Parameter            | Odds Ratio |   SE |       95% CI |     z |     p
-----------------------------------------------------------------------
age                  |       1.06 | 0.03 | [1.01, 1.12] |  2.40 | 0.017
sex [male]           |       0.70 | 0.21 | [0.39, 1.27] | -1.16 | 0.246
location [northeast] |       0.80 | 0.26 | [0.42, 1.49] | -0.70 | 0.484
location [northwest] |       0.97 | 0.28 | [0.55, 1.72] | -0.09 | 0.929
location [west]      |       1.38 | 0.44 | [0.75, 2.57] |  1.03 | 0.302
activity             |       1.04 | 0.09 | [0.88, 1.23] |  0.48 | 0.631
crp                  |       1.03 | 0.08 | [0.88, 1.20] |  0.33 | 0.743
bloodpressure        |       0.96 | 0.03 | [0.90, 1.03] | -1.04 | 0.300
weight               |       0.97 | 0.08 | [0.83, 1.13] | -0.39 | 0.695
creatinin            |       1.02 | 0.08 | [0.87, 1.19] |  0.21 | 0.834

$robust_frail
Parameter            | Odds Ratio |   SE |       95% CI |     z |     p
-----------------------------------------------------------------------
age                  |       1.00 | 0.04 | [0.93, 1.07] |  0.03 | 0.973
sex [male]           |       0.52 | 0.23 | [0.22, 1.24] | -1.46 | 0.145
location [northeast] |       1.45 | 0.68 | [0.59, 3.79] |  0.79 | 0.430
location [northwest] |       0.85 | 0.33 | [0.39, 1.82] | -0.42 | 0.674
location [west]      |       0.88 | 0.40 | [0.37, 2.18] | -0.28 | 0.780
activity             |       1.23 | 0.15 | [0.97, 1.58] |  1.69 | 0.090
crp                  |       0.92 | 0.10 | [0.75, 1.14] | -0.75 | 0.453
bloodpressure        |       1.07 | 0.05 | [0.97, 1.18] |  1.36 | 0.172
weight               |       0.84 | 0.10 | [0.67, 1.04] | -1.57 | 0.116
creatinin            |       1.04 | 0.11 | [0.84, 1.29] |  0.36 | 0.717

$prefrail_frail
Parameter            | Odds Ratio |   SE |       95% CI |     z |     p
-----------------------------------------------------------------------
age                  |       1.05 | 0.04 | [0.98, 1.12] |  1.26 | 0.208
sex [male]           |       0.40 | 0.19 | [0.15, 0.99] | -1.94 | 0.053
location [northeast] |       1.12 | 0.57 | [0.42, 3.11] |  0.22 | 0.825
location [northwest] |       0.77 | 0.33 | [0.33, 1.78] | -0.60 | 0.548
location [west]      |       1.05 | 0.51 | [0.41, 2.74] |  0.11 | 0.914
activity             |       1.22 | 0.15 | [0.97, 1.55] |  1.69 | 0.092
crp                  |       0.95 | 0.11 | [0.74, 1.20] | -0.46 | 0.649
bloodpressure        |       1.03 | 0.05 | [0.93, 1.14] |  0.57 | 0.566
weight               |       0.84 | 0.09 | [0.67, 1.03] | -1.65 | 0.100
creatinin            |       1.04 | 0.13 | [0.82, 1.33] |  0.34 | 0.734</code></pre>
</div>
</div>
<p>Eine Sache ist super wichtig zu wissen. Wie oben schon geschrieben, durch die Verwendung von separaten logistischen Regressionen vermindern wir die Fallzahl je Regression, so dass wir größere <span class="math inline">\(p\)</span>-Werte erhalten werden, als in einer multinominalen Regression. Das ist der Preis, den wir dafür bezahlen müssen, dass wir besser zu interpretierende Koeffizienten erhalten. Und das ist auch vollkommen in Ordnung. Ich selber habe lieber Koeffizienten, die ich interpretieren kann, als unklare Effekte mit niedrigen <span class="math inline">\(p\)</span>-Werten.</p>
<p>Schauen wir einmal auf unseren Goldstandard, der Variable für den CRP-Wert. Die Variable haben wir ja jetzt immer mal wieder in diesem Kapitel interpretiert und uns angeschaut. Die Variable <code>crp</code> passt von dem Effekt jedenfalls gut in den Kontext mit rein. Die Effekte sind ähnlich wie in der multinominalen Regression. Wir haben eben nur größere <span class="math inline">\(p\)</span>-Werte. Jetzt müssen wir entscheiden, wir können vermutlich die getrennten logistischen Regressionen besser beschreiben und interpretieren. Das ist <em>besonders</em> der Fall, wenn wir wirklich Probleme haben eine Referenz in der multinominalen Regression festzulegen. Dann würde ich immer zu den getrennten logistischen Regressionen greifen als eine schief interpretierte multinominale Regression.</p>
</section>
<section id="referenzen" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="referenzen">Referenzen</h2>


<!-- -->

<div id="refs" class="references csl-bib-body hanging-indent" role="list">
<div id="ref-dormann2013parametrische" class="csl-entry" role="listitem">
Dormann CF. 2013. Parametrische Statistik. Springer.
</div>
</div>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Kopiert");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Kopiert");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      const annoteTargets = window.document.querySelectorAll('.code-annotation-anchor');
      for (let i=0; i<annoteTargets.length; i++) {
        const annoteTarget = annoteTargets[i];
        const targetCell = annoteTarget.getAttribute("data-target-cell");
        const targetAnnotation = annoteTarget.getAttribute("data-target-annotation");
        const contentFn = () => {
          const content = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          if (content) {
            const tipContent = content.cloneNode(true);
            tipContent.classList.add("code-annotation-tip-content");
            return tipContent.outerHTML;
          }
        }
        const config = {
          allowHTML: true,
          content: contentFn,
          onShow: (instance) => {
            selectCodeLines(instance.reference);
            instance.reference.classList.add('code-annotation-active');
            window.tippy.hideAll();
          },
          onHide: (instance) => {
            unselectCodeLines();
            instance.reference.classList.remove('code-annotation-active');
          },
          maxWidth: 300,
          delay: [50, 0],
          duration: [200, 0],
          offset: [5, 10],
          arrow: true,
          appendTo: function(el) {
            return el.parentElement.parentElement.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto',
          placement: 'right',
          popperOptions: {
            modifiers: [
            {
              name: 'flip',
              options: {
                flipVariations: false, // true by default
                allowedAutoPlacements: ['right'],
                fallbackPlacements: ['right', 'top', 'top-start', 'top-end', 'bottom', 'bottom-start', 'bottom-end', 'left'],
              },
            },
            {
              name: 'preventOverflow',
              options: {
                mainAxis: false,
                altAxis: false
              }
            }
            ]        
          }      
        };
        window.tippy(annoteTarget, config); 
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./stat-modeling-beta.html" class="pagination-link" aria-label="Beta Regression">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">54</span>&nbsp; <span class="chapter-title">Beta Regression</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./stat-modeling-logistic.html" class="pagination-link" aria-label="Logistische Regression">
        <span class="nav-page-text"><span class="chapter-number">56</span>&nbsp; <span class="chapter-title">Logistische Regression</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Quellcode</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb62" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo = FALSE}</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="in">pacman::p_load(tidyverse, readxl, knitr, kableExtra, Hmisc)</span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a><span class="fu"># Multinomiale / Ordinale Regression {#sec-multinom-ordinal}</span></span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>*Letzte Änderung am `r format(fs::file_info("stat-modeling-multinom.qmd")$modification_time, '%d. %B %Y um %H:%M:%S')`*</span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; *"The amateur does not know what to do. The master knows what not to do." --- James Clear*</span></span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-11"><a href="#cb62-11" aria-hidden="true" tabindex="-1"></a>Was machen wir wenn wir ein Outcome haben mit mehr als zwei Kategorien. Wenn wir nur zwei Kategorien hätten, dann würden wir eine logistische Regression rechnen. Wenn wir mehr als zwei Kategorien haben, dann sind wir in dem Fall der multinomialen / ordinalen logistischen Regression. Wir rechnen eine multinomialen Regression, wenn wir keine Ordnung in den Kategorien in dem Outcome haben. Wenn wir eine Ordnung vorliegen haben, dann nutzen wir die ordinale Regression. Wir werden uns erstmal eine ordinale Regression anschauen mit nur drei geordneten Stufen. Dann schauen wir uns einmal wie wir eine ordinale Regression auf Boniturnoten in der Likert-Skala rechnen. Wir machen das getrennt, denn wir sind bei wenigen geordneten Kategorien meistens noch am Effekt zwischen den Kategorien interessiert. Im Gegensatz wollen wir bei einem Outcome mit Boniturnoten einen Gruppenvergleich rechnen. Dann interessiert uns der Unterschied und die Effekte zwischen den Boniturnoten nicht. Deshalb trennen wir das hier etwas auf.</span>
<span id="cb62-12"><a href="#cb62-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-13"><a href="#cb62-13" aria-hidden="true" tabindex="-1"></a>Im zweiten Teil wollen wir uns dann noch eine multinominale Regression auf ungeordneten Kategorien eines Outcomes anschauen. Korrekterweise tun wir nur so, als wäre unser vorher geordnetes Outcome dann eben ungeordnet. Das macht dann aber bei deiner Anwendung dann keinen großen Unterschied. Als eine Alternative zur multinationalen Regression stelle ich dann noch die logistische Regression vor. Wir können nämlich einfach unsere Daten nach dem Outcome jeweils in kleinere Datensätze mit nur jeweils zwei der Kategorien aufspalten. Das ist zwar nicht schön, aber auch eine Möglichkeit mit einem Problem umzugehen.</span>
<span id="cb62-14"><a href="#cb62-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-15"><a href="#cb62-15" aria-hidden="true" tabindex="-1"></a>Ich gehe hier nicht auf die Theorie hinter der multinomialen / ordinalen logistischen Regression ein. Wenn dich dazu mehr interessiert findest du in den jeweiligen Abschnitten dann noch eine passende Referenz. Da kannst du dann schauen, welche Informationen du noch zusätzlich findest.</span>
<span id="cb62-16"><a href="#cb62-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-17"><a href="#cb62-17" aria-hidden="true" tabindex="-1"></a><span class="fu">## Annahmen an die Daten</span></span>
<span id="cb62-18"><a href="#cb62-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-19"><a href="#cb62-19" aria-hidden="true" tabindex="-1"></a>Im folgenden Kapitel zu der multinomialen / ordinalen logistischen linearen Regression gehen wir davon aus, dass die Daten in der vorliegenden Form *ideal* sind. Das heißt wir haben weder fehlende Werte vorliegen, noch haben wir mögliche Ausreißer in den Daten. Auch wollen wir keine Variablen selektieren. Wir nehmen alles was wir haben mit ins Modell. Sollte eine oder mehre Bedingungen nicht zutreffen, dann schaue dir einfach die folgenden Kapitel an.</span>
<span id="cb62-20"><a href="#cb62-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-21"><a href="#cb62-21" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Wenn du fehlende Werte in deinen Daten vorliegen hast, dann schaue bitte nochmal in das @sec-missing zu Imputation von fehlenden Werten.</span>
<span id="cb62-22"><a href="#cb62-22" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Wenn du denkst, dass du Ausreißer oder auffälige Werte in deinen Daten hast, dann schaue doch bitte nochmal in das @sec-outlier zu Ausreißer in den Daten.</span>
<span id="cb62-23"><a href="#cb62-23" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Wenn du denkst, dass du zu viele Variablen in deinem Modell hast, dann hilft dir das @sec-variable-selection bei der Variablenselektion.</span>
<span id="cb62-24"><a href="#cb62-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-25"><a href="#cb62-25" aria-hidden="true" tabindex="-1"></a>Daher sieht unser Modell wie folgt aus. Wir haben ein $y$ und $p$-mal $x$. Wobei $p$ für die Anzahl an Variablen auf der rechten Seite des Modells steht. Im Weiteren folgt unser $y$ einer Multinomialverteilung. Damit finden wir im Outcome im Falle der multinomialen logistischen linearen Regression *ungeordnete* Kategorien und im Falle der ordinalen logistischen linearen Regression *geordnete* Kategorien.</span>
<span id="cb62-26"><a href="#cb62-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-27"><a href="#cb62-27" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb62-28"><a href="#cb62-28" aria-hidden="true" tabindex="-1"></a>y \sim x_1 + x_2 + ... + x_p </span>
<span id="cb62-29"><a href="#cb62-29" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb62-30"><a href="#cb62-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-31"><a href="#cb62-31" aria-hidden="true" tabindex="-1"></a>Wir können in dem Modell auch Faktoren $f$ haben, aber es geht hier nicht um einen Gruppenvergleich. Das ist ganz wichtig. Wenn du einen Gruppenvergleich rechnen willst, dann musst du in @sec-posthoc nochmal nachlesen.</span>
<span id="cb62-32"><a href="#cb62-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-33"><a href="#cb62-33" aria-hidden="true" tabindex="-1"></a><span class="fu">## Genutzte R Pakete</span></span>
<span id="cb62-34"><a href="#cb62-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-35"><a href="#cb62-35" aria-hidden="true" tabindex="-1"></a>Wir wollen folgende R Pakete in diesem Kapitel nutzen.</span>
<span id="cb62-36"><a href="#cb62-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-37"><a href="#cb62-37" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo = TRUE}</span></span>
<span id="cb62-38"><a href="#cb62-38" aria-hidden="true" tabindex="-1"></a><span class="in">#| message: false</span></span>
<span id="cb62-39"><a href="#cb62-39" aria-hidden="true" tabindex="-1"></a><span class="in">pacman::p_load(tidyverse, magrittr, broom,</span></span>
<span id="cb62-40"><a href="#cb62-40" aria-hidden="true" tabindex="-1"></a><span class="in">               parameters, performance, gtsummary,</span></span>
<span id="cb62-41"><a href="#cb62-41" aria-hidden="true" tabindex="-1"></a><span class="in">               ordinal, janitor, MASS, nnet, flextable,</span></span>
<span id="cb62-42"><a href="#cb62-42" aria-hidden="true" tabindex="-1"></a><span class="in">               emmeans, multcomp, ordinal, see, scales,</span></span>
<span id="cb62-43"><a href="#cb62-43" aria-hidden="true" tabindex="-1"></a><span class="in">               janitor, conflicted)</span></span>
<span id="cb62-44"><a href="#cb62-44" aria-hidden="true" tabindex="-1"></a><span class="in">conflicts_prefer(dplyr::select)</span></span>
<span id="cb62-45"><a href="#cb62-45" aria-hidden="true" tabindex="-1"></a><span class="in">conflicts_prefer(dplyr::filter)</span></span>
<span id="cb62-46"><a href="#cb62-46" aria-hidden="true" tabindex="-1"></a><span class="in">conflicts_prefer(magrittr::extract)</span></span>
<span id="cb62-47"><a href="#cb62-47" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-48"><a href="#cb62-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-49"><a href="#cb62-49" aria-hidden="true" tabindex="-1"></a>An der Seite des Kapitels findest du den Link *Quellcode anzeigen*, über den du Zugang zum gesamten R-Code dieses Kapitels erhältst.</span>
<span id="cb62-50"><a href="#cb62-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-51"><a href="#cb62-51" aria-hidden="true" tabindex="-1"></a><span class="fu">## Daten</span></span>
<span id="cb62-52"><a href="#cb62-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-53"><a href="#cb62-53" aria-hidden="true" tabindex="-1"></a>Im Folgenden wollen wir uns die Daten von den infizierten Ferkeln noch einmal anschauen. Wir nehmen als Outcome die Spalte <span class="in">`frailty`</span> und damit die Gebrechlichkeit der Ferkel. Die Spalte ordnen wir einmal nach *robust*, *pre-frail* und *frail*. Wobei *robust* ein gesundes Ferkel beschreibt und *frail* ein gebrechliches Ferkel. Damit wir später die Richtung des Effekts richtig interpretieren können, müssen wir von *gut* nach *schlecht* sortieren. Das brauchen wir nicht, wenn wir Boniturnoten haben, dazu mehr in einem eigenen Abschnitt. Wir bauen uns dann noch einen Faktor mit ebenfalls der Spalte <span class="in">`frailty`</span> in der wir so tun, als gebe es diese Ordnung nicht. Wir werden dann die ordinale Regression mit dem Outcome <span class="in">`frailty_ord`</span> rechnen und die multinominale Regression dann mit dem Outcome <span class="in">`frailty_fac`</span> durchführen.</span>
<span id="cb62-54"><a href="#cb62-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-57"><a href="#cb62-57" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-58"><a href="#cb62-58" aria-hidden="true" tabindex="-1"></a>pig_tbl <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"data/infected_pigs.xlsx"</span>) <span class="sc">|&gt;</span></span>
<span id="cb62-59"><a href="#cb62-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">frailty_ord =</span> <span class="fu">ordered</span>(frailty, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"robust"</span>, <span class="st">"pre-frail"</span>, <span class="st">"frail"</span>)),</span>
<span id="cb62-60"><a href="#cb62-60" aria-hidden="true" tabindex="-1"></a>         <span class="at">frailty_fac =</span> <span class="fu">as_factor</span>(frailty)) <span class="sc">|&gt;</span> </span>
<span id="cb62-61"><a href="#cb62-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>infected)</span>
<span id="cb62-62"><a href="#cb62-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-63"><a href="#cb62-63" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-64"><a href="#cb62-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-65"><a href="#cb62-65" aria-hidden="true" tabindex="-1"></a>Schauen wir uns nochmal einen Ausschnitt der Daten in der @tbl-multinom-pigs an.</span>
<span id="cb62-66"><a href="#cb62-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-69"><a href="#cb62-69" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-70"><a href="#cb62-70" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb62-71"><a href="#cb62-71" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb62-72"><a href="#cb62-72" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb62-73"><a href="#cb62-73" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-multinom-pigs</span></span>
<span id="cb62-74"><a href="#cb62-74" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: Auszug aus dem Daten zu den kranken Ferkeln.</span></span>
<span id="cb62-75"><a href="#cb62-75" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page</span></span>
<span id="cb62-76"><a href="#cb62-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-77"><a href="#cb62-77" aria-hidden="true" tabindex="-1"></a>raw_pig_tbl <span class="ot">&lt;-</span> pig_tbl <span class="sc">|&gt;</span> </span>
<span id="cb62-78"><a href="#cb62-78" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">frailty_ord =</span> <span class="fu">as.character</span>(frailty_ord),</span>
<span id="cb62-79"><a href="#cb62-79" aria-hidden="true" tabindex="-1"></a>         <span class="at">frailty_fac =</span> <span class="fu">as.character</span>(frailty_fac))</span>
<span id="cb62-80"><a href="#cb62-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-81"><a href="#cb62-81" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(<span class="fu">head</span>(raw_pig_tbl),</span>
<span id="cb62-82"><a href="#cb62-82" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rep</span>(<span class="st">"..."</span>, <span class="at">times =</span> <span class="fu">ncol</span>(raw_pig_tbl)),</span>
<span id="cb62-83"><a href="#cb62-83" aria-hidden="true" tabindex="-1"></a>      <span class="fu">tail</span>(raw_pig_tbl)) <span class="sc">|&gt;</span> </span>
<span id="cb62-84"><a href="#cb62-84" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">align =</span> <span class="st">"c"</span>, <span class="st">"pipe"</span>)</span>
<span id="cb62-85"><a href="#cb62-85" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-86"><a href="#cb62-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-87"><a href="#cb62-87" aria-hidden="true" tabindex="-1"></a>Das wären dann die Daten, die wir für unsere Modelle dann brauchen. Schauen wir mal was wir jetzt bei der ordinalen Regression herausbekommen.</span>
<span id="cb62-88"><a href="#cb62-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-89"><a href="#cb62-89" aria-hidden="true" tabindex="-1"></a><span class="fu">## Ordinale logistische Regression {#sec-ordinal}</span></span>
<span id="cb62-90"><a href="#cb62-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-91"><a href="#cb62-91" aria-hidden="true" tabindex="-1"></a>Es gibt sicherlich einiges an Paketen in R um eine ordinale Regression durchzuführen. Ich nutze gerne die Funktion <span class="in">`polr()`</span> aus dem R Paket <span class="in">`{MASS}`</span>. Daneben gibt es auch noch das R Paket <span class="in">`{ordinal}`</span> mit der Funktion <span class="in">`clm()`</span>, die wir dann noch im Anschluss besprechen werden. Ich nutze jetzt erstmal die Funktion <span class="in">`polr()`</span>, da wir hier noch eine externe Referenz haben, die uns noch detailliertere Informationen liefern kann.</span>
<span id="cb62-92"><a href="#cb62-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-93"><a href="#cb62-93" aria-hidden="true" tabindex="-1"></a>::: column-margin</span>
<span id="cb62-94"><a href="#cb62-94" aria-hidden="true" tabindex="-1"></a>Ich verweise gerne hier auf das tolle Tutorium <span class="co">[</span><span class="ot">Ordinal Logistic Regression \| R Data Analysis Examples</span><span class="co">](https://stats.oarc.ucla.edu/r/dae/ordinal-logistic-regression/)</span>. Hier erfährst du noch mehr über die Analyse der ordinalen logistischen Regression.</span>
<span id="cb62-95"><a href="#cb62-95" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb62-96"><a href="#cb62-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-97"><a href="#cb62-97" aria-hidden="true" tabindex="-1"></a>Wir schon erwähnt sparen wir usn die mathematischen Details und utzen gleich die Funktion <span class="in">`polr`</span> auf unserem Outcome <span class="in">`frailty`</span>. Wir müssen keine Verteilungsfamilie extra angeben, dass haben wir schon mit der Auswahl der Funktion getan. Die Funktion <span class="in">`polr`</span> kann nur eine ordinale Regression rechnen und wird einen Fehler ausgeben, wenn das Outcome $y$ nicht passt.</span>
<span id="cb62-98"><a href="#cb62-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-101"><a href="#cb62-101" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-102"><a href="#cb62-102" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb62-103"><a href="#cb62-103" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb62-104"><a href="#cb62-104" aria-hidden="true" tabindex="-1"></a>ologit_fit <span class="ot">&lt;-</span> <span class="fu">polr</span>(frailty_ord <span class="sc">~</span> age <span class="sc">+</span> sex <span class="sc">+</span> location <span class="sc">+</span> activity <span class="sc">+</span> crp <span class="sc">+</span> </span>
<span id="cb62-105"><a href="#cb62-105" aria-hidden="true" tabindex="-1"></a>                     bloodpressure <span class="sc">+</span> weight <span class="sc">+</span> creatinin, </span>
<span id="cb62-106"><a href="#cb62-106" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> pig_tbl)</span>
<span id="cb62-107"><a href="#cb62-107" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-108"><a href="#cb62-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-109"><a href="#cb62-109" aria-hidden="true" tabindex="-1"></a>Schauen wir uns einmal die Ausgabe des Modellfits der ordinalen Regression mit der Funktion <span class="in">`summary()`</span> an. Wir sehen eine Menge Zahlen und das wichtigste für uns ist ja, dass wir zum einen Wissen, dass wir auch die ordinale Regression auf der $link$-Funktion rechnen. Wir erhalten also wieder eine Transformation des Zusammenhangs zurück, wie wir es schon bei der Poisson Regression sowie bei der logistischen Regression hatten.</span>
<span id="cb62-110"><a href="#cb62-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-111"><a href="#cb62-111" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">Hier gibt es nur die Kurzfassung der *link*-Funktion. @dormann2013parametrische liefert hierzu in Kapitel 7.1.3 nochmal ein Einführung in das Thema.</span><span class="co">]</span>{.aside}</span>
<span id="cb62-112"><a href="#cb62-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-115"><a href="#cb62-115" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-116"><a href="#cb62-116" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb62-117"><a href="#cb62-117" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb62-118"><a href="#cb62-118" aria-hidden="true" tabindex="-1"></a>ologit_fit <span class="sc">|&gt;</span> <span class="fu">summary</span>()</span>
<span id="cb62-119"><a href="#cb62-119" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-120"><a href="#cb62-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-121"><a href="#cb62-121" aria-hidden="true" tabindex="-1"></a>Unsere Ausgabe teilt sich in zwei Teile auf. In dem oberen Teil sehen wir die Koeffizienten des Modells zusammen mit dem Fehler und der Teststatistik. Was wir nicht sehen, ist ein $p$-Wert. Die Funktion rechnet uns keinen Signifikanztest aus. Das können wir aber gleich selber machen. In dem Abschnitt <span class="in">`Intercepts`</span> finden wir die Werte für die Gruppeneinteilung auf der *link*-Funktion wieder. Wir transformieren ja unsere drei Outcomekategorien in einen kontinuierliche Zahlenzusammenhang. Trotzdem müssen ja die drei Gruppen auch wieder auftauchen. In dem Abschnitt `Intercepts` finden wir die Grenzen für die drei Gruppen auf der *link*-Funktion.</span>
<span id="cb62-122"><a href="#cb62-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-123"><a href="#cb62-123" aria-hidden="true" tabindex="-1"></a>::: column-margin</span>
<span id="cb62-124"><a href="#cb62-124" aria-hidden="true" tabindex="-1"></a>Wir gibt auch ein Tutorial für <span class="co">[</span><span class="ot">How do I interpret the coefficients in an ordinal logistic regression in R?</span><span class="co">](https://stats.oarc.ucla.edu/r/faq/ologit-coefficients/)</span></span>
<span id="cb62-125"><a href="#cb62-125" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb62-126"><a href="#cb62-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-127"><a href="#cb62-127" aria-hidden="true" tabindex="-1"></a>Berechnen wir jetzt einmal die $p$-Werte per Hand. Dafür brauchen wir die absoluten Werte aus der <span class="in">`t value`</span> Spalte aus der <span class="in">`summary`</span> des Modellobjekts. Leider ist die Spalte nicht schön formatiert und so müssen wir uns etwas strecken um die Koeffizienten sauber aufzuarbeiten. Wir erhalten dann das Objekt <span class="in">`coef_tbl`</span> wieder.</span>
<span id="cb62-128"><a href="#cb62-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-131"><a href="#cb62-131" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-132"><a href="#cb62-132" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb62-133"><a href="#cb62-133" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb62-134"><a href="#cb62-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-135"><a href="#cb62-135" aria-hidden="true" tabindex="-1"></a>coef_tbl <span class="ot">&lt;-</span> <span class="fu">summary</span>(ologit_fit) <span class="sc">|&gt;</span> </span>
<span id="cb62-136"><a href="#cb62-136" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coef</span>() <span class="sc">|&gt;</span> </span>
<span id="cb62-137"><a href="#cb62-137" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>(<span class="at">rownames =</span> <span class="st">"term"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb62-138"><a href="#cb62-138" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>() <span class="sc">|&gt;</span> </span>
<span id="cb62-139"><a href="#cb62-139" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">t_value =</span> <span class="fu">abs</span>(t_value))</span>
<span id="cb62-140"><a href="#cb62-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-141"><a href="#cb62-141" aria-hidden="true" tabindex="-1"></a>coef_tbl</span>
<span id="cb62-142"><a href="#cb62-142" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-143"><a href="#cb62-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-144"><a href="#cb62-144" aria-hidden="true" tabindex="-1"></a>Um die Fläche rechts von dem $t$-Wert zu berechnen, können wir zwei Funktionen nutzen. Die Funktion <span class="in">`pnorm()`</span> nimmt eine Standradnormalverteilung an und die Funktion <span class="in">`pt()`</span> vergleicht zu einer $t$-Verteilung. Wenn wir *rechts* von der Verteilung schauen wollen, dann müssen wir die Option `lower.tail = FALSE` wählen. Da wir auch zweiseitig statistisch Testen, müssen wir den ausgerechneten $p$-Wert mal zwei nehmen. Hier einmal als Beispiel für den $t$-Wert von $1.96$. Mit `pnorm(1.96, lower.tail = FALSE) * 2` erhalten wir $0.05$ als Ausgabe. Das ist unser $p$-Wert. Was uns ja nicht weiter überrascht. Denn rechts neben dem Wert von $1.96$ in einer Standardnormalverteilung ist ja $0.05$. Wenn wir einen $t$-Test rechnen würden, dann müssten wir noch die Freiheitsgrade `df` mit angeben. Mit steigendem $n$ nähert sich die $t$-Verteilung der Standardnormalverteilung an. Wir haben mehr als $n = 400$ Beobachtungen, daher können wir auch `df = 400` setzen. Da kommt es auf eine Zahl nicht an. Wir erhalten mit `pt(1.96, lower.tail = FALSE, df = 400) * 2` dann eine Ausgabe von $0.0507$. Also *fast* den gleichen $p$-Wert.</span>
<span id="cb62-145"><a href="#cb62-145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-146"><a href="#cb62-146" aria-hidden="true" tabindex="-1"></a>Im Folgenden setzte ich die Freiheitsgrade <span class="in">`df = 3`</span> dammit wir was sehen. Bei so hohen Fallzahlen wir in unserem beispiel würden wir sonst keine Unterschiede sehen.</span>
<span id="cb62-147"><a href="#cb62-147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-150"><a href="#cb62-150" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-151"><a href="#cb62-151" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb62-152"><a href="#cb62-152" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb62-153"><a href="#cb62-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-154"><a href="#cb62-154" aria-hidden="true" tabindex="-1"></a>coef_tbl <span class="sc">|&gt;</span> </span>
<span id="cb62-155"><a href="#cb62-155" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">p_n =</span> <span class="fu">pnorm</span>(t_value, <span class="at">lower.tail =</span> <span class="cn">FALSE</span>) <span class="sc">*</span> <span class="dv">2</span>,</span>
<span id="cb62-156"><a href="#cb62-156" aria-hidden="true" tabindex="-1"></a>         <span class="at">p_t =</span> <span class="fu">pt</span>(t_value, <span class="at">lower.tail =</span> <span class="cn">FALSE</span>, <span class="at">df =</span> <span class="dv">3</span>) <span class="sc">*</span> <span class="dv">2</span>) <span class="sc">|&gt;</span> </span>
<span id="cb62-157"><a href="#cb62-157" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), round, <span class="dv">3</span>))</span>
<span id="cb62-158"><a href="#cb62-158" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-159"><a href="#cb62-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-160"><a href="#cb62-160" aria-hidden="true" tabindex="-1"></a>Damit haben wir einmal händisch uns die $p$-Werte ausgerechnet. Jetzt könnte man sagen, dass ist ja etwas mühselig. Gibt es da nicht auch einen einfacheren Weg? Ja wir können zum einen die Funktion <span class="in">`tidy()`</span> nutzen um die 95% Konfidenzintervalle und die exponierten Effektschätzer aus der ordinalen Regresssion zu erhalten. Wir erhalten aber wieder keine $p$-Werte sondern müssten uns diese $p$- Werte dann wieder selber berechnen.</span>
<span id="cb62-161"><a href="#cb62-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-164"><a href="#cb62-164" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-165"><a href="#cb62-165" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb62-166"><a href="#cb62-166" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb62-167"><a href="#cb62-167" aria-hidden="true" tabindex="-1"></a>ologit_fit <span class="sc">|&gt;</span> </span>
<span id="cb62-168"><a href="#cb62-168" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tidy</span>(<span class="at">conf.int =</span> <span class="cn">TRUE</span>, <span class="at">exponentiate =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb62-169"><a href="#cb62-169" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>coef.type)</span>
<span id="cb62-170"><a href="#cb62-170" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-171"><a href="#cb62-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-172"><a href="#cb62-172" aria-hidden="true" tabindex="-1"></a>Um all dieses Berechnen zu umgehen, können wir dann auch die Funktion <span class="in">`model_parameters()`</span> nutzen. Hier berechnen wir dann die $p$-Wert mit $df = 400$ aus einer $t$-Verteilung. Damit umgehen wir das Problem, dass unser Modellfit keine $p$-Werte liefert.</span>
<span id="cb62-173"><a href="#cb62-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-176"><a href="#cb62-176" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-177"><a href="#cb62-177" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb62-178"><a href="#cb62-178" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb62-179"><a href="#cb62-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-180"><a href="#cb62-180" aria-hidden="true" tabindex="-1"></a>ologit_fit <span class="sc">|&gt;</span> </span>
<span id="cb62-181"><a href="#cb62-181" aria-hidden="true" tabindex="-1"></a>  <span class="fu">model_parameters</span>() </span>
<span id="cb62-182"><a href="#cb62-182" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-183"><a href="#cb62-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-184"><a href="#cb62-184" aria-hidden="true" tabindex="-1"></a>In @tbl-regression-ordinal sehen wir nochmal die Ergebnisse der ordinalen Regression einmal anders aufgearbeitet. Wir aber schon bei der Funktion <span class="in">`tidy()`</span> fehlen in der Tabelle die $p$-Werte. Wir können aber natürlich auch eine Entscheidung über die 95% Konfidenzintervalle treffen. Wenn die 1 mit im 95% Konfidenzintervall ist, dann können wir die Nullhypothese nicht ablehnen.</span>
<span id="cb62-185"><a href="#cb62-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-188"><a href="#cb62-188" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-189"><a href="#cb62-189" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb62-190"><a href="#cb62-190" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb62-191"><a href="#cb62-191" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-regression-ordinal</span></span>
<span id="cb62-192"><a href="#cb62-192" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Tabelle der Ergebnisse der ordinalen Regression."</span></span>
<span id="cb62-193"><a href="#cb62-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-194"><a href="#cb62-194" aria-hidden="true" tabindex="-1"></a>ologit_fit <span class="sc">|&gt;</span> </span>
<span id="cb62-195"><a href="#cb62-195" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tbl_regression</span>(<span class="at">exponentiate =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb62-196"><a href="#cb62-196" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_flex_table</span>()</span>
<span id="cb62-197"><a href="#cb62-197" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-198"><a href="#cb62-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-199"><a href="#cb62-199" aria-hidden="true" tabindex="-1"></a>Wi es im gazen Kapitel schon durchscheint, die Interpreation der $OR$ aus einer ordinalen Regression ist nicht einfach, geschweige den intuitiv. Was wir haben ist der Trend. Wir haben unser Outcome von *robust* zu *frail* sortiert und damit von *gut* nach *schlecht*. Wir können so die Richtung der Variablen in unserem Modell interpretieren. Das heißt, dass männliche Ferkel eher von einer Gebrechlichkeit betroffen sind als weibliche Ferkel. Oder wir sagen, dass ein ansteigender CRP Wert führt zu weniger Gebrechlichkeit. Auf diesem Niveau lassen sich die $OR$ einer ordinalen Regression gut interpretieren.</span>
<span id="cb62-200"><a href="#cb62-200" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-201"><a href="#cb62-201" aria-hidden="true" tabindex="-1"></a><span class="fu">## Gruppenvergleich {#sec-mult-comp-ord-reg}</span></span>
<span id="cb62-202"><a href="#cb62-202" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-203"><a href="#cb62-203" aria-hidden="true" tabindex="-1"></a>In diesem Abschnitt wollen wir Gruppenvergleich mit dem *Cumulative Link Models (CLM)* für ordinale Daten rechnen. Oder andersherum, wir haben Boniturdaten vorliegen und wollen hierfür einen multipen Vergleich rechnen. Mehr zu dem Modell findest du im Tutorium zu <span class="co">[</span><span class="ot">Introduction to Cumulative Link Models (CLM) for Ordinal Data</span><span class="co">](https://rcompanion.org/handbook/G_01.html)</span>. Wir konzentrieren uns hier direkt auf die Auswertung an einem Spieldatensatz. Daran können wir dann einfacher erkennen, was bei einem Vergleich rauskommt, wenn wir wissen was wir reingesteckt haben. Wenn du mehr zu dem Thema lesen willst, dann hilft eventuell auch die Hilfeseite zu <span class="co">[</span><span class="ot">Ordinal models with {emmeans}</span><span class="co">](https://cran.r-project.org/web/packages/emmeans/vignettes/sophisticated.html#ordinal)</span>. Ich muss aber sagen, dass die Seite etwas theoretisch ist.</span>
<span id="cb62-204"><a href="#cb62-204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-205"><a href="#cb62-205" aria-hidden="true" tabindex="-1"></a>Wir bauen uns jetzt einen Spieldatensatz mit zwanzig Boniturnoten für drei Tierarten. Ich nehme hier nur fünf Notenschritte, da sonst die Sachlage sehr unübersichtlich wird. Im Prinzip generieren wir uns mit der Funktion <span class="in">`sample`</span> nach vorgegeben Wahrscheinlichkeiten für jede Note zwanzig Boniturnoten für jede Tierart. Dabei haben Katzen eine niedrigere Note als Hunde und die Hunde haben schlechtere Noten als die Füchse. Am Ende brauchen wir dann noch einen geordneten Faktor <span class="in">`likert_ord`</span> damit wir die ordinale Regression rechnen können. Die ursprünglichen Noten behalte ich als numerisch um die Daten besser in <span class="in">`{ggplot}`</span> abbilden zu können.</span>
<span id="cb62-206"><a href="#cb62-206" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-209"><a href="#cb62-209" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-210"><a href="#cb62-210" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb62-211"><a href="#cb62-211" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb62-212"><a href="#cb62-212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-213"><a href="#cb62-213" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">20231201</span>)</span>
<span id="cb62-214"><a href="#cb62-214" aria-hidden="true" tabindex="-1"></a>n_grp <span class="ot">&lt;-</span> <span class="dv">20</span></span>
<span id="cb62-215"><a href="#cb62-215" aria-hidden="true" tabindex="-1"></a>grade_tbl <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">trt =</span> <span class="fu">gl</span>(<span class="dv">3</span>, n_grp, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"cat"</span>, <span class="st">"dog"</span>, <span class="st">"fox"</span>)),</span>
<span id="cb62-216"><a href="#cb62-216" aria-hidden="true" tabindex="-1"></a>                    <span class="at">likert =</span> <span class="fu">c</span>(<span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">size =</span> n_grp, <span class="at">replace =</span> <span class="cn">TRUE</span>, <span class="at">prob =</span> <span class="fu">c</span>(<span class="fl">0.2</span>, <span class="fl">0.5</span>, <span class="fl">0.2</span>, <span class="fl">0.1</span>, <span class="fl">0.0</span>)),</span>
<span id="cb62-217"><a href="#cb62-217" aria-hidden="true" tabindex="-1"></a>                               <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">size =</span> n_grp, <span class="at">replace =</span> <span class="cn">TRUE</span>, <span class="at">prob =</span> <span class="fu">c</span>(<span class="fl">0.1</span>, <span class="fl">0.2</span>, <span class="fl">0.5</span>, <span class="fl">0.2</span>, <span class="fl">0.0</span>)),</span>
<span id="cb62-218"><a href="#cb62-218" aria-hidden="true" tabindex="-1"></a>                               <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">size =</span> n_grp, <span class="at">replace =</span> <span class="cn">TRUE</span>, <span class="at">prob =</span> <span class="fu">c</span>(<span class="fl">0.0</span>, <span class="fl">0.0</span>, <span class="fl">0.2</span>, <span class="fl">0.5</span>, <span class="fl">0.3</span>)))) <span class="sc">|&gt;</span> </span>
<span id="cb62-219"><a href="#cb62-219" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">likert_ord =</span> <span class="fu">ordered</span>(likert))</span>
<span id="cb62-220"><a href="#cb62-220" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-221"><a href="#cb62-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-222"><a href="#cb62-222" aria-hidden="true" tabindex="-1"></a>Dann berechnen wir einmal die mittleren Boniturnoten für die drei Tierarten. Wir sehen, dass wir ziemlich gerade Durchschnittsnoten haben.</span>
<span id="cb62-223"><a href="#cb62-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-226"><a href="#cb62-226" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-227"><a href="#cb62-227" aria-hidden="true" tabindex="-1"></a>grade_tbl <span class="sc">|&gt;</span> </span>
<span id="cb62-228"><a href="#cb62-228" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(trt) <span class="sc">|&gt;</span> </span>
<span id="cb62-229"><a href="#cb62-229" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">mean</span>(likert))</span>
<span id="cb62-230"><a href="#cb62-230" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-231"><a href="#cb62-231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-232"><a href="#cb62-232" aria-hidden="true" tabindex="-1"></a>Jetzt können wir die Daten auch schon in die ordinale Regression mit <span class="in">`clm()`</span> stecken. Da die Noten alle den gleichen Abstand zueinander haben, nutzen wir die Option <span class="in">`threshold = "symmetric"`</span>. Wir brauchen hier die Ausgabe der Moelldierung gar nicht weiter im Detail. Wir nutzen den Fit dann gleich in der ANOVA und <span class="in">`{emmeans}`</span> für den Gruppenvergleich der mittleren Boniturnoten.</span>
<span id="cb62-233"><a href="#cb62-233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-236"><a href="#cb62-236" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-237"><a href="#cb62-237" aria-hidden="true" tabindex="-1"></a>clm_fit <span class="ot">&lt;-</span> <span class="fu">clm</span>(likert_ord <span class="sc">~</span> trt, <span class="at">data =</span> grade_tbl,</span>
<span id="cb62-238"><a href="#cb62-238" aria-hidden="true" tabindex="-1"></a>               <span class="at">threshold =</span> <span class="st">"symmetric"</span>)</span>
<span id="cb62-239"><a href="#cb62-239" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-240"><a href="#cb62-240" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-241"><a href="#cb62-241" aria-hidden="true" tabindex="-1"></a>Die ANOVA funktioniert wie gewohnt. Wir müssen hier auch nichts anpassen, wir kriegen einfach so unsere p-Werte geliefert. Wir haben einen signifikanten Effekt der Tierarten, was ja auch zu erwarten war. Die Boniturnoten unterscheiden sich zwischen Katzen, Hunden und Füchsen.</span>
<span id="cb62-242"><a href="#cb62-242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-245"><a href="#cb62-245" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-246"><a href="#cb62-246" aria-hidden="true" tabindex="-1"></a><span class="fu">anova</span>(clm_fit)</span>
<span id="cb62-247"><a href="#cb62-247" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-248"><a href="#cb62-248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-249"><a href="#cb62-249" aria-hidden="true" tabindex="-1"></a>Dann können wir auch schon den multipen Gruppenvergleich rechnen. Da wir die mittleren Boniturnoten wiedergegeben haben wollen, nutzen wir die Option <span class="in">`mode = "mean.class"`</span>. Sonst würden wir andere Werte erhalten, die dann wirklich schwer zu interpretieren sind. Wie du siehst, sind es die gleichen Werte die wir auch oben für unsere Mittelwerte über die Boniturnoten berechnet haben.</span>
<span id="cb62-250"><a href="#cb62-250" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-253"><a href="#cb62-253" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-254"><a href="#cb62-254" aria-hidden="true" tabindex="-1"></a>emm_obj <span class="ot">&lt;-</span> clm_fit <span class="sc">|&gt;</span> </span>
<span id="cb62-255"><a href="#cb62-255" aria-hidden="true" tabindex="-1"></a>  <span class="fu">emmeans</span>(<span class="sc">~</span> trt, <span class="at">mode =</span> <span class="st">"mean.class"</span>)</span>
<span id="cb62-256"><a href="#cb62-256" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-257"><a href="#cb62-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-258"><a href="#cb62-258" aria-hidden="true" tabindex="-1"></a>Dann können wir uns auch schon das *compact letter display* wiedergeben lassen. Auch hier gibt es keine Überraschung, die drei Tierarten unterscheiden sich. Mit der Ausgabe könnten wir dann auch gleich ein Säulendigramm erstellen, aber das zeige ich gleich mal in dem zweiten Beispiel für zwei Faktoren und der Bonitur von Weizen.</span>
<span id="cb62-259"><a href="#cb62-259" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-262"><a href="#cb62-262" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-263"><a href="#cb62-263" aria-hidden="true" tabindex="-1"></a>emm_obj <span class="sc">|&gt;</span> </span>
<span id="cb62-264"><a href="#cb62-264" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cld</span>(<span class="at">Letters =</span> letters)</span>
<span id="cb62-265"><a href="#cb62-265" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-266"><a href="#cb62-266" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-267"><a href="#cb62-267" aria-hidden="true" tabindex="-1"></a>In unserem zweiten Beispiel schauen wir uns einen zweifaktoriellen Datensatz einmal an. Wir haben Weizen angepflanzt und bonitieren die Weizenpflanzen nach der Likert Skala. Dabei bedeutet dann eine 1 ein schlechte Note und eine 9 die bestmögliche Note. Wir hätten natürlich hier auch einen Kurskal-Wallis-Test rechnen können und dann im Anschluss einen paarweisen Wilcoxon Test. Nun modellieren wir hier aber die Boniturnoten mal mit einer ordinalen Regression und rechnen den anschließenden Gruppenvergleich dann mit dem R Paket <span class="in">`{emmeans}`</span>.</span>
<span id="cb62-268"><a href="#cb62-268" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-269"><a href="#cb62-269" aria-hidden="true" tabindex="-1"></a>Unser Datensatz <span class="in">`grade_tbl`</span> enthält den Faktor <span class="in">`block`</span> mit drei Levels sowie den Faktor <span class="in">`variety`</span> mit fünf Leveln. Jedes Level repräsentiert dabei eine Weizensorte. Wichtig ist hier, dass wir die Noten als *geordneten* Faktor mit der Funktion <span class="in">`ordered`</span> erstellen. Nur dann haben die Noten eine Ordnung und die folgenden Funktionen erkennen dann auch die Spalte <span class="in">`grade_ord`</span> als eine ordinale Spalte mit Noten.</span>
<span id="cb62-270"><a href="#cb62-270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-273"><a href="#cb62-273" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-274"><a href="#cb62-274" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb62-275"><a href="#cb62-275" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb62-276"><a href="#cb62-276" aria-hidden="true" tabindex="-1"></a>grade_tbl <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">block =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"I"</span>, <span class="st">"II"</span>, <span class="st">"III"</span>), <span class="at">each =</span> <span class="dv">3</span>),</span>
<span id="cb62-277"><a href="#cb62-277" aria-hidden="true" tabindex="-1"></a>                    <span class="at">A =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">1</span>),</span>
<span id="cb62-278"><a href="#cb62-278" aria-hidden="true" tabindex="-1"></a>                    <span class="at">B =</span> <span class="fu">c</span>(<span class="dv">7</span>, <span class="dv">9</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">6</span>, <span class="dv">7</span>),</span>
<span id="cb62-279"><a href="#cb62-279" aria-hidden="true" tabindex="-1"></a>                    <span class="at">C =</span> <span class="fu">c</span>(<span class="dv">6</span>, <span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">4</span>, <span class="dv">7</span>, <span class="dv">6</span>),</span>
<span id="cb62-280"><a href="#cb62-280" aria-hidden="true" tabindex="-1"></a>                    <span class="at">D =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>),</span>
<span id="cb62-281"><a href="#cb62-281" aria-hidden="true" tabindex="-1"></a>                    <span class="at">E =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">7</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">5</span>)) <span class="sc">|&gt;</span></span>
<span id="cb62-282"><a href="#cb62-282" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gather</span>(<span class="at">key =</span> variety, <span class="at">value =</span> grade, A<span class="sc">:</span>E) <span class="sc">|&gt;</span> </span>
<span id="cb62-283"><a href="#cb62-283" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">grade_ord =</span> <span class="fu">ordered</span>(grade))</span>
<span id="cb62-284"><a href="#cb62-284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-285"><a href="#cb62-285" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-286"><a href="#cb62-286" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-287"><a href="#cb62-287" aria-hidden="true" tabindex="-1"></a>Wir schauen uns nochmal den Datensatz an und sehen, dass wir einmal die Spalte <span class="in">`grade`</span> als numerische Spalte vorliegen haben und einmal als geordneten Faktor. Wir brauchen die numerische Spalte um die Daten besser in <span class="in">`ggplot()`</span> darstellen zu können.</span>
<span id="cb62-288"><a href="#cb62-288" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-291"><a href="#cb62-291" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-292"><a href="#cb62-292" aria-hidden="true" tabindex="-1"></a>grade_tbl <span class="sc">|&gt;</span> <span class="fu">head</span>(<span class="dv">4</span>)</span>
<span id="cb62-293"><a href="#cb62-293" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-294"><a href="#cb62-294" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-295"><a href="#cb62-295" aria-hidden="true" tabindex="-1"></a>In @fig-clm-dot sehen wir einmal die Daten als Dotplot dargestellt. Auf der x-Achse sind die Weizensorten und auf der y-Achse die Boniturnoten. Ich habe noch die zusätzlichen Linien für jede einzelne Note mit eingezeichnet.</span>
<span id="cb62-296"><a href="#cb62-296" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-299"><a href="#cb62-299" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-300"><a href="#cb62-300" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb62-301"><a href="#cb62-301" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb62-302"><a href="#cb62-302" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-clm-dot</span></span>
<span id="cb62-303"><a href="#cb62-303" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-align: center</span></span>
<span id="cb62-304"><a href="#cb62-304" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 4</span></span>
<span id="cb62-305"><a href="#cb62-305" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 6</span></span>
<span id="cb62-306"><a href="#cb62-306" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Dotplot des Datenbeispiels für die Bonitur von fünf Weizensorten."</span></span>
<span id="cb62-307"><a href="#cb62-307" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-308"><a href="#cb62-308" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(grade_tbl, <span class="fu">aes</span>(variety, grade, <span class="at">fill =</span> block)) <span class="sc">+</span></span>
<span id="cb62-309"><a href="#cb62-309" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb62-310"><a href="#cb62-310" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_dotplot</span>(<span class="at">binaxis =</span> <span class="st">"y"</span>, <span class="at">stackdir=</span><span class="st">'center'</span>, </span>
<span id="cb62-311"><a href="#cb62-311" aria-hidden="true" tabindex="-1"></a>               <span class="at">position=</span><span class="fu">position_dodge</span>(<span class="fl">0.6</span>), <span class="at">dotsize =</span> <span class="fl">0.75</span>) <span class="sc">+</span></span>
<span id="cb62-312"><a href="#cb62-312" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>, <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">9</span>)) <span class="sc">+</span></span>
<span id="cb62-313"><a href="#cb62-313" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_okabeito</span>() </span>
<span id="cb62-314"><a href="#cb62-314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-315"><a href="#cb62-315" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-316"><a href="#cb62-316" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-317"><a href="#cb62-317" aria-hidden="true" tabindex="-1"></a>Jetzt können wir schon die Funktion <span class="in">`clm()`</span> aus dem R Paket <span class="in">`{ordinal}`</span> verwenden um die ordinale Regression zu rechnen. Wir haben in dem R Paket <span class="in">`{ordinal}`</span> noch weitere Modelle zu Verfügung mit denen wir auch komplexere Designs bis hin zu linearen gemischten Modellen für eine ordinale Regresssion rechnen können. Da wir mit Boniturnoten als Outcome arbeiten setzen wir auch die Option <span class="in">`threshold = "symmetric"`</span>. Damit teilen wir der Funktion <span class="in">`clm()`</span> mit, dass wir es mit einer symmetrischen Notenskala zu tun haben. Wenn du das nicht hast, dass kannst du die Option auch auf <span class="in">`"flexible"`</span> stellen. Dann wird eine nicht symmetrische Verteilung des Outcomes angenommen.</span>
<span id="cb62-318"><a href="#cb62-318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-321"><a href="#cb62-321" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-322"><a href="#cb62-322" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb62-323"><a href="#cb62-323" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb62-324"><a href="#cb62-324" aria-hidden="true" tabindex="-1"></a>clm_fit <span class="ot">&lt;-</span> <span class="fu">clm</span>(grade_ord <span class="sc">~</span> variety <span class="sc">+</span> block <span class="sc">+</span> variety<span class="sc">:</span>block, <span class="at">data =</span> grade_tbl,</span>
<span id="cb62-325"><a href="#cb62-325" aria-hidden="true" tabindex="-1"></a>               <span class="at">threshold =</span> <span class="st">"symmetric"</span>)</span>
<span id="cb62-326"><a href="#cb62-326" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-327"><a href="#cb62-327" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-328"><a href="#cb62-328" aria-hidden="true" tabindex="-1"></a>Es ist auch möglich auf dem Modellfit eine ANOVA zu rechnen. Wir machen das hier einmal, aber wir erwarten natürlich einen signifikanten Effekt von der Sorte. Die Signifikanz konnten wir ja schon oben im Dotplot sehen.</span>
<span id="cb62-329"><a href="#cb62-329" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-332"><a href="#cb62-332" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-333"><a href="#cb62-333" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb62-334"><a href="#cb62-334" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb62-335"><a href="#cb62-335" aria-hidden="true" tabindex="-1"></a><span class="fu">anova</span>(clm_fit)</span>
<span id="cb62-336"><a href="#cb62-336" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-337"><a href="#cb62-337" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-338"><a href="#cb62-338" aria-hidden="true" tabindex="-1"></a>Jetzt nutzen wir wieder den Modellfit für unseren Gruppenvergleich in <span class="in">`{emmeans}`</span>. Wir nutzen dafür wieder die Funktion <span class="in">`emmeans()`</span> und lassen uns das *compact letter display* über die Funktion `cld()` wiedergeben. Da wir hier eigentlich keinen signifikanten Effekt der Blöcke vorliegen haben, könnten wir auch einfach die Option `~ variety` nutzen und den Block weglassen. Dann wäre auch die Ausgabe mit den *compact letter display* etwas übersichtlicher. Ich habe dann noch die Ausgabe einmal nach den Sorten sortiert und nicht nach dem *compact letter display* um hier etwas mehr Übersicht zu erhalten.</span>
<span id="cb62-339"><a href="#cb62-339" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-342"><a href="#cb62-342" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-343"><a href="#cb62-343" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb62-344"><a href="#cb62-344" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb62-345"><a href="#cb62-345" aria-hidden="true" tabindex="-1"></a>emm_obj <span class="ot">&lt;-</span> clm_fit <span class="sc">|&gt;</span> </span>
<span id="cb62-346"><a href="#cb62-346" aria-hidden="true" tabindex="-1"></a>  <span class="fu">emmeans</span>(<span class="sc">~</span> variety <span class="sc">*</span> block, <span class="at">mode =</span> <span class="st">"mean.class"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb62-347"><a href="#cb62-347" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cld</span>(<span class="at">Letters =</span> letters) <span class="sc">|&gt;</span> </span>
<span id="cb62-348"><a href="#cb62-348" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(variety)</span>
<span id="cb62-349"><a href="#cb62-349" aria-hidden="true" tabindex="-1"></a>emm_obj</span>
<span id="cb62-350"><a href="#cb62-350" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-351"><a href="#cb62-351" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-352"><a href="#cb62-352" aria-hidden="true" tabindex="-1"></a>In der @fig-log-mod-ordinal-weizen siehst du dann einmal die Ausgabe des multipen Gruppenvergleichs visualisiert. Hier wäre es dann schon fast sinnvoll über die Blöcke zu mitteln und daher den Block aus dem Modell zu nehmen. Der Block hat keinen Effekt und sorgt aber für noch mehr Vergleiche, die gerechnet werden müssen. Du kannst dann ja oben nochmal die Funktion <span class="in">`emmeans()`</span> anpassen und gemittelt über alle Blöcke mit der Option <span class="in">`~ variety`</span> rechnen. Die Funktion <span class="in">`str_trim()`</span> entfernt dann noch die Leerzeichen von dem *compact letter display* und zentriert damit alles schön.</span>
<span id="cb62-353"><a href="#cb62-353" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-356"><a href="#cb62-356" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-357"><a href="#cb62-357" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb62-358"><a href="#cb62-358" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb62-359"><a href="#cb62-359" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb62-360"><a href="#cb62-360" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-log-mod-ordinal-weizen</span></span>
<span id="cb62-361"><a href="#cb62-361" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-align: center</span></span>
<span id="cb62-362"><a href="#cb62-362" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 4</span></span>
<span id="cb62-363"><a href="#cb62-363" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 6</span></span>
<span id="cb62-364"><a href="#cb62-364" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Säulendigramm der mittleren Boniturnote des Weizen aus einer ordinalen Regression. Das *compact letter display* wird dann in `{emmeans}` generiert. Teilweise kommt das *compact letter display* an seine visuellen Grenzen. Hier wäre es dann schon fast sinnvoll über die Blöcke zu mitteln und daher den Block aus dem Modell zu nehmen."</span></span>
<span id="cb62-365"><a href="#cb62-365" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-366"><a href="#cb62-366" aria-hidden="true" tabindex="-1"></a>emm_obj <span class="sc">|&gt;</span> </span>
<span id="cb62-367"><a href="#cb62-367" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">|&gt;</span> </span>
<span id="cb62-368"><a href="#cb62-368" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> variety, <span class="at">y =</span> mean.class, <span class="at">fill =</span> block)) <span class="sc">+</span></span>
<span id="cb62-369"><a href="#cb62-369" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> </span>
<span id="cb62-370"><a href="#cb62-370" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Mittlere Boniturnote"</span>, <span class="at">x =</span> <span class="st">"Sorte"</span>,</span>
<span id="cb62-371"><a href="#cb62-371" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">"Block"</span>) <span class="sc">+</span></span>
<span id="cb62-372"><a href="#cb62-372" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, </span>
<span id="cb62-373"><a href="#cb62-373" aria-hidden="true" tabindex="-1"></a>           <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.9</span>, <span class="at">preserve =</span> <span class="st">"single"</span>)) <span class="sc">+</span></span>
<span id="cb62-374"><a href="#cb62-374" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">str_trim</span>(.group), <span class="at">y =</span> mean.class <span class="sc">+</span> SE <span class="sc">+</span> <span class="fl">0.01</span>),  </span>
<span id="cb62-375"><a href="#cb62-375" aria-hidden="true" tabindex="-1"></a>            <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.9</span>), <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.25</span>) <span class="sc">+</span></span>
<span id="cb62-376"><a href="#cb62-376" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> mean.class<span class="sc">-</span>SE, <span class="at">ymax =</span> mean.class<span class="sc">+</span>SE),</span>
<span id="cb62-377"><a href="#cb62-377" aria-hidden="true" tabindex="-1"></a>                <span class="at">width =</span> <span class="fl">0.2</span>,  </span>
<span id="cb62-378"><a href="#cb62-378" aria-hidden="true" tabindex="-1"></a>                <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.9</span>, <span class="at">preserve =</span> <span class="st">"single"</span>)) <span class="sc">+</span></span>
<span id="cb62-379"><a href="#cb62-379" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_okabeito</span>()</span>
<span id="cb62-380"><a href="#cb62-380" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-381"><a href="#cb62-381" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-382"><a href="#cb62-382" aria-hidden="true" tabindex="-1"></a>::: callout-tip</span>
<span id="cb62-383"><a href="#cb62-383" aria-hidden="true" tabindex="-1"></a><span class="fu">## Anwendungsbeispiel: Gruppenvergleich für eine Bonitur</span></span>
<span id="cb62-384"><a href="#cb62-384" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-385"><a href="#cb62-385" aria-hidden="true" tabindex="-1"></a>Im folgenden Beispiel schauen wir uns nochmal ein praktische Auswertung von einem agrarwissenschaftlichen Beispiel mit Brokkoli an. Wir haben uns in diesem Experiment verschiedene Dosen <span class="in">`fert_amount`</span> von einem Dünger aufgebracht sowie verschiedene Zeitpunkte der Düngung <span class="in">`fert_time`</span> berücksichtigt. Ziel ist es die Boniturnoten für den Stamm von Brokkoli miteinander zu vergleichen. Auch hier haben wir einige Besonderheiten in den Daten, da nicht jede Faktorkombination vorliegt. Wir ignorieren aber diese Probleme und rechnen einfach stumpf unseren Gruppenvergleich. Wir müssen aber ein paar Anpassungen durchführen. Unsere Noten müssen ein geordneter Faktor sein, daher nutzen wir die Funktion <span class="in">`ordered`</span>. Darüber hinaus schmeißen wir die Düngerzeit <span class="in">`early`</span> aus den Daten, da wir zu dem Zeitpunkt keine hohlen Stämme bonitiert haben.</span>
<span id="cb62-386"><a href="#cb62-386" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-389"><a href="#cb62-389" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-390"><a href="#cb62-390" aria-hidden="true" tabindex="-1"></a>broc_tbl <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"data/broccoli_weight.xlsx"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb62-391"><a href="#cb62-391" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">fert_time =</span> <span class="fu">factor</span>(fert_time, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"none"</span>, <span class="st">"early"</span>, <span class="st">"late"</span>)),</span>
<span id="cb62-392"><a href="#cb62-392" aria-hidden="true" tabindex="-1"></a>         <span class="at">fert_amount =</span> <span class="fu">as_factor</span>(fert_amount),</span>
<span id="cb62-393"><a href="#cb62-393" aria-hidden="true" tabindex="-1"></a>         <span class="at">block =</span> <span class="fu">as_factor</span>(block),</span>
<span id="cb62-394"><a href="#cb62-394" aria-hidden="true" tabindex="-1"></a>         <span class="at">stem_hollowness_num =</span> stem_hollowness,</span>
<span id="cb62-395"><a href="#cb62-395" aria-hidden="true" tabindex="-1"></a>         <span class="at">stem_hollowness =</span> <span class="fu">ordered</span>(stem_hollowness)) <span class="sc">|&gt;</span></span>
<span id="cb62-396"><a href="#cb62-396" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(fert_time <span class="sc">==</span> <span class="st">"early"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb62-397"><a href="#cb62-397" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(fert_time, fert_amount, block, stem_hollowness, stem_hollowness_num) <span class="sc">|&gt;</span> </span>
<span id="cb62-398"><a href="#cb62-398" aria-hidden="true" tabindex="-1"></a>  <span class="fu">droplevels</span>() <span class="sc">|&gt;</span> </span>
<span id="cb62-399"><a href="#cb62-399" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>()</span>
<span id="cb62-400"><a href="#cb62-400" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-401"><a href="#cb62-401" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-402"><a href="#cb62-402" aria-hidden="true" tabindex="-1"></a>Im Folgenden einmal die Tabelle mit <span class="in">`tabyl`</span> aus dem R Paket <span class="in">`{janitor}`</span>. Mehr dazu auf der Hilfeseite zu <span class="co">[</span><span class="ot">tabyls: a tidy, fully-featured approach to counting things</span><span class="co">](https://cran.r-project.org/web/packages/janitor/vignettes/tabyls.html)</span>. Wir sehen, dass wir kaum schlechte Noten erhalten. Fast alle Brokkoliköpfe haben eine 1 erhalten, was für intakte Köpfe ohne einen hohlen Stamm spricht.</span>
<span id="cb62-403"><a href="#cb62-403" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-406"><a href="#cb62-406" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-407"><a href="#cb62-407" aria-hidden="true" tabindex="-1"></a>broc_tbl <span class="sc">|&gt;</span> </span>
<span id="cb62-408"><a href="#cb62-408" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(stem_hollowness, fert_amount) </span>
<span id="cb62-409"><a href="#cb62-409" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-410"><a href="#cb62-410" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-411"><a href="#cb62-411" aria-hidden="true" tabindex="-1"></a>Die Tabelle sehen wir dann auch nochmal in der @fig-clm-broc-violin als Violinplot visualisiert. Wir sehen hier nochmal sehr drastisch, dass wir kaum Noten großer als Eins in den Daten vorliegen haben.</span>
<span id="cb62-412"><a href="#cb62-412" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-415"><a href="#cb62-415" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-416"><a href="#cb62-416" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb62-417"><a href="#cb62-417" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb62-418"><a href="#cb62-418" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-clm-broc-violin</span></span>
<span id="cb62-419"><a href="#cb62-419" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-align: center</span></span>
<span id="cb62-420"><a href="#cb62-420" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 4</span></span>
<span id="cb62-421"><a href="#cb62-421" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 4</span></span>
<span id="cb62-422"><a href="#cb62-422" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Violinplot der Boniturnoten der Brokkolistämme. Klar ist die sehr schiefe Verteilung der Boniturnoten zu erkennen."</span></span>
<span id="cb62-423"><a href="#cb62-423" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-424"><a href="#cb62-424" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(broc_tbl, <span class="fu">aes</span>(fert_amount, stem_hollowness_num, <span class="at">fill =</span> fert_amount)) <span class="sc">+</span></span>
<span id="cb62-425"><a href="#cb62-425" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb62-426"><a href="#cb62-426" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>() <span class="sc">+</span></span>
<span id="cb62-427"><a href="#cb62-427" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>, <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">9</span>)) <span class="sc">+</span></span>
<span id="cb62-428"><a href="#cb62-428" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_okabeito</span>() <span class="sc">+</span></span>
<span id="cb62-429"><a href="#cb62-429" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb62-430"><a href="#cb62-430" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-431"><a href="#cb62-431" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-432"><a href="#cb62-432" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-433"><a href="#cb62-433" aria-hidden="true" tabindex="-1"></a>Wir rechnen jetzt natürlich trotzdem eine ordinale Regression mit der Funktion <span class="in">`clm()`</span>. Wir setzen die Option <span class="in">`theshold = "symmetric"`</span> da wir davon ausgehen, dass unsere Noten alle den gleichen Abstand zueinander haben.</span>
<span id="cb62-434"><a href="#cb62-434" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-437"><a href="#cb62-437" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-438"><a href="#cb62-438" aria-hidden="true" tabindex="-1"></a>clm_fit <span class="ot">&lt;-</span> <span class="fu">clm</span>(stem_hollowness <span class="sc">~</span> fert_amount, </span>
<span id="cb62-439"><a href="#cb62-439" aria-hidden="true" tabindex="-1"></a>               <span class="at">data =</span> broc_tbl, <span class="at">threshold =</span> <span class="st">"symmetric"</span>)</span>
<span id="cb62-440"><a href="#cb62-440" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-441"><a href="#cb62-441" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-442"><a href="#cb62-442" aria-hidden="true" tabindex="-1"></a>Jetzt rechnen wir in den beiden folgenden Tabs einmal die ANOVA und dann auch den multiplen Gruppenvergleich mit <span class="in">`{emmeans}`</span>. Da wir hier ordinale Daten haben, können wir dann nicht einfach die Standardverfahren nehmen. Wir entscheiden uns dann für den Standardfehler bei der Darstellung.</span>
<span id="cb62-443"><a href="#cb62-443" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-444"><a href="#cb62-444" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb62-445"><a href="#cb62-445" aria-hidden="true" tabindex="-1"></a><span class="fu">## ANOVA mit `anova()`</span></span>
<span id="cb62-446"><a href="#cb62-446" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-447"><a href="#cb62-447" aria-hidden="true" tabindex="-1"></a>Wir rechnen hier einmal die ANOVA und nutzen den $\mathcal{X}^2$-Test für die Ermittelung der p-Werte. Wir müssen hier einen Test auswählen, da per Standardeinstellung kein Test gerechnet wird. Wir machen dann die Ausgabe nochmal schöner und fertig sind wir.</span>
<span id="cb62-448"><a href="#cb62-448" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-451"><a href="#cb62-451" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-452"><a href="#cb62-452" aria-hidden="true" tabindex="-1"></a>clm_fit <span class="sc">|&gt;</span> </span>
<span id="cb62-453"><a href="#cb62-453" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anova</span>() <span class="sc">|&gt;</span> </span>
<span id="cb62-454"><a href="#cb62-454" aria-hidden="true" tabindex="-1"></a>  <span class="fu">model_parameters</span>()</span>
<span id="cb62-455"><a href="#cb62-455" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-456"><a href="#cb62-456" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-457"><a href="#cb62-457" aria-hidden="true" tabindex="-1"></a>Wir sehen, dass der die Menge des Düngers signifikant ist. Wir haben nicht mehr Faktoren in dem Modell gehabt, so dass wir hier auch keine weiteren Aussagen tätigen können.</span>
<span id="cb62-458"><a href="#cb62-458" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-459"><a href="#cb62-459" aria-hidden="true" tabindex="-1"></a><span class="fu">## Gruppenvergleich mit `emmeans()`</span></span>
<span id="cb62-460"><a href="#cb62-460" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-461"><a href="#cb62-461" aria-hidden="true" tabindex="-1"></a>Im Folgenden rechnen wir einmal für den Faktor <span class="in">`fert_amount`</span> einen Gruppenvergleich. Wir setzen hier die Option <span class="in">`mean.class`</span> damit wir dann die mittleren Noten wiedergegeben bekommen. Mit den mittleren Noten können wir dann ein Säulendiagramm erstellen. Dann adjustieren wir noch nach Bonferroni und sind fertig.</span>
<span id="cb62-462"><a href="#cb62-462" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-465"><a href="#cb62-465" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-466"><a href="#cb62-466" aria-hidden="true" tabindex="-1"></a>emm_obj <span class="ot">&lt;-</span> clm_fit <span class="sc">|&gt;</span> </span>
<span id="cb62-467"><a href="#cb62-467" aria-hidden="true" tabindex="-1"></a>  <span class="fu">emmeans</span>(<span class="sc">~</span> fert_amount, <span class="at">mode =</span> <span class="st">"mean.class"</span>) <span class="sc">|&gt;</span></span>
<span id="cb62-468"><a href="#cb62-468" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cld</span>(<span class="at">Letters =</span> letters, <span class="at">adjust =</span> <span class="st">"bonferroni"</span>)</span>
<span id="cb62-469"><a href="#cb62-469" aria-hidden="true" tabindex="-1"></a>emm_obj</span>
<span id="cb62-470"><a href="#cb62-470" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-471"><a href="#cb62-471" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-472"><a href="#cb62-472" aria-hidden="true" tabindex="-1"></a>Das <span class="in">`emm_obj`</span> Objekt werden wir dann gleich einmal in <span class="in">`{ggplot}`</span> visualisieren. Die <span class="in">`mean.class`</span> stellt den mittleren Noten des Brokkoli für die Menge der Düngung dar. Wir nutzen dann auch hier die Standardfehler für die Abbildungen, da wir sonst schnelle Werte kleiner 0 und größer 9 erhalten. Dann können wir zum Abschluss auch das *compact letter display* anhand der Abbildung interpretieren.</span>
<span id="cb62-473"><a href="#cb62-473" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-474"><a href="#cb62-474" aria-hidden="true" tabindex="-1"></a>Gerade in diesem Beispiel bietet es sich an, dass wir explizit *mindestens* einen Noten*punkt*unterschied vorliegen haben wollen, damit wir von einem relevanten Unterschied sprechen können. Die Funktion `cld()` erlaubt es ein $\Delta$ zu definieren, dass mindestens überschritten sein muss, damit wir einen Unterschied feststellen. Alles was in dem Bereich $\pm\Delta$ liegt, gilt dann als gleich auch wenn es sonst signifikant wäre. Deshalb setzen wir die Option `delta = 1` um sicherzustellen, dass nur *relevante* Unterschiede auch als solche angezeigt werden. Daher haben wir nach der Anpassung auch keine signifikanten Unterschiede mehr. Alle Gruppen sind gleich.</span>
<span id="cb62-475"><a href="#cb62-475" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-478"><a href="#cb62-478" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-479"><a href="#cb62-479" aria-hidden="true" tabindex="-1"></a>clm_fit <span class="sc">|&gt;</span> </span>
<span id="cb62-480"><a href="#cb62-480" aria-hidden="true" tabindex="-1"></a>  <span class="fu">emmeans</span>(<span class="sc">~</span> fert_amount, <span class="at">mode =</span> <span class="st">"mean.class"</span>) <span class="sc">|&gt;</span></span>
<span id="cb62-481"><a href="#cb62-481" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cld</span>(<span class="at">Letters =</span> letters, <span class="at">adjust =</span> <span class="st">"bonferroni"</span>, <span class="at">delta =</span> <span class="dv">1</span>)</span>
<span id="cb62-482"><a href="#cb62-482" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-483"><a href="#cb62-483" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb62-484"><a href="#cb62-484" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-485"><a href="#cb62-485" aria-hidden="true" tabindex="-1"></a>In der @fig-log-mod-ordinal-broc siehst du das Ergebnis der Auswertung in einem Säulendiagramm. Zwar sind die mittleren Boniturnoten signifikant unterschiedlich, aber ist der Effekt auf der vollen Boniturnotenskala kaum zu sehen. Wir haben es hier mit knapp einer Notenstufe Unterschied zu tun und das ist wirklich wenig. Daher wäre hier mal der Fall, dass wir einen signifikanten aber nicht relevanten Unterschied vorliegen haben.</span>
<span id="cb62-486"><a href="#cb62-486" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-489"><a href="#cb62-489" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-490"><a href="#cb62-490" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb62-491"><a href="#cb62-491" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb62-492"><a href="#cb62-492" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb62-493"><a href="#cb62-493" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-log-mod-ordinal-broc</span></span>
<span id="cb62-494"><a href="#cb62-494" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-align: center</span></span>
<span id="cb62-495"><a href="#cb62-495" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 4</span></span>
<span id="cb62-496"><a href="#cb62-496" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 4</span></span>
<span id="cb62-497"><a href="#cb62-497" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Säulendigramm der mittleren Boniturnote des Brokkoli aus einer ordinalen Regression. Das `clm()`-Modell berechnet das mittlere Boniturnote für den Faktor `fert_amount`. Das *compact letter display* wird dann in `{emmeans}` generiert. Wir nutzen hier den Standardfehler, da die Standardabweichung mit der großen Fallzahl rießig wäre."</span></span>
<span id="cb62-498"><a href="#cb62-498" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-subcap: </span></span>
<span id="cb62-499"><a href="#cb62-499" aria-hidden="true" tabindex="-1"></a><span class="co">#|   - "Reduzierte Boniturskala."</span></span>
<span id="cb62-500"><a href="#cb62-500" aria-hidden="true" tabindex="-1"></a><span class="co">#|   - "Volle Boniturskala."</span></span>
<span id="cb62-501"><a href="#cb62-501" aria-hidden="true" tabindex="-1"></a><span class="co">#| layout-nrow: 1</span></span>
<span id="cb62-502"><a href="#cb62-502" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-503"><a href="#cb62-503" aria-hidden="true" tabindex="-1"></a>emm_obj <span class="sc">|&gt;</span> </span>
<span id="cb62-504"><a href="#cb62-504" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">|&gt;</span> </span>
<span id="cb62-505"><a href="#cb62-505" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> fert_amount, <span class="at">y =</span> mean.class, <span class="at">fill =</span> fert_amount)) <span class="sc">+</span></span>
<span id="cb62-506"><a href="#cb62-506" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> </span>
<span id="cb62-507"><a href="#cb62-507" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Mittlere Boniturnote"</span>, <span class="at">x =</span> <span class="st">"Düngemenge [mg/l]"</span>,</span>
<span id="cb62-508"><a href="#cb62-508" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">"Düngemenge [mg/l]"</span>) <span class="sc">+</span></span>
<span id="cb62-509"><a href="#cb62-509" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb62-510"><a href="#cb62-510" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">str_trim</span>(.group), <span class="at">y =</span> mean.class <span class="sc">+</span> SE <span class="sc">+</span> <span class="fl">0.01</span>), <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.25</span>) <span class="sc">+</span></span>
<span id="cb62-511"><a href="#cb62-511" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> mean.class<span class="sc">-</span>SE, <span class="at">ymax =</span> mean.class<span class="sc">+</span>SE),</span>
<span id="cb62-512"><a href="#cb62-512" aria-hidden="true" tabindex="-1"></a>                <span class="at">width =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb62-513"><a href="#cb62-513" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_okabeito</span>() <span class="sc">+</span></span>
<span id="cb62-514"><a href="#cb62-514" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb62-515"><a href="#cb62-515" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.5</span>, <span class="fl">1.0</span>, <span class="fl">1.5</span>, <span class="fl">2.0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">2</span>))</span>
<span id="cb62-516"><a href="#cb62-516" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-517"><a href="#cb62-517" aria-hidden="true" tabindex="-1"></a>emm_obj <span class="sc">|&gt;</span> </span>
<span id="cb62-518"><a href="#cb62-518" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">|&gt;</span> </span>
<span id="cb62-519"><a href="#cb62-519" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> fert_amount, <span class="at">y =</span> mean.class, <span class="at">fill =</span> fert_amount)) <span class="sc">+</span></span>
<span id="cb62-520"><a href="#cb62-520" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> </span>
<span id="cb62-521"><a href="#cb62-521" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Mittlere Boniturnote"</span>, <span class="at">x =</span> <span class="st">"Düngemenge [mg/l]"</span>,</span>
<span id="cb62-522"><a href="#cb62-522" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">"Düngemenge [mg/l]"</span>) <span class="sc">+</span></span>
<span id="cb62-523"><a href="#cb62-523" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb62-524"><a href="#cb62-524" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">str_trim</span>(.group), <span class="at">y =</span> mean.class <span class="sc">+</span> SE <span class="sc">+</span> <span class="fl">0.01</span>), <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.25</span>) <span class="sc">+</span></span>
<span id="cb62-525"><a href="#cb62-525" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> mean.class<span class="sc">-</span>SE, <span class="at">ymax =</span> mean.class<span class="sc">+</span>SE),</span>
<span id="cb62-526"><a href="#cb62-526" aria-hidden="true" tabindex="-1"></a>                <span class="at">width =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb62-527"><a href="#cb62-527" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_okabeito</span>() <span class="sc">+</span></span>
<span id="cb62-528"><a href="#cb62-528" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb62-529"><a href="#cb62-529" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">9</span>, <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">9</span>))</span>
<span id="cb62-530"><a href="#cb62-530" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-531"><a href="#cb62-531" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb62-532"><a href="#cb62-532" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-533"><a href="#cb62-533" aria-hidden="true" tabindex="-1"></a><span class="fu">## Multinomiale logistische Regression {#sec-multinom}</span></span>
<span id="cb62-534"><a href="#cb62-534" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-535"><a href="#cb62-535" aria-hidden="true" tabindex="-1"></a>Was machen wir in eine multinomialen logistische Regression? Im Gegensatz zu der ordinalen Regression haben wir in der multinominalen Regression keine Ordnung in unserem Outcome. Das macht die Sache dann schon eine Nummer komplizierter. Und wir lösen dieses Problem indem wir ein Level des Outcomes oder eben eine Kategorie des Outcomes als *Referenz* definieren. Dann haben wir wieder unsere Ordnung drin. Und die Definition der Referenz ist auch manchmal das schwerste Unterfangen. Wenn ich keine Ordnung in meinem Outcome habe, wie soll ich dann die Referenz bestimmen? Aber das ist dann immer eine Frage an den konkreten Datensatz. Hier basteln wir uns ja die Fragestellung so hin, dass es passt.</span>
<span id="cb62-536"><a href="#cb62-536" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-537"><a href="#cb62-537" aria-hidden="true" tabindex="-1"></a>::: column-margin</span>
<span id="cb62-538"><a href="#cb62-538" aria-hidden="true" tabindex="-1"></a>Ich verweise gerne hier auf das tolle Tutorium <span class="co">[</span><span class="ot">Multinomial Logistic Regression \| R Data Analysis Examples</span><span class="co">](https://stats.oarc.ucla.edu/r/dae/multinomial-logistic-regression/)</span>. Hier erfährst du noch mehr über die Analyse der multinominale logistischen Regression.</span>
<span id="cb62-539"><a href="#cb62-539" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb62-540"><a href="#cb62-540" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-541"><a href="#cb62-541" aria-hidden="true" tabindex="-1"></a>Um eine Referenz in dem Outcome zu definieren nutzen wir die Funktion <span class="in">`relevel()`</span> und setzen als unsere Referenz das Level <span class="in">`frail`</span> aus unserem Outcome <span class="in">`frailty`</span>. Wir hätten auch jedes andere Level als Referenz nehmen können. Zu dieser Referenz werden wir jetzt unser Modell anpassen. Ich nehme immer als Referenz das *schlechteste* im Sinne von *nicht gut*. In unserem Fall ist das eben das Level <span class="in">`frail`</span>.</span>
<span id="cb62-542"><a href="#cb62-542" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-545"><a href="#cb62-545" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-546"><a href="#cb62-546" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb62-547"><a href="#cb62-547" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb62-548"><a href="#cb62-548" aria-hidden="true" tabindex="-1"></a>pig_tbl <span class="ot">&lt;-</span> pig_tbl <span class="sc">|&gt;</span> </span>
<span id="cb62-549"><a href="#cb62-549" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">frailty_fac =</span> <span class="fu">relevel</span>(frailty_fac, <span class="at">ref =</span> <span class="st">"frail"</span>))</span>
<span id="cb62-550"><a href="#cb62-550" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-551"><a href="#cb62-551" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-552"><a href="#cb62-552" aria-hidden="true" tabindex="-1"></a>Nachdem wir unsere Referenz definiert haben, können wir wieder recht einfach mit der Funktion <span class="in">`multinom()`</span> aus dem Paket <span class="in">`{nnet}`</span> die multinominalen Regression rechnen. Ich mache keinen Hehl daraus. Ich mag die Funktion nicht, da die Ausgabe der Funktion sehr unsortiert ist und uns nicht gerade die Arbeit erleichtert. Auch schweigt die Funktion nicht, sondern muss immer eine Ausgabe wiedergeben. Finde ich sehr unschön.</span>
<span id="cb62-553"><a href="#cb62-553" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-556"><a href="#cb62-556" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-557"><a href="#cb62-557" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb62-558"><a href="#cb62-558" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb62-559"><a href="#cb62-559" aria-hidden="true" tabindex="-1"></a>multinom_fit <span class="ot">&lt;-</span> <span class="fu">multinom</span>(frailty_fac <span class="sc">~</span> age <span class="sc">+</span> sex <span class="sc">+</span> location <span class="sc">+</span> activity <span class="sc">+</span> crp <span class="sc">+</span> bloodpressure <span class="sc">+</span> weight <span class="sc">+</span> creatinin, </span>
<span id="cb62-560"><a href="#cb62-560" aria-hidden="true" tabindex="-1"></a>                         <span class="at">data =</span> pig_tbl)</span>
<span id="cb62-561"><a href="#cb62-561" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-562"><a href="#cb62-562" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-563"><a href="#cb62-563" aria-hidden="true" tabindex="-1"></a>Die Standardausgabe von <span class="in">`multinom()`</span> hat wiederum keine $p$-Werte und wir könnten uns über die Funktion <span class="in">`pnorm()`</span> wiederum aus den $t$-Werten unsere $p$-Werte berechnen. Leider erspart sich <span class="in">`multinom()`</span> selbst den Schritt die $t$-Werte zu berechnen, so dass wir die $t$-Werte selber berechnen müssen. Nicht das es ein Problem wäre, aber schön ist das alles nicht. Im Folgenden siehst du dann einmal die Berechnung der $p$-Werte über die Berechnung der Teststatistik.</span>
<span id="cb62-564"><a href="#cb62-564" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-567"><a href="#cb62-567" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-568"><a href="#cb62-568" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb62-569"><a href="#cb62-569" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb62-570"><a href="#cb62-570" aria-hidden="true" tabindex="-1"></a>z_mat <span class="ot">&lt;-</span> <span class="fu">summary</span>(multinom_fit)<span class="sc">$</span>coefficients<span class="sc">/</span><span class="fu">summary</span>(multinom_fit)<span class="sc">$</span>standard.errors</span>
<span id="cb62-571"><a href="#cb62-571" aria-hidden="true" tabindex="-1"></a>p_n <span class="ot">&lt;-</span> (<span class="dv">1</span> <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="fu">abs</span>(z_mat), <span class="dv">0</span>, <span class="dv">1</span>)) <span class="sc">*</span> <span class="dv">2</span></span>
<span id="cb62-572"><a href="#cb62-572" aria-hidden="true" tabindex="-1"></a>p_n</span>
<span id="cb62-573"><a href="#cb62-573" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-574"><a href="#cb62-574" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-575"><a href="#cb62-575" aria-hidden="true" tabindex="-1"></a>Jetzt müssten wir diese $pp$-Werte aus der Matrix noch mit unseren Koeffizienten verbauen und da hört es dann bei mir auf. Insbesondere da wir ja mit <span class="in">`model_parameters()`</span> eine Funktion haben, die uns in diesem Fall wirklich gut helfen kann. Wir nehmen hier zwar die $t$-Verteilung an und haben damit leicht höre $p$-Werte, aber da wir eine so große Anzahl an Beobachtungen haben, fällt dieser Unterschied nicht ins Gewicht.</span>
<span id="cb62-576"><a href="#cb62-576" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-579"><a href="#cb62-579" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-580"><a href="#cb62-580" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb62-581"><a href="#cb62-581" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb62-582"><a href="#cb62-582" aria-hidden="true" tabindex="-1"></a>multinom_fit <span class="sc">|&gt;</span> <span class="fu">model_parameters</span>(<span class="at">exponentiate =</span> <span class="cn">TRUE</span>)</span>
<span id="cb62-583"><a href="#cb62-583" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-584"><a href="#cb62-584" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-585"><a href="#cb62-585" aria-hidden="true" tabindex="-1"></a>Was sehen wir? Zuerst haben wir etwas Glück. Den unsere Referenzlevel macht dann doch Sinn. Wir vergleichen ja das Outcomelevel <span class="in">`robust`</span> zu <span class="in">`frail`</span> und das Outcomelevel <span class="in">`pre-frail`</span> zu <span class="in">`frail`</span>. Dann haben wir noch das Glück, dass durch unsere Ordnung dann auch <span class="in">`frail`</span> das schlechtere Outcome ist, so dass wir die $OR$ als Risiko oder als protektiv interpretieren können. Nehmen wir als Beispiel einmal die Variable <span class="in">`crp`</span>. Der CRP Wert höht das Risiko für <span class="in">`frail`</span>. Das macht schonmal so Sinn. Und zum anderen ist der Effekt bei dem Vergleich von <span class="in">`pre-frail`</span> zu <span class="in">`frail`</span> mit $1.16$ nicht so große wie bei <span class="in">`robust`</span> zu <span class="in">`frail`</span> mit $1.26$. Das macht auch Sinn. Deshalb passt es hier einigermaßen.</span>
<span id="cb62-586"><a href="#cb62-586" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-587"><a href="#cb62-587" aria-hidden="true" tabindex="-1"></a>In @tbl-tbl-regression-multinom sehen wir nochmal die Ausgabe von einer multinominalen Regression durch die Funktion <span class="in">`tbl_regression()`</span> aufgearbeitet.</span>
<span id="cb62-588"><a href="#cb62-588" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-591"><a href="#cb62-591" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-592"><a href="#cb62-592" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb62-593"><a href="#cb62-593" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb62-594"><a href="#cb62-594" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-tbl-regression-multinom</span></span>
<span id="cb62-595"><a href="#cb62-595" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Tabelle der Ergebnisse der multinominalen Regression."</span></span>
<span id="cb62-596"><a href="#cb62-596" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-597"><a href="#cb62-597" aria-hidden="true" tabindex="-1"></a>multinom_fit <span class="sc">|&gt;</span> </span>
<span id="cb62-598"><a href="#cb62-598" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tbl_regression</span>(<span class="at">exponentiate =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb62-599"><a href="#cb62-599" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_flex_table</span>()</span>
<span id="cb62-600"><a href="#cb62-600" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-601"><a href="#cb62-601" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-602"><a href="#cb62-602" aria-hidden="true" tabindex="-1"></a>Leider wird die Sache mit einer multinominalen Regression sehr unangenehm, wenn wir wirklich nicht sortierbare Level im Outcome haben. Dann haben wir aber noch ein Möglichkeit der multinominalen Regression zu entkommen. Wir rechnen einfach separate logistische Regressionen. Die logistischen Regressionen können wir dann ja separat gut interpretieren.</span>
<span id="cb62-603"><a href="#cb62-603" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-604"><a href="#cb62-604" aria-hidden="true" tabindex="-1"></a><span class="fu">## Logistische Regression als Ausweg</span></span>
<span id="cb62-605"><a href="#cb62-605" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-606"><a href="#cb62-606" aria-hidden="true" tabindex="-1"></a>::: callout-important</span>
<span id="cb62-607"><a href="#cb62-607" aria-hidden="true" tabindex="-1"></a><span class="fu">## Bitte Beachten bei der Berechung über separate logistische Regressionen</span></span>
<span id="cb62-608"><a href="#cb62-608" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-609"><a href="#cb62-609" aria-hidden="true" tabindex="-1"></a>Durch die Verwendung von separaten logistischen Regressionen vermindern wir die Fallzahl je gerechneter Regression, so dass wir *größere* $p$-Werte erhalten werden als in einer multinominalen Regression. Oder andersherum, durch die verminderte Fallzahl in den separaten logistischen Regressionen haben wir eine geringere Power einen signifikanten Unterschied nachzuweisen.</span>
<span id="cb62-610"><a href="#cb62-610" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb62-611"><a href="#cb62-611" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-612"><a href="#cb62-612" aria-hidden="true" tabindex="-1"></a>Es gibt den einen Ring um sich zu knechten. Und das ist die logistische Regression. Gut die logistische Regression hilft jetzt nicht, wenn es mit Boniturnoten zu tun hast, aber wenn wir wenige Level im Outcome haben. In unserem Fall haben wir ja drei Level vorliegen, da können wir dann jeweils ein Level rausschmeißen und haben dann nur noch ein binäres Outcome. Das ist auch die zentrale Idee. Wir entfernen immer alle Level bis wir nur noch zwei Level in unserem Outcome haben und rechnen für diese beiden Level dann eine logistische Regression.</span>
<span id="cb62-613"><a href="#cb62-613" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-614"><a href="#cb62-614" aria-hidden="true" tabindex="-1"></a>Schauen wir uns erstmal an, wie sich die Daten über die drei Kategorien in unserem Outcome verteilen. Wenn wir eine Kategorie im Outcome kaum vorliegen haben, könnten wir diese Daten vielleicht mit einer anderen Kategorie zusammenlegen oder aber müssen von unserer Idee hier Abstand nehmen.</span>
<span id="cb62-615"><a href="#cb62-615" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-618"><a href="#cb62-618" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-619"><a href="#cb62-619" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb62-620"><a href="#cb62-620" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb62-621"><a href="#cb62-621" aria-hidden="true" tabindex="-1"></a>pig_tbl<span class="sc">$</span>frailty_fac <span class="sc">|&gt;</span> <span class="fu">tabyl</span>()</span>
<span id="cb62-622"><a href="#cb62-622" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-623"><a href="#cb62-623" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-624"><a href="#cb62-624" aria-hidden="true" tabindex="-1"></a>Wir haben nicht so viele Beobachtungen in der Kategorie <span class="in">`frail`</span>. Wir könnten also auch die beiden Faktorlevel <span class="in">`pre-frail`</span> und <span class="in">`frail`</span> zusammenlegen. Das R Paket <span class="in">`{forcats}`</span> liefert sehr viele Funktion, die dir helfen Faktoren zu kodieren und zu ändern.</span>
<span id="cb62-625"><a href="#cb62-625" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-628"><a href="#cb62-628" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-629"><a href="#cb62-629" aria-hidden="true" tabindex="-1"></a>pig_tbl<span class="sc">$</span>frailty_fac <span class="sc">|&gt;</span> </span>
<span id="cb62-630"><a href="#cb62-630" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fct_recode</span>(<span class="at">frail_pre_frail =</span> <span class="st">"frail"</span>, <span class="at">frail_pre_frail =</span> <span class="st">"pre-frail"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb62-631"><a href="#cb62-631" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>()</span>
<span id="cb62-632"><a href="#cb62-632" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-633"><a href="#cb62-633" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-634"><a href="#cb62-634" aria-hidden="true" tabindex="-1"></a>Das ist jetzt aber nur eine Demonstration für die Zusammenlegung. Wir wollen jetzt trotzdem unsere drei logistischen Regressionen rechnen. Warum drei? Wir haben ja drei Level in unserem Outcome und wir werden jetzt uns drei Datensätze so bauen, dass in jdem Datensatz unser Outcome immer nur zwei Level hat. Die einzelnen Datensätze speichern wir dann in einer Liste.</span>
<span id="cb62-635"><a href="#cb62-635" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-638"><a href="#cb62-638" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-639"><a href="#cb62-639" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb62-640"><a href="#cb62-640" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb62-641"><a href="#cb62-641" aria-hidden="true" tabindex="-1"></a>pig_lst <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">robust_prefrail =</span> <span class="fu">filter</span>(pig_tbl, frailty_fac <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"robust"</span>, <span class="st">"pre-frail"</span>)),</span>
<span id="cb62-642"><a href="#cb62-642" aria-hidden="true" tabindex="-1"></a>                <span class="at">robust_frail =</span> <span class="fu">filter</span>(pig_tbl, frailty_fac <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"robust"</span>, <span class="st">"frail"</span>)),</span>
<span id="cb62-643"><a href="#cb62-643" aria-hidden="true" tabindex="-1"></a>                <span class="at">prefrail_frail =</span> <span class="fu">filter</span>(pig_tbl, frailty_fac <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"pre-frail"</span>, <span class="st">"frail"</span>)))</span>
<span id="cb62-644"><a href="#cb62-644" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-645"><a href="#cb62-645" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-646"><a href="#cb62-646" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-647"><a href="#cb62-647" aria-hidden="true" tabindex="-1"></a>Wir können das auch fancy. Und das demonstriere ich dann mal hier. Wenn wir die Funktion <span class="in">`combn()`</span> nutzen erhalten wir eine Liste mit allen zweier Kombinationen wieder. Diese Liste können wir dann in die Funktion <span class="in">`map()`</span> stecken, die dann über die Liste unserer Kombinationen iteriert. Pro Liste filtern <span class="in">`map()`</span> dann den Datensatz für uns heraus. Ja, ist ein wenig *over the top*, aber ich wollte das mal für mich mit <span class="in">`map()`</span> ausprobieren und es passte hier so schön.</span>
<span id="cb62-648"><a href="#cb62-648" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-651"><a href="#cb62-651" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-652"><a href="#cb62-652" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb62-653"><a href="#cb62-653" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb62-654"><a href="#cb62-654" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-655"><a href="#cb62-655" aria-hidden="true" tabindex="-1"></a>pig_fancy_lst <span class="ot">&lt;-</span> <span class="fu">combn</span>(<span class="fu">c</span>(<span class="st">"robust"</span>, <span class="st">"pre-frail"</span>, <span class="st">"frail"</span>), <span class="dv">2</span>, <span class="at">simplify =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb62-656"><a href="#cb62-656" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="sc">~</span><span class="fu">filter</span>(pig_tbl, frailty_fac <span class="sc">%in%</span> .x)) </span>
<span id="cb62-657"><a href="#cb62-657" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-658"><a href="#cb62-658" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-659"><a href="#cb62-659" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-660"><a href="#cb62-660" aria-hidden="true" tabindex="-1"></a>Egal wie du auf die Liste gekommen bist, wir müssen noch die überflüssigen Level *droppen*. Keine Ahnung was das deutsche Wort ist. Vermutlich ist das deutsche Wort dann entfernen. Dann können wir für jeden der Listeneinträge die logistische Regression rechnen. Am Ende lassen wir uns noch die exponierten Modellfits ausgeben. In der letzten Zeile entferne ich noch den Intercept von der Ausgabe des Modells. Den Intercept brauchen wir nun wirklich nicht.</span>
<span id="cb62-661"><a href="#cb62-661" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-664"><a href="#cb62-664" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-665"><a href="#cb62-665" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb62-666"><a href="#cb62-666" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb62-667"><a href="#cb62-667" aria-hidden="true" tabindex="-1"></a>pig_lst <span class="sc">|&gt;</span> </span>
<span id="cb62-668"><a href="#cb62-668" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="sc">~</span><span class="fu">mutate</span>(.x, <span class="at">frailty_fac =</span> <span class="fu">fct_drop</span>(frailty_fac))) <span class="sc">|&gt;</span> </span>
<span id="cb62-669"><a href="#cb62-669" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="sc">~</span><span class="fu">glm</span>(frailty_fac <span class="sc">~</span> age <span class="sc">+</span> sex <span class="sc">+</span> location <span class="sc">+</span> activity <span class="sc">+</span> crp <span class="sc">+</span> bloodpressure <span class="sc">+</span> weight <span class="sc">+</span> creatinin, </span>
<span id="cb62-670"><a href="#cb62-670" aria-hidden="true" tabindex="-1"></a>           <span class="at">data =</span> .x, <span class="at">family =</span> binomial)) <span class="sc">|&gt;</span> </span>
<span id="cb62-671"><a href="#cb62-671" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(model_parameters, <span class="at">exponentiate =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb62-672"><a href="#cb62-672" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(extract, <span class="sc">-</span><span class="dv">1</span>, )</span>
<span id="cb62-673"><a href="#cb62-673" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-674"><a href="#cb62-674" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-675"><a href="#cb62-675" aria-hidden="true" tabindex="-1"></a>Eine Sache ist super wichtig zu wissen. Wie oben schon geschrieben, durch die Verwendung von separaten logistischen Regressionen vermindern wir die Fallzahl je Regression, so dass wir größere $p$-Werte erhalten werden, als in einer multinominalen Regression. Das ist der Preis, den wir dafür bezahlen müssen, dass wir besser zu interpretierende Koeffizienten erhalten. Und das ist auch vollkommen in Ordnung. Ich selber habe lieber Koeffizienten, die ich interpretieren kann, als unklare Effekte mit niedrigen $p$-Werten.</span>
<span id="cb62-676"><a href="#cb62-676" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-677"><a href="#cb62-677" aria-hidden="true" tabindex="-1"></a>Schauen wir einmal auf unseren Goldstandard, der Variable für den CRP-Wert. Die Variable haben wir ja jetzt immer mal wieder in diesem Kapitel interpretiert und uns angeschaut. Die Variable <span class="in">`crp`</span> passt von dem Effekt jedenfalls gut in den Kontext mit rein. Die Effekte sind ähnlich wie in der multinominalen Regression. Wir haben eben nur größere $p$-Werte. Jetzt müssen wir entscheiden, wir können vermutlich die getrennten logistischen Regressionen besser beschreiben und interpretieren. Das ist *besonders* der Fall, wenn wir wirklich Probleme haben eine Referenz in der multinominalen Regression festzulegen. Dann würde ich immer zu den getrennten logistischen Regressionen greifen als eine schief interpretierte multinominale Regression.</span>
<span id="cb62-678"><a href="#cb62-678" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-679"><a href="#cb62-679" aria-hidden="true" tabindex="-1"></a><span class="fu">## Referenzen {.unnumbered}</span></span>
</code><button title="In die Zwischenablage kopieren" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Bio Data Science wurde von <a href="https://www.hs-osnabrueck.de/prof-dr-jochen-kruppa/">Jochen Kruppa-Scheetz</a> geschrieben.</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/jkruppa/jkruppa.github.io/edit/master/stat-modeling-multinom.qmd" class="toc-action"><i class="bi bi-github"></i>Seite editieren</a></li><li><a href="https://github.com/jkruppa/jkruppa.github.io/issues/new" class="toc-action"><i class="bi empty"></i>Problem melden</a></li><li><a href="https://github.com/jkruppa/jkruppa.github.io/blob/master/stat-modeling-multinom.qmd" class="toc-action"><i class="bi empty"></i>Quellcode anzeigen</a></li></ul></div></div>
    <div class="nav-footer-right">
<p>Dieses Openbook wurde mit <a href="https://quarto.org/">Quarto</a> erstellt.</p>
</div>
  </div>
</footer>
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




</body></html>