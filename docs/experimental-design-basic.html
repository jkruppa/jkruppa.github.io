<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="de" xml:lang="de"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.552">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="Ein Kochbuch mit Rezepten aus der Bio Data Science, Biostatistik, Biometrie und Statistik">

<title>Bio Data Science - 24&nbsp; Einfache Designs</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./experimental-design-advanced.html" rel="next">
<link href="./experimental-design-r.html" rel="prev">
<link href="./cover2024_favi.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script src="site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Keine Treffer",
    "search-matching-documents-text": "Treffer",
    "search-copy-link-title": "Link in die Suche kopieren",
    "search-hide-matches-text": "Zusätzliche Treffer verbergen",
    "search-more-match-text": "weitere Treffer in diesem Dokument",
    "search-more-matches-text": "weitere Treffer in diesem Dokument",
    "search-clear-button-title": "Zurücksetzen",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Abbrechen",
    "search-submit-button-title": "Abschicken",
    "search-label": "Suchen"
  }
}</script>
<meta name="mermaid-theme" content="neutral">
<script src="site_libs/quarto-diagram/mermaid.min.js"></script>
<script src="site_libs/quarto-diagram/mermaid-init.js"></script>
<link href="site_libs/quarto-diagram/mermaid.css" rel="stylesheet">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<meta property="og:title" content="Bio Data Science - 24&nbsp; Einfache Designs">
<meta property="og:description" content="Ein Kochbuch mit Rezepten der Bio Data Science, Biostatistik, Biometrie und Statistik">
<meta property="og:image" content="https://github.com/jkruppa/jkruppa.github.io/raw/master/cover2024.png">
<meta property="og:site_name" content="Bio Data Science">
</head>

<body class="nav-sidebar floating slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Seitenleiste umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./experimental-design-preface.html">Experimentelle Designs</a></li><li class="breadcrumb-item"><a href="./experimental-design-basic.html"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Einfache Designs</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Seitenleiste umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Bio Data Science</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/jkruppa/jkruppa.github.io/" title="Quellcode" class="quarto-navigation-tool px-1" aria-label="Quellcode"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=|url|">
              <i class="bi bi-bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=|url|">
              <i class="bi bi-bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=|url|">
              <i class="bi bi-bi-linkedin pe-1"></i>
            LinkedIn
            </a>
          </li>
      </ul>
    </div>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Dunkelmodus umschalten"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Suchen"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Willkommen</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./organisation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Organisation</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./literature.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Bibliothek</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./forschungsprozess.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Forschungsprozess</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./abschlussarbeit.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Abschlussarbeit</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./example-preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Datenbeispiele</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./example-fleas-dogs-cats.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Von Flöhen auf Tieren</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./example-gummi-bears.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Von Gummibärchen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./example-complex.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Von komplexeren Daten</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./programing-preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Programmieren in R</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./programing-letters-numbers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Buchstaben und Zahlen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./programing-basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Operatoren, Funktionen und Pakete</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./programing-import.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Daten einlesen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./programing-dplyr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Daten bearbeiten</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./programing-strings.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Reguläre Ausdrücke</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./programing-purrr-furrr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Ein <code>purrr</code> Cookbook</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./programing-quarto-shiny.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Quarto und Shiny App</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./eda-preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Explorative Datenanalyse</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./eda-descriptive.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Deskriptive Statistik</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./eda-ggplot.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Visualisierung von Daten</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./eda-distribution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Verteilung von Daten</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./eda-transform.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Transformieren von Daten</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./stat-tests-preface-theory.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Testen von Hypothesen</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-basic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Die Testentscheidung</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-theorie.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Die Testtheorie</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-effect.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Der Effektschätzer</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-pretest.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Der Pre-Test oder Vortest</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./experimental-design-preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Experimentelle Designs</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./experimental-design-r.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Versuchsplanung in R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./experimental-design-basic.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Einfache Designs</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./experimental-design-advanced.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Fortgeschrittene Designs</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./experimental-design-samplesize.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Fallzahlplanung</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./stat-tests-preface-app.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Statistische Gruppenvergleiche</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Testen in R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-ttest.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Der t-Test</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-anova.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Die ANOVA</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-ancova.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">Die ANCOVA</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-utest.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">Der Wilcoxon-Mann-Whitney-Test</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-kruskal.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">Der Kruskal-Wallis-Test</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-friedman.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">Der Friedman Test</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-chi-test.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">Der <span class="math inline">\(\mathcal{X}^2\)</span>-Test</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-anteil-test.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">35</span>&nbsp; <span class="chapter-title">Der Anteilstest</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-diagnostic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">36</span>&nbsp; <span class="chapter-title">Der diagnostische Test</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-trendtest.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">37</span>&nbsp; <span class="chapter-title">Der Trendtest</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-permutationstest.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">38</span>&nbsp; <span class="chapter-title">Der Permutationstest</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-posthoc.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">39</span>&nbsp; <span class="chapter-title">Der Post-hoc-Test</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./stat-linear-reg-preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Grundlagen des Modellierens</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-linear-reg-basic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">40</span>&nbsp; <span class="chapter-title">Simple lineare Regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-basic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">41</span>&nbsp; <span class="chapter-title">Multiple lineare Regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-linear-reg-quality.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">42</span>&nbsp; <span class="chapter-title">Modelgüte</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-linear-reg-corr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">43</span>&nbsp; <span class="chapter-title">Korrelation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-outlier.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">44</span>&nbsp; <span class="chapter-title">Ausreißer</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-variable-selection.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">45</span>&nbsp; <span class="chapter-title">Variablenselektion</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-missing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">46</span>&nbsp; <span class="chapter-title">Fehlende Werte</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-sensitivity.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">47</span>&nbsp; <span class="chapter-title">Sensitivitätsanalyse</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./stat-modeling-preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Statistisches Modellieren</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">48</span>&nbsp; <span class="chapter-title">Modellieren in R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-gaussian.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">49</span>&nbsp; <span class="chapter-title">Gaussian Regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-poisson.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">50</span>&nbsp; <span class="chapter-title">Poisson Regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-beta.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">51</span>&nbsp; <span class="chapter-title">Beta Regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-multinom.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">52</span>&nbsp; <span class="chapter-title">Multinomiale / Ordinale Regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-logistic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">53</span>&nbsp; <span class="chapter-title">Logistische Regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-prob-model.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">54</span>&nbsp; <span class="chapter-title">Linear Probability Model</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-mixed.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">55</span>&nbsp; <span class="chapter-title">Lineare gemischte Modelle</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-gee.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">56</span>&nbsp; <span class="chapter-title">Generalized Estimating Equations (GEE)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-non-linear.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">57</span>&nbsp; <span class="chapter-title">Nicht lineare Regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-robust-quantile.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">58</span>&nbsp; <span class="chapter-title">Robuste und Quantilesregression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-survival.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">59</span>&nbsp; <span class="chapter-title">Überlebenszeitanalysen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-noninferiority.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">60</span>&nbsp; <span class="chapter-title">Äquivalenz oder Nichtunterlegenheit</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-meta.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">61</span>&nbsp; <span class="chapter-title">Metaanalysen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-cluster.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">62</span>&nbsp; <span class="chapter-title">Clusteranalysen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-pca.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">63</span>&nbsp; <span class="chapter-title">Multivariate Verfahren</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-survey.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">64</span>&nbsp; <span class="chapter-title">Fragebogenanalyse</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./time-space-preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Zeitliche und räumliche Analysen</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./time-space-pseudo-time-series.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">65</span>&nbsp; <span class="chapter-title">Pseudo Zeitreihen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./time-space-time-series.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">66</span>&nbsp; <span class="chapter-title">Zeitreihen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./time-space-spatial-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">67</span>&nbsp; <span class="chapter-title">Räumliche Daten</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./classification-preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Klassifikation oder maschinelles Lernen</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./classification-basic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">68</span>&nbsp; <span class="chapter-title">Grundlagen der Klassifikation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./classification-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">69</span>&nbsp; <span class="chapter-title">Data splitting</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./classification-pre-processing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">70</span>&nbsp; <span class="chapter-title">Data preprocessing</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./classification-model-compare.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">71</span>&nbsp; <span class="chapter-title">Vergleich von Algorithmen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./classification-knn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">72</span>&nbsp; <span class="chapter-title"><span class="math inline">\(k\)</span> nearest neighbor</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./classification-randomforest.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">73</span>&nbsp; <span class="chapter-title">Decision trees</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./classification-svm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">74</span>&nbsp; <span class="chapter-title">Support vector machines</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./classification-neural-networks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">75</span>&nbsp; <span class="chapter-title">Neural networks</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./abspann.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Abspann</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-11" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app-spielecke.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">76</span>&nbsp; <span class="chapter-title">Spielecke</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="2">
    <h2 id="toc-title">Inhaltsverzeichnis</h2>
   
  <ul>
  <li><a href="#genutzte-r-pakete" id="toc-genutzte-r-pakete" class="nav-link active" data-scroll-target="#genutzte-r-pakete"><span class="header-section-number">24.1</span> Genutzte R Pakete</a></li>
  <li><a href="#sec-crd" id="toc-sec-crd" class="nav-link" data-scroll-target="#sec-crd"><span class="header-section-number">24.2</span> Complete randomized design (CRD)</a>
  <ul class="collapse">
  <li><a href="#mit-expand_grid" id="toc-mit-expand_grid" class="nav-link" data-scroll-target="#mit-expand_grid"><span class="header-section-number">24.2.1</span> … mit <code>expand_grid()</code></a></li>
  <li><a href="#mit-fieldhub" id="toc-mit-fieldhub" class="nav-link" data-scroll-target="#mit-fieldhub"><span class="header-section-number">24.2.2</span> … mit <code>{FielDHub}</code></a></li>
  <li><a href="#mit-agricolae" id="toc-mit-agricolae" class="nav-link" data-scroll-target="#mit-agricolae"><span class="header-section-number">24.2.3</span> … mit <code>{agricolae}</code></a></li>
  </ul></li>
  <li><a href="#sec-rcbd" id="toc-sec-rcbd" class="nav-link" data-scroll-target="#sec-rcbd"><span class="header-section-number">24.3</span> Randomized complete block design (RCBD)</a>
  <ul class="collapse">
  <li><a href="#mit-expand_grid-1" id="toc-mit-expand_grid-1" class="nav-link" data-scroll-target="#mit-expand_grid-1"><span class="header-section-number">24.3.1</span> … mit <code>expand_grid()</code></a></li>
  <li><a href="#mit-fieldhub-1" id="toc-mit-fieldhub-1" class="nav-link" data-scroll-target="#mit-fieldhub-1"><span class="header-section-number">24.3.2</span> … mit <code>{FielDHub}</code></a></li>
  <li><a href="#mit-agricolae-1" id="toc-mit-agricolae-1" class="nav-link" data-scroll-target="#mit-agricolae-1"><span class="header-section-number">24.3.3</span> … mit <code>{agricolae}</code></a></li>
  </ul></li>
  <li><a href="#sec-lsd" id="toc-sec-lsd" class="nav-link" data-scroll-target="#sec-lsd"><span class="header-section-number">24.4</span> Latin square design (LSD)</a>
  <ul class="collapse">
  <li><a href="#mit-fieldhub-2" id="toc-mit-fieldhub-2" class="nav-link" data-scroll-target="#mit-fieldhub-2"><span class="header-section-number">24.4.1</span> … mit <code>{FielDHub}</code></a></li>
  <li><a href="#mit-agricolae-2" id="toc-mit-agricolae-2" class="nav-link" data-scroll-target="#mit-agricolae-2"><span class="header-section-number">24.4.2</span> … mit <code>{agricolae}</code></a></li>
  <li><a href="#mit-dae" id="toc-mit-dae" class="nav-link" data-scroll-target="#mit-dae"><span class="header-section-number">24.4.3</span> … mit <code>{dae}</code></a></li>
  </ul></li>
  <li><a href="#spezialfälle" id="toc-spezialfälle" class="nav-link" data-scroll-target="#spezialfälle"><span class="header-section-number">24.5</span> Spezialfälle</a>
  <ul class="collapse">
  <li><a href="#sec-alpha" id="toc-sec-alpha" class="nav-link" data-scroll-target="#sec-alpha"><span class="header-section-number">24.5.1</span> Alpha design</a></li>
  <li><a href="#sec-augment" id="toc-sec-augment" class="nav-link" data-scroll-target="#sec-augment"><span class="header-section-number">24.5.2</span> Augmented design</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/jkruppa/jkruppa.github.io/edit/master/experimental-design-basic.qmd" class="toc-action"><i class="bi bi-github"></i>Seite editieren</a></li><li><a href="https://github.com/jkruppa/jkruppa.github.io/issues/new" class="toc-action"><i class="bi empty"></i>Problem melden</a></li><li><a href="https://github.com/jkruppa/jkruppa.github.io/blob/master/experimental-design-basic.qmd" class="toc-action"><i class="bi empty"></i>Quellcode anzeigen</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./experimental-design-preface.html">Experimentelle Designs</a></li><li class="breadcrumb-item"><a href="./experimental-design-basic.html"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Einfache Designs</span></a></li></ol></nav>
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title"><span id="sec-experimental-design-basic" class="quarto-section-identifier"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Einfache Designs</span></span></h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Gesamten Code zeigen</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Gesamten Code verbergen</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">Quellcode anzeigen</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p><em>Letzte Änderung am 23. March 2024 um 19:07:12</em></p>
<blockquote class="blockquote">
<p><em>“This is my favorite part about analytics: Taking boring flat data and bringing it to life through visualization.” — John Tukey”</em></p>
</blockquote>
<p>In diesem Kapitel wollen wir uns mit der Erstellung von einfachen experimentellen Designs beschäftigen. Dementsprechend schauen wir uns nur die drei folgenden Designs hier in diesem Kapitel an.</p>
<ul>
<li><a href="#sec-crd">Complete randomized design (CRD)</a></li>
<li><a href="#sec-rcbd">Randomized complete block design (RCBD)</a></li>
<li><a href="#sec-lsd">Latin square design (LSD)</a></li>
</ul>
<p>Als Spezialfälle dann noch folgende Designs am Ende des Kapitels.</p>
<ul>
<li><a href="#sec-alpha">Alpha design</a></li>
<li><a href="#sec-augment">Augmented design</a></li>
</ul>
<p>Dabei werden wir verschiedene Wege gehen. Leider geht es hier wirklich nicht mehr ohne eine Idee der Programmierung in R. Sonst kannst du leider dem Kapitel nicht folgen. Bitte schau auch nochmal in das vorherige Kapitel zur <a href="experimental-design-r.html">Versuchsplanung in R</a>. Wir schauen uns jetzt einmal die einfache Umsetzung händisch an, dann einmal in dem R Paket <code>{FielDHub}</code> sowie dem R Paket <code>{agricolae}</code> und teilweise in dem R Paket <code>{dae}</code>. Nicht immer ist alles möglich, mal ist es dann händisch zu kompliziert oder aber eines der Pakete bietet das experimentelle Design nicht an - oder ich habe es nicht gefunden. Das charmante an dem neuen R Paket <code>{FielDHub}</code> ist die Verbindung einer Shiny App zusammen mit dem normalen Code, den du hier siehst. Ich habe dir immer die Referenz zu <code>{FielDHub}</code> hinzugefügt, in der ist auch die Anleitung zu finden für die Shiny App. Um <code>{FielDHub}</code> im Browser zu starten, musst du nur folgenden Code in R ausführen, nachdem du das R Paket installiert hast.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(FielDHub)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">run_app</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>In dem nachfolgenden Kapitel zu den fortgeschrittenen Designs findest du dann noch mehr experimentelle Designs und wie du diese Designs in R generieren kannst. Dieses Kapitel sollte aber ausreichen um einfache Projekte im Rahmen einer Abschlussarbeit oder einem Studienprojekt zu planen. Auch findest du im <a href="https://www.statforbiology.com/_statbookeng/designing-experiments#selecting-the-units-within-the-field">Chapter 2 Designing experiments</a> aus <a href="https://www.statforbiology.com/_statbookeng/">Experimental methods in agriculture</a> noch schöne Beispiele und photographische Abbildungen für experimentelle Designs.</p>
<section id="genutzte-r-pakete" class="level2" data-number="24.1">
<h2 data-number="24.1" class="anchored" data-anchor-id="genutzte-r-pakete"><span class="header-section-number">24.1</span> Genutzte R Pakete</h2>
<p>Wir wollen folgende R Pakete in diesem Kapitel nutzen.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">2034</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(tidyverse, magrittr, dae, agricolae, FielDHub,</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>               conflicted)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">conflicts_prefer</span>(magrittr<span class="sc">::</span>set_names)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>An der Seite des Kapitels findest du den Link <em>Quellcode anzeigen</em>, über den du Zugang zum gesamten R-Code dieses Kapitels erhältst.</p>
</section>
<section id="sec-crd" class="level2" data-number="24.2">
<h2 data-number="24.2" class="anchored" data-anchor-id="sec-crd"><span class="header-section-number">24.2</span> Complete randomized design (CRD)</h2>
<p>Das komplett randomisierte Design ist sicherlich das einfachste Design. Aber auch das praktischste, wenn du ein gar nicht so komplexes Experiment hast. Im PRinzip hast du nur eine Behandlung mit unterschiedlichen Gruppen. Oder allgemeiner gesprochen, du hast einen Faktor <span class="math inline">\(f_1\)</span>, der deine Behandlungen beinhaltet. Du kannst viele Behandlungen haben, die dann als Level des Faktors dargestellt werden. Wir gehen jetzt das <em>complete randomized design</em> einmal an einem Beispiel durch. Hier einmal für eine Behandlung <code>trt</code> mit vier Leveln oder auch Gruppen <code>ctrl</code>, <code>A</code>, <code>B</code> und <code>C</code> sowie als Outcome das Trockengewicht <code>drymatter</code>. Das Outcome müssen wir gar nicht weiter beachten, es dient nur als Gedankenstütze.</p>
<p>Wir haben also folgendes Modell, was wir dann in einem Design abbilden wollen.</p>
<p><span class="math display">\[
drymatter \sim \overbrace{trt}^{f_1}
\]</span></p>
<p>mit</p>
<ul>
<li>dem Faktor Behandlung <code>trt</code> und den vier Behandlungsstufen als Level <code>ctrl</code>, <code>A</code>, <code>B</code> und <code>C</code>.</li>
</ul>
<p>Jetzt ist nur noch die Frage, wie oft wollen wir jede Behandlung wiederholen (eng. <em>replicate</em>). Wir entscheiden uns dafür jeweils 4 Pflanzen pro Behandlungsgruppe zu verwenden. Damit haben wir vier Wiederholungen für vier Behandlungsgruppen und somit insgesamt zwanzig Pflanzen oder auch Beobachtungen.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Modell zur Auswertung
</div>
</div>
<div class="callout-body-container callout-body">
<p>Wir rechnen ein simples lineares Modell für die statistische Analyse.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">lm</span>(drymatter <span class="sc">~</span> trt, <span class="at">data =</span> crd_tbl)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Randomisierung kurz und schmerzlos
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Wenn du für deine zwanzig Pflanzen nur ein Randomisierungmuster brauchst, dann empfehle ich dir die Folgende schnelle Art und Weise. Du nimmst die Zahlen von 1 bis 20 und mischt die Zahlen einmal mit der Funktion <code>sample()</code> durch. Dann erstellst du dir als dein Grid für deine Pflanzen mit einer <span class="math inline">\(4 \times 5\)</span>-Matrix und pflanzt nach diesem Grid die Pflanzen ein. Das war es dann und du bist durch.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">20</span> <span class="sc">|&gt;</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample</span>() <span class="sc">|&gt;</span> </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">matrix</span>(<span class="at">nrow =</span> <span class="dv">4</span>, <span class="at">ncol =</span> <span class="dv">5</span>,</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">dimnames =</span> <span class="fu">list</span>(<span class="fu">str_c</span>(<span class="st">"Reihe"</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">sep =</span> <span class="st">"-"</span>),</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>                         <span class="fu">str_c</span>(<span class="st">"Spalte"</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">sep =</span> <span class="st">"-"</span>)))</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>        Spalte-1 Spalte-2 Spalte-3 Spalte-4 Spalte-5
Reihe-1       20        5        6       18       12
Reihe-2       11        1        8       15       10
Reihe-3        9        3       14       17       16
Reihe-4       13        2        7       19        4</code></pre>
</div>
</div>
</div>
</div>
</div>
<section id="mit-expand_grid" class="level3" data-number="24.2.1">
<h3 data-number="24.2.1" class="anchored" data-anchor-id="mit-expand_grid"><span class="header-section-number">24.2.1</span> … mit <code>expand_grid()</code></h3>
<p>Warum kompliziert, wenn es auch einfach geht. Wir nutzen hier einmal die Funktion <code>expand_grid()</code> um uns das <em>complete randomized design</em> zu erstellen. Die Randomisierung kommt dann über das <code>sample()</code> und der Pflanzenidentifikationsnummer <code>pid</code>. Das geht super einfach und wir brauchen auch gar keine anderen höheren Funktionen von komplexeren R Paketen. Die Spalte <code>trt_rep</code> wird uns später helfen die Beobachtung dann in dem Grid der Pflanzenposition auf dem Tisch wiederzufinden.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>crd_long_tbl <span class="ot">&lt;-</span> <span class="fu">expand_grid</span>(<span class="at">trt =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">rep =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>) <span class="sc">|&gt;</span> </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">trt =</span> <span class="fu">factor</span>(trt, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"ctrl"</span>, <span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>)),</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">rep =</span> <span class="fu">factor</span>(rep, <span class="at">labels =</span> <span class="fu">as.roman</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>)),</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">trt_rep =</span> <span class="fu">str_c</span>(trt, <span class="st">"."</span>, rep),</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">pid =</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">n</span>())) <span class="sc">|&gt;</span>  <span class="do">## Randomsierung über alles</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(pid, <span class="fu">everything</span>())</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>crd_long_tbl</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16 × 4
     pid trt   rep   trt_rep 
   &lt;int&gt; &lt;fct&gt; &lt;fct&gt; &lt;chr&gt;   
 1     8 ctrl  I     ctrl.I  
 2     9 ctrl  II    ctrl.II 
 3     7 ctrl  III   ctrl.III
 4    12 ctrl  IV    ctrl.IV 
 5    10 A     I     A.I     
 6    16 A     II    A.II    
 7    14 A     III   A.III   
 8     4 A     IV    A.IV    
 9     3 B     I     B.I     
10    15 B     II    B.II    
11     1 B     III   B.III   
12    11 B     IV    B.IV    
13     5 C     I     C.I     
14    13 C     II    C.II    
15     6 C     III   C.III   
16     2 C     IV    C.IV    </code></pre>
</div>
</div>
<p>Dann kannst du dir die Datei mit der Funktion <code>write_xlsx()</code> aus dem R Paket <code>{writexl}</code> raus schreiben und dann entsprechend mit deinen Messwerten für das Trockengewicht ergänzen.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>crd_long_tbl <span class="sc">|&gt;</span> </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_xlsx</span>(<span class="st">"template_sheet.xlsx"</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Für die Visualisierung fehlt uns jetzt noch die Positionsangaben auf dem Feld. Daher bauen wir uns einmal ein Grid der Reihen <code>rows</code> und der Spalten <code>cols</code>. Das Grid können wir dann mit den nach den Pflanzen-ID’s sortieren Design zusammenbringen. Damit haben wir dann eigentlich schon fast alles zusammen.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>crd_plot_tbl <span class="ot">&lt;-</span> crd_long_tbl <span class="sc">|&gt;</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(pid) <span class="sc">|&gt;</span> </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(<span class="fu">expand_grid</span>(<span class="at">row =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">col =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>))</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>crd_plot_tbl</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16 × 6
     pid trt   rep   trt_rep    row   col
   &lt;int&gt; &lt;fct&gt; &lt;fct&gt; &lt;chr&gt;    &lt;int&gt; &lt;int&gt;
 1     1 B     III   B.III        1     1
 2     2 C     IV    C.IV         1     2
 3     3 B     I     B.I          1     3
 4     4 A     IV    A.IV         1     4
 5     5 C     I     C.I          2     1
 6     6 C     III   C.III        2     2
 7     7 ctrl  III   ctrl.III     2     3
 8     8 ctrl  I     ctrl.I       2     4
 9     9 ctrl  II    ctrl.II      3     1
10    10 A     I     A.I          3     2
11    11 B     IV    B.IV         3     3
12    12 ctrl  IV    ctrl.IV      3     4
13    13 C     II    C.II         4     1
14    14 A     III   A.III        4     2
15    15 B     II    B.II         4     3
16    16 A     II    A.II         4     4</code></pre>
</div>
</div>
<p>Jetzt können wir uns einmal das Grid der Pflanzungen in der <a href="#fig-exp-basic-1" class="quarto-xref">Abbildung&nbsp;<span>24.1</span></a> einmal anschauen. Wir nutzen hier die Möglichkeiten des R Pakets <code>{desplot}</code>. Hier wird es dann nochmal klarer wo die Pflanzen eigentlich hin sollen. Du kannst dir dann den Tisch so einteilen, dass eben oben links die vierte Wiederholung der Behandlung <code>B</code> steht. Dann steht rechts daneben die zweite Wiederholung der Behandlung <code>C</code>. Nach der Ernte bestimmst du dann das Trockengewicht und trägst es in die Exceltabelle ein.</p>
<div class="cell" data-layout-align="center">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">desplot</span>(<span class="at">data =</span> crd_plot_tbl, </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>        <span class="at">form =</span> trt <span class="sc">~</span> col <span class="sc">+</span> row,</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">text =</span> trt_rep, <span class="at">cex =</span> <span class="dv">1</span>, <span class="at">show.key =</span> <span class="cn">FALSE</span>, </span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">shorten =</span> <span class="st">"no"</span>, <span class="at">flip =</span> <span class="cn">TRUE</span>,</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">"Pflanzschema für ein complete randomized design"</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-exp-basic-1" class="quarto-figure quarto-figure-center quarto-float anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-exp-basic-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="experimental-design-basic_files/figure-html/fig-exp-basic-1-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1" data-glightbox="description: .lightbox-desc-1"><img src="experimental-design-basic_files/figure-html/fig-exp-basic-1-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="576"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-exp-basic-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;24.1— Schema der Pflanzungen nach den Behandlungen für das <em>complete randomized design</em>.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Das war jetzt die schnelle Variante mit <code>expand_grid()</code> und der anschließenden Visualisierung mit einem Plan für die Positionen der jeweiligen Beobachtungen.</p>
</section>
<section id="mit-fieldhub" class="level3" data-number="24.2.2">
<h3 data-number="24.2.2" class="anchored" data-anchor-id="mit-fieldhub"><span class="header-section-number">24.2.2</span> … mit <code>{FielDHub}</code></h3>
<p>Für die Erstellung des <em>complete randomized design</em> in der Shiny App schaue dir die Anleitung unter <a href="https://didiermurillof.github.io/FielDHub/articles/crd.html">Completely Randomized Design mit <code>{FielDHub}</code></a> einmal an. Hier einmal der Code für die Erstellung in R. Wir haben jetzt vier Behandlungen vorliegen und wollen jeweils drei Wiederholungen anlegen. Die Wiederholungen können Blöcke, Tische oder Ställe sein. Das hängt dann vom eigentlichen Experiment ab.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>crd_obj <span class="ot">&lt;-</span> <span class="fu">CRD</span>(<span class="at">t =</span> <span class="fu">c</span>(<span class="st">"ctrl"</span>, <span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>),</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>               <span class="at">reps =</span> <span class="dv">3</span>, <span class="at">seed =</span> <span class="dv">2023</span>) </span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Dann können wir uns einmal das erstellte Feldbuch wiedergeben lassen, was du dann auch in Excel raus schreiben kannst. Nicht immer brauchst du alle Informationen. Zum Beispiel ist der Ort <code>location</code>, wo das Experiment durchgeführt wird eher zweitrangig. Du könntest dir auch zusätzliche Daten generieren lassen, aber das kannst du dir dann auch selber mit Werten ausdenken.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>crd_obj<span class="sc">$</span>fieldBook <span class="sc">|&gt;</span> </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 5
      ID LOCATION  PLOT REP   TREATMENT
   &lt;int&gt;    &lt;dbl&gt; &lt;int&gt; &lt;fct&gt; &lt;chr&gt;    
 1     1        1   101 2     C        
 2     2        1   102 2     ctrl     
 3     3        1   103 1     C        
 4     4        1   104 3     A        
 5     5        1   105 1     ctrl     
 6     6        1   106 3     C        
 7     7        1   107 1     A        
 8     8        1   108 3     B        
 9     9        1   109 2     A        
10    10        1   110 1     B        
11    11        1   111 2     B        
12    12        1   112 3     ctrl     </code></pre>
</div>
</div>
<p>Wir müssen hier mit der Standardfunktion von <code>{desplot}</code> leben und können nicht das Design wählen, was aber vollkommen okay. Dann erstellen wir auch schon die <a href="#fig-exp-basic-crd-fieldhub" class="quarto-xref">Abbildung&nbsp;<span>24.2</span></a> mit dem <em>complete randomized design</em>. Schneller geht es nun wirklich nicht. Wenn du mehr Kontrolle über die einzelnen Schritte haben willst, dann ist das R Paket <code>{agricolae}</code> noch eine Alternative.</p>
<div class="cell" data-layout-align="center">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>crd_obj <span class="sc">|&gt;</span> <span class="fu">plot</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-exp-basic-crd-fieldhub" class="quarto-figure quarto-figure-center quarto-float anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-exp-basic-crd-fieldhub-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="experimental-design-basic_files/figure-html/fig-exp-basic-crd-fieldhub-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2" data-glightbox="description: .lightbox-desc-2"><img src="experimental-design-basic_files/figure-html/fig-exp-basic-crd-fieldhub-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="576"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-exp-basic-crd-fieldhub-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;24.2— Schema der Pflanzungen nach den Behandlungen für das <em>complete randomized design</em>.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="mit-agricolae" class="level3" data-number="24.2.3">
<h3 data-number="24.2.3" class="anchored" data-anchor-id="mit-agricolae"><span class="header-section-number">24.2.3</span> … mit <code>{agricolae}</code></h3>
<p>Als Alternative bietet sich dann auch das R Paket <code>{agricolae}</code> an, obwohl ich für so einfaches Design nicht <code>{agricolae}</code> empfehlen kann. Wir haben nämlich so ein paar gewünschte Eigenschaften und damit musst du etwas programmieren um gut mit dem Paket umgehen zu können. Wir nutzen hier die Funktion <code>design.crd()</code> um uns das Design eines <em>complete randomized design</em> zu erstellen. Die Funktion benötigt einen Vektor mit den Namen der Behandlungslevel. Also in unserem Fall eben <code>ctrl</code>, <code>A</code>, <code>B</code> und <code>C</code>. Dann noch einen Vektor <code>r</code> mit den Wiederholungen pro Behandlungslevel. Hier ist Funktion <code>design.crd()</code> etwas besser, denn wir können hier auch unbalancierte Designs abbilden. Der Nachteil ist, dass wir faktisch danach keine andere Funktion mehr aus den anderen Paketen nutzen können. Deshalb ist es sinniger, balanciert zu planen und dann eben die Pflanzen später zu entfernen.</p>
<p>Hier einmal die simple Anwendung der Funktion zum erstellen eines <em>complete randomized design</em> mit vier Behandlungen und fünf Wiederholungen pro Behandlung.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>crd_obj <span class="ot">&lt;-</span> <span class="fu">design.crd</span>(<span class="at">trt =</span> <span class="fu">c</span>(<span class="st">"ctrl"</span>, <span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>), </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">r =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">5</span>))</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Jetzt kommt leider der etwas aufwenidigere Teil. Das Paket <code>{agricolae}</code> ist schon etwas älter und damit auch teilweise nicht mehr so kompatibel und auf dem Stand der Zeit. Wir bauen uns daher jetzt noch ein paar Sachen zurecht. Am Ende wollen wie ein sauberes <code>tibble</code> mit anständigen Namen und einer Variable <code>trt_rep</code>, die uns sagt welche Behandlung und Wiederholung wir vorliegen haben.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>crd_book_tbl <span class="ot">&lt;-</span> crd_obj <span class="sc">|&gt;</span> </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pluck</span>(<span class="st">"book"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">|&gt;</span> </span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_names</span>(<span class="fu">c</span>(<span class="st">"plots"</span>, <span class="st">"r"</span>, <span class="st">"trt"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">trt_rep =</span> <span class="fu">str_c</span>(trt, <span class="st">"."</span>, r))</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>crd_book_tbl</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 20 × 4
   plots     r trt   trt_rep
   &lt;dbl&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;  
 1   101     1 C     C.1    
 2   102     1 B     B.1    
 3   103     2 C     C.2    
 4   104     3 C     C.3    
 5   105     4 C     C.4    
 6   106     2 B     B.2    
 7   107     5 C     C.5    
 8   108     1 ctrl  ctrl.1 
 9   109     3 B     B.3    
10   110     2 ctrl  ctrl.2 
11   111     4 B     B.4    
12   112     1 A     A.1    
13   113     5 B     B.5    
14   114     3 ctrl  ctrl.3 
15   115     4 ctrl  ctrl.4 
16   116     2 A     A.2    
17   117     3 A     A.3    
18   118     4 A     A.4    
19   119     5 A     A.5    
20   120     5 ctrl  ctrl.5 </code></pre>
</div>
</div>
<p>Schön ist was anderes, da hast du recht, aber wir können uns dann auch noch das Pflanzgrid einmal als Abbildung wiedergeben lassen. Da die Ausgabe der Funktion <code>design.crd()</code> schon permutiert ist, müssen wir hier nur die Informationen zu den Zeilen und Spalten ergänzen. Im Prinzip kannst du entscheiden, wie du die Wiederholungen <code>cols</code> oder Behandlungen <code>rows</code> anordnest. Du kannst am Ende aber auch einfach den ausgedruckten Zettel drehen.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>crd_plot_tbl <span class="ot">&lt;-</span> crd_book_tbl <span class="sc">|&gt;</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(<span class="fu">expand_grid</span>(<span class="at">rows =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>,</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>                        <span class="at">cols =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>))</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>In der <a href="#fig-exp-basic-2" class="quarto-xref">Abbildung&nbsp;<span>24.3</span></a> siehst du dann einmal das Schema für die Pflanzungen eines <em>complete randomized design</em>. Das Schema unterscheidet sich so nicht von dem Eigenbau mit <code>expand_grid()</code>. Da bist du frei zu entscheiden was du nutzen möchtest.</p>
<div class="cell" data-layout-align="center">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">desplot</span>(trt <span class="sc">~</span> rows <span class="sc">+</span> cols, <span class="at">flip =</span> <span class="cn">TRUE</span>,</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>        <span class="at">text =</span> trt_rep, <span class="at">cex =</span> <span class="dv">1</span>, <span class="at">shorten =</span> <span class="st">"no"</span>,</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> crd_plot_tbl,</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">"Pflanzschema für ein complete randomized design"</span>, </span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">show.key =</span> <span class="cn">FALSE</span>) </span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-exp-basic-2" class="quarto-figure quarto-figure-center quarto-float anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-exp-basic-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="experimental-design-basic_files/figure-html/fig-exp-basic-2-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3" data-glightbox="description: .lightbox-desc-3"><img src="experimental-design-basic_files/figure-html/fig-exp-basic-2-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="576"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-exp-basic-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;24.3— Schema der Pflanzungen nach den Behandlungen für das <em>complete randomized design</em>.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Damit wären wir auch schon durch. Wir haben in R im Prinzip die Möglichkeiten das <em>complete randomized design</em> selber, mit dem R Paket <code>{FielDHub}</code>oder aber mit dem R Paket <code>{agricolae}</code> zu erstellen.</p>
</section>
</section>
<section id="sec-rcbd" class="level2 page-columns page-full" data-number="24.3">
<h2 data-number="24.3" class="anchored" data-anchor-id="sec-rcbd"><span class="header-section-number">24.3</span> Randomized complete block design (RCBD)</h2>
<p>Jetzt kommen wir zum vermutlich meist genutzten Design, dem <em>randomized complete block design</em>. Hier haben wir neben dem Faktor Behandlung <code>trt</code> auch noch einen zusätzlichen Faktor <code>block</code>. Wir haben dann für jede Behandlung/Block-Kombination einen Messwert. Wenn du am Feld stehst, ist es aber meistens so, dass wir nicht <em>eine</em> Pflanze pro Block haben, sondern 20 oder mehr Pflanzen. Wir mitteln aber den Wert für das Trockengewicht über alle 20 Pflanzen pro Block und haben dann wieder einen Messwert für jede Behandlung/Block-Kombination. Das ist manchmal etwas verwirrend.</p>
<p>Wir haben also folgendes Modell vorliegen, wir habend den Faktor Behandlung <code>trt</code> sowie den Faktor Block <code>block</code>. Für jede der Behandlung/Block-Kombination erhalten wir dann einen Wert. Wir schauen uns gleich vier Behandlungen und vier Blöcke an.</p>
<p><span class="math display">\[
drymatter \sim \overbrace{trt}^{f_1} + \underbrace{block}_{f_2}
\]</span></p>
<p>mit</p>
<ul>
<li>dem Faktor Behandlung <code>trt</code> und den vier Behandlungsstufen als Level <code>ctrl</code>, <code>A</code>, <code>B</code> und <code>C</code>.</li>
<li>dem Faktor Block <code>block</code> und den vier Leveln <code>I</code> bis <code>IV</code>.</li>
</ul>
<p>Wir randomiseren unsere Behandlungen <code>trt</code> in den Blöcken <code>block</code>. Somit ergibt sich <a href="#fig-mermaid-basic-01" class="quarto-xref">Abbildung&nbsp;<span>24.4</span></a> in der unsere Behandlungen in den Blöcken genestet sind.</p>
<div class="cell" data-fig-width="6" data-layout-align="default">
<div class="cell-output-display">
<div id="fig-mermaid-basic-01" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-mermaid-basic-01-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div>
<pre class="mermaid mermaid-js" data-label="fig-mermaid-basic-01">flowchart LR
    A(trt):::factor --- B(((nested))) --&gt; C(block):::factor
    classDef factor fill:#56B4E9,stroke:#333,stroke-width:0.75px
</pre>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-mermaid-basic-01-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;24.4— Abhängigkeitsstruktur eines randomized complete block design mit einem Faktor <code>trt</code> nested im Faktor <code>block</code>.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Damit gilt dann auch, dass jeder Block alle Behandlungslevel enthält und die Behandlungen innerhalb eines Blockes randomsiert werden. Unsere Randomisierungseinheit ist also der Block.</p>
<p><span class="math display">\[
\underbrace{\mbox{Blöcke}}_{f_2} \xrightarrow[]{beinhaltet\; alle} \overbrace{\mbox{Behandlungen}}^{f_1}
\]</span></p>
<p>Theoretisch könnten wir auch pro Block mehrere <em>einzelne</em> Pflanzen messen, dann sind wir aber im Subsampling drin. Wenn du mehr zum Design erfahren möchtest, dann schau einfach mal bei <a href="experimental-design-advanced.html#sec-subsampling">Abschnitt zum <em>subsampling</em></a> im nächsten Kapitel rein.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Modell zur Auswertung
</div>
</div>
<div class="callout-body-container callout-body">
<p>Wir rechnen ein multiples lineares Modell für die statistische Analyse.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">lm</span>(drymatter <span class="sc">~</span> trt <span class="sc">+</span> block <span class="sc">+</span> trt<span class="sc">:</span>block, <span class="at">data =</span> rcbd_tbl)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>Hier einmal der Link zu der Auswertung zum <a href="https://schmidtpaul.github.io/DSFAIR/subsampling_Piepho1997.html">Subsampling</a> bei DSFAIR.</p>
</div></div><section id="mit-expand_grid-1" class="level3" data-number="24.3.1">
<h3 data-number="24.3.1" class="anchored" data-anchor-id="mit-expand_grid-1"><span class="header-section-number">24.3.1</span> … mit <code>expand_grid()</code></h3>
<p>Das praktische an <code>expand_grid()</code> ist, dass du nochmal eine Vorstellugn über den Aufbau des Experiments erhälst. Wir nehmen als erstes den Block <code>block</code> und ergänzen dann die Behandlungen <code>trt</code>. Damit erschaffen wir uns erst die vier Blöcke und dann pro Block die vier Behandlungen. Dann müssen wir noch unsere Daten etwas mutieren und schöner machen. Wir ergänzen noch einen Identifikator <code>trt_block</code> damit wir auch unsere Positionen für die Pflanzungen später in den Abbildungen wieder finden. Am Ende gruppieren wir die Daten nochmal pro Block damit wir dann innerhalb der Blöcke unsere Behandlungslevel über die Funktion <code>sample()</code> randomsisiern können.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>rcbd_long_tbl <span class="ot">&lt;-</span> <span class="fu">expand_grid</span>(<span class="at">block =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>                             <span class="at">trt =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>) <span class="sc">|&gt;</span> </span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">trt =</span> <span class="fu">factor</span>(trt, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"ctrl"</span>, <span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>)),</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">block =</span> <span class="fu">factor</span>(block, <span class="at">labels =</span> <span class="fu">as.roman</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>)),</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">trt_block =</span> <span class="fu">str_c</span>(trt, <span class="st">"."</span>, block),</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">pid =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(block) <span class="sc">|&gt;</span> </span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">trt =</span> <span class="fu">sample</span>(trt)) <span class="do">## Randomisierung pro Block</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>rcbd_plot_tbl <span class="ot">&lt;-</span> rcbd_long_tbl <span class="sc">|&gt;</span> </span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(<span class="fu">expand_grid</span>(<span class="at">rows =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">cols =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>))</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Die dicken, schwarzen Linien stellen die Grenzen der Blöcke dar. Im realen Leben kann eine farbige Kachel in der Abbildung ein ganzes Feld sein und die Blockgrenzen sind dann eben Feldwege. Die <a href="#fig-exp-basic-3" class="quarto-xref">Abbildung&nbsp;<span>24.5</span></a> stellt ja auch nur eine schematische Darstellung der Pflanzungen dar.</p>
<div class="cell" data-layout-align="center">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">desplot</span>(<span class="at">data =</span> rcbd_plot_tbl, </span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>        <span class="at">form =</span> trt <span class="sc">~</span> rows <span class="sc">+</span> cols,</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">out1 =</span> block,</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">"Pflanzschema für ein randomized complete block design"</span>, </span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">text =</span> trt_block, <span class="at">cex =</span> <span class="dv">1</span>, <span class="at">show.key =</span> <span class="cn">FALSE</span>, <span class="at">shorten =</span> <span class="st">"no"</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-exp-basic-3" class="quarto-figure quarto-figure-center quarto-float anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-exp-basic-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="experimental-design-basic_files/figure-html/fig-exp-basic-3-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4" data-glightbox="description: .lightbox-desc-4"><img src="experimental-design-basic_files/figure-html/fig-exp-basic-3-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="576"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-exp-basic-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;24.5— Schema der Pflanzungen nach den Behandlungen für das randomized complete block design. Beachte die schwarzen Linien als Grenzen für die Blöcke. Im realen Leben können das Gänge zwischen Tischen sein oder Feldwege.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Dann können wir auch schon unseren Versuchsplan als Exceldatei rausschreiben. Wir können dann noch weitere Spalten als Outcome ergänzen und dann mit der Datei unsere Auswertung durchführen.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>rcbd_long_tbl <span class="sc">|&gt;</span> </span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_xlsx</span>(<span class="st">"template_sheet.xlsx"</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="mit-fieldhub-1" class="level3" data-number="24.3.2">
<h3 data-number="24.3.2" class="anchored" data-anchor-id="mit-fieldhub-1"><span class="header-section-number">24.3.2</span> … mit <code>{FielDHub}</code></h3>
<p>Für die Erstellung des <em>randomized complete block design</em> in der Shiny App schaue dir die Anleitung wie schon weiter oben unter <a href="https://didiermurillof.github.io/FielDHub/reference/RCBD.html">Generates a Randomized Complete Block Design (RCBD) mit <code>{FielDHub}</code></a> einmal an. Hier einmal der Code für die Erstellung eines <em>randomized complete block design</em> in R mit Code. Wir haben jetzt vier Behandlungen vorliegen und wollen jeweils drei Wiederholungen anlegen, aber das kennst du ja schon von dem obigen Beispiel. Die Wiederholungen können Blöcke, Tische oder Ställe sein. Das hängt dann wiederum vom eigentlichen Experiment ab. Die Funktion ist daher dann auch schon fast selbsterklärend</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>rcbd_obj <span class="ot">&lt;-</span> <span class="fu">RCBD</span>(<span class="at">t =</span> <span class="fu">c</span>(<span class="st">"ctrl"</span>, <span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>),</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">reps =</span> <span class="dv">3</span>, <span class="at">seed =</span> <span class="dv">2023</span>) </span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Wir können uns dann auch wieder das Feldbuch wiedergeben lassen und es eben dann auch in Excel als <code>.xlsx</code> exportieren und so dann direkt mit den Daten aus unserem Experiment füllen oder als Randomisierung nutzen.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>rcbd_obj<span class="sc">$</span>fieldBook <span class="sc">|&gt;</span> </span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 5
      ID LOCATION  PLOT   REP TREATMENT
   &lt;int&gt; &lt;fct&gt;    &lt;int&gt; &lt;int&gt; &lt;chr&gt;    
 1     1 loc1       101     1 B        
 2     2 loc1       102     1 ctrl     
 3     3 loc1       103     1 A        
 4     4 loc1       104     1 C        
 5     5 loc1       201     2 B        
 6     6 loc1       202     2 A        
 7     7 loc1       203     2 C        
 8     8 loc1       204     2 ctrl     
 9     9 loc1       301     3 B        
10    10 loc1       302     3 A        
11    11 loc1       303     3 C        
12    12 loc1       304     3 ctrl     </code></pre>
</div>
</div>
<p>In der <a href="#fig-exp-basic-rcbd-fieldhub" class="quarto-xref">Abbildung&nbsp;<span>24.6</span></a> siehst du einmal das Ergebnis der Randomisierung in <code>{FielDHub}</code>. Hier kannst du dann noch mit den Einstellungen rumspielen und dir die verschiedenen Ergebnisse einmal anschauen. Ehrlich gesagt funktioniert das natürlich in der Shiny App um Längen besser.</p>
<div class="cell" data-layout-align="center">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>rcbd_obj <span class="sc">|&gt;</span> <span class="fu">plot</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-exp-basic-rcbd-fieldhub" class="quarto-figure quarto-figure-center quarto-float anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-exp-basic-rcbd-fieldhub-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="experimental-design-basic_files/figure-html/fig-exp-basic-rcbd-fieldhub-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5" data-glightbox="description: .lightbox-desc-5"><img src="experimental-design-basic_files/figure-html/fig-exp-basic-rcbd-fieldhub-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="576"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-exp-basic-rcbd-fieldhub-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;24.6— Schema der Pflanzungen nach den Behandlungen für das randomized complete block design. Beachte die schwarzen Linien als Grenzen für die Blöcke. Im realen Leben können das Gänge zwischen Tischen sein oder Feldwege.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="mit-agricolae-1" class="level3" data-number="24.3.3">
<h3 data-number="24.3.3" class="anchored" data-anchor-id="mit-agricolae-1"><span class="header-section-number">24.3.3</span> … mit <code>{agricolae}</code></h3>
<p>Wir können auch ein <em>randomized complete block design</em> mit <code>{agricolae}</code> erstellen. Hier geht es ähnlich wie vorher schon. Wichtig ist, dass wir hier unsere Blöcke wieder mit <code>r</code> bezeichnen. Damit bauen wir uns also wieder ein Design mit vier Behandlungsleveln und fünf Blöcken.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>rcbd_obj <span class="ot">&lt;-</span> <span class="fu">design.rcbd</span>(<span class="at">trt =</span> <span class="fu">c</span>(<span class="st">"ctrl"</span>, <span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>), <span class="at">r =</span> <span class="dv">5</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Leider ist die Ausgabe von <code>design.rcbd()</code> etwas ungünstig für die weitere Darstellung. Deshalb wandeln wir etwas das Feldbuch für unsere Bedürfnisse um. Wir könnten natürlich gleich mit dem Feldbuch weitermachen und die Pflanzen in der Form ausbringen, aber wir wollen ja noch ein Pflanzschema erstellen.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>rcbd_book_tbl <span class="ot">&lt;-</span> rcbd_obj <span class="sc">|&gt;</span> </span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pluck</span>(<span class="st">"book"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">|&gt;</span> </span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_names</span>(<span class="fu">c</span>(<span class="st">"plots"</span>, <span class="st">"block"</span>, <span class="st">"trt"</span>))</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>rcbd_book_tbl</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 20 × 3
   plots block trt  
   &lt;dbl&gt; &lt;fct&gt; &lt;fct&gt;
 1   101 1     A    
 2   102 1     B    
 3   103 1     ctrl 
 4   104 1     C    
 5   201 2     B    
 6   202 2     A    
 7   203 2     C    
 8   204 2     ctrl 
 9   301 3     C    
10   302 3     B    
11   303 3     A    
12   304 3     ctrl 
13   401 4     C    
14   402 4     A    
15   403 4     ctrl 
16   404 4     B    
17   501 5     B    
18   502 5     A    
19   503 5     C    
20   504 5     ctrl </code></pre>
</div>
</div>
<p>Jetzt nochmal das Grid für die Pflanzungen ergänzt. Hier müssen wir etwas mehr schauen, wie wir die Zeilen <code>rows</code> und Spalten <code>cols</code> zuordnen. Unsere Zeilen sind die Blöcke, aber innerhalb der Blöcke müssen wir die Anzahl der Behandlungen nummerieren. Deshalb machen wir den Zwischenschritt mit <code>group_by()</code>.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>rcbd_plot_tbl <span class="ot">&lt;-</span> rcbd_book_tbl <span class="sc">|&gt;</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rows =</span> <span class="fu">as.numeric</span>(block),</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">trt_block =</span> <span class="fu">str_c</span>(trt, <span class="st">"."</span>, block)) <span class="sc">|&gt;</span> </span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(rows) <span class="sc">|&gt;</span> </span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cols =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">n</span>())</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Zur Kontrolle einmal die Ausgabe des <code>skretch</code>. Auch hier steht wieder nichts an den Zeilen und Spalten, so dass wir immer überlegen müssen, was war nun der Block und was war die Behandlung.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>rcbd_obj <span class="sc">|&gt;</span> </span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pluck</span>(<span class="st">"sketch"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">t</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1]   [,2]   [,3]   [,4]   [,5]  
[1,] "A"    "B"    "C"    "C"    "B"   
[2,] "B"    "A"    "B"    "A"    "A"   
[3,] "ctrl" "C"    "A"    "ctrl" "C"   
[4,] "C"    "ctrl" "ctrl" "B"    "ctrl"</code></pre>
</div>
</div>
<p>Um es schöner zu haben schauen wir uns einmal die <a href="#fig-exp-basic-4" class="quarto-xref">Abbildung&nbsp;<span>24.7</span></a> als Pfalnzschema an. Wir haben hier die gleiche Ausgabe wie auch schon weiter oben. Die Positionen haben sich geändert, wir haben ja auch zweimal randomisiert. Sonst sehen wir aber das Gleiche. Die schwarze Striche sind wieder die Grenzen unserer Blöcke und können im echten Leben dann Feldwege oder Gewächshäuser sein.</p>
<div class="cell" data-layout-align="center">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">desplot</span>(trt <span class="sc">~</span> rows <span class="sc">+</span> cols, <span class="at">flip =</span> <span class="cn">TRUE</span>,</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>        <span class="at">text =</span> trt_block, <span class="at">cex =</span> <span class="dv">1</span>, <span class="at">shorten =</span> <span class="st">"no"</span>,</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">out1 =</span> block,</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> rcbd_plot_tbl,</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">"Pflanzschema für ein randomized complete block design"</span>, </span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">show.key =</span> <span class="cn">FALSE</span>, <span class="at">key.cex =</span> <span class="fl">0.5</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-exp-basic-4" class="quarto-figure quarto-figure-center quarto-float anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-exp-basic-4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="experimental-design-basic_files/figure-html/fig-exp-basic-4-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-6" data-glightbox="description: .lightbox-desc-6"><img src="experimental-design-basic_files/figure-html/fig-exp-basic-4-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="576"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-exp-basic-4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;24.7— Schema der Pflanzungen nach den Behandlungen für das randomized complete block design. Beachte die schwarzen Linien als Grenzen für die Blöcke. Im realen Leben können das Gänge zwischen Tischen sein oder Feldwege.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="sec-lsd" class="level2 page-columns page-full" data-number="24.4">
<h2 data-number="24.4" class="anchored" data-anchor-id="sec-lsd"><span class="header-section-number">24.4</span> Latin square design (LSD)</h2>
<p>Das <em>latin square design</em> erweist sich dann als besonders sinnvoll, wenn zwei unabhängige Störgradienten vorhanden sind, die orthogonal zueinander ausgerichtet sind. Ein Beispiel hierfür wäre im Boden des Versuchsfeldes ein Feuchtigkeitsgefälle von Nord nach Süd und ein Nährstoffgefälle von Ost nach West. Um diese Störgrößen im Boden zu berücksichtigen, werden die Randomisationseinheiten in Form von Quadraten angeordnet. Diese Anordnung stellt sicher, dass sowohl die Anzahl der Zeilen als auch die Anzahl der Spalten zwangsläufig gleich sind. Durch diese Anordnung ist es möglich, eine Randomisierung durchzuführen, bei der sowohl jede Spalte als auch jede Zeile einen vollständigen Block bildet, ähnlich wie bei einem Sudoku-Raster. Es darf eben in jeder Zeile und Spalte immer nur einmal eine Behandlung auftauchen.</p>

<div class="no-row-height column-margin column-container"><div class="">
<p><a href="https://www.adelaide.edu.au/library/special/exhibitions/significant-life-fisher/rothamsted/">Das Bild des ersten Latin Square</a> an einem Hang, angelegt und geplant von Roland Fisher an der Rothamsted Experimental Station.</p>
<p>Auch findest du im <a href="https://www.statforbiology.com/_statbookeng/designing-experiments#selecting-the-units-within-the-field">Chapter 2 Designing experiments</a> aus <a href="https://www.statforbiology.com/_statbookeng/">Experimental methods in agriculture</a> noch schöne Beispiele für ein Latin Square Design.</p>
</div></div><p>Schauen wir uns einmal das Modell an nachdem wir unseren Versuchsplan bauen wollen. Wir haben wie immer unsere Behandlung <code>trt</code> sowie den Block, den wir aber in <code>rows</code> und <code>cols</code> aufteilen. Die Regel lautet im <em>latin square design</em>, dass keine Behandlung in der gleichen Zeile und Spalte doppelt auftreten darf.</p>
<p><span class="math display">\[
drymatter \sim \overbrace{trt}^{f_1} + \underbrace{rows}_{f_2} + \overbrace{cols}^{f_3}
\]</span></p>
<p>mit</p>
<ul>
<li>dem Faktor Behandlung <code>trt</code> und den fünf Behandlungsstufen als Level <code>ctrl</code>, <code>A</code>, <code>B</code>, <code>C</code> und <code>D</code>.</li>
<li>dem Faktor Reihe <code>rows</code> mit der Anzahl der Level gleich der Level der Behandlung also hier fünf.</li>
<li>dem Faktor Spalte <code>cols</code> mit der Anzahl der Level gleich der Level der Behandlung also hier fünf.</li>
</ul>
<p>In der <a href="#fig-mermaid-lsd" class="quarto-xref">Abbildung&nbsp;<span>24.8</span></a> sehen wir nochmal den schematischen Aufbau eines <em>latin square design</em> dargestellt. Vermutlich hilft es auch sich einmal das finale Design in der <a href="#fig-exp-basic-5" class="quarto-xref">Abbildung&nbsp;<span>24.10</span></a> einmal anzuschauen. Wichtig ist, dass wir den Block gar nicht betrachten. Wir haben hier eher fünfundzwanzig kleine Subblöcke, die wir durch die Position der <code>rows</code> und <code>cols</code> definieren.</p>
<div class="cell" data-fig-width="6" data-layout-align="default">
<div class="cell-output-display">
<div id="fig-mermaid-lsd" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-mermaid-lsd-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div>
<pre class="mermaid mermaid-js" data-label="fig-mermaid-lsd">flowchart LR
    A(trt):::factor --- B(((nested))) --&gt; C(rows):::factor 
    B(((nested))) --&gt; D(cols):::factor 
    C --- F(block)
    D --- F
    classDef factor fill:#56B4E9,stroke:#333,stroke-width:0.75px
</pre>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-mermaid-lsd-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;24.8— Schematische Darstellung der Abhängigkeitsstruktur im latin suare design. Die Behandlungen werden in <code>rows</code> und <code>cols</code> genestet, die einem quadratischen Block mit den Längen der Anzahl der Level der Behandlungen entsprechen.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Wir schauen uns hier das R Paket <code>FieldHub</code>, das R Paket <code>{agricolae}</code> und das R Paket <code>{dae}</code> an. Selber machen ist hier nicht, da du dir bei der Erstellung sehr schnell Fehler rein holst. Es ist super frickelig darauf zu achten, dass sich wirklich keine Behandlung in irgendeiner Zeilen- oder Spaltenposition überschneidet. Da sind die vorgefertigten Funktionen echt mal besser.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Modell zur Auswertung
</div>
</div>
<div class="callout-body-container callout-body">
<p>Wir rechnen ein multiples lineares Modell für die statistische Analyse.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">lm</span>(drymatter <span class="sc">~</span> trt <span class="sc">+</span> cols <span class="sc">+</span> rows, <span class="at">data =</span> lsd_tbl)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
<section id="mit-fieldhub-2" class="level3" data-number="24.4.1">
<h3 data-number="24.4.1" class="anchored" data-anchor-id="mit-fieldhub-2"><span class="header-section-number">24.4.1</span> … mit <code>{FielDHub}</code></h3>
<p>Für die Erstellung des <em>latin square design</em> in der Shiny App schaue dir die Anleitung wie schon weiter oben unter <a href="https://didiermurillof.github.io/FielDHub/reference/latin_square.html">Generates a Latin Square Design mit <code>{FielDHub}</code></a> einmal an. Hier einmal der Code für die Erstellung eines <em>latin square design</em> in R mit Code. Wir haben jetzt vier Behandlungen vorliegen, aber das kennst du ja schon von dem obigen Beispiel. Wir können hier einmal zwei Wiederholungen angeben, was dann eigentlich Blöcke wären. Du. kannst dir die Wiederholungen als zusätzliche Felder, Ställe oder Tische vorstellen.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>latin_square_obj <span class="ot">&lt;-</span> <span class="fu">latin_square</span>(<span class="at">t =</span> <span class="dv">4</span>, <span class="at">reps =</span> <span class="dv">2</span>,</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">seed =</span> <span class="dv">2023</span>) </span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Damit können wir uns auch schon einmal das Feldbuch anschauen. Auch hier gilt, das Feldbuch lässt sich dann einfach nach Excel exportieren. Hier zeige ich nur die ersten zehn Zeilen, da sonst die Ausgabe zu groß wird.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>latin_square_obj<span class="sc">$</span>fieldBook <span class="sc">|&gt;</span> </span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">|&gt;</span> </span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 7
      ID LOCATION  PLOT SQUARE ROW   COLUMN   TREATMENT
   &lt;int&gt;    &lt;int&gt; &lt;int&gt;  &lt;int&gt; &lt;fct&gt; &lt;fct&gt;    &lt;chr&gt;    
 1     1        1   101      1 Row 1 Column 1 T4       
 2     2        1   102      1 Row 1 Column 2 T1       
 3     3        1   103      1 Row 1 Column 3 T3       
 4     4        1   104      1 Row 1 Column 4 T2       
 5     5        1   108      1 Row 2 Column 1 T1       
 6     6        1   107      1 Row 2 Column 2 T4       
 7     7        1   106      1 Row 2 Column 3 T2       
 8     8        1   105      1 Row 2 Column 4 T3       
 9     9        1   109      1 Row 3 Column 1 T3       
10    10        1   110      1 Row 3 Column 2 T2       </code></pre>
</div>
</div>
<p>In der folgenden <a href="#fig-exp-basic-latin-fieldhub" class="quarto-xref">Abbildung&nbsp;<span>24.9</span></a> siehst du dann einmal das <em>latin square design</em> für zwei Wiederholungen. Wie du gleich in den folgenden Beispielen siehst, kann man das <em>latin square design</em> auch nur für eine Wiederholung erstellen. Wichtig ist eben, dass in jeder Zeilen- und Spaltenkombination eine Behandlung vorkommt.</p>
<div class="cell" data-layout-align="center">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>latin_square_obj <span class="sc">|&gt;</span> <span class="fu">plot</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-exp-basic-latin-fieldhub" class="quarto-figure quarto-figure-center quarto-float anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-exp-basic-latin-fieldhub-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="experimental-design-basic_files/figure-html/fig-exp-basic-latin-fieldhub-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-7" data-glightbox="description: .lightbox-desc-7"><img src="experimental-design-basic_files/figure-html/fig-exp-basic-latin-fieldhub-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="576"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-exp-basic-latin-fieldhub-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;24.9— Schema der Pflanzungen nach den Behandlungen für das <em>latin square design</em>. Beachte die schwarzen Linien als Grenzen für die Blöcke. Im realen Leben können das Gänge zwischen Tischen sein oder Feldwege.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="mit-agricolae-2" class="level3" data-number="24.4.2">
<h3 data-number="24.4.2" class="anchored" data-anchor-id="mit-agricolae-2"><span class="header-section-number">24.4.2</span> … mit <code>{agricolae}</code></h3>
<p>Im <em>latin square design</em> brauchen wir nur einen Behandlungsvektor. Durch die Anzahl der Behandlungen wird auch die Größe des <em>latin square</em> bestimmt. Wir haben hier fünf Behandlungen vorliegen, also kriegen wir dann auch ein <span class="math inline">\(5 \times 5\)</span>-<em>latin square</em> für unseren Versuchsplan raus.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>lsd_obj <span class="ot">&lt;-</span> <span class="fu">design.lsd</span>(<span class="at">trt =</span> <span class="fu">c</span>(<span class="st">"ctrl"</span>, <span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="st">"D"</span>), </span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">seed =</span> <span class="dv">42</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Zum Glück kriegen wir hier auch die Zeilen und Spalten direkt von der Funktion <code>design.lsd()</code> geliefert. Leider als Faktoren, so dass wir die Faktoren nochmal in Zahlen umwandeln damit es später mit der Visualisierung klappt.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>lsd_book_tbl <span class="ot">&lt;-</span> lsd_obj <span class="sc">|&gt;</span> </span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pluck</span>(<span class="st">"book"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">|&gt;</span> </span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_names</span>(<span class="fu">c</span>(<span class="st">"plots"</span>, <span class="st">"rows"</span>, <span class="st">"cols"</span>, <span class="st">"trt"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rows =</span> <span class="fu">as.numeric</span>(rows),</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">cols =</span> <span class="fu">as.numeric</span>(cols))</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>lsd_book_tbl</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 25 × 4
   plots  rows  cols trt  
   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt;
 1   101     1     1 D    
 2   102     1     2 C    
 3   103     1     3 ctrl 
 4   104     1     4 B    
 5   105     1     5 A    
 6   201     2     1 C    
 7   202     2     2 B    
 8   203     2     3 D    
 9   204     2     4 A    
10   205     2     5 ctrl 
# ℹ 15 more rows</code></pre>
</div>
</div>
<p>Dann einmal die Ausgabe des <code>sketch</code>. Hier kann man mal nichts falsch machen. Wir kriegen unser Quadrat als <em>latin square</em> und gut ist.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>lsd_obj <span class="sc">|&gt;</span> </span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pluck</span>(<span class="st">"sketch"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">t</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1]   [,2]   [,3]   [,4]   [,5]  
[1,] "D"    "C"    "ctrl" "B"    "A"   
[2,] "C"    "B"    "D"    "A"    "ctrl"
[3,] "ctrl" "D"    "A"    "C"    "B"   
[4,] "B"    "A"    "C"    "ctrl" "D"   
[5,] "A"    "ctrl" "B"    "D"    "C"   </code></pre>
</div>
</div>
<p>In der <a href="#fig-exp-basic-5" class="quarto-xref">Abbildung&nbsp;<span>24.10</span></a> siehst du dann nochmal das <em>latin square design</em> visualisiert. Die dicken Linien sind wieder die Blockgrenzen und mögen dann die Feldwege oder Wege zwischen den Behandlungens sein. Wie du siehst, gibt es pro Zeile und Spalte immer nur eine Behandlung. Wir haben einmal perfekt über das ganze <em>latin square</em> randomisiert.</p>
<div class="cell" data-layout-align="center">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">desplot</span>(trt <span class="sc">~</span> rows <span class="sc">+</span> cols, <span class="at">flip =</span> <span class="cn">TRUE</span>,</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>        <span class="at">out1 =</span> rows, <span class="at">out1.gpar =</span> <span class="fu">list</span>(<span class="at">col=</span><span class="st">"black"</span>, <span class="at">lwd=</span><span class="dv">3</span>),</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">out2 =</span> cols, <span class="at">out2.gpar =</span> <span class="fu">list</span>(<span class="at">col=</span><span class="st">"black"</span>, <span class="at">lwd=</span><span class="dv">3</span>),</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">text =</span> trt, <span class="at">cex =</span> <span class="dv">1</span>, <span class="at">shorten =</span> <span class="st">"no"</span>,</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> lsd_book_tbl,</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">"Pflanzschema für ein latin square design"</span>, </span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">show.key =</span> <span class="cn">FALSE</span>, <span class="at">key.cex =</span> <span class="fl">0.5</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-exp-basic-5" class="quarto-figure quarto-figure-center quarto-float anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-exp-basic-5-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="experimental-design-basic_files/figure-html/fig-exp-basic-5-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-8" data-glightbox="description: .lightbox-desc-8"><img src="experimental-design-basic_files/figure-html/fig-exp-basic-5-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="576"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-exp-basic-5-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;24.10— Schema der Pflanzungen nach den Behandlungen für das latin square design. Beachte die schwarzen Linien als Grenzen für die Blöcke. Im realen Leben können das Gänge zwischen Tischen sein oder Feldwege.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Dann nochmal das <em>latin square design</em> rausschreiben und wir können mit der Datenerfassung beginnen.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>lsd_book_tbl <span class="sc">|&gt;</span> </span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(trt, rows, cols) <span class="sc">|&gt;</span> </span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_xlsx</span>(<span class="st">"template_sheet.xlsx"</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="mit-dae" class="level3" data-number="24.4.3">
<h3 data-number="24.4.3" class="anchored" data-anchor-id="mit-dae"><span class="header-section-number">24.4.3</span> … mit <code>{dae}</code></h3>
<p>Das <em>latin square design</em> in dem R Paket <code>{dae}</code> ist etwas verkompliziert herzustellen. Das Paket <code>{dae}</code> ist eher für komplexere Designs gedacht, so dass simple Designs manchmal übermäßig kompliziert wirken. Wir übergeben erstmal unser Positionsgrid, natürlich ein <span class="math inline">\(5 \times 5\)</span>-Grid, aus Zeilen und Spalten. Dann ergänzen wir unsere fünf Behandlungen in einem <em>latin square design</em>. Das Ganze ist irgendwie dreifach, aber da wir auch komplexeres können, machen wir das mal so und gehen hier nicht tiefer drauf ein.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>lsd_sys <span class="ot">&lt;-</span> <span class="fu">cbind</span>(<span class="fu">fac.gen</span>(<span class="fu">list</span>(<span class="at">rows =</span> <span class="dv">5</span>, <span class="at">cols =</span> <span class="dv">5</span>)),</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">trt =</span> <span class="fu">factor</span>(<span class="fu">designLatinSqrSys</span>(<span class="dv">5</span>), <span class="at">labels =</span> LETTERS[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]))</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Wenn wir das grundlegende Objekt <code>lsd_obj</code> mit den Spalten, Zeilen und Behandlungen erstellt haben, können wir die Zuordnung randomisieren. Dabei wollen wir die Behandlungen <code>trt</code> auf die Zeilen <code>rows</code> und Spalten <code>cols</code> randomisieren. Deshalb ist sind die Behandlungen in der Option <code>allocated</code> sowie die Zeilen und Spalten in <code>recipient</code>.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>lsd_lay <span class="ot">&lt;-</span> <span class="fu">designRandomize</span>(<span class="at">allocated =</span> lsd_sys[<span class="st">"trt"</span>],</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>                           <span class="at">recipient =</span> lsd_sys[<span class="fu">c</span>(<span class="st">"rows"</span>, <span class="st">"cols"</span>)],</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>                           <span class="at">seed =</span> <span class="dv">141</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Wir können dann uns auch in <a href="#fig-exp-basic-6" class="quarto-xref">Abbildung&nbsp;<span>24.11</span></a> die Ausgabe des <em>latin square design</em> anschauen. Prinzipiell gibt es hier keinen Unterschied zu dem R Paket <code>{agricolae}</code>. Es ist dann eher eine Geschmacksfrage, wie die Darstellung aussehen soll. Meiner Meinung nach ist die Erstellung in <code>{dae}</code> viel zu kompiliziert im Vergleich zu den anderen R Paketen.</p>
<div class="cell" data-layout-align="center">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">designGGPlot</span>(lsd_lay, <span class="at">labels =</span> <span class="st">"trt"</span>, <span class="at">cellalpha =</span> <span class="fl">0.75</span>,</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">row.factors =</span> <span class="st">"rows"</span>, <span class="at">column.factors =</span> <span class="st">"cols"</span>,</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">blockdefinition =</span> <span class="fu">cbind</span>(<span class="dv">1</span>, <span class="dv">1</span>),</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">blocklinecolour =</span> <span class="st">"black"</span>, </span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">title =</span> <span class="st">"Pflanzschema für ein latin square design"</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-exp-basic-6" class="quarto-figure quarto-figure-center quarto-float anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-exp-basic-6-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="experimental-design-basic_files/figure-html/fig-exp-basic-6-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-9" data-glightbox="description: .lightbox-desc-9"><img src="experimental-design-basic_files/figure-html/fig-exp-basic-6-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="576"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-exp-basic-6-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;24.11— Schema der Pflanzungen nach den Behandlungen für das <em>latin square design</em>. Beachte die schwarzen Linien als Grenzen für die Blöcke. Im realen Leben können das Gänge zwischen Tischen sein oder Feldwege.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="spezialfälle" class="level2 page-columns page-full" data-number="24.5">
<h2 data-number="24.5" class="anchored" data-anchor-id="spezialfälle"><span class="header-section-number">24.5</span> Spezialfälle</h2>
<p>Im Folgenden schauen wir uns noch die Generierung von zwei Spezialfällen an. Beide sind im Prinzip wiederum zweifaktorielle Versuchspläne mit einer Behandlung und entsprechenden Wiederholungen in Blöcken. Beide sind aber etwas spezieller beim Aufbau, deshalb hier nur am Rande. Die Auswertung verlangt dann natürlich auch wieder etwas mehr Modellierung.</p>
<ul>
<li><a href="#sec-alpha">Alpha design</a></li>
<li><a href="#sec-augment">Augmented design</a></li>
</ul>
<p>Wir schauen uns einmal für diese Designs die Implementierung in <code>{agricolae}</code> sowie in <code>{FieldHub}</code> an. Selber machen ist hier etwas aufwendig und hier nutzen wir dann mal wirklich ein R Paket, dass macht es uns dann einfacher im Erstellen.</p>
<section id="sec-alpha" class="level3 page-columns page-full" data-number="24.5.1">
<h3 data-number="24.5.1" class="anchored" data-anchor-id="sec-alpha"><span class="header-section-number">24.5.1</span> Alpha design</h3>
<p>Der Alpha-Versuchsplan ist dafür gedacht ein Versuchsplan mit unvollständigen Blöcken abzubilden. Die Blöcke sind dann aber wiederum zu vollständigen Wiederholungen gruppiert. Das heißt, in jeder Wiederholung findest du alle Blöcke wieder. Solche Versuchspläne werden dann als auflösbar bezeichnet, also als berechenbar. Das klingt jetzt etwas komplizierter als es eiigentlich ist. Wie haben auch in diesem Beispiel wieder fünfzehn genetische Linien vorliegen. Wir haben aber in jedem unserer Blöcke nur Platz drei dieser Linien abzubilden. Das heißt also pro Block nehmen wir drei Linien damit kommen wir auf fünf Blöcke um alle Linien abzubilden. Diese fünf Blöcke werden dann in drei Wiederholungen randomisiert, so dass wir auf fünfzehn Blöcke kommen.</p>
<p>Okay, das klingt jetzt echt wirr. Schauen wir uns dazu einmal das Schema der Abhängigkeitsstruktur in der <a href="#fig-mermaid-basic-alpha" class="quarto-xref">Abbildung&nbsp;<span>24.12</span></a> an. Wir haben also unsere Behandlung <code>trt_gen</code> mit fünzehn Leveln entsprechend der fünfzehn genetischen Linien. Wir nehmen jetzt zufällig drei Linien heraus und packen diese drei Linien in einen Block <code>inc_block</code>. Das machen wir fünf mal, da wir <span class="math inline">\(15/3 = 5\)</span> Blöcke brauchen. Wir generieren <em>incomplete blocks</em>. Dann kommen alle <em>incomplete blocks</em> in eine Wiederholung <code>rep</code>. In einer Wiederholung sind alle genetischen Linien dann enthalten.</p>
<div class="cell" data-fig-width="6" data-layout-align="default">
<div class="cell-output-display">
<div id="fig-mermaid-basic-alpha" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-mermaid-basic-alpha-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div>
<pre class="mermaid mermaid-js" data-label="fig-mermaid-basic-alpha">flowchart LR
    A(trt_gen):::factor --&gt; B &amp; C &amp; D &amp; E &amp; F
    B[("G_10 
        G_4
        G_8")]:::level -.- G(((nested))) -.-&gt; L(inc_block):::inc_block
    C[("G_3
        G_15
        G_9")]:::level -.- H(((nested))) -.-&gt; L
    D[("G_2 
        G_11
        G_1")]:::level -.- I(((nested))) -.-&gt; L
    E[("G_13
        G_12
        G_7")]:::level -.- J(((nested))) -.-&gt; L
    F[("G_6 
        G_5
        G_14")]:::level -.- K(((nested))) -.-&gt; L
    L --- M(((nested))) --&gt; N(Wiederholung):::factor
    classDef factor fill:#56B4E9,stroke:#333,stroke-width:0.75px
    classDef level fill:#E69F00,stroke:#333,stroke-width:0.75px
    classDef inc_block fill:#CC79A7,stroke:#333,stroke-width:0.75px
</pre>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-mermaid-basic-alpha-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;24.12— Schematische Darstellung der Abhängigkeitsstruktur im Alpha-Versuchsplan. Die Level der Behandlung werden zufällig auf <em>incomplete blocks</em> aufgeteilt und diese Blöcke dann vollständig in Wiederholungen randomisiert.
</figcaption>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Modell zur Auswertung
</div>
</div>
<div class="callout-body-container callout-body">
<p>Wir rechnen ein multiples lineares Modell für die statistische Analyse.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">lm</span>(drymatter <span class="sc">~</span> trt <span class="sc">+</span> rep <span class="sc">+</span> rep<span class="sc">:</span>inc_block, <span class="at">data =</span> alpha_tbl)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Oder können überlegen ein gemischtes Modell zu rechnen.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">lmer</span>(drymatter <span class="sc">~</span> trt <span class="sc">+</span> rep <span class="sc">+</span> (<span class="dv">1</span> <span class="sc">|</span> rep<span class="sc">:</span>inc_block), <span class="at">data =</span> alpha_tbl)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Die Entscheidung kannst du dann mit der <a href="https://jkruppa.github.io/stat-modeling-basic.html#sec-model-basic-compare">Modellselektion</a> durchführen.</p>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>Auch hier hilft die Seite <a href="https://schmidtpaul.github.io/DSFAIR/alpha_JohnWilliams1995.html">DSFAIR - Alpha design</a> mit einer beispielhaften Auswertung eventuell weiter. Beispielhafte Daten und Auswertung sind dort vorhanden.</p>
</div></div><p>Deshalb brauchen wir erstmal unsere fünfzehn Linien <code>trt_gen</code> und unsere drei Wiederholungen <code>n_rep</code> sowie eine Größe von unseren Blöcken <code>size_block</code> von drei.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>trt_gen <span class="ot">&lt;-</span> <span class="fu">str_c</span>(<span class="st">"G"</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>)  </span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>n_trt_gen <span class="ot">&lt;-</span> <span class="fu">n_distinct</span>(trt_gen)</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>n_rep <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>size_block <span class="ot">&lt;-</span> <span class="dv">3</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Leider sind die Namen der Optionen etwas unglücklich gewählt. Zwar macht es Sinn die Namen etwas gleich zu halten, aber manchmal macht es die Sache für die Anwendung echt nicht einfacher. Hier ist also <code>k</code> die Größe der Blöcke und <code>r</code> die Anzahl der Wiederholungen. Es funktionieren nicht alle möglichen Kombinationen, im Zweifel bitte vorher hier mal rumspielen, bevor der Versuch angelegt wird oder schon Anzahlen bestimmt werden.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>alpha_obj <span class="ot">&lt;-</span> <span class="fu">design.alpha</span>(<span class="at">trt =</span> trt_gen,</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">k =</span> size_block,</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>                          <span class="at">r =</span> n_rep,</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">seed =</span> <span class="dv">42</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Alpha Design (0,1) - Serie  II 

Parameters Alpha Design
=======================
Treatmeans : 15
Block size : 3
Blocks     : 5
Replication: 3 

Efficiency factor
(E ) 0.7 

&lt;&lt;&lt; Book &gt;&gt;&gt;</code></pre>
</div>
</div>
<p>Wie immer müssen wir uns noch die Zeilen und Spalten selber erschaffen, damit wir das <em>alpha design</em> auch abbilden können. Hier ist wichtig, dass wir dann noch die Wiederholung haben, die kein Block ist. Pro Wiederholung haben wir eben fünf unvollständige Blöcke mit drei Linien vorliegen.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>alpha_book_tbl <span class="ot">&lt;-</span> alpha_obj<span class="sc">$</span>book <span class="sc">|&gt;</span> </span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">replication =</span> <span class="fu">str_c</span>(<span class="st">"Wiederholung "</span>, replication),</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">rows =</span> <span class="fu">as.numeric</span>(block),</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">cols =</span> <span class="fu">as.numeric</span>(cols))</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>In der <a href="#fig-exp-basic-7" class="quarto-xref">Abbildung&nbsp;<span>24.13</span></a> siehst du dann das Ergebnis der Versuchsplanung. Wir haben unsere drei Wiederholungen und in den drei Wiederholungen dann jeweils fünf Blöcke randomisiert. Pro Block finden sich dann drei Linien. Unsere Blöcke sind damit unvollständig. Für mich ist das <em>alpha design</em> eins der schwierigeren Designs, weil man hier zwischen den Wiederholungen und den Blöcken unterscheiden muss. Das führt manchmal zu Verwirrung was randomisert wird.</p>
<div class="cell" data-layout-align="center">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">desplot</span>(block <span class="sc">~</span> rows <span class="sc">+</span> cols <span class="sc">|</span> replication, <span class="at">flip =</span> <span class="cn">TRUE</span>,</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>        <span class="at">out1 =</span> replication,</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">out2 =</span> block, <span class="at">out2.gpar =</span> <span class="fu">list</span>(<span class="at">col =</span> <span class="st">"black"</span>, <span class="at">lty =</span> <span class="dv">3</span>), </span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">text =</span> trt_gen, <span class="at">cex =</span> <span class="dv">1</span>, <span class="at">shorten =</span> <span class="st">"no"</span>,</span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> alpha_book_tbl, </span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">"Pflanzschema für ein alpha design"</span>, </span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">show.key =</span> <span class="cn">FALSE</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-exp-basic-7" class="quarto-figure quarto-figure-center quarto-float anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-exp-basic-7-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="experimental-design-basic_files/figure-html/fig-exp-basic-7-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-10" data-glightbox="description: .lightbox-desc-10"><img src="experimental-design-basic_files/figure-html/fig-exp-basic-7-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="576"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-exp-basic-7-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;24.13— Schema der Pflanzungen nach den Behandlungen für das <em>alpha design</em>.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Dann nochmal das <em>alpha design</em> als Feldbuch rausschreiben und wir können mit der Datenerfassung beginnen. Auch hier hiulft es sich nochmal ein Beispieloutcome auszudenken und in die Tabelle als Spalte einzufügen. Dann kannst du schauen, ob es so passen könnte mit der Datenerhebung.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>lsd_book_tbl <span class="sc">|&gt;</span> </span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(replication, trt_gen, <span class="at">inc_block =</span> block, rows, cols) <span class="sc">|&gt;</span> </span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_xlsx</span>(<span class="st">"template_sheet.xlsx"</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Für die Erstellung des <em>alpha design</em> in der Shiny App schaue dir die Anleitung wie schon weiter oben unter <a href="https://didiermurillof.github.io/FielDHub/reference/alpha_lattice.html">Generates an Alpha Design mit <code>{FielDHub}</code></a> einmal an. Hier fängt es wirklich an sinnvoll zu sein, eine Shiny App zu haben. So kannst du viel besser mit den Parametern des <em>alpha designs</em> rumspielen und sehen was für dich passen würde. Hier einmal der Code für die Erstellung eines <em>alpha design</em> in R mit Code. Wir haben jetzt neun Behandlungen vorliegen, aber das kennst du ja schon von dem obigen Beispiel in <code>{agricolae}</code>. Auch hier haben wir dann drei Blöcke vorliegen und drei Wiederholungen. Damit erklärt sich der Code wir oben auch schon.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>alpha_obj <span class="ot">&lt;-</span> <span class="fu">alpha_lattice</span>(<span class="at">t =</span> <span class="dv">9</span>,</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>                           <span class="at">k =</span> <span class="dv">3</span>,</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>                           <span class="at">r =</span> <span class="dv">3</span>,</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>                           <span class="at">seed =</span> <span class="dv">2023</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Dann können wir uns auch hier sehr einfach das Feldbuch rausschrieben. Wir nutzen dann den gleichen Code wie oben für das rausschrieben nach Excel.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>alpha_obj<span class="sc">$</span>fieldBook <span class="sc">|&gt;</span> </span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">|&gt;</span> </span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 8
      ID LOCATION  PLOT   REP IBLOCK  UNIT ENTRY TREATMENT
   &lt;int&gt; &lt;fct&gt;    &lt;dbl&gt; &lt;int&gt;  &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;    
 1     1 1          101     1      1     1     6 G-6      
 2     2 1          102     1      1     2     1 G-1      
 3     3 1          103     1      1     3     8 G-8      
 4     4 1          104     1      2     1     5 G-5      
 5     5 1          105     1      2     2     3 G-3      
 6     6 1          106     1      2     3     7 G-7      
 7     7 1          107     1      3     1     4 G-4      
 8     8 1          108     1      3     2     2 G-2      
 9     9 1          109     1      3     3     9 G-9      
10    10 1          201     2      1     1     4 G-4      </code></pre>
</div>
</div>
<p>In der <a href="#fig-exp-basic-alpha-fieldhub" class="quarto-xref">Abbildung&nbsp;<span>24.14</span></a> siehst du dann einmal das <em>alpha design</em> in <code>{FielDHub}</code> dargestellt und hier gefällt mir dann die Abbildung überhaupt nicht mehr. Die Zahlen sind kaum zu lesen. Daher würde ich hier dann das erstellte Feldbuch <code>alpha_obj$fieldBook</code> nochmal selber in <code>{desplot}</code> darstellen und rausschreiben. So ist wirklich schwer zu lesen, was was sein soll. Die Farbwahl ist in <code>{FielDHub}</code> etwas eingeschränkt.</p>
<div class="cell" data-layout-align="center">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>alpha_obj <span class="sc">|&gt;</span> <span class="fu">plot</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-exp-basic-alpha-fieldhub" class="quarto-figure quarto-figure-center quarto-float anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-exp-basic-alpha-fieldhub-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="experimental-design-basic_files/figure-html/fig-exp-basic-alpha-fieldhub-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-11" data-glightbox="description: .lightbox-desc-11"><img src="experimental-design-basic_files/figure-html/fig-exp-basic-alpha-fieldhub-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="576"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-exp-basic-alpha-fieldhub-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;24.14— Schema der Pflanzungen nach den Behandlungen für das <em>alpha design</em>.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="sec-augment" class="level3 page-columns page-full" data-number="24.5.2">
<h3 data-number="24.5.2" class="anchored" data-anchor-id="sec-augment"><span class="header-section-number">24.5.2</span> Augmented design</h3>
<p>Das <em>augmened design</em> basiert darauf, dass wir neben den eigentlichen Behandlungen noch Standardbehandlungen vorliegen haben. Die Standardbehandlungen randomisieren wir voll auf die Blöcke, wohingegen die anderen Behandlungen unvollständig randomisiert werden. In unserem Beispiel haben wir jetzt fünfzehn genetische Linien <code>G1</code> bis <code>G15</code> in dem Behandlungsfaktor <code>trt_gen</code> sowie die Standardbehandlung <code>Std_A</code> und <code>Std_B</code> vorliegen. Wir werden dann drei Blöcke bilden und in jeder der Blöcke wird jeweils die Standardbehandlung <code>Std_A</code> und <code>Std_B</code> sowie eine <em>Auswahl</em> an genetischen Linien enthalten sein.</p>
<p>Klingt jetzt auch wieder sehr viel wirrer als es am Ende ist. Deshalb hier erstmal das Modell, wir haben auch hier im Prinzip nur zwei Faktoren vorliegen. Wir haben einmal den Faktor Behandlung <code>trt_gen</code> sowie den Faktor Block zu erstellen.</p>
<p><span class="math display">\[
drymatter \sim \overbrace{trt_{gen}}^{f_1} + \underbrace{inc\_{block}}_{f_2}
\]</span></p>
<p>mit</p>
<ul>
<li>dem Faktor Behandlung <code>trt</code> und den fünzehn genetischen Linien als Level <code>G_1</code> bis <code>G_15</code> und die beiden Standardbehandlungen <code>Std_A</code> und <code>Std_B</code>.</li>
<li>dem Faktor Block <code>inc_block</code> und den vier Leveln <code>I</code> bis <code>III</code>.</li>
</ul>
<p>In dem <em>augmened design</em> dreht sich aber alles um die Zuweisung der Behandlungslevel zu den Blöcken. In der <a href="#fig-mermaid-basic-aug" class="quarto-xref">Abbildung&nbsp;<span>24.15</span></a> wird die Zuordnung nochmal dargestellt. Die Standardbedingungen werden immer auf die Blöcke randomisiert. Daher haben wir für die Blöcke eine vollständige Randomisierung vorliegen. Die genetischen Linien werden nur teilweise jedem Block zugeordnet. Wir haben für die Level der genetischen Linien ein <em>incomplete block design</em> vorliegen.</p>
<div class="cell" data-fig-width="6" data-layout-align="default">
<div class="cell-output-display">
<div id="fig-mermaid-basic-aug" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-mermaid-basic-aug-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div>
<pre class="mermaid mermaid-js" data-label="fig-mermaid-basic-aug">flowchart LR
    A(trt_gen):::factor --&gt; B &amp; D
    B[("Std_A 
        Std_B")]:::level --- C(((nested))) --&gt; F(inc_block):::inc_block
    D[("G_1
        bis
        G_15")]:::level -.- E(((nested))) -.-&gt; F
    classDef factor fill:#56B4E9,stroke:#333,stroke-width:0.75px
    classDef level fill:#E69F00,stroke:#333,stroke-width:0.75px
    classDef inc_block fill:#CC79A7,stroke:#333,stroke-width:0.75px
</pre>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-mermaid-basic-aug-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;24.15— Schematische Darstellung der Abhängigkeitsstruktur im <em>augmened design</em>. Eine Auswahl der Level der genetischen Linien werden zufällig auf <em>incomplete blocks</em> aufgeteilt. Die Standardbedingungen werden vollständig jedem Block zugeordnet.
</figcaption>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Modell zur Auswertung
</div>
</div>
<div class="callout-body-container callout-body">
<p>Wir rechnen ein multiples lineares Modell für die statistische Analyse.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">lm</span>(drymatter <span class="sc">~</span> trt <span class="sc">+</span> inc_block, <span class="at">data =</span> augment_tbl)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Oder können überlegen ein gemischtes Modell zu rechnen.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">lmer</span>(drymatter <span class="sc">~</span> trt <span class="sc">+</span> (<span class="dv">1</span> <span class="sc">|</span> inc_block), <span class="at">data =</span> augment_tbl)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Die Entscheidung kannst du dann mit der <a href="https://jkruppa.github.io/stat-modeling-basic.html#sec-model-basic-compare">Modellselektion</a> durchführen.</p>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>Auch hier hilft die Seite <a href="https://schmidtpaul.github.io/DSFAIR/augmented_Pattersen1994.html">DSFAIR - Augmented design</a> mit einer beispielhaften Auswertung eventuell weiter. Beispielhafte Daten und Auswertung sind dort vorhanden.</p>
</div></div><p>Die Erstellung ist sehr fehleranfällig, wenn wir das selber machen. Deshalb nutzen wir hier das R Paket <code>{agricolae}</code>. Du musst eben sehr genau darauf achten, dass wirklich auch alle genetischen Linien in den Blöcken sind. Das macht aber die Funktion <code>design.dau()</code> gleich für uns. Wir brauchen also einmal einen Faktor für unsere genetischen Linien, dann einmal die Anzahl an Linien sowie die Anzahl an Blöcken. Das definieren wir uns jetzt hier einmal in Objekten vor, dass macht die Arbeit später einfacher.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>trt_gen <span class="ot">&lt;-</span> <span class="fu">str_c</span>(<span class="st">"G"</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>)   </span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>n_trt_gen <span class="ot">&lt;-</span> <span class="fu">n_distinct</span>(trt_gen)</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>n_block <span class="ot">&lt;-</span> <span class="dv">3</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Dann noch den Standard erschaffen. Hier ist wichtig, dass der Standard immer in jedem Block sein wird. Das wird nicht der Fall sein für die genetischen Linien. Daher haben wir dann für die Linien ein <em>incomplete block design</em> vorliegen.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>standard <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Std_A"</span>, <span class="st">"Std_B"</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Wir nutzen hier einal die Funktion <code>design.dau()</code> aus dem R Paket <code>{agricolae}</code> um uns das <em>augmented design</em> ersellen zu lassen. Das macht die Funktion auch einigermaßen gut, wir müssen gleich nur noch die Positionen auf dem Pflanzgrid ergänzen.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>augmented_obj <span class="ot">&lt;-</span> <span class="fu">design.dau</span>(<span class="at">trt1 =</span> standard,</span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>                            <span class="at">trt2 =</span> trt_gen,</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>                            <span class="at">r =</span> n_block,</span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>                            <span class="at">seed =</span> <span class="dv">42</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Jetzt nehmen wir das Feldbuch und ergänzen nochmal die Positionen <code>rows</code> und <code>cols</code>. Dabei müssen wir die <code>rows</code> etwas komplizierter aus der letzten Ziffer der Variable <code>plots</code> durch die Funktion <code>str_sub()</code> extrahieren. Sonst passt es leider nicht ganz mit den jeweiligen Positionen. Die Spalten <code>cols</code> sind unsere Blöcke.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>augmented_book_tbl <span class="ot">&lt;-</span> augmented_obj<span class="sc">$</span>book <span class="sc">|&gt;</span> </span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cols =</span> <span class="fu">as.numeric</span>(block),</span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">rows =</span> <span class="fu">as.numeric</span>(<span class="fu">str_sub</span>(plots, <span class="dv">3</span>,<span class="dv">3</span>)))</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Es ist eine gute Idee sich die Linien und die Standards einmal unterschiedlich einzufärben. Ich nutze für die Linien einen Gradienten von Blau und für die Standardbehandlungen einen Gradienten von Orange. Wir erschaffen uns also einen Vektor mit Farbnamen gleich der Anzahl an Linien plus den zwei Standards.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>blue_15 <span class="ot">&lt;-</span> <span class="fu">colorRampPalette</span>(<span class="at">colors=</span><span class="fu">c</span>(<span class="st">"#56B4E9"</span>, <span class="st">"#0072B2"</span>))(<span class="dv">15</span>) </span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>orange_03 <span class="ot">&lt;-</span> <span class="fu">colorRampPalette</span>(<span class="at">colors=</span><span class="fu">c</span>(<span class="st">"#E69F00"</span>, <span class="st">"#D55E00"</span>))(<span class="dv">3</span>) </span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>blue_15_and_orange_03 <span class="ot">&lt;-</span> <span class="fu">c</span>(blue_15, orange_03)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Dann müssen wir noch den Farbvektor korrekt benennen, so dass die Behandlung im Namen steht und darunter im Vektor dann der Farbwert.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(blue_15_and_orange_03) <span class="ot">&lt;-</span> augmented_book_tbl <span class="sc">|&gt;</span> </span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(trt) <span class="sc">|&gt;</span> <span class="fu">as.character</span>() <span class="sc">|&gt;</span> <span class="fu">sort</span>() <span class="sc">|&gt;</span> <span class="fu">unique</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Dann können wir schon in der <a href="#fig-exp-basic-8" class="quarto-xref">Abbildung&nbsp;<span>24.16</span></a> einmal das <em>augmented design</em> einmal anschauen. Es ist schön zu sehen, das pro Reihe und damit Block beide Standards zufällig auf der Parzelle auftauchen. Auf der anderen Seite sind nicht alle fünfzehn Linien in jedem Block enthalten. Wir sparen mit dem <em>augmented design</em> auf jeden Fall Platz auf dem Feld und können so mehr Linien testen, als wir es mit einem RCBD gekonnt hätten.</p>
<div class="cell" data-layout-align="center">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">desplot</span>(trt <span class="sc">~</span> rows <span class="sc">+</span> cols, <span class="at">flip =</span> <span class="cn">TRUE</span>,</span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>        <span class="at">out1 =</span> block, <span class="at">out1.gpar =</span> <span class="fu">list</span>(<span class="at">col =</span> <span class="st">"black"</span>, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">lty =</span> <span class="dv">3</span>),</span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">col.regions =</span> blue_15_and_orange_03,  </span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">text =</span> trt, <span class="at">cex =</span> <span class="dv">1</span>, <span class="at">shorten =</span> <span class="st">"no"</span>,</span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> augmented_book_tbl,</span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">"Pflanzschema für ein augmented design mit zwei Standards."</span>, </span>
<span id="cb72-7"><a href="#cb72-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">show.key =</span> F)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-exp-basic-8" class="quarto-figure quarto-figure-center quarto-float anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-exp-basic-8-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="experimental-design-basic_files/figure-html/fig-exp-basic-8-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-12" data-glightbox="description: .lightbox-desc-12"><img src="experimental-design-basic_files/figure-html/fig-exp-basic-8-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="576"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-exp-basic-8-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;24.16— Schema der Pflanzungen nach den Behandlungen für das <em>augmented design</em>. Die Standardbedingungen sind vollständig in den Blöcken randomisiert, die genetischen Linien nur nicht komplett.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Für die Erstellung des <em>augmented design</em> in der Shiny App schaue dir die Anleitung wie schon weiter oben unter <a href="https://didiermurillof.github.io/FielDHub/reference/RCBD_augmented.html">Generates an Augmented Randomized Complete Block Design (ARCBD) mit <code>{FielDHub}</code></a> einmal an. Hier fängt es wirklich an sinnvoll zu sein, eine Shiny App zu haben. So kannst du viel besser mit den Parametern des <em>augmented design</em> rumspielen und sehen was für dich passen würde. Hier einmal der Code für die Erstellung eines <em>augmented design</em> in R mit Code. Wir haben jetzt fünfzehn Linien vorliegen, aber das kennst du ja schon von dem obigen Beispiel in <code>{agricolae}</code>. Auch hier haben wir dann fünf Blöcke vorliegen und zwei Standardbehandlungen. Damit erklärt sich der Code wir oben auch schon.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>augmented_obj <span class="ot">&lt;-</span> <span class="fu">RCBD_augmented</span>(<span class="at">lines =</span> <span class="dv">15</span>,</span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>                                <span class="at">checks =</span> <span class="dv">2</span>,</span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>                                <span class="at">b =</span> <span class="dv">5</span>,</span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>                                <span class="at">seed =</span> <span class="dv">2023</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Spannenderweise müssen wir hier fünf Blöcke wählen und können nicht das Design von oben in <code>{agricolae}</code> nachbauen. Dennoch erstellen wir uns auch schon das letzte Feldbuch in diesem Kapitel und können dann das Feldbuch für die Planung nutzen. Auch hier hilft dann wirklich die Shiny App mehr, dann kannst du besser mit den Werten spielen.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>augmented_obj<span class="sc">$</span>fieldBook <span class="sc">|&gt;</span> </span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">|&gt;</span> </span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 11
      ID EXPT  LOCATION YEAR   PLOT   ROW COLUMN CHECKS BLOCK ENTRY TREATMENT
   &lt;int&gt; &lt;fct&gt; &lt;fct&gt;    &lt;chr&gt; &lt;dbl&gt; &lt;int&gt;  &lt;int&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;    
 1     1 Expt1 1        2024    101     1      1      0     1 15    G15      
 2     2 Expt1 1        2024    102     1      2      1     1 1     CH1      
 3     3 Expt1 1        2024    103     1      3      0     1 3     G3       
 4     4 Expt1 1        2024    104     1      4      0     1 9     G9       
 5     5 Expt1 1        2024    105     1      5      1     1 2     CH2      
 6     6 Expt1 1        2024    106     2      5      0     2 16    G16      
 7     7 Expt1 1        2024    107     2      4      1     2 1     CH1      
 8     8 Expt1 1        2024    108     2      3      1     2 2     CH2      
 9     9 Expt1 1        2024    109     2      2      0     2 10    G10      
10    10 Expt1 1        2024    110     2      1      0     2 8     G8       </code></pre>
</div>
</div>
<p>Abschließend haben wir dann die <a href="#fig-exp-basic-augmented-fieldhub" class="quarto-xref">Abbildung&nbsp;<span>24.17</span></a>, die sich dann auch von der obigen unterscheidet. Auch hier gefällt mir die Abbildung nicht so sehr und ich würde die andere <a href="#fig-exp-basic-8" class="quarto-xref">Abbildung&nbsp;<span>24.16</span></a> mit dem <code>{desplot}</code> Code vorziehen. Ich erkenne mit dem eigenen Farbdesign mehr als in dieser Variante. Aber auch hier musst du dann schauen was du wirklich brauchst. Erstmal das Design in <code>{FielDHub}</code> erstellen und dann das Feldbuch in <code>{desplot}</code> selber hübsch machen.</p>
<div class="cell" data-layout-align="center">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>augmented_obj <span class="sc">|&gt;</span> <span class="fu">plot</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-exp-basic-augmented-fieldhub" class="quarto-figure quarto-figure-center quarto-float anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-exp-basic-augmented-fieldhub-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="experimental-design-basic_files/figure-html/fig-exp-basic-augmented-fieldhub-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-13" data-glightbox="description: .lightbox-desc-13"><img src="experimental-design-basic_files/figure-html/fig-exp-basic-augmented-fieldhub-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="576"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-exp-basic-augmented-fieldhub-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;24.17— Schema der Pflanzungen nach den Behandlungen für das <em>augmented design</em>. Die Standardbedingungen sind vollständig in den Blöcken randomisiert, die genetischen Linien nur nicht komplett.
</figcaption>
</figure>
</div>
</div>
</div>


<!-- -->

<div class="hidden" aria-hidden="true">
<span class="glightbox-desc lightbox-desc-1">Abbildung&nbsp;24.1— Schema der Pflanzungen nach den Behandlungen für das <em>complete randomized design</em>.</span>
<span class="glightbox-desc lightbox-desc-2">Abbildung&nbsp;24.2— Schema der Pflanzungen nach den Behandlungen für das <em>complete randomized design</em>.</span>
<span class="glightbox-desc lightbox-desc-3">Abbildung&nbsp;24.3— Schema der Pflanzungen nach den Behandlungen für das <em>complete randomized design</em>.</span>
<span class="glightbox-desc lightbox-desc-4">Abbildung&nbsp;24.5— Schema der Pflanzungen nach den Behandlungen für das randomized complete block design. Beachte die schwarzen Linien als Grenzen für die Blöcke. Im realen Leben können das Gänge zwischen Tischen sein oder Feldwege.</span>
<span class="glightbox-desc lightbox-desc-5">Abbildung&nbsp;24.6— Schema der Pflanzungen nach den Behandlungen für das randomized complete block design. Beachte die schwarzen Linien als Grenzen für die Blöcke. Im realen Leben können das Gänge zwischen Tischen sein oder Feldwege.</span>
<span class="glightbox-desc lightbox-desc-6">Abbildung&nbsp;24.7— Schema der Pflanzungen nach den Behandlungen für das randomized complete block design. Beachte die schwarzen Linien als Grenzen für die Blöcke. Im realen Leben können das Gänge zwischen Tischen sein oder Feldwege.</span>
<span class="glightbox-desc lightbox-desc-7">Abbildung&nbsp;24.9— Schema der Pflanzungen nach den Behandlungen für das <em>latin square design</em>. Beachte die schwarzen Linien als Grenzen für die Blöcke. Im realen Leben können das Gänge zwischen Tischen sein oder Feldwege.</span>
<span class="glightbox-desc lightbox-desc-8">Abbildung&nbsp;24.10— Schema der Pflanzungen nach den Behandlungen für das latin square design. Beachte die schwarzen Linien als Grenzen für die Blöcke. Im realen Leben können das Gänge zwischen Tischen sein oder Feldwege.</span>
<span class="glightbox-desc lightbox-desc-9">Abbildung&nbsp;24.11— Schema der Pflanzungen nach den Behandlungen für das <em>latin square design</em>. Beachte die schwarzen Linien als Grenzen für die Blöcke. Im realen Leben können das Gänge zwischen Tischen sein oder Feldwege.</span>
<span class="glightbox-desc lightbox-desc-10">Abbildung&nbsp;24.13— Schema der Pflanzungen nach den Behandlungen für das <em>alpha design</em>.</span>
<span class="glightbox-desc lightbox-desc-11">Abbildung&nbsp;24.14— Schema der Pflanzungen nach den Behandlungen für das <em>alpha design</em>.</span>
<span class="glightbox-desc lightbox-desc-12">Abbildung&nbsp;24.16— Schema der Pflanzungen nach den Behandlungen für das <em>augmented design</em>. Die Standardbedingungen sind vollständig in den Blöcken randomisiert, die genetischen Linien nur nicht komplett.</span>
<span class="glightbox-desc lightbox-desc-13">Abbildung&nbsp;24.17— Schema der Pflanzungen nach den Behandlungen für das <em>augmented design</em>. Die Standardbedingungen sind vollständig in den Blöcken randomisiert, die genetischen Linien nur nicht komplett.</span>
</div>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Kopiert");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Kopiert");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      const annoteTargets = window.document.querySelectorAll('.code-annotation-anchor');
      for (let i=0; i<annoteTargets.length; i++) {
        const annoteTarget = annoteTargets[i];
        const targetCell = annoteTarget.getAttribute("data-target-cell");
        const targetAnnotation = annoteTarget.getAttribute("data-target-annotation");
        const contentFn = () => {
          const content = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          if (content) {
            const tipContent = content.cloneNode(true);
            tipContent.classList.add("code-annotation-tip-content");
            return tipContent.outerHTML;
          }
        }
        const config = {
          allowHTML: true,
          content: contentFn,
          onShow: (instance) => {
            selectCodeLines(instance.reference);
            instance.reference.classList.add('code-annotation-active');
            window.tippy.hideAll();
          },
          onHide: (instance) => {
            unselectCodeLines();
            instance.reference.classList.remove('code-annotation-active');
          },
          maxWidth: 300,
          delay: [50, 0],
          duration: [200, 0],
          offset: [5, 10],
          arrow: true,
          appendTo: function(el) {
            return el.parentElement.parentElement.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto',
          placement: 'right',
          popperOptions: {
            modifiers: [
            {
              name: 'flip',
              options: {
                flipVariations: false, // true by default
                allowedAutoPlacements: ['right'],
                fallbackPlacements: ['right', 'top', 'top-start', 'top-end', 'bottom', 'bottom-start', 'bottom-end', 'left'],
              },
            },
            {
              name: 'preventOverflow',
              options: {
                mainAxis: false,
                altAxis: false
              }
            }
            ]        
          }      
        };
        window.tippy(annoteTarget, config); 
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./experimental-design-r.html" class="pagination-link" aria-label="Versuchsplanung in R">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Versuchsplanung in R</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./experimental-design-advanced.html" class="pagination-link" aria-label="Fortgeschrittene Designs">
        <span class="nav-page-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Fortgeschrittene Designs</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Quellcode</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb77" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo = FALSE}</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a><span class="in">pacman::p_load(tidyverse, readxl, knitr, kableExtra, Hmisc,</span></span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a><span class="in">               grid, agricolae, patchwork, desplot, modelr)</span></span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a><span class="fu"># Einfache Designs {#sec-experimental-design-basic}</span></span>
<span id="cb77-7"><a href="#cb77-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-8"><a href="#cb77-8" aria-hidden="true" tabindex="-1"></a>*Letzte Änderung am `r format(fs::file_info("experimental-design-basic.qmd")$modification_time, '%d. %B %Y um %H:%M:%S')`*</span>
<span id="cb77-9"><a href="#cb77-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-10"><a href="#cb77-10" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; *"This is my favorite part about analytics: Taking boring flat data and bringing it to life through visualization." --- John Tukey"*</span></span>
<span id="cb77-11"><a href="#cb77-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-12"><a href="#cb77-12" aria-hidden="true" tabindex="-1"></a>In diesem Kapitel wollen wir uns mit der Erstellung von einfachen experimentellen Designs beschäftigen. Dementsprechend schauen wir uns nur die drei folgenden Designs hier in diesem Kapitel an.</span>
<span id="cb77-13"><a href="#cb77-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-14"><a href="#cb77-14" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">Complete randomized design (CRD)</span><span class="co">](#sec-crd)</span></span>
<span id="cb77-15"><a href="#cb77-15" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">Randomized complete block design (RCBD)</span><span class="co">](#sec-rcbd)</span></span>
<span id="cb77-16"><a href="#cb77-16" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">Latin square design (LSD)</span><span class="co">](#sec-lsd)</span></span>
<span id="cb77-17"><a href="#cb77-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-18"><a href="#cb77-18" aria-hidden="true" tabindex="-1"></a>Als Spezialfälle dann noch folgende Designs am Ende des Kapitels.</span>
<span id="cb77-19"><a href="#cb77-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-20"><a href="#cb77-20" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">Alpha design</span><span class="co">](#sec-alpha)</span></span>
<span id="cb77-21"><a href="#cb77-21" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">Augmented design</span><span class="co">](#sec-augment)</span></span>
<span id="cb77-22"><a href="#cb77-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-23"><a href="#cb77-23" aria-hidden="true" tabindex="-1"></a>Dabei werden wir verschiedene Wege gehen. Leider geht es hier wirklich nicht mehr ohne eine Idee der Programmierung in R. Sonst kannst du leider dem Kapitel nicht folgen. Bitte schau auch nochmal in das vorherige Kapitel zur <span class="co">[</span><span class="ot">Versuchsplanung in R</span><span class="co">](#sec-experimental-design-r)</span>. Wir schauen uns jetzt einmal die einfache Umsetzung händisch an, dann einmal in dem R Paket <span class="in">`{FielDHub}`</span> sowie dem R Paket <span class="in">`{agricolae}`</span> und teilweise in dem R Paket <span class="in">`{dae}`</span>. Nicht immer ist alles möglich, mal ist es dann händisch zu kompliziert oder aber eines der Pakete bietet das experimentelle Design nicht an - oder ich habe es nicht gefunden. Das charmante an dem neuen R Paket <span class="in">`{FielDHub}`</span> ist die Verbindung einer Shiny App zusammen mit dem normalen Code, den du hier siehst. Ich habe dir immer die Referenz zu <span class="in">`{FielDHub}`</span> hinzugefügt, in der ist auch die Anleitung zu finden für die Shiny App. Um <span class="in">`{FielDHub}`</span> im Browser zu starten, musst du nur folgenden Code in R ausführen, nachdem du das R Paket installiert hast.</span>
<span id="cb77-24"><a href="#cb77-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-27"><a href="#cb77-27" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-28"><a href="#cb77-28" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb77-29"><a href="#cb77-29" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(FielDHub)</span>
<span id="cb77-30"><a href="#cb77-30" aria-hidden="true" tabindex="-1"></a><span class="fu">run_app</span>()</span>
<span id="cb77-31"><a href="#cb77-31" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-32"><a href="#cb77-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-33"><a href="#cb77-33" aria-hidden="true" tabindex="-1"></a>In dem nachfolgenden Kapitel zu den fortgeschrittenen Designs findest du dann noch mehr experimentelle Designs und wie du diese Designs in R generieren kannst. Dieses Kapitel sollte aber ausreichen um einfache Projekte im Rahmen einer Abschlussarbeit oder einem Studienprojekt zu planen. Auch findest du im <span class="co">[</span><span class="ot">Chapter 2 Designing experiments</span><span class="co">](https://www.statforbiology.com/_statbookeng/designing-experiments#selecting-the-units-within-the-field)</span> aus <span class="co">[</span><span class="ot">Experimental methods in agriculture</span><span class="co">](https://www.statforbiology.com/_statbookeng/)</span> noch schöne Beispiele und photographische Abbildungen für experimentelle Designs.</span>
<span id="cb77-34"><a href="#cb77-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-35"><a href="#cb77-35" aria-hidden="true" tabindex="-1"></a><span class="fu">## Genutzte R Pakete</span></span>
<span id="cb77-36"><a href="#cb77-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-37"><a href="#cb77-37" aria-hidden="true" tabindex="-1"></a>Wir wollen folgende R Pakete in diesem Kapitel nutzen.</span>
<span id="cb77-38"><a href="#cb77-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-39"><a href="#cb77-39" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo = TRUE}</span></span>
<span id="cb77-40"><a href="#cb77-40" aria-hidden="true" tabindex="-1"></a><span class="in">#| message: false</span></span>
<span id="cb77-41"><a href="#cb77-41" aria-hidden="true" tabindex="-1"></a><span class="in">set.seed(2034)</span></span>
<span id="cb77-42"><a href="#cb77-42" aria-hidden="true" tabindex="-1"></a><span class="in">pacman::p_load(tidyverse, magrittr, dae, agricolae, FielDHub,</span></span>
<span id="cb77-43"><a href="#cb77-43" aria-hidden="true" tabindex="-1"></a><span class="in">               conflicted)</span></span>
<span id="cb77-44"><a href="#cb77-44" aria-hidden="true" tabindex="-1"></a><span class="in">conflicts_prefer(magrittr::set_names)</span></span>
<span id="cb77-45"><a href="#cb77-45" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-46"><a href="#cb77-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-47"><a href="#cb77-47" aria-hidden="true" tabindex="-1"></a>An der Seite des Kapitels findest du den Link *Quellcode anzeigen*, über den du Zugang zum gesamten R-Code dieses Kapitels erhältst.</span>
<span id="cb77-48"><a href="#cb77-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-49"><a href="#cb77-49" aria-hidden="true" tabindex="-1"></a><span class="fu">## Complete randomized design (CRD) {#sec-crd}</span></span>
<span id="cb77-50"><a href="#cb77-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-51"><a href="#cb77-51" aria-hidden="true" tabindex="-1"></a>Das komplett randomisierte Design ist sicherlich das einfachste Design. Aber auch das praktischste, wenn du ein gar nicht so komplexes Experiment hast. Im PRinzip hast du nur eine Behandlung mit unterschiedlichen Gruppen. Oder allgemeiner gesprochen, du hast einen Faktor $f_1$, der deine Behandlungen beinhaltet. Du kannst viele Behandlungen haben, die dann als Level des Faktors dargestellt werden. Wir gehen jetzt das *complete randomized design* einmal an einem Beispiel durch. Hier einmal für eine Behandlung <span class="in">`trt`</span> mit vier Leveln oder auch Gruppen <span class="in">`ctrl`</span>, <span class="in">`A`</span>, <span class="in">`B`</span> und <span class="in">`C`</span> sowie als Outcome das Trockengewicht <span class="in">`drymatter`</span>. Das Outcome müssen wir gar nicht weiter beachten, es dient nur als Gedankenstütze.</span>
<span id="cb77-52"><a href="#cb77-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-53"><a href="#cb77-53" aria-hidden="true" tabindex="-1"></a>Wir haben also folgendes Modell, was wir dann in einem Design abbilden wollen.</span>
<span id="cb77-54"><a href="#cb77-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-55"><a href="#cb77-55" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb77-56"><a href="#cb77-56" aria-hidden="true" tabindex="-1"></a>drymatter \sim \overbrace{trt}^{f_1} </span>
<span id="cb77-57"><a href="#cb77-57" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb77-58"><a href="#cb77-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-59"><a href="#cb77-59" aria-hidden="true" tabindex="-1"></a>mit</span>
<span id="cb77-60"><a href="#cb77-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-61"><a href="#cb77-61" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>dem Faktor Behandlung <span class="in">`trt`</span> und den vier Behandlungsstufen als Level <span class="in">`ctrl`</span>, <span class="in">`A`</span>, <span class="in">`B`</span> und <span class="in">`C`</span>.</span>
<span id="cb77-62"><a href="#cb77-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-63"><a href="#cb77-63" aria-hidden="true" tabindex="-1"></a>Jetzt ist nur noch die Frage, wie oft wollen wir jede Behandlung wiederholen (eng. *replicate*). Wir entscheiden uns dafür jeweils 4 Pflanzen pro Behandlungsgruppe zu verwenden. Damit haben wir vier Wiederholungen für vier Behandlungsgruppen und somit insgesamt zwanzig Pflanzen oder auch Beobachtungen.</span>
<span id="cb77-64"><a href="#cb77-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-65"><a href="#cb77-65" aria-hidden="true" tabindex="-1"></a>::: callout-tip</span>
<span id="cb77-66"><a href="#cb77-66" aria-hidden="true" tabindex="-1"></a><span class="fu">## Modell zur Auswertung</span></span>
<span id="cb77-67"><a href="#cb77-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-68"><a href="#cb77-68" aria-hidden="true" tabindex="-1"></a>Wir rechnen ein simples lineares Modell für die statistische Analyse.</span>
<span id="cb77-69"><a href="#cb77-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-72"><a href="#cb77-72" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-73"><a href="#cb77-73" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: FALSE</span></span>
<span id="cb77-74"><a href="#cb77-74" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">lm</span>(drymatter <span class="sc">~</span> trt, <span class="at">data =</span> crd_tbl)</span>
<span id="cb77-75"><a href="#cb77-75" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-76"><a href="#cb77-76" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb77-77"><a href="#cb77-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-78"><a href="#cb77-78" aria-hidden="true" tabindex="-1"></a>::: {.callout-caution collapse="true"}</span>
<span id="cb77-79"><a href="#cb77-79" aria-hidden="true" tabindex="-1"></a><span class="fu">## Randomisierung kurz und schmerzlos</span></span>
<span id="cb77-80"><a href="#cb77-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-81"><a href="#cb77-81" aria-hidden="true" tabindex="-1"></a>Wenn du für deine zwanzig Pflanzen nur ein Randomisierungmuster brauchst, dann empfehle ich dir die Folgende schnelle Art und Weise. Du nimmst die Zahlen von 1 bis 20 und mischt die Zahlen einmal mit der Funktion <span class="in">`sample()`</span> durch. Dann erstellst du dir als dein Grid für deine Pflanzen mit einer $4 \times 5$-Matrix und pflanzt nach diesem Grid die Pflanzen ein. Das war es dann und du bist durch.</span>
<span id="cb77-82"><a href="#cb77-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-85"><a href="#cb77-85" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-86"><a href="#cb77-86" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">20</span> <span class="sc">|&gt;</span> </span>
<span id="cb77-87"><a href="#cb77-87" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample</span>() <span class="sc">|&gt;</span> </span>
<span id="cb77-88"><a href="#cb77-88" aria-hidden="true" tabindex="-1"></a>  <span class="fu">matrix</span>(<span class="at">nrow =</span> <span class="dv">4</span>, <span class="at">ncol =</span> <span class="dv">5</span>,</span>
<span id="cb77-89"><a href="#cb77-89" aria-hidden="true" tabindex="-1"></a>         <span class="at">dimnames =</span> <span class="fu">list</span>(<span class="fu">str_c</span>(<span class="st">"Reihe"</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">sep =</span> <span class="st">"-"</span>),</span>
<span id="cb77-90"><a href="#cb77-90" aria-hidden="true" tabindex="-1"></a>                         <span class="fu">str_c</span>(<span class="st">"Spalte"</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">sep =</span> <span class="st">"-"</span>)))</span>
<span id="cb77-91"><a href="#cb77-91" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-92"><a href="#cb77-92" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb77-93"><a href="#cb77-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-94"><a href="#cb77-94" aria-hidden="true" tabindex="-1"></a><span class="fu">### ... mit `expand_grid()`</span></span>
<span id="cb77-95"><a href="#cb77-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-96"><a href="#cb77-96" aria-hidden="true" tabindex="-1"></a>Warum kompliziert, wenn es auch einfach geht. Wir nutzen hier einmal die Funktion <span class="in">`expand_grid()`</span> um uns das *complete randomized design* zu erstellen. Die Randomisierung kommt dann über das <span class="in">`sample()`</span> und der Pflanzenidentifikationsnummer <span class="in">`pid`</span>. Das geht super einfach und wir brauchen auch gar keine anderen höheren Funktionen von komplexeren R Paketen. Die Spalte <span class="in">`trt_rep`</span> wird uns später helfen die Beobachtung dann in dem Grid der Pflanzenposition auf dem Tisch wiederzufinden.</span>
<span id="cb77-97"><a href="#cb77-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-100"><a href="#cb77-100" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-101"><a href="#cb77-101" aria-hidden="true" tabindex="-1"></a>crd_long_tbl <span class="ot">&lt;-</span> <span class="fu">expand_grid</span>(<span class="at">trt =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">rep =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>) <span class="sc">|&gt;</span> </span>
<span id="cb77-102"><a href="#cb77-102" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">trt =</span> <span class="fu">factor</span>(trt, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"ctrl"</span>, <span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>)),</span>
<span id="cb77-103"><a href="#cb77-103" aria-hidden="true" tabindex="-1"></a>         <span class="at">rep =</span> <span class="fu">factor</span>(rep, <span class="at">labels =</span> <span class="fu">as.roman</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>)),</span>
<span id="cb77-104"><a href="#cb77-104" aria-hidden="true" tabindex="-1"></a>         <span class="at">trt_rep =</span> <span class="fu">str_c</span>(trt, <span class="st">"."</span>, rep),</span>
<span id="cb77-105"><a href="#cb77-105" aria-hidden="true" tabindex="-1"></a>         <span class="at">pid =</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">n</span>())) <span class="sc">|&gt;</span>  <span class="do">## Randomsierung über alles</span></span>
<span id="cb77-106"><a href="#cb77-106" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(pid, <span class="fu">everything</span>())</span>
<span id="cb77-107"><a href="#cb77-107" aria-hidden="true" tabindex="-1"></a>crd_long_tbl</span>
<span id="cb77-108"><a href="#cb77-108" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-109"><a href="#cb77-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-110"><a href="#cb77-110" aria-hidden="true" tabindex="-1"></a>Dann kannst du dir die Datei mit der Funktion <span class="in">`write_xlsx()`</span> aus dem R Paket <span class="in">`{writexl}`</span> raus schreiben und dann entsprechend mit deinen Messwerten für das Trockengewicht ergänzen.</span>
<span id="cb77-111"><a href="#cb77-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-114"><a href="#cb77-114" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-115"><a href="#cb77-115" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb77-116"><a href="#cb77-116" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb77-117"><a href="#cb77-117" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb77-118"><a href="#cb77-118" aria-hidden="true" tabindex="-1"></a>crd_long_tbl <span class="sc">|&gt;</span> </span>
<span id="cb77-119"><a href="#cb77-119" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_xlsx</span>(<span class="st">"template_sheet.xlsx"</span>)</span>
<span id="cb77-120"><a href="#cb77-120" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-121"><a href="#cb77-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-122"><a href="#cb77-122" aria-hidden="true" tabindex="-1"></a>Für die Visualisierung fehlt uns jetzt noch die Positionsangaben auf dem Feld. Daher bauen wir uns einmal ein Grid der Reihen <span class="in">`rows`</span> und der Spalten <span class="in">`cols`</span>. Das Grid können wir dann mit den nach den Pflanzen-ID's sortieren Design zusammenbringen. Damit haben wir dann eigentlich schon fast alles zusammen.</span>
<span id="cb77-123"><a href="#cb77-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-126"><a href="#cb77-126" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-127"><a href="#cb77-127" aria-hidden="true" tabindex="-1"></a>crd_plot_tbl <span class="ot">&lt;-</span> crd_long_tbl <span class="sc">|&gt;</span> </span>
<span id="cb77-128"><a href="#cb77-128" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(pid) <span class="sc">|&gt;</span> </span>
<span id="cb77-129"><a href="#cb77-129" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(<span class="fu">expand_grid</span>(<span class="at">row =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">col =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>))</span>
<span id="cb77-130"><a href="#cb77-130" aria-hidden="true" tabindex="-1"></a>crd_plot_tbl</span>
<span id="cb77-131"><a href="#cb77-131" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-132"><a href="#cb77-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-133"><a href="#cb77-133" aria-hidden="true" tabindex="-1"></a>Jetzt können wir uns einmal das Grid der Pflanzungen in der @fig-exp-basic-1 einmal anschauen. Wir nutzen hier die Möglichkeiten des R Pakets <span class="in">`{desplot}`</span>. Hier wird es dann nochmal klarer wo die Pflanzen eigentlich hin sollen. Du kannst dir dann den Tisch so einteilen, dass eben oben links die vierte Wiederholung der Behandlung <span class="in">`B`</span> steht. Dann steht rechts daneben die zweite Wiederholung der Behandlung <span class="in">`C`</span>. Nach der Ernte bestimmst du dann das Trockengewicht und trägst es in die Exceltabelle ein.</span>
<span id="cb77-134"><a href="#cb77-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-137"><a href="#cb77-137" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-138"><a href="#cb77-138" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb77-139"><a href="#cb77-139" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb77-140"><a href="#cb77-140" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-exp-basic-1</span></span>
<span id="cb77-141"><a href="#cb77-141" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-align: center</span></span>
<span id="cb77-142"><a href="#cb77-142" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 4</span></span>
<span id="cb77-143"><a href="#cb77-143" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 6</span></span>
<span id="cb77-144"><a href="#cb77-144" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Schema der Pflanzungen nach den Behandlungen für das *complete randomized design*."</span></span>
<span id="cb77-145"><a href="#cb77-145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-146"><a href="#cb77-146" aria-hidden="true" tabindex="-1"></a><span class="fu">desplot</span>(<span class="at">data =</span> crd_plot_tbl, </span>
<span id="cb77-147"><a href="#cb77-147" aria-hidden="true" tabindex="-1"></a>        <span class="at">form =</span> trt <span class="sc">~</span> col <span class="sc">+</span> row,</span>
<span id="cb77-148"><a href="#cb77-148" aria-hidden="true" tabindex="-1"></a>        <span class="at">text =</span> trt_rep, <span class="at">cex =</span> <span class="dv">1</span>, <span class="at">show.key =</span> <span class="cn">FALSE</span>, </span>
<span id="cb77-149"><a href="#cb77-149" aria-hidden="true" tabindex="-1"></a>        <span class="at">shorten =</span> <span class="st">"no"</span>, <span class="at">flip =</span> <span class="cn">TRUE</span>,</span>
<span id="cb77-150"><a href="#cb77-150" aria-hidden="true" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">"Pflanzschema für ein complete randomized design"</span>)</span>
<span id="cb77-151"><a href="#cb77-151" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-152"><a href="#cb77-152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-153"><a href="#cb77-153" aria-hidden="true" tabindex="-1"></a>Das war jetzt die schnelle Variante mit <span class="in">`expand_grid()`</span> und der anschließenden Visualisierung mit einem Plan für die Positionen der jeweiligen Beobachtungen.</span>
<span id="cb77-154"><a href="#cb77-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-155"><a href="#cb77-155" aria-hidden="true" tabindex="-1"></a><span class="fu">### ... mit `{FielDHub}`</span></span>
<span id="cb77-156"><a href="#cb77-156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-157"><a href="#cb77-157" aria-hidden="true" tabindex="-1"></a>Für die Erstellung des *complete randomized design* in der Shiny App schaue dir die Anleitung unter <span class="co">[</span><span class="ot">Completely Randomized Design mit `{FielDHub}`</span><span class="co">](https://didiermurillof.github.io/FielDHub/articles/crd.html)</span> einmal an. Hier einmal der Code für die Erstellung in R. Wir haben jetzt vier Behandlungen vorliegen und wollen jeweils drei Wiederholungen anlegen. Die Wiederholungen können Blöcke, Tische oder Ställe sein. Das hängt dann vom eigentlichen Experiment ab.</span>
<span id="cb77-158"><a href="#cb77-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-161"><a href="#cb77-161" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-162"><a href="#cb77-162" aria-hidden="true" tabindex="-1"></a>crd_obj <span class="ot">&lt;-</span> <span class="fu">CRD</span>(<span class="at">t =</span> <span class="fu">c</span>(<span class="st">"ctrl"</span>, <span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>),</span>
<span id="cb77-163"><a href="#cb77-163" aria-hidden="true" tabindex="-1"></a>               <span class="at">reps =</span> <span class="dv">3</span>, <span class="at">seed =</span> <span class="dv">2023</span>) </span>
<span id="cb77-164"><a href="#cb77-164" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-165"><a href="#cb77-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-166"><a href="#cb77-166" aria-hidden="true" tabindex="-1"></a>Dann können wir uns einmal das erstellte Feldbuch wiedergeben lassen, was du dann auch in Excel raus schreiben kannst. Nicht immer brauchst du alle Informationen. Zum Beispiel ist der Ort <span class="in">`location`</span>, wo das Experiment durchgeführt wird eher zweitrangig. Du könntest dir auch zusätzliche Daten generieren lassen, aber das kannst du dir dann auch selber mit Werten ausdenken.</span>
<span id="cb77-167"><a href="#cb77-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-170"><a href="#cb77-170" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-171"><a href="#cb77-171" aria-hidden="true" tabindex="-1"></a>crd_obj<span class="sc">$</span>fieldBook <span class="sc">|&gt;</span> </span>
<span id="cb77-172"><a href="#cb77-172" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span>
<span id="cb77-173"><a href="#cb77-173" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-174"><a href="#cb77-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-175"><a href="#cb77-175" aria-hidden="true" tabindex="-1"></a>Wir müssen hier mit der Standardfunktion von <span class="in">`{desplot}`</span> leben und können nicht das Design wählen, was aber vollkommen okay. Dann erstellen wir auch schon die @fig-exp-basic-crd-fieldhub mit dem *complete randomized design*. Schneller geht es nun wirklich nicht. Wenn du mehr Kontrolle über die einzelnen Schritte haben willst, dann ist das R Paket <span class="in">`{agricolae}`</span> noch eine Alternative.</span>
<span id="cb77-176"><a href="#cb77-176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-179"><a href="#cb77-179" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-180"><a href="#cb77-180" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb77-181"><a href="#cb77-181" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb77-182"><a href="#cb77-182" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-exp-basic-crd-fieldhub</span></span>
<span id="cb77-183"><a href="#cb77-183" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-align: center</span></span>
<span id="cb77-184"><a href="#cb77-184" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 4</span></span>
<span id="cb77-185"><a href="#cb77-185" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 6</span></span>
<span id="cb77-186"><a href="#cb77-186" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Schema der Pflanzungen nach den Behandlungen für das *complete randomized design*."</span></span>
<span id="cb77-187"><a href="#cb77-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-188"><a href="#cb77-188" aria-hidden="true" tabindex="-1"></a>crd_obj <span class="sc">|&gt;</span> <span class="fu">plot</span>()</span>
<span id="cb77-189"><a href="#cb77-189" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-190"><a href="#cb77-190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-191"><a href="#cb77-191" aria-hidden="true" tabindex="-1"></a><span class="fu">### ... mit `{agricolae}`</span></span>
<span id="cb77-192"><a href="#cb77-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-193"><a href="#cb77-193" aria-hidden="true" tabindex="-1"></a>Als Alternative bietet sich dann auch das R Paket <span class="in">`{agricolae}`</span> an, obwohl ich für so einfaches Design nicht <span class="in">`{agricolae}`</span> empfehlen kann. Wir haben nämlich so ein paar gewünschte Eigenschaften und damit musst du etwas programmieren um gut mit dem Paket umgehen zu können. Wir nutzen hier die Funktion <span class="in">`design.crd()`</span> um uns das Design eines *complete randomized design* zu erstellen. Die Funktion benötigt einen Vektor mit den Namen der Behandlungslevel. Also in unserem Fall eben <span class="in">`ctrl`</span>, <span class="in">`A`</span>, <span class="in">`B`</span> und <span class="in">`C`</span>. Dann noch einen Vektor <span class="in">`r`</span> mit den Wiederholungen pro Behandlungslevel. Hier ist Funktion <span class="in">`design.crd()`</span> etwas besser, denn wir können hier auch unbalancierte Designs abbilden. Der Nachteil ist, dass wir faktisch danach keine andere Funktion mehr aus den anderen Paketen nutzen können. Deshalb ist es sinniger, balanciert zu planen und dann eben die Pflanzen später zu entfernen.</span>
<span id="cb77-194"><a href="#cb77-194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-195"><a href="#cb77-195" aria-hidden="true" tabindex="-1"></a>Hier einmal die simple Anwendung der Funktion zum erstellen eines *complete randomized design* mit vier Behandlungen und fünf Wiederholungen pro Behandlung.</span>
<span id="cb77-196"><a href="#cb77-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-199"><a href="#cb77-199" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-200"><a href="#cb77-200" aria-hidden="true" tabindex="-1"></a>crd_obj <span class="ot">&lt;-</span> <span class="fu">design.crd</span>(<span class="at">trt =</span> <span class="fu">c</span>(<span class="st">"ctrl"</span>, <span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>), </span>
<span id="cb77-201"><a href="#cb77-201" aria-hidden="true" tabindex="-1"></a>                      <span class="at">r =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">5</span>))</span>
<span id="cb77-202"><a href="#cb77-202" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-203"><a href="#cb77-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-204"><a href="#cb77-204" aria-hidden="true" tabindex="-1"></a>Jetzt kommt leider der etwas aufwenidigere Teil. Das Paket <span class="in">`{agricolae}`</span> ist schon etwas älter und damit auch teilweise nicht mehr so kompatibel und auf dem Stand der Zeit. Wir bauen uns daher jetzt noch ein paar Sachen zurecht. Am Ende wollen wie ein sauberes <span class="in">`tibble`</span> mit anständigen Namen und einer Variable <span class="in">`trt_rep`</span>, die uns sagt welche Behandlung und Wiederholung wir vorliegen haben.</span>
<span id="cb77-205"><a href="#cb77-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-208"><a href="#cb77-208" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-209"><a href="#cb77-209" aria-hidden="true" tabindex="-1"></a>crd_book_tbl <span class="ot">&lt;-</span> crd_obj <span class="sc">|&gt;</span> </span>
<span id="cb77-210"><a href="#cb77-210" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pluck</span>(<span class="st">"book"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb77-211"><a href="#cb77-211" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">|&gt;</span> </span>
<span id="cb77-212"><a href="#cb77-212" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_names</span>(<span class="fu">c</span>(<span class="st">"plots"</span>, <span class="st">"r"</span>, <span class="st">"trt"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb77-213"><a href="#cb77-213" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">trt_rep =</span> <span class="fu">str_c</span>(trt, <span class="st">"."</span>, r))</span>
<span id="cb77-214"><a href="#cb77-214" aria-hidden="true" tabindex="-1"></a>crd_book_tbl</span>
<span id="cb77-215"><a href="#cb77-215" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-216"><a href="#cb77-216" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-217"><a href="#cb77-217" aria-hidden="true" tabindex="-1"></a>Schön ist was anderes, da hast du recht, aber wir können uns dann auch noch das Pflanzgrid einmal als Abbildung wiedergeben lassen. Da die Ausgabe der Funktion <span class="in">`design.crd()`</span> schon permutiert ist, müssen wir hier nur die Informationen zu den Zeilen und Spalten ergänzen. Im Prinzip kannst du entscheiden, wie du die Wiederholungen <span class="in">`cols`</span> oder Behandlungen <span class="in">`rows`</span> anordnest. Du kannst am Ende aber auch einfach den ausgedruckten Zettel drehen.</span>
<span id="cb77-218"><a href="#cb77-218" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-221"><a href="#cb77-221" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-222"><a href="#cb77-222" aria-hidden="true" tabindex="-1"></a>crd_plot_tbl <span class="ot">&lt;-</span> crd_book_tbl <span class="sc">|&gt;</span></span>
<span id="cb77-223"><a href="#cb77-223" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(<span class="fu">expand_grid</span>(<span class="at">rows =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>,</span>
<span id="cb77-224"><a href="#cb77-224" aria-hidden="true" tabindex="-1"></a>                        <span class="at">cols =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>))</span>
<span id="cb77-225"><a href="#cb77-225" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-226"><a href="#cb77-226" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-227"><a href="#cb77-227" aria-hidden="true" tabindex="-1"></a>In der @fig-exp-basic-2 siehst du dann einmal das Schema für die Pflanzungen eines *complete randomized design*. Das Schema unterscheidet sich so nicht von dem Eigenbau mit <span class="in">`expand_grid()`</span>. Da bist du frei zu entscheiden was du nutzen möchtest.</span>
<span id="cb77-228"><a href="#cb77-228" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-231"><a href="#cb77-231" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-232"><a href="#cb77-232" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb77-233"><a href="#cb77-233" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb77-234"><a href="#cb77-234" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-exp-basic-2</span></span>
<span id="cb77-235"><a href="#cb77-235" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-align: center</span></span>
<span id="cb77-236"><a href="#cb77-236" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 4</span></span>
<span id="cb77-237"><a href="#cb77-237" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 6</span></span>
<span id="cb77-238"><a href="#cb77-238" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Schema der Pflanzungen nach den Behandlungen für das *complete randomized design*."</span></span>
<span id="cb77-239"><a href="#cb77-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-240"><a href="#cb77-240" aria-hidden="true" tabindex="-1"></a><span class="fu">desplot</span>(trt <span class="sc">~</span> rows <span class="sc">+</span> cols, <span class="at">flip =</span> <span class="cn">TRUE</span>,</span>
<span id="cb77-241"><a href="#cb77-241" aria-hidden="true" tabindex="-1"></a>        <span class="at">text =</span> trt_rep, <span class="at">cex =</span> <span class="dv">1</span>, <span class="at">shorten =</span> <span class="st">"no"</span>,</span>
<span id="cb77-242"><a href="#cb77-242" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> crd_plot_tbl,</span>
<span id="cb77-243"><a href="#cb77-243" aria-hidden="true" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">"Pflanzschema für ein complete randomized design"</span>, </span>
<span id="cb77-244"><a href="#cb77-244" aria-hidden="true" tabindex="-1"></a>        <span class="at">show.key =</span> <span class="cn">FALSE</span>) </span>
<span id="cb77-245"><a href="#cb77-245" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-246"><a href="#cb77-246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-247"><a href="#cb77-247" aria-hidden="true" tabindex="-1"></a>Damit wären wir auch schon durch. Wir haben in R im Prinzip die Möglichkeiten das *complete randomized design* selber, mit dem R Paket <span class="in">`{FielDHub}`</span>oder aber mit dem R Paket <span class="in">`{agricolae}`</span> zu erstellen.</span>
<span id="cb77-248"><a href="#cb77-248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-249"><a href="#cb77-249" aria-hidden="true" tabindex="-1"></a><span class="fu">## Randomized complete block design (RCBD) {#sec-rcbd}</span></span>
<span id="cb77-250"><a href="#cb77-250" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-251"><a href="#cb77-251" aria-hidden="true" tabindex="-1"></a>Jetzt kommen wir zum vermutlich meist genutzten Design, dem *randomized complete block design*. Hier haben wir neben dem Faktor Behandlung `trt` auch noch einen zusätzlichen Faktor `block`. Wir haben dann für jede Behandlung/Block-Kombination einen Messwert. Wenn du am Feld stehst, ist es aber meistens so, dass wir nicht *eine* Pflanze pro Block haben, sondern 20 oder mehr Pflanzen. Wir mitteln aber den Wert für das Trockengewicht über alle 20 Pflanzen pro Block und haben dann wieder einen Messwert für jede Behandlung/Block-Kombination. Das ist manchmal etwas verwirrend.</span>
<span id="cb77-252"><a href="#cb77-252" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-253"><a href="#cb77-253" aria-hidden="true" tabindex="-1"></a>Wir haben also folgendes Modell vorliegen, wir habend den Faktor Behandlung <span class="in">`trt`</span> sowie den Faktor Block <span class="in">`block`</span>. Für jede der Behandlung/Block-Kombination erhalten wir dann einen Wert. Wir schauen uns gleich vier Behandlungen und vier Blöcke an.</span>
<span id="cb77-254"><a href="#cb77-254" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-255"><a href="#cb77-255" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb77-256"><a href="#cb77-256" aria-hidden="true" tabindex="-1"></a>drymatter \sim \overbrace{trt}^{f_1} + \underbrace{block}_{f_2} </span>
<span id="cb77-257"><a href="#cb77-257" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb77-258"><a href="#cb77-258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-259"><a href="#cb77-259" aria-hidden="true" tabindex="-1"></a>mit</span>
<span id="cb77-260"><a href="#cb77-260" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-261"><a href="#cb77-261" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>dem Faktor Behandlung <span class="in">`trt`</span> und den vier Behandlungsstufen als Level <span class="in">`ctrl`</span>, <span class="in">`A`</span>, <span class="in">`B`</span> und <span class="in">`C`</span>.</span>
<span id="cb77-262"><a href="#cb77-262" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>dem Faktor Block <span class="in">`block`</span> und den vier Leveln <span class="in">`I`</span> bis <span class="in">`IV`</span>.</span>
<span id="cb77-263"><a href="#cb77-263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-264"><a href="#cb77-264" aria-hidden="true" tabindex="-1"></a>Wir randomiseren unsere Behandlungen <span class="in">`trt`</span> in den Blöcken <span class="in">`block`</span>. Somit ergibt sich @fig-mermaid-basic-01 in der unsere Behandlungen in den Blöcken genestet sind.</span>
<span id="cb77-265"><a href="#cb77-265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-268"><a href="#cb77-268" aria-hidden="true" tabindex="-1"></a><span class="in">```{mermaid}</span></span>
<span id="cb77-269"><a href="#cb77-269" aria-hidden="true" tabindex="-1"></a><span class="in">%%| label: fig-mermaid-basic-01</span></span>
<span id="cb77-270"><a href="#cb77-270" aria-hidden="true" tabindex="-1"></a><span class="in">%%| fig-width: 6</span></span>
<span id="cb77-271"><a href="#cb77-271" aria-hidden="true" tabindex="-1"></a><span class="in">%%| fig-cap: "Abhängigkeitsstruktur eines randomized complete block design mit einem Faktor `trt` nested im Faktor `block`."</span></span>
<span id="cb77-272"><a href="#cb77-272" aria-hidden="true" tabindex="-1"></a><span class="in">flowchart LR</span></span>
<span id="cb77-273"><a href="#cb77-273" aria-hidden="true" tabindex="-1"></a><span class="in">    A(trt):::factor --- B(((nested))) --&gt; C(block):::factor</span></span>
<span id="cb77-274"><a href="#cb77-274" aria-hidden="true" tabindex="-1"></a><span class="in">    classDef factor fill:#56B4E9,stroke:#333,stroke-width:0.75px</span></span>
<span id="cb77-275"><a href="#cb77-275" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-276"><a href="#cb77-276" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-277"><a href="#cb77-277" aria-hidden="true" tabindex="-1"></a>Damit gilt dann auch, dass jeder Block alle Behandlungslevel enthält und die Behandlungen innerhalb eines Blockes randomsiert werden. Unsere Randomisierungseinheit ist also der Block.</span>
<span id="cb77-278"><a href="#cb77-278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-279"><a href="#cb77-279" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb77-280"><a href="#cb77-280" aria-hidden="true" tabindex="-1"></a>\underbrace{\mbox{Blöcke}}_{f_2} \xrightarrow[]{beinhaltet\; alle} \overbrace{\mbox{Behandlungen}}^{f_1}</span>
<span id="cb77-281"><a href="#cb77-281" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb77-282"><a href="#cb77-282" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-283"><a href="#cb77-283" aria-hidden="true" tabindex="-1"></a>Theoretisch könnten wir auch pro Block mehrere *einzelne* Pflanzen messen, dann sind wir aber im Subsampling drin. Wenn du mehr zum Design erfahren möchtest, dann schau einfach mal bei [Abschnitt zum *subsampling*](#sec-subsampling) im nächsten Kapitel rein.</span>
<span id="cb77-284"><a href="#cb77-284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-285"><a href="#cb77-285" aria-hidden="true" tabindex="-1"></a>::: callout-tip</span>
<span id="cb77-286"><a href="#cb77-286" aria-hidden="true" tabindex="-1"></a><span class="fu">## Modell zur Auswertung</span></span>
<span id="cb77-287"><a href="#cb77-287" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-288"><a href="#cb77-288" aria-hidden="true" tabindex="-1"></a>Wir rechnen ein multiples lineares Modell für die statistische Analyse.</span>
<span id="cb77-289"><a href="#cb77-289" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-292"><a href="#cb77-292" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-293"><a href="#cb77-293" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: FALSE</span></span>
<span id="cb77-294"><a href="#cb77-294" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">lm</span>(drymatter <span class="sc">~</span> trt <span class="sc">+</span> block <span class="sc">+</span> trt<span class="sc">:</span>block, <span class="at">data =</span> rcbd_tbl)</span>
<span id="cb77-295"><a href="#cb77-295" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-296"><a href="#cb77-296" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb77-297"><a href="#cb77-297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-298"><a href="#cb77-298" aria-hidden="true" tabindex="-1"></a>::: column-margin</span>
<span id="cb77-299"><a href="#cb77-299" aria-hidden="true" tabindex="-1"></a>Hier einmal der Link zu der Auswertung zum <span class="co">[</span><span class="ot">Subsampling</span><span class="co">](https://schmidtpaul.github.io/DSFAIR/subsampling_Piepho1997.html)</span> bei DSFAIR.</span>
<span id="cb77-300"><a href="#cb77-300" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb77-301"><a href="#cb77-301" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-302"><a href="#cb77-302" aria-hidden="true" tabindex="-1"></a><span class="fu">### ... mit `expand_grid()`</span></span>
<span id="cb77-303"><a href="#cb77-303" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-304"><a href="#cb77-304" aria-hidden="true" tabindex="-1"></a>Das praktische an <span class="in">`expand_grid()`</span> ist, dass du nochmal eine Vorstellugn über den Aufbau des Experiments erhälst. Wir nehmen als erstes den Block <span class="in">`block`</span> und ergänzen dann die Behandlungen <span class="in">`trt`</span>. Damit erschaffen wir uns erst die vier Blöcke und dann pro Block die vier Behandlungen. Dann müssen wir noch unsere Daten etwas mutieren und schöner machen. Wir ergänzen noch einen Identifikator <span class="in">`trt_block`</span> damit wir auch unsere Positionen für die Pflanzungen später in den Abbildungen wieder finden. Am Ende gruppieren wir die Daten nochmal pro Block damit wir dann innerhalb der Blöcke unsere Behandlungslevel über die Funktion <span class="in">`sample()`</span> randomsisiern können.</span>
<span id="cb77-305"><a href="#cb77-305" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-308"><a href="#cb77-308" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-309"><a href="#cb77-309" aria-hidden="true" tabindex="-1"></a>rcbd_long_tbl <span class="ot">&lt;-</span> <span class="fu">expand_grid</span>(<span class="at">block =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, </span>
<span id="cb77-310"><a href="#cb77-310" aria-hidden="true" tabindex="-1"></a>                             <span class="at">trt =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>) <span class="sc">|&gt;</span> </span>
<span id="cb77-311"><a href="#cb77-311" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">trt =</span> <span class="fu">factor</span>(trt, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"ctrl"</span>, <span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>)),</span>
<span id="cb77-312"><a href="#cb77-312" aria-hidden="true" tabindex="-1"></a>         <span class="at">block =</span> <span class="fu">factor</span>(block, <span class="at">labels =</span> <span class="fu">as.roman</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>)),</span>
<span id="cb77-313"><a href="#cb77-313" aria-hidden="true" tabindex="-1"></a>         <span class="at">trt_block =</span> <span class="fu">str_c</span>(trt, <span class="st">"."</span>, block),</span>
<span id="cb77-314"><a href="#cb77-314" aria-hidden="true" tabindex="-1"></a>         <span class="at">pid =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb77-315"><a href="#cb77-315" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(block) <span class="sc">|&gt;</span> </span>
<span id="cb77-316"><a href="#cb77-316" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">trt =</span> <span class="fu">sample</span>(trt)) <span class="do">## Randomisierung pro Block</span></span>
<span id="cb77-317"><a href="#cb77-317" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-318"><a href="#cb77-318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-321"><a href="#cb77-321" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-322"><a href="#cb77-322" aria-hidden="true" tabindex="-1"></a>rcbd_plot_tbl <span class="ot">&lt;-</span> rcbd_long_tbl <span class="sc">|&gt;</span> </span>
<span id="cb77-323"><a href="#cb77-323" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(<span class="fu">expand_grid</span>(<span class="at">rows =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">cols =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>))</span>
<span id="cb77-324"><a href="#cb77-324" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-325"><a href="#cb77-325" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-326"><a href="#cb77-326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-327"><a href="#cb77-327" aria-hidden="true" tabindex="-1"></a>Die dicken, schwarzen Linien stellen die Grenzen der Blöcke dar. Im realen Leben kann eine farbige Kachel in der Abbildung ein ganzes Feld sein und die Blockgrenzen sind dann eben Feldwege. Die @fig-exp-basic-3 stellt ja auch nur eine schematische Darstellung der Pflanzungen dar.</span>
<span id="cb77-328"><a href="#cb77-328" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-331"><a href="#cb77-331" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-332"><a href="#cb77-332" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb77-333"><a href="#cb77-333" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb77-334"><a href="#cb77-334" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-exp-basic-3</span></span>
<span id="cb77-335"><a href="#cb77-335" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-align: center</span></span>
<span id="cb77-336"><a href="#cb77-336" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 4</span></span>
<span id="cb77-337"><a href="#cb77-337" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 6</span></span>
<span id="cb77-338"><a href="#cb77-338" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Schema der Pflanzungen nach den Behandlungen für das randomized complete block design. Beachte die schwarzen Linien als Grenzen für die Blöcke. Im realen Leben können das Gänge zwischen Tischen sein oder Feldwege."</span></span>
<span id="cb77-339"><a href="#cb77-339" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-340"><a href="#cb77-340" aria-hidden="true" tabindex="-1"></a><span class="fu">desplot</span>(<span class="at">data =</span> rcbd_plot_tbl, </span>
<span id="cb77-341"><a href="#cb77-341" aria-hidden="true" tabindex="-1"></a>        <span class="at">form =</span> trt <span class="sc">~</span> rows <span class="sc">+</span> cols,</span>
<span id="cb77-342"><a href="#cb77-342" aria-hidden="true" tabindex="-1"></a>        <span class="at">out1 =</span> block,</span>
<span id="cb77-343"><a href="#cb77-343" aria-hidden="true" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">"Pflanzschema für ein randomized complete block design"</span>, </span>
<span id="cb77-344"><a href="#cb77-344" aria-hidden="true" tabindex="-1"></a>        <span class="at">text =</span> trt_block, <span class="at">cex =</span> <span class="dv">1</span>, <span class="at">show.key =</span> <span class="cn">FALSE</span>, <span class="at">shorten =</span> <span class="st">"no"</span>)</span>
<span id="cb77-345"><a href="#cb77-345" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-346"><a href="#cb77-346" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-347"><a href="#cb77-347" aria-hidden="true" tabindex="-1"></a>Dann können wir auch schon unseren Versuchsplan als Exceldatei rausschreiben. Wir können dann noch weitere Spalten als Outcome ergänzen und dann mit der Datei unsere Auswertung durchführen.</span>
<span id="cb77-348"><a href="#cb77-348" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-351"><a href="#cb77-351" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-352"><a href="#cb77-352" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb77-353"><a href="#cb77-353" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb77-354"><a href="#cb77-354" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb77-355"><a href="#cb77-355" aria-hidden="true" tabindex="-1"></a>rcbd_long_tbl <span class="sc">|&gt;</span> </span>
<span id="cb77-356"><a href="#cb77-356" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_xlsx</span>(<span class="st">"template_sheet.xlsx"</span>)</span>
<span id="cb77-357"><a href="#cb77-357" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-358"><a href="#cb77-358" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-359"><a href="#cb77-359" aria-hidden="true" tabindex="-1"></a><span class="fu">### ... mit `{FielDHub}`</span></span>
<span id="cb77-360"><a href="#cb77-360" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-361"><a href="#cb77-361" aria-hidden="true" tabindex="-1"></a>Für die Erstellung des *randomized complete block design* in der Shiny App schaue dir die Anleitung wie schon weiter oben unter [Generates a Randomized Complete Block Design (RCBD) mit `{FielDHub}`](https://didiermurillof.github.io/FielDHub/reference/RCBD.html) einmal an. Hier einmal der Code für die Erstellung eines *randomized complete block design* in R mit Code. Wir haben jetzt vier Behandlungen vorliegen und wollen jeweils drei Wiederholungen anlegen, aber das kennst du ja schon von dem obigen Beispiel. Die Wiederholungen können Blöcke, Tische oder Ställe sein. Das hängt dann wiederum vom eigentlichen Experiment ab. Die Funktion ist daher dann auch schon fast selbsterklärend</span>
<span id="cb77-362"><a href="#cb77-362" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-365"><a href="#cb77-365" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-366"><a href="#cb77-366" aria-hidden="true" tabindex="-1"></a>rcbd_obj <span class="ot">&lt;-</span> <span class="fu">RCBD</span>(<span class="at">t =</span> <span class="fu">c</span>(<span class="st">"ctrl"</span>, <span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>),</span>
<span id="cb77-367"><a href="#cb77-367" aria-hidden="true" tabindex="-1"></a>                 <span class="at">reps =</span> <span class="dv">3</span>, <span class="at">seed =</span> <span class="dv">2023</span>) </span>
<span id="cb77-368"><a href="#cb77-368" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-369"><a href="#cb77-369" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-370"><a href="#cb77-370" aria-hidden="true" tabindex="-1"></a>Wir können uns dann auch wieder das Feldbuch wiedergeben lassen und es eben dann auch in Excel als <span class="in">`.xlsx`</span> exportieren und so dann direkt mit den Daten aus unserem Experiment füllen oder als Randomisierung nutzen.</span>
<span id="cb77-371"><a href="#cb77-371" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-374"><a href="#cb77-374" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-375"><a href="#cb77-375" aria-hidden="true" tabindex="-1"></a>rcbd_obj<span class="sc">$</span>fieldBook <span class="sc">|&gt;</span> </span>
<span id="cb77-376"><a href="#cb77-376" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span>
<span id="cb77-377"><a href="#cb77-377" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-378"><a href="#cb77-378" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-379"><a href="#cb77-379" aria-hidden="true" tabindex="-1"></a>In der @fig-exp-basic-rcbd-fieldhub siehst du einmal das Ergebnis der Randomisierung in <span class="in">`{FielDHub}`</span>. Hier kannst du dann noch mit den Einstellungen rumspielen und dir die verschiedenen Ergebnisse einmal anschauen. Ehrlich gesagt funktioniert das natürlich in der Shiny App um Längen besser.</span>
<span id="cb77-380"><a href="#cb77-380" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-383"><a href="#cb77-383" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-384"><a href="#cb77-384" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb77-385"><a href="#cb77-385" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb77-386"><a href="#cb77-386" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-exp-basic-rcbd-fieldhub</span></span>
<span id="cb77-387"><a href="#cb77-387" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-align: center</span></span>
<span id="cb77-388"><a href="#cb77-388" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 4</span></span>
<span id="cb77-389"><a href="#cb77-389" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 6</span></span>
<span id="cb77-390"><a href="#cb77-390" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Schema der Pflanzungen nach den Behandlungen für das randomized complete block design. Beachte die schwarzen Linien als Grenzen für die Blöcke. Im realen Leben können das Gänge zwischen Tischen sein oder Feldwege."</span></span>
<span id="cb77-391"><a href="#cb77-391" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-392"><a href="#cb77-392" aria-hidden="true" tabindex="-1"></a>rcbd_obj <span class="sc">|&gt;</span> <span class="fu">plot</span>()</span>
<span id="cb77-393"><a href="#cb77-393" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-394"><a href="#cb77-394" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-395"><a href="#cb77-395" aria-hidden="true" tabindex="-1"></a><span class="fu">### ... mit `{agricolae}`</span></span>
<span id="cb77-396"><a href="#cb77-396" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-397"><a href="#cb77-397" aria-hidden="true" tabindex="-1"></a>Wir können auch ein *randomized complete block design* mit <span class="in">`{agricolae}`</span> erstellen. Hier geht es ähnlich wie vorher schon. Wichtig ist, dass wir hier unsere Blöcke wieder mit <span class="in">`r`</span> bezeichnen. Damit bauen wir uns also wieder ein Design mit vier Behandlungsleveln und fünf Blöcken.</span>
<span id="cb77-398"><a href="#cb77-398" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-401"><a href="#cb77-401" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-402"><a href="#cb77-402" aria-hidden="true" tabindex="-1"></a>rcbd_obj <span class="ot">&lt;-</span> <span class="fu">design.rcbd</span>(<span class="at">trt =</span> <span class="fu">c</span>(<span class="st">"ctrl"</span>, <span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>), <span class="at">r =</span> <span class="dv">5</span>)</span>
<span id="cb77-403"><a href="#cb77-403" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-404"><a href="#cb77-404" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-405"><a href="#cb77-405" aria-hidden="true" tabindex="-1"></a>Leider ist die Ausgabe von <span class="in">`design.rcbd()`</span> etwas ungünstig für die weitere Darstellung. Deshalb wandeln wir etwas das Feldbuch für unsere Bedürfnisse um. Wir könnten natürlich gleich mit dem Feldbuch weitermachen und die Pflanzen in der Form ausbringen, aber wir wollen ja noch ein Pflanzschema erstellen.</span>
<span id="cb77-406"><a href="#cb77-406" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-409"><a href="#cb77-409" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-410"><a href="#cb77-410" aria-hidden="true" tabindex="-1"></a>rcbd_book_tbl <span class="ot">&lt;-</span> rcbd_obj <span class="sc">|&gt;</span> </span>
<span id="cb77-411"><a href="#cb77-411" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pluck</span>(<span class="st">"book"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb77-412"><a href="#cb77-412" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">|&gt;</span> </span>
<span id="cb77-413"><a href="#cb77-413" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_names</span>(<span class="fu">c</span>(<span class="st">"plots"</span>, <span class="st">"block"</span>, <span class="st">"trt"</span>))</span>
<span id="cb77-414"><a href="#cb77-414" aria-hidden="true" tabindex="-1"></a>rcbd_book_tbl</span>
<span id="cb77-415"><a href="#cb77-415" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-416"><a href="#cb77-416" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-417"><a href="#cb77-417" aria-hidden="true" tabindex="-1"></a>Jetzt nochmal das Grid für die Pflanzungen ergänzt. Hier müssen wir etwas mehr schauen, wie wir die Zeilen <span class="in">`rows`</span> und Spalten <span class="in">`cols`</span> zuordnen. Unsere Zeilen sind die Blöcke, aber innerhalb der Blöcke müssen wir die Anzahl der Behandlungen nummerieren. Deshalb machen wir den Zwischenschritt mit <span class="in">`group_by()`</span>.</span>
<span id="cb77-418"><a href="#cb77-418" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-421"><a href="#cb77-421" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-422"><a href="#cb77-422" aria-hidden="true" tabindex="-1"></a>rcbd_plot_tbl <span class="ot">&lt;-</span> rcbd_book_tbl <span class="sc">|&gt;</span></span>
<span id="cb77-423"><a href="#cb77-423" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rows =</span> <span class="fu">as.numeric</span>(block),</span>
<span id="cb77-424"><a href="#cb77-424" aria-hidden="true" tabindex="-1"></a>         <span class="at">trt_block =</span> <span class="fu">str_c</span>(trt, <span class="st">"."</span>, block)) <span class="sc">|&gt;</span> </span>
<span id="cb77-425"><a href="#cb77-425" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(rows) <span class="sc">|&gt;</span> </span>
<span id="cb77-426"><a href="#cb77-426" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cols =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">n</span>())</span>
<span id="cb77-427"><a href="#cb77-427" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-428"><a href="#cb77-428" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-429"><a href="#cb77-429" aria-hidden="true" tabindex="-1"></a>Zur Kontrolle einmal die Ausgabe des <span class="in">`skretch`</span>. Auch hier steht wieder nichts an den Zeilen und Spalten, so dass wir immer überlegen müssen, was war nun der Block und was war die Behandlung.</span>
<span id="cb77-430"><a href="#cb77-430" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-433"><a href="#cb77-433" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-434"><a href="#cb77-434" aria-hidden="true" tabindex="-1"></a>rcbd_obj <span class="sc">|&gt;</span> </span>
<span id="cb77-435"><a href="#cb77-435" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pluck</span>(<span class="st">"sketch"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb77-436"><a href="#cb77-436" aria-hidden="true" tabindex="-1"></a>  <span class="fu">t</span>()</span>
<span id="cb77-437"><a href="#cb77-437" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-438"><a href="#cb77-438" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-439"><a href="#cb77-439" aria-hidden="true" tabindex="-1"></a>Um es schöner zu haben schauen wir uns einmal die @fig-exp-basic-4 als Pfalnzschema an. Wir haben hier die gleiche Ausgabe wie auch schon weiter oben. Die Positionen haben sich geändert, wir haben ja auch zweimal randomisiert. Sonst sehen wir aber das Gleiche. Die schwarze Striche sind wieder die Grenzen unserer Blöcke und können im echten Leben dann Feldwege oder Gewächshäuser sein.</span>
<span id="cb77-440"><a href="#cb77-440" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-443"><a href="#cb77-443" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-444"><a href="#cb77-444" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb77-445"><a href="#cb77-445" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb77-446"><a href="#cb77-446" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-exp-basic-4</span></span>
<span id="cb77-447"><a href="#cb77-447" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-align: center</span></span>
<span id="cb77-448"><a href="#cb77-448" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 4</span></span>
<span id="cb77-449"><a href="#cb77-449" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 6</span></span>
<span id="cb77-450"><a href="#cb77-450" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Schema der Pflanzungen nach den Behandlungen für das randomized complete block design. Beachte die schwarzen Linien als Grenzen für die Blöcke. Im realen Leben können das Gänge zwischen Tischen sein oder Feldwege."</span></span>
<span id="cb77-451"><a href="#cb77-451" aria-hidden="true" tabindex="-1"></a><span class="fu">desplot</span>(trt <span class="sc">~</span> rows <span class="sc">+</span> cols, <span class="at">flip =</span> <span class="cn">TRUE</span>,</span>
<span id="cb77-452"><a href="#cb77-452" aria-hidden="true" tabindex="-1"></a>        <span class="at">text =</span> trt_block, <span class="at">cex =</span> <span class="dv">1</span>, <span class="at">shorten =</span> <span class="st">"no"</span>,</span>
<span id="cb77-453"><a href="#cb77-453" aria-hidden="true" tabindex="-1"></a>        <span class="at">out1 =</span> block,</span>
<span id="cb77-454"><a href="#cb77-454" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> rcbd_plot_tbl,</span>
<span id="cb77-455"><a href="#cb77-455" aria-hidden="true" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">"Pflanzschema für ein randomized complete block design"</span>, </span>
<span id="cb77-456"><a href="#cb77-456" aria-hidden="true" tabindex="-1"></a>        <span class="at">show.key =</span> <span class="cn">FALSE</span>, <span class="at">key.cex =</span> <span class="fl">0.5</span>)</span>
<span id="cb77-457"><a href="#cb77-457" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-458"><a href="#cb77-458" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-459"><a href="#cb77-459" aria-hidden="true" tabindex="-1"></a><span class="fu">## Latin square design (LSD) {#sec-lsd}</span></span>
<span id="cb77-460"><a href="#cb77-460" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-461"><a href="#cb77-461" aria-hidden="true" tabindex="-1"></a>Das *latin square design* erweist sich dann als besonders sinnvoll, wenn zwei unabhängige Störgradienten vorhanden sind, die orthogonal zueinander ausgerichtet sind. Ein Beispiel hierfür wäre im Boden des Versuchsfeldes ein Feuchtigkeitsgefälle von Nord nach Süd und ein Nährstoffgefälle von Ost nach West. Um diese Störgrößen im Boden zu berücksichtigen, werden die Randomisationseinheiten in Form von Quadraten angeordnet. Diese Anordnung stellt sicher, dass sowohl die Anzahl der Zeilen als auch die Anzahl der Spalten zwangsläufig gleich sind. Durch diese Anordnung ist es möglich, eine Randomisierung durchzuführen, bei der sowohl jede Spalte als auch jede Zeile einen vollständigen Block bildet, ähnlich wie bei einem Sudoku-Raster. Es darf eben in jeder Zeile und Spalte immer nur einmal eine Behandlung auftauchen.</span>
<span id="cb77-462"><a href="#cb77-462" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-463"><a href="#cb77-463" aria-hidden="true" tabindex="-1"></a>::: column-margin</span>
<span id="cb77-464"><a href="#cb77-464" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">Das Bild des ersten Latin Square</span><span class="co">](https://www.adelaide.edu.au/library/special/exhibitions/significant-life-fisher/rothamsted/)</span> an einem Hang, angelegt und geplant von Roland Fisher an der Rothamsted Experimental Station.</span>
<span id="cb77-465"><a href="#cb77-465" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-466"><a href="#cb77-466" aria-hidden="true" tabindex="-1"></a>Auch findest du im <span class="co">[</span><span class="ot">Chapter 2 Designing experiments</span><span class="co">](https://www.statforbiology.com/_statbookeng/designing-experiments#selecting-the-units-within-the-field)</span> aus <span class="co">[</span><span class="ot">Experimental methods in agriculture</span><span class="co">](https://www.statforbiology.com/_statbookeng/)</span> noch schöne Beispiele für ein Latin Square Design.</span>
<span id="cb77-467"><a href="#cb77-467" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb77-468"><a href="#cb77-468" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-469"><a href="#cb77-469" aria-hidden="true" tabindex="-1"></a>Schauen wir uns einmal das Modell an nachdem wir unseren Versuchsplan bauen wollen. Wir haben wie immer unsere Behandlung <span class="in">`trt`</span> sowie den Block, den wir aber in <span class="in">`rows`</span> und <span class="in">`cols`</span> aufteilen. Die Regel lautet im *latin square design*, dass keine Behandlung in der gleichen Zeile und Spalte doppelt auftreten darf.</span>
<span id="cb77-470"><a href="#cb77-470" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-471"><a href="#cb77-471" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb77-472"><a href="#cb77-472" aria-hidden="true" tabindex="-1"></a>drymatter \sim \overbrace{trt}^{f_1} + \underbrace{rows}_{f_2} + \overbrace{cols}^{f_3}</span>
<span id="cb77-473"><a href="#cb77-473" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb77-474"><a href="#cb77-474" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-475"><a href="#cb77-475" aria-hidden="true" tabindex="-1"></a>mit</span>
<span id="cb77-476"><a href="#cb77-476" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-477"><a href="#cb77-477" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>dem Faktor Behandlung <span class="in">`trt`</span> und den fünf Behandlungsstufen als Level <span class="in">`ctrl`</span>, <span class="in">`A`</span>, <span class="in">`B`</span>, <span class="in">`C`</span> und <span class="in">`D`</span>.</span>
<span id="cb77-478"><a href="#cb77-478" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>dem Faktor Reihe <span class="in">`rows`</span> mit der Anzahl der Level gleich der Level der Behandlung also hier fünf.</span>
<span id="cb77-479"><a href="#cb77-479" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>dem Faktor Spalte <span class="in">`cols`</span> mit der Anzahl der Level gleich der Level der Behandlung also hier fünf.</span>
<span id="cb77-480"><a href="#cb77-480" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-481"><a href="#cb77-481" aria-hidden="true" tabindex="-1"></a>In der @fig-mermaid-lsd sehen wir nochmal den schematischen Aufbau eines *latin square design* dargestellt. Vermutlich hilft es auch sich einmal das finale Design in der @fig-exp-basic-5 einmal anzuschauen. Wichtig ist, dass wir den Block gar nicht betrachten. Wir haben hier eher fünfundzwanzig kleine Subblöcke, die wir durch die Position der <span class="in">`rows`</span> und <span class="in">`cols`</span> definieren.</span>
<span id="cb77-482"><a href="#cb77-482" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-485"><a href="#cb77-485" aria-hidden="true" tabindex="-1"></a><span class="in">```{mermaid}</span></span>
<span id="cb77-486"><a href="#cb77-486" aria-hidden="true" tabindex="-1"></a><span class="in">%%| label: fig-mermaid-lsd</span></span>
<span id="cb77-487"><a href="#cb77-487" aria-hidden="true" tabindex="-1"></a><span class="in">%%| fig-width: 6</span></span>
<span id="cb77-488"><a href="#cb77-488" aria-hidden="true" tabindex="-1"></a><span class="in">%%| fig-cap: "Schematische Darstellung der Abhängigkeitsstruktur im latin suare design. Die Behandlungen werden in `rows` und `cols` genestet, die einem quadratischen Block mit den Längen der Anzahl der Level der Behandlungen entsprechen."</span></span>
<span id="cb77-489"><a href="#cb77-489" aria-hidden="true" tabindex="-1"></a><span class="in">flowchart LR</span></span>
<span id="cb77-490"><a href="#cb77-490" aria-hidden="true" tabindex="-1"></a><span class="in">    A(trt):::factor --- B(((nested))) --&gt; C(rows):::factor </span></span>
<span id="cb77-491"><a href="#cb77-491" aria-hidden="true" tabindex="-1"></a><span class="in">    B(((nested))) --&gt; D(cols):::factor </span></span>
<span id="cb77-492"><a href="#cb77-492" aria-hidden="true" tabindex="-1"></a><span class="in">    C --- F(block)</span></span>
<span id="cb77-493"><a href="#cb77-493" aria-hidden="true" tabindex="-1"></a><span class="in">    D --- F</span></span>
<span id="cb77-494"><a href="#cb77-494" aria-hidden="true" tabindex="-1"></a><span class="in">    classDef factor fill:#56B4E9,stroke:#333,stroke-width:0.75px</span></span>
<span id="cb77-495"><a href="#cb77-495" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-496"><a href="#cb77-496" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-497"><a href="#cb77-497" aria-hidden="true" tabindex="-1"></a>Wir schauen uns hier das R Paket <span class="in">`FieldHub`</span>, das R Paket <span class="in">`{agricolae}`</span> und das R Paket <span class="in">`{dae}`</span> an. Selber machen ist hier nicht, da du dir bei der Erstellung sehr schnell Fehler rein holst. Es ist super frickelig darauf zu achten, dass sich wirklich keine Behandlung in irgendeiner Zeilen- oder Spaltenposition überschneidet. Da sind die vorgefertigten Funktionen echt mal besser.</span>
<span id="cb77-498"><a href="#cb77-498" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-499"><a href="#cb77-499" aria-hidden="true" tabindex="-1"></a>::: callout-tip</span>
<span id="cb77-500"><a href="#cb77-500" aria-hidden="true" tabindex="-1"></a><span class="fu">## Modell zur Auswertung</span></span>
<span id="cb77-501"><a href="#cb77-501" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-502"><a href="#cb77-502" aria-hidden="true" tabindex="-1"></a>Wir rechnen ein multiples lineares Modell für die statistische Analyse.</span>
<span id="cb77-503"><a href="#cb77-503" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-506"><a href="#cb77-506" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-507"><a href="#cb77-507" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: FALSE</span></span>
<span id="cb77-508"><a href="#cb77-508" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">lm</span>(drymatter <span class="sc">~</span> trt <span class="sc">+</span> cols <span class="sc">+</span> rows, <span class="at">data =</span> lsd_tbl)</span>
<span id="cb77-509"><a href="#cb77-509" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-510"><a href="#cb77-510" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb77-511"><a href="#cb77-511" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-512"><a href="#cb77-512" aria-hidden="true" tabindex="-1"></a><span class="fu">### ... mit `{FielDHub}`</span></span>
<span id="cb77-513"><a href="#cb77-513" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-514"><a href="#cb77-514" aria-hidden="true" tabindex="-1"></a>Für die Erstellung des *latin square design* in der Shiny App schaue dir die Anleitung wie schon weiter oben unter [Generates a Latin Square Design mit `{FielDHub}`](https://didiermurillof.github.io/FielDHub/reference/latin_square.html) einmal an. Hier einmal der Code für die Erstellung eines *latin square design* in R mit Code. Wir haben jetzt vier Behandlungen vorliegen, aber das kennst du ja schon von dem obigen Beispiel. Wir können hier einmal zwei Wiederholungen angeben, was dann eigentlich Blöcke wären. Du. kannst dir die Wiederholungen als zusätzliche Felder, Ställe oder Tische vorstellen.</span>
<span id="cb77-515"><a href="#cb77-515" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-518"><a href="#cb77-518" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-519"><a href="#cb77-519" aria-hidden="true" tabindex="-1"></a>latin_square_obj <span class="ot">&lt;-</span> <span class="fu">latin_square</span>(<span class="at">t =</span> <span class="dv">4</span>, <span class="at">reps =</span> <span class="dv">2</span>,</span>
<span id="cb77-520"><a href="#cb77-520" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">seed =</span> <span class="dv">2023</span>) </span>
<span id="cb77-521"><a href="#cb77-521" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-522"><a href="#cb77-522" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-523"><a href="#cb77-523" aria-hidden="true" tabindex="-1"></a>Damit können wir uns auch schon einmal das Feldbuch anschauen. Auch hier gilt, das Feldbuch lässt sich dann einfach nach Excel exportieren. Hier zeige ich nur die ersten zehn Zeilen, da sonst die Ausgabe zu groß wird.</span>
<span id="cb77-524"><a href="#cb77-524" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-527"><a href="#cb77-527" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-528"><a href="#cb77-528" aria-hidden="true" tabindex="-1"></a>latin_square_obj<span class="sc">$</span>fieldBook <span class="sc">|&gt;</span> </span>
<span id="cb77-529"><a href="#cb77-529" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">|&gt;</span> </span>
<span id="cb77-530"><a href="#cb77-530" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span>
<span id="cb77-531"><a href="#cb77-531" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-532"><a href="#cb77-532" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-533"><a href="#cb77-533" aria-hidden="true" tabindex="-1"></a>In der folgenden @fig-exp-basic-latin-fieldhub siehst du dann einmal das *latin square design* für zwei Wiederholungen. Wie du gleich in den folgenden Beispielen siehst, kann man das *latin square design* auch nur für eine Wiederholung erstellen. Wichtig ist eben, dass in jeder Zeilen- und Spaltenkombination eine Behandlung vorkommt.</span>
<span id="cb77-534"><a href="#cb77-534" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-537"><a href="#cb77-537" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-538"><a href="#cb77-538" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb77-539"><a href="#cb77-539" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb77-540"><a href="#cb77-540" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-exp-basic-latin-fieldhub</span></span>
<span id="cb77-541"><a href="#cb77-541" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-align: center</span></span>
<span id="cb77-542"><a href="#cb77-542" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 4</span></span>
<span id="cb77-543"><a href="#cb77-543" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 6</span></span>
<span id="cb77-544"><a href="#cb77-544" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Schema der Pflanzungen nach den Behandlungen für das *latin square design*. Beachte die schwarzen Linien als Grenzen für die Blöcke. Im realen Leben können das Gänge zwischen Tischen sein oder Feldwege."</span></span>
<span id="cb77-545"><a href="#cb77-545" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-546"><a href="#cb77-546" aria-hidden="true" tabindex="-1"></a>latin_square_obj <span class="sc">|&gt;</span> <span class="fu">plot</span>()</span>
<span id="cb77-547"><a href="#cb77-547" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-548"><a href="#cb77-548" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-549"><a href="#cb77-549" aria-hidden="true" tabindex="-1"></a><span class="fu">### ... mit `{agricolae}`</span></span>
<span id="cb77-550"><a href="#cb77-550" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-551"><a href="#cb77-551" aria-hidden="true" tabindex="-1"></a>Im *latin square design* brauchen wir nur einen Behandlungsvektor. Durch die Anzahl der Behandlungen wird auch die Größe des *latin square* bestimmt. Wir haben hier fünf Behandlungen vorliegen, also kriegen wir dann auch ein $5 \times 5$-*latin square* für unseren Versuchsplan raus.</span>
<span id="cb77-552"><a href="#cb77-552" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-555"><a href="#cb77-555" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-556"><a href="#cb77-556" aria-hidden="true" tabindex="-1"></a>lsd_obj <span class="ot">&lt;-</span> <span class="fu">design.lsd</span>(<span class="at">trt =</span> <span class="fu">c</span>(<span class="st">"ctrl"</span>, <span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="st">"D"</span>), </span>
<span id="cb77-557"><a href="#cb77-557" aria-hidden="true" tabindex="-1"></a>                      <span class="at">seed =</span> <span class="dv">42</span>)</span>
<span id="cb77-558"><a href="#cb77-558" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-559"><a href="#cb77-559" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-560"><a href="#cb77-560" aria-hidden="true" tabindex="-1"></a>Zum Glück kriegen wir hier auch die Zeilen und Spalten direkt von der Funktion <span class="in">`design.lsd()`</span> geliefert. Leider als Faktoren, so dass wir die Faktoren nochmal in Zahlen umwandeln damit es später mit der Visualisierung klappt.</span>
<span id="cb77-561"><a href="#cb77-561" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-564"><a href="#cb77-564" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-565"><a href="#cb77-565" aria-hidden="true" tabindex="-1"></a>lsd_book_tbl <span class="ot">&lt;-</span> lsd_obj <span class="sc">|&gt;</span> </span>
<span id="cb77-566"><a href="#cb77-566" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pluck</span>(<span class="st">"book"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb77-567"><a href="#cb77-567" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">|&gt;</span> </span>
<span id="cb77-568"><a href="#cb77-568" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_names</span>(<span class="fu">c</span>(<span class="st">"plots"</span>, <span class="st">"rows"</span>, <span class="st">"cols"</span>, <span class="st">"trt"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb77-569"><a href="#cb77-569" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rows =</span> <span class="fu">as.numeric</span>(rows),</span>
<span id="cb77-570"><a href="#cb77-570" aria-hidden="true" tabindex="-1"></a>         <span class="at">cols =</span> <span class="fu">as.numeric</span>(cols))</span>
<span id="cb77-571"><a href="#cb77-571" aria-hidden="true" tabindex="-1"></a>lsd_book_tbl</span>
<span id="cb77-572"><a href="#cb77-572" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-573"><a href="#cb77-573" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-574"><a href="#cb77-574" aria-hidden="true" tabindex="-1"></a>Dann einmal die Ausgabe des <span class="in">`sketch`</span>. Hier kann man mal nichts falsch machen. Wir kriegen unser Quadrat als *latin square* und gut ist.</span>
<span id="cb77-575"><a href="#cb77-575" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-578"><a href="#cb77-578" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-579"><a href="#cb77-579" aria-hidden="true" tabindex="-1"></a>lsd_obj <span class="sc">|&gt;</span> </span>
<span id="cb77-580"><a href="#cb77-580" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pluck</span>(<span class="st">"sketch"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb77-581"><a href="#cb77-581" aria-hidden="true" tabindex="-1"></a>  <span class="fu">t</span>()</span>
<span id="cb77-582"><a href="#cb77-582" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-583"><a href="#cb77-583" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-584"><a href="#cb77-584" aria-hidden="true" tabindex="-1"></a>In der @fig-exp-basic-5 siehst du dann nochmal das *latin square design* visualisiert. Die dicken Linien sind wieder die Blockgrenzen und mögen dann die Feldwege oder Wege zwischen den Behandlungens sein. Wie du siehst, gibt es pro Zeile und Spalte immer nur eine Behandlung. Wir haben einmal perfekt über das ganze *latin square* randomisiert.</span>
<span id="cb77-585"><a href="#cb77-585" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-588"><a href="#cb77-588" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-589"><a href="#cb77-589" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb77-590"><a href="#cb77-590" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb77-591"><a href="#cb77-591" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-exp-basic-5</span></span>
<span id="cb77-592"><a href="#cb77-592" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-align: center</span></span>
<span id="cb77-593"><a href="#cb77-593" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 4</span></span>
<span id="cb77-594"><a href="#cb77-594" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 6</span></span>
<span id="cb77-595"><a href="#cb77-595" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Schema der Pflanzungen nach den Behandlungen für das latin square design. Beachte die schwarzen Linien als Grenzen für die Blöcke. Im realen Leben können das Gänge zwischen Tischen sein oder Feldwege."</span></span>
<span id="cb77-596"><a href="#cb77-596" aria-hidden="true" tabindex="-1"></a><span class="fu">desplot</span>(trt <span class="sc">~</span> rows <span class="sc">+</span> cols, <span class="at">flip =</span> <span class="cn">TRUE</span>,</span>
<span id="cb77-597"><a href="#cb77-597" aria-hidden="true" tabindex="-1"></a>        <span class="at">out1 =</span> rows, <span class="at">out1.gpar =</span> <span class="fu">list</span>(<span class="at">col=</span><span class="st">"black"</span>, <span class="at">lwd=</span><span class="dv">3</span>),</span>
<span id="cb77-598"><a href="#cb77-598" aria-hidden="true" tabindex="-1"></a>        <span class="at">out2 =</span> cols, <span class="at">out2.gpar =</span> <span class="fu">list</span>(<span class="at">col=</span><span class="st">"black"</span>, <span class="at">lwd=</span><span class="dv">3</span>),</span>
<span id="cb77-599"><a href="#cb77-599" aria-hidden="true" tabindex="-1"></a>        <span class="at">text =</span> trt, <span class="at">cex =</span> <span class="dv">1</span>, <span class="at">shorten =</span> <span class="st">"no"</span>,</span>
<span id="cb77-600"><a href="#cb77-600" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> lsd_book_tbl,</span>
<span id="cb77-601"><a href="#cb77-601" aria-hidden="true" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">"Pflanzschema für ein latin square design"</span>, </span>
<span id="cb77-602"><a href="#cb77-602" aria-hidden="true" tabindex="-1"></a>        <span class="at">show.key =</span> <span class="cn">FALSE</span>, <span class="at">key.cex =</span> <span class="fl">0.5</span>)</span>
<span id="cb77-603"><a href="#cb77-603" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-604"><a href="#cb77-604" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-605"><a href="#cb77-605" aria-hidden="true" tabindex="-1"></a>Dann nochmal das *latin square design* rausschreiben und wir können mit der Datenerfassung beginnen.</span>
<span id="cb77-606"><a href="#cb77-606" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-609"><a href="#cb77-609" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-610"><a href="#cb77-610" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb77-611"><a href="#cb77-611" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb77-612"><a href="#cb77-612" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb77-613"><a href="#cb77-613" aria-hidden="true" tabindex="-1"></a>lsd_book_tbl <span class="sc">|&gt;</span> </span>
<span id="cb77-614"><a href="#cb77-614" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(trt, rows, cols) <span class="sc">|&gt;</span> </span>
<span id="cb77-615"><a href="#cb77-615" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_xlsx</span>(<span class="st">"template_sheet.xlsx"</span>)</span>
<span id="cb77-616"><a href="#cb77-616" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-617"><a href="#cb77-617" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-618"><a href="#cb77-618" aria-hidden="true" tabindex="-1"></a><span class="fu">### ... mit `{dae}`</span></span>
<span id="cb77-619"><a href="#cb77-619" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-620"><a href="#cb77-620" aria-hidden="true" tabindex="-1"></a>Das *latin square design* in dem R Paket `{dae}` ist etwas verkompliziert herzustellen. Das Paket `{dae}` ist eher für komplexere Designs gedacht, so dass simple Designs manchmal übermäßig kompliziert wirken. Wir übergeben erstmal unser Positionsgrid, natürlich ein $5 \times 5$-Grid, aus Zeilen und Spalten. Dann ergänzen wir unsere fünf Behandlungen in einem *latin square design*. Das Ganze ist irgendwie dreifach, aber da wir auch komplexeres können, machen wir das mal so und gehen hier nicht tiefer drauf ein.</span>
<span id="cb77-621"><a href="#cb77-621" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-624"><a href="#cb77-624" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-625"><a href="#cb77-625" aria-hidden="true" tabindex="-1"></a>lsd_sys <span class="ot">&lt;-</span> <span class="fu">cbind</span>(<span class="fu">fac.gen</span>(<span class="fu">list</span>(<span class="at">rows =</span> <span class="dv">5</span>, <span class="at">cols =</span> <span class="dv">5</span>)),</span>
<span id="cb77-626"><a href="#cb77-626" aria-hidden="true" tabindex="-1"></a>                 <span class="at">trt =</span> <span class="fu">factor</span>(<span class="fu">designLatinSqrSys</span>(<span class="dv">5</span>), <span class="at">labels =</span> LETTERS[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]))</span>
<span id="cb77-627"><a href="#cb77-627" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-628"><a href="#cb77-628" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-629"><a href="#cb77-629" aria-hidden="true" tabindex="-1"></a>Wenn wir das grundlegende Objekt <span class="in">`lsd_obj`</span> mit den Spalten, Zeilen und Behandlungen erstellt haben, können wir die Zuordnung randomisieren. Dabei wollen wir die Behandlungen <span class="in">`trt`</span> auf die Zeilen <span class="in">`rows`</span> und Spalten <span class="in">`cols`</span> randomisieren. Deshalb ist sind die Behandlungen in der Option <span class="in">`allocated`</span> sowie die Zeilen und Spalten in <span class="in">`recipient`</span>.</span>
<span id="cb77-630"><a href="#cb77-630" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-633"><a href="#cb77-633" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-634"><a href="#cb77-634" aria-hidden="true" tabindex="-1"></a>lsd_lay <span class="ot">&lt;-</span> <span class="fu">designRandomize</span>(<span class="at">allocated =</span> lsd_sys[<span class="st">"trt"</span>],</span>
<span id="cb77-635"><a href="#cb77-635" aria-hidden="true" tabindex="-1"></a>                           <span class="at">recipient =</span> lsd_sys[<span class="fu">c</span>(<span class="st">"rows"</span>, <span class="st">"cols"</span>)],</span>
<span id="cb77-636"><a href="#cb77-636" aria-hidden="true" tabindex="-1"></a>                           <span class="at">seed =</span> <span class="dv">141</span>)</span>
<span id="cb77-637"><a href="#cb77-637" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-638"><a href="#cb77-638" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-639"><a href="#cb77-639" aria-hidden="true" tabindex="-1"></a>Wir können dann uns auch in @fig-exp-basic-6 die Ausgabe des *latin square design* anschauen. Prinzipiell gibt es hier keinen Unterschied zu dem R Paket <span class="in">`{agricolae}`</span>. Es ist dann eher eine Geschmacksfrage, wie die Darstellung aussehen soll. Meiner Meinung nach ist die Erstellung in <span class="in">`{dae}`</span> viel zu kompiliziert im Vergleich zu den anderen R Paketen.</span>
<span id="cb77-640"><a href="#cb77-640" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-643"><a href="#cb77-643" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-644"><a href="#cb77-644" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb77-645"><a href="#cb77-645" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb77-646"><a href="#cb77-646" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-exp-basic-6</span></span>
<span id="cb77-647"><a href="#cb77-647" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-align: center</span></span>
<span id="cb77-648"><a href="#cb77-648" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 4</span></span>
<span id="cb77-649"><a href="#cb77-649" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 6</span></span>
<span id="cb77-650"><a href="#cb77-650" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Schema der Pflanzungen nach den Behandlungen für das *latin square design*. Beachte die schwarzen Linien als Grenzen für die Blöcke. Im realen Leben können das Gänge zwischen Tischen sein oder Feldwege."</span></span>
<span id="cb77-651"><a href="#cb77-651" aria-hidden="true" tabindex="-1"></a><span class="fu">designGGPlot</span>(lsd_lay, <span class="at">labels =</span> <span class="st">"trt"</span>, <span class="at">cellalpha =</span> <span class="fl">0.75</span>,</span>
<span id="cb77-652"><a href="#cb77-652" aria-hidden="true" tabindex="-1"></a>             <span class="at">row.factors =</span> <span class="st">"rows"</span>, <span class="at">column.factors =</span> <span class="st">"cols"</span>,</span>
<span id="cb77-653"><a href="#cb77-653" aria-hidden="true" tabindex="-1"></a>             <span class="at">blockdefinition =</span> <span class="fu">cbind</span>(<span class="dv">1</span>, <span class="dv">1</span>),</span>
<span id="cb77-654"><a href="#cb77-654" aria-hidden="true" tabindex="-1"></a>             <span class="at">blocklinecolour =</span> <span class="st">"black"</span>, </span>
<span id="cb77-655"><a href="#cb77-655" aria-hidden="true" tabindex="-1"></a>             <span class="at">title =</span> <span class="st">"Pflanzschema für ein latin square design"</span>)</span>
<span id="cb77-656"><a href="#cb77-656" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-657"><a href="#cb77-657" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-658"><a href="#cb77-658" aria-hidden="true" tabindex="-1"></a><span class="fu">## Spezialfälle</span></span>
<span id="cb77-659"><a href="#cb77-659" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-660"><a href="#cb77-660" aria-hidden="true" tabindex="-1"></a>Im Folgenden schauen wir uns noch die Generierung von zwei Spezialfällen an. Beide sind im Prinzip wiederum zweifaktorielle Versuchspläne mit einer Behandlung und entsprechenden Wiederholungen in Blöcken. Beide sind aber etwas spezieller beim Aufbau, deshalb hier nur am Rande. Die Auswertung verlangt dann natürlich auch wieder etwas mehr Modellierung.</span>
<span id="cb77-661"><a href="#cb77-661" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-662"><a href="#cb77-662" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">Alpha design</span><span class="co">](#sec-alpha)</span></span>
<span id="cb77-663"><a href="#cb77-663" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">Augmented design</span><span class="co">](#sec-augment)</span></span>
<span id="cb77-664"><a href="#cb77-664" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-665"><a href="#cb77-665" aria-hidden="true" tabindex="-1"></a>Wir schauen uns einmal für diese Designs die Implementierung in <span class="in">`{agricolae}`</span> sowie in <span class="in">`{FieldHub}`</span> an. Selber machen ist hier etwas aufwendig und hier nutzen wir dann mal wirklich ein R Paket, dass macht es uns dann einfacher im Erstellen.</span>
<span id="cb77-666"><a href="#cb77-666" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-667"><a href="#cb77-667" aria-hidden="true" tabindex="-1"></a><span class="fu">### Alpha design {#sec-alpha}</span></span>
<span id="cb77-668"><a href="#cb77-668" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-669"><a href="#cb77-669" aria-hidden="true" tabindex="-1"></a>Der Alpha-Versuchsplan ist dafür gedacht ein Versuchsplan mit unvollständigen Blöcken abzubilden. Die Blöcke sind dann aber wiederum zu vollständigen Wiederholungen gruppiert. Das heißt, in jeder Wiederholung findest du alle Blöcke wieder. Solche Versuchspläne werden dann als auflösbar bezeichnet, also als berechenbar. Das klingt jetzt etwas komplizierter als es eiigentlich ist. Wie haben auch in diesem Beispiel wieder fünfzehn genetische Linien vorliegen. Wir haben aber in jedem unserer Blöcke nur Platz drei dieser Linien abzubilden. Das heißt also pro Block nehmen wir drei Linien damit kommen wir auf fünf Blöcke um alle Linien abzubilden. Diese fünf Blöcke werden dann in drei Wiederholungen randomisiert, so dass wir auf fünfzehn Blöcke kommen.</span>
<span id="cb77-670"><a href="#cb77-670" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-671"><a href="#cb77-671" aria-hidden="true" tabindex="-1"></a>Okay, das klingt jetzt echt wirr. Schauen wir uns dazu einmal das Schema der Abhängigkeitsstruktur in der @fig-mermaid-basic-alpha an. Wir haben also unsere Behandlung <span class="in">`trt_gen`</span> mit fünzehn Leveln entsprechend der fünfzehn genetischen Linien. Wir nehmen jetzt zufällig drei Linien heraus und packen diese drei Linien in einen Block <span class="in">`inc_block`</span>. Das machen wir fünf mal, da wir $15/3 = 5$ Blöcke brauchen. Wir generieren *incomplete blocks*. Dann kommen alle *incomplete blocks* in eine Wiederholung <span class="in">`rep`</span>. In einer Wiederholung sind alle genetischen Linien dann enthalten.</span>
<span id="cb77-672"><a href="#cb77-672" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-675"><a href="#cb77-675" aria-hidden="true" tabindex="-1"></a><span class="in">```{mermaid}</span></span>
<span id="cb77-676"><a href="#cb77-676" aria-hidden="true" tabindex="-1"></a><span class="in">%%| label: fig-mermaid-basic-alpha</span></span>
<span id="cb77-677"><a href="#cb77-677" aria-hidden="true" tabindex="-1"></a><span class="in">%%| fig-width: 6</span></span>
<span id="cb77-678"><a href="#cb77-678" aria-hidden="true" tabindex="-1"></a><span class="in">%%| fig-cap: "Schematische Darstellung der Abhängigkeitsstruktur im Alpha-Versuchsplan. Die Level der Behandlung werden zufällig auf *incomplete blocks* aufgeteilt und diese Blöcke dann vollständig in Wiederholungen randomisiert."</span></span>
<span id="cb77-679"><a href="#cb77-679" aria-hidden="true" tabindex="-1"></a><span class="in">flowchart LR</span></span>
<span id="cb77-680"><a href="#cb77-680" aria-hidden="true" tabindex="-1"></a><span class="in">    A(trt_gen):::factor --&gt; B &amp; C &amp; D &amp; E &amp; F</span></span>
<span id="cb77-681"><a href="#cb77-681" aria-hidden="true" tabindex="-1"></a><span class="in">    B[("G_10 </span></span>
<span id="cb77-682"><a href="#cb77-682" aria-hidden="true" tabindex="-1"></a><span class="in">        G_4</span></span>
<span id="cb77-683"><a href="#cb77-683" aria-hidden="true" tabindex="-1"></a><span class="in">        G_8")]:::level -.- G(((nested))) -.-&gt; L(inc_block):::inc_block</span></span>
<span id="cb77-684"><a href="#cb77-684" aria-hidden="true" tabindex="-1"></a><span class="in">    C[("G_3</span></span>
<span id="cb77-685"><a href="#cb77-685" aria-hidden="true" tabindex="-1"></a><span class="in">        G_15</span></span>
<span id="cb77-686"><a href="#cb77-686" aria-hidden="true" tabindex="-1"></a><span class="in">        G_9")]:::level -.- H(((nested))) -.-&gt; L</span></span>
<span id="cb77-687"><a href="#cb77-687" aria-hidden="true" tabindex="-1"></a><span class="in">    D[("G_2 </span></span>
<span id="cb77-688"><a href="#cb77-688" aria-hidden="true" tabindex="-1"></a><span class="in">        G_11</span></span>
<span id="cb77-689"><a href="#cb77-689" aria-hidden="true" tabindex="-1"></a><span class="in">        G_1")]:::level -.- I(((nested))) -.-&gt; L</span></span>
<span id="cb77-690"><a href="#cb77-690" aria-hidden="true" tabindex="-1"></a><span class="in">    E[("G_13</span></span>
<span id="cb77-691"><a href="#cb77-691" aria-hidden="true" tabindex="-1"></a><span class="in">        G_12</span></span>
<span id="cb77-692"><a href="#cb77-692" aria-hidden="true" tabindex="-1"></a><span class="in">        G_7")]:::level -.- J(((nested))) -.-&gt; L</span></span>
<span id="cb77-693"><a href="#cb77-693" aria-hidden="true" tabindex="-1"></a><span class="in">    F[("G_6 </span></span>
<span id="cb77-694"><a href="#cb77-694" aria-hidden="true" tabindex="-1"></a><span class="in">        G_5</span></span>
<span id="cb77-695"><a href="#cb77-695" aria-hidden="true" tabindex="-1"></a><span class="in">        G_14")]:::level -.- K(((nested))) -.-&gt; L</span></span>
<span id="cb77-696"><a href="#cb77-696" aria-hidden="true" tabindex="-1"></a><span class="in">    L --- M(((nested))) --&gt; N(Wiederholung):::factor</span></span>
<span id="cb77-697"><a href="#cb77-697" aria-hidden="true" tabindex="-1"></a><span class="in">    classDef factor fill:#56B4E9,stroke:#333,stroke-width:0.75px</span></span>
<span id="cb77-698"><a href="#cb77-698" aria-hidden="true" tabindex="-1"></a><span class="in">    classDef level fill:#E69F00,stroke:#333,stroke-width:0.75px</span></span>
<span id="cb77-699"><a href="#cb77-699" aria-hidden="true" tabindex="-1"></a><span class="in">    classDef inc_block fill:#CC79A7,stroke:#333,stroke-width:0.75px</span></span>
<span id="cb77-700"><a href="#cb77-700" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-701"><a href="#cb77-701" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-702"><a href="#cb77-702" aria-hidden="true" tabindex="-1"></a>::: callout-tip</span>
<span id="cb77-703"><a href="#cb77-703" aria-hidden="true" tabindex="-1"></a><span class="fu">## Modell zur Auswertung</span></span>
<span id="cb77-704"><a href="#cb77-704" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-705"><a href="#cb77-705" aria-hidden="true" tabindex="-1"></a>Wir rechnen ein multiples lineares Modell für die statistische Analyse.</span>
<span id="cb77-706"><a href="#cb77-706" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-709"><a href="#cb77-709" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-710"><a href="#cb77-710" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: FALSE</span></span>
<span id="cb77-711"><a href="#cb77-711" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">lm</span>(drymatter <span class="sc">~</span> trt <span class="sc">+</span> rep <span class="sc">+</span> rep<span class="sc">:</span>inc_block, <span class="at">data =</span> alpha_tbl)</span>
<span id="cb77-712"><a href="#cb77-712" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-713"><a href="#cb77-713" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-714"><a href="#cb77-714" aria-hidden="true" tabindex="-1"></a>Oder können überlegen ein gemischtes Modell zu rechnen.</span>
<span id="cb77-715"><a href="#cb77-715" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-718"><a href="#cb77-718" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-719"><a href="#cb77-719" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: FALSE</span></span>
<span id="cb77-720"><a href="#cb77-720" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">lmer</span>(drymatter <span class="sc">~</span> trt <span class="sc">+</span> rep <span class="sc">+</span> (<span class="dv">1</span> <span class="sc">|</span> rep<span class="sc">:</span>inc_block), <span class="at">data =</span> alpha_tbl)</span>
<span id="cb77-721"><a href="#cb77-721" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-722"><a href="#cb77-722" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-723"><a href="#cb77-723" aria-hidden="true" tabindex="-1"></a>Die Entscheidung kannst du dann mit der <span class="co">[</span><span class="ot">Modellselektion</span><span class="co">](https://jkruppa.github.io/stat-modeling-basic.html#sec-model-basic-compare)</span> durchführen.</span>
<span id="cb77-724"><a href="#cb77-724" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb77-725"><a href="#cb77-725" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-726"><a href="#cb77-726" aria-hidden="true" tabindex="-1"></a>::: column-margin</span>
<span id="cb77-727"><a href="#cb77-727" aria-hidden="true" tabindex="-1"></a>Auch hier hilft die Seite <span class="co">[</span><span class="ot">DSFAIR - Alpha design</span><span class="co">](https://schmidtpaul.github.io/DSFAIR/alpha_JohnWilliams1995.html)</span> mit einer beispielhaften Auswertung eventuell weiter. Beispielhafte Daten und Auswertung sind dort vorhanden.</span>
<span id="cb77-728"><a href="#cb77-728" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb77-729"><a href="#cb77-729" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-730"><a href="#cb77-730" aria-hidden="true" tabindex="-1"></a>Deshalb brauchen wir erstmal unsere fünfzehn Linien <span class="in">`trt_gen`</span> und unsere drei Wiederholungen <span class="in">`n_rep`</span> sowie eine Größe von unseren Blöcken <span class="in">`size_block`</span> von drei.</span>
<span id="cb77-731"><a href="#cb77-731" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-734"><a href="#cb77-734" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-735"><a href="#cb77-735" aria-hidden="true" tabindex="-1"></a>trt_gen <span class="ot">&lt;-</span> <span class="fu">str_c</span>(<span class="st">"G"</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>)  </span>
<span id="cb77-736"><a href="#cb77-736" aria-hidden="true" tabindex="-1"></a>n_trt_gen <span class="ot">&lt;-</span> <span class="fu">n_distinct</span>(trt_gen)</span>
<span id="cb77-737"><a href="#cb77-737" aria-hidden="true" tabindex="-1"></a>n_rep <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb77-738"><a href="#cb77-738" aria-hidden="true" tabindex="-1"></a>size_block <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb77-739"><a href="#cb77-739" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-740"><a href="#cb77-740" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-741"><a href="#cb77-741" aria-hidden="true" tabindex="-1"></a>Leider sind die Namen der Optionen etwas unglücklich gewählt. Zwar macht es Sinn die Namen etwas gleich zu halten, aber manchmal macht es die Sache für die Anwendung echt nicht einfacher. Hier ist also <span class="in">`k`</span> die Größe der Blöcke und <span class="in">`r`</span> die Anzahl der Wiederholungen. Es funktionieren nicht alle möglichen Kombinationen, im Zweifel bitte vorher hier mal rumspielen, bevor der Versuch angelegt wird oder schon Anzahlen bestimmt werden.</span>
<span id="cb77-742"><a href="#cb77-742" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-745"><a href="#cb77-745" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-746"><a href="#cb77-746" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb77-747"><a href="#cb77-747" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb77-748"><a href="#cb77-748" aria-hidden="true" tabindex="-1"></a>alpha_obj <span class="ot">&lt;-</span> <span class="fu">design.alpha</span>(<span class="at">trt =</span> trt_gen,</span>
<span id="cb77-749"><a href="#cb77-749" aria-hidden="true" tabindex="-1"></a>                          <span class="at">k =</span> size_block,</span>
<span id="cb77-750"><a href="#cb77-750" aria-hidden="true" tabindex="-1"></a>                          <span class="at">r =</span> n_rep,</span>
<span id="cb77-751"><a href="#cb77-751" aria-hidden="true" tabindex="-1"></a>                          <span class="at">seed =</span> <span class="dv">42</span>)</span>
<span id="cb77-752"><a href="#cb77-752" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-753"><a href="#cb77-753" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-754"><a href="#cb77-754" aria-hidden="true" tabindex="-1"></a>Wie immer müssen wir uns noch die Zeilen und Spalten selber erschaffen, damit wir das *alpha design* auch abbilden können. Hier ist wichtig, dass wir dann noch die Wiederholung haben, die kein Block ist. Pro Wiederholung haben wir eben fünf unvollständige Blöcke mit drei Linien vorliegen.</span>
<span id="cb77-755"><a href="#cb77-755" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-758"><a href="#cb77-758" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-759"><a href="#cb77-759" aria-hidden="true" tabindex="-1"></a>alpha_book_tbl <span class="ot">&lt;-</span> alpha_obj<span class="sc">$</span>book <span class="sc">|&gt;</span> </span>
<span id="cb77-760"><a href="#cb77-760" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">replication =</span> <span class="fu">str_c</span>(<span class="st">"Wiederholung "</span>, replication),</span>
<span id="cb77-761"><a href="#cb77-761" aria-hidden="true" tabindex="-1"></a>         <span class="at">rows =</span> <span class="fu">as.numeric</span>(block),</span>
<span id="cb77-762"><a href="#cb77-762" aria-hidden="true" tabindex="-1"></a>         <span class="at">cols =</span> <span class="fu">as.numeric</span>(cols))</span>
<span id="cb77-763"><a href="#cb77-763" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-764"><a href="#cb77-764" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-765"><a href="#cb77-765" aria-hidden="true" tabindex="-1"></a>In der @fig-exp-basic-7 siehst du dann das Ergebnis der Versuchsplanung. Wir haben unsere drei Wiederholungen und in den drei Wiederholungen dann jeweils fünf Blöcke randomisiert. Pro Block finden sich dann drei Linien. Unsere Blöcke sind damit unvollständig. Für mich ist das *alpha design* eins der schwierigeren Designs, weil man hier zwischen den Wiederholungen und den Blöcken unterscheiden muss. Das führt manchmal zu Verwirrung was randomisert wird.</span>
<span id="cb77-766"><a href="#cb77-766" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-769"><a href="#cb77-769" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-770"><a href="#cb77-770" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb77-771"><a href="#cb77-771" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb77-772"><a href="#cb77-772" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-exp-basic-7</span></span>
<span id="cb77-773"><a href="#cb77-773" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-align: center</span></span>
<span id="cb77-774"><a href="#cb77-774" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 4</span></span>
<span id="cb77-775"><a href="#cb77-775" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 6</span></span>
<span id="cb77-776"><a href="#cb77-776" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Schema der Pflanzungen nach den Behandlungen für das *alpha design*."</span></span>
<span id="cb77-777"><a href="#cb77-777" aria-hidden="true" tabindex="-1"></a><span class="fu">desplot</span>(block <span class="sc">~</span> rows <span class="sc">+</span> cols <span class="sc">|</span> replication, <span class="at">flip =</span> <span class="cn">TRUE</span>,</span>
<span id="cb77-778"><a href="#cb77-778" aria-hidden="true" tabindex="-1"></a>        <span class="at">out1 =</span> replication,</span>
<span id="cb77-779"><a href="#cb77-779" aria-hidden="true" tabindex="-1"></a>        <span class="at">out2 =</span> block, <span class="at">out2.gpar =</span> <span class="fu">list</span>(<span class="at">col =</span> <span class="st">"black"</span>, <span class="at">lty =</span> <span class="dv">3</span>), </span>
<span id="cb77-780"><a href="#cb77-780" aria-hidden="true" tabindex="-1"></a>        <span class="at">text =</span> trt_gen, <span class="at">cex =</span> <span class="dv">1</span>, <span class="at">shorten =</span> <span class="st">"no"</span>,</span>
<span id="cb77-781"><a href="#cb77-781" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> alpha_book_tbl, </span>
<span id="cb77-782"><a href="#cb77-782" aria-hidden="true" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">"Pflanzschema für ein alpha design"</span>, </span>
<span id="cb77-783"><a href="#cb77-783" aria-hidden="true" tabindex="-1"></a>        <span class="at">show.key =</span> <span class="cn">FALSE</span>)</span>
<span id="cb77-784"><a href="#cb77-784" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-785"><a href="#cb77-785" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-786"><a href="#cb77-786" aria-hidden="true" tabindex="-1"></a>Dann nochmal das *alpha design* als Feldbuch rausschreiben und wir können mit der Datenerfassung beginnen. Auch hier hiulft es sich nochmal ein Beispieloutcome auszudenken und in die Tabelle als Spalte einzufügen. Dann kannst du schauen, ob es so passen könnte mit der Datenerhebung.</span>
<span id="cb77-787"><a href="#cb77-787" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-790"><a href="#cb77-790" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-791"><a href="#cb77-791" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb77-792"><a href="#cb77-792" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb77-793"><a href="#cb77-793" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb77-794"><a href="#cb77-794" aria-hidden="true" tabindex="-1"></a>lsd_book_tbl <span class="sc">|&gt;</span> </span>
<span id="cb77-795"><a href="#cb77-795" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(replication, trt_gen, <span class="at">inc_block =</span> block, rows, cols) <span class="sc">|&gt;</span> </span>
<span id="cb77-796"><a href="#cb77-796" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_xlsx</span>(<span class="st">"template_sheet.xlsx"</span>)</span>
<span id="cb77-797"><a href="#cb77-797" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-798"><a href="#cb77-798" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-799"><a href="#cb77-799" aria-hidden="true" tabindex="-1"></a>Für die Erstellung des *alpha design* in der Shiny App schaue dir die Anleitung wie schon weiter oben unter [Generates an Alpha Design mit `{FielDHub}`](https://didiermurillof.github.io/FielDHub/reference/alpha_lattice.html) einmal an. Hier fängt es wirklich an sinnvoll zu sein, eine Shiny App zu haben. So kannst du viel besser mit den Parametern des *alpha designs* rumspielen und sehen was für dich passen würde. Hier einmal der Code für die Erstellung eines *alpha design* in R mit Code. Wir haben jetzt neun Behandlungen vorliegen, aber das kennst du ja schon von dem obigen Beispiel in <span class="in">`{agricolae}`</span>. Auch hier haben wir dann drei Blöcke vorliegen und drei Wiederholungen. Damit erklärt sich der Code wir oben auch schon.</span>
<span id="cb77-800"><a href="#cb77-800" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-803"><a href="#cb77-803" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-804"><a href="#cb77-804" aria-hidden="true" tabindex="-1"></a>alpha_obj <span class="ot">&lt;-</span> <span class="fu">alpha_lattice</span>(<span class="at">t =</span> <span class="dv">9</span>,</span>
<span id="cb77-805"><a href="#cb77-805" aria-hidden="true" tabindex="-1"></a>                           <span class="at">k =</span> <span class="dv">3</span>,</span>
<span id="cb77-806"><a href="#cb77-806" aria-hidden="true" tabindex="-1"></a>                           <span class="at">r =</span> <span class="dv">3</span>,</span>
<span id="cb77-807"><a href="#cb77-807" aria-hidden="true" tabindex="-1"></a>                           <span class="at">seed =</span> <span class="dv">2023</span>)</span>
<span id="cb77-808"><a href="#cb77-808" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-809"><a href="#cb77-809" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-810"><a href="#cb77-810" aria-hidden="true" tabindex="-1"></a>Dann können wir uns auch hier sehr einfach das Feldbuch rausschrieben. Wir nutzen dann den gleichen Code wie oben für das rausschrieben nach Excel.</span>
<span id="cb77-811"><a href="#cb77-811" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-814"><a href="#cb77-814" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-815"><a href="#cb77-815" aria-hidden="true" tabindex="-1"></a>alpha_obj<span class="sc">$</span>fieldBook <span class="sc">|&gt;</span> </span>
<span id="cb77-816"><a href="#cb77-816" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">|&gt;</span> </span>
<span id="cb77-817"><a href="#cb77-817" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span>
<span id="cb77-818"><a href="#cb77-818" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-819"><a href="#cb77-819" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-820"><a href="#cb77-820" aria-hidden="true" tabindex="-1"></a>In der @fig-exp-basic-alpha-fieldhub siehst du dann einmal das *alpha design* in <span class="in">`{FielDHub}`</span> dargestellt und hier gefällt mir dann die Abbildung überhaupt nicht mehr. Die Zahlen sind kaum zu lesen. Daher würde ich hier dann das erstellte Feldbuch <span class="in">`alpha_obj$fieldBook`</span> nochmal selber in <span class="in">`{desplot}`</span> darstellen und rausschreiben. So ist wirklich schwer zu lesen, was was sein soll. Die Farbwahl ist in <span class="in">`{FielDHub}`</span> etwas eingeschränkt.</span>
<span id="cb77-821"><a href="#cb77-821" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-824"><a href="#cb77-824" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-825"><a href="#cb77-825" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb77-826"><a href="#cb77-826" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb77-827"><a href="#cb77-827" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-exp-basic-alpha-fieldhub</span></span>
<span id="cb77-828"><a href="#cb77-828" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-align: center</span></span>
<span id="cb77-829"><a href="#cb77-829" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 4</span></span>
<span id="cb77-830"><a href="#cb77-830" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 6</span></span>
<span id="cb77-831"><a href="#cb77-831" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Schema der Pflanzungen nach den Behandlungen für das *alpha design*."</span></span>
<span id="cb77-832"><a href="#cb77-832" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-833"><a href="#cb77-833" aria-hidden="true" tabindex="-1"></a>alpha_obj <span class="sc">|&gt;</span> <span class="fu">plot</span>()</span>
<span id="cb77-834"><a href="#cb77-834" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-835"><a href="#cb77-835" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-836"><a href="#cb77-836" aria-hidden="true" tabindex="-1"></a><span class="fu">### Augmented design {#sec-augment}</span></span>
<span id="cb77-837"><a href="#cb77-837" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-838"><a href="#cb77-838" aria-hidden="true" tabindex="-1"></a>Das *augmened design* basiert darauf, dass wir neben den eigentlichen Behandlungen noch Standardbehandlungen vorliegen haben. Die Standardbehandlungen randomisieren wir voll auf die Blöcke, wohingegen die anderen Behandlungen unvollständig randomisiert werden. In unserem Beispiel haben wir jetzt fünfzehn genetische Linien `G1` bis `G15` in dem Behandlungsfaktor `trt_gen` sowie die Standardbehandlung `Std_A` und `Std_B` vorliegen. Wir werden dann drei Blöcke bilden und in jeder der Blöcke wird jeweils die Standardbehandlung `Std_A` und `Std_B` sowie eine *Auswahl* an genetischen Linien enthalten sein.</span>
<span id="cb77-839"><a href="#cb77-839" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-840"><a href="#cb77-840" aria-hidden="true" tabindex="-1"></a>Klingt jetzt auch wieder sehr viel wirrer als es am Ende ist. Deshalb hier erstmal das Modell, wir haben auch hier im Prinzip nur zwei Faktoren vorliegen. Wir haben einmal den Faktor Behandlung <span class="in">`trt_gen`</span> sowie den Faktor Block zu erstellen.</span>
<span id="cb77-841"><a href="#cb77-841" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-842"><a href="#cb77-842" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb77-843"><a href="#cb77-843" aria-hidden="true" tabindex="-1"></a>drymatter \sim \overbrace{trt_{gen}}^{f_1} + \underbrace{inc<span class="sc">\_</span>{block}}_{f_2} </span>
<span id="cb77-844"><a href="#cb77-844" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb77-845"><a href="#cb77-845" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-846"><a href="#cb77-846" aria-hidden="true" tabindex="-1"></a>mit</span>
<span id="cb77-847"><a href="#cb77-847" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-848"><a href="#cb77-848" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>dem Faktor Behandlung <span class="in">`trt`</span> und den fünzehn genetischen Linien als Level <span class="in">`G_1`</span> bis <span class="in">`G_15`</span> und die beiden Standardbehandlungen <span class="in">`Std_A`</span> und <span class="in">`Std_B`</span>.</span>
<span id="cb77-849"><a href="#cb77-849" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>dem Faktor Block <span class="in">`inc_block`</span> und den vier Leveln <span class="in">`I`</span> bis <span class="in">`III`</span>.</span>
<span id="cb77-850"><a href="#cb77-850" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-851"><a href="#cb77-851" aria-hidden="true" tabindex="-1"></a>In dem *augmened design* dreht sich aber alles um die Zuweisung der Behandlungslevel zu den Blöcken. In der @fig-mermaid-basic-aug wird die Zuordnung nochmal dargestellt. Die Standardbedingungen werden immer auf die Blöcke randomisiert. Daher haben wir für die Blöcke eine vollständige Randomisierung vorliegen. Die genetischen Linien werden nur teilweise jedem Block zugeordnet. Wir haben für die Level der genetischen Linien ein *incomplete block design* vorliegen.</span>
<span id="cb77-852"><a href="#cb77-852" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-855"><a href="#cb77-855" aria-hidden="true" tabindex="-1"></a><span class="in">```{mermaid}</span></span>
<span id="cb77-856"><a href="#cb77-856" aria-hidden="true" tabindex="-1"></a><span class="in">%%| label: fig-mermaid-basic-aug</span></span>
<span id="cb77-857"><a href="#cb77-857" aria-hidden="true" tabindex="-1"></a><span class="in">%%| fig-width: 6</span></span>
<span id="cb77-858"><a href="#cb77-858" aria-hidden="true" tabindex="-1"></a><span class="in">%%| fig-cap: "Schematische Darstellung der Abhängigkeitsstruktur im *augmened design*. Eine Auswahl der Level der genetischen Linien werden zufällig auf *incomplete blocks* aufgeteilt. Die Standardbedingungen werden vollständig jedem Block zugeordnet."</span></span>
<span id="cb77-859"><a href="#cb77-859" aria-hidden="true" tabindex="-1"></a><span class="in">flowchart LR</span></span>
<span id="cb77-860"><a href="#cb77-860" aria-hidden="true" tabindex="-1"></a><span class="in">    A(trt_gen):::factor --&gt; B &amp; D</span></span>
<span id="cb77-861"><a href="#cb77-861" aria-hidden="true" tabindex="-1"></a><span class="in">    B[("Std_A </span></span>
<span id="cb77-862"><a href="#cb77-862" aria-hidden="true" tabindex="-1"></a><span class="in">        Std_B")]:::level --- C(((nested))) --&gt; F(inc_block):::inc_block</span></span>
<span id="cb77-863"><a href="#cb77-863" aria-hidden="true" tabindex="-1"></a><span class="in">    D[("G_1</span></span>
<span id="cb77-864"><a href="#cb77-864" aria-hidden="true" tabindex="-1"></a><span class="in">        bis</span></span>
<span id="cb77-865"><a href="#cb77-865" aria-hidden="true" tabindex="-1"></a><span class="in">        G_15")]:::level -.- E(((nested))) -.-&gt; F</span></span>
<span id="cb77-866"><a href="#cb77-866" aria-hidden="true" tabindex="-1"></a><span class="in">    classDef factor fill:#56B4E9,stroke:#333,stroke-width:0.75px</span></span>
<span id="cb77-867"><a href="#cb77-867" aria-hidden="true" tabindex="-1"></a><span class="in">    classDef level fill:#E69F00,stroke:#333,stroke-width:0.75px</span></span>
<span id="cb77-868"><a href="#cb77-868" aria-hidden="true" tabindex="-1"></a><span class="in">    classDef inc_block fill:#CC79A7,stroke:#333,stroke-width:0.75px</span></span>
<span id="cb77-869"><a href="#cb77-869" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-870"><a href="#cb77-870" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-871"><a href="#cb77-871" aria-hidden="true" tabindex="-1"></a>::: callout-tip</span>
<span id="cb77-872"><a href="#cb77-872" aria-hidden="true" tabindex="-1"></a><span class="fu">## Modell zur Auswertung</span></span>
<span id="cb77-873"><a href="#cb77-873" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-874"><a href="#cb77-874" aria-hidden="true" tabindex="-1"></a>Wir rechnen ein multiples lineares Modell für die statistische Analyse.</span>
<span id="cb77-875"><a href="#cb77-875" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-878"><a href="#cb77-878" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-879"><a href="#cb77-879" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: FALSE</span></span>
<span id="cb77-880"><a href="#cb77-880" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">lm</span>(drymatter <span class="sc">~</span> trt <span class="sc">+</span> inc_block, <span class="at">data =</span> augment_tbl)</span>
<span id="cb77-881"><a href="#cb77-881" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-882"><a href="#cb77-882" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-883"><a href="#cb77-883" aria-hidden="true" tabindex="-1"></a>Oder können überlegen ein gemischtes Modell zu rechnen.</span>
<span id="cb77-884"><a href="#cb77-884" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-887"><a href="#cb77-887" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-888"><a href="#cb77-888" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: FALSE</span></span>
<span id="cb77-889"><a href="#cb77-889" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">lmer</span>(drymatter <span class="sc">~</span> trt <span class="sc">+</span> (<span class="dv">1</span> <span class="sc">|</span> inc_block), <span class="at">data =</span> augment_tbl)</span>
<span id="cb77-890"><a href="#cb77-890" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-891"><a href="#cb77-891" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-892"><a href="#cb77-892" aria-hidden="true" tabindex="-1"></a>Die Entscheidung kannst du dann mit der <span class="co">[</span><span class="ot">Modellselektion</span><span class="co">](https://jkruppa.github.io/stat-modeling-basic.html#sec-model-basic-compare)</span> durchführen.</span>
<span id="cb77-893"><a href="#cb77-893" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb77-894"><a href="#cb77-894" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-895"><a href="#cb77-895" aria-hidden="true" tabindex="-1"></a>::: column-margin</span>
<span id="cb77-896"><a href="#cb77-896" aria-hidden="true" tabindex="-1"></a>Auch hier hilft die Seite <span class="co">[</span><span class="ot">DSFAIR - Augmented design</span><span class="co">](https://schmidtpaul.github.io/DSFAIR/augmented_Pattersen1994.html)</span> mit einer beispielhaften Auswertung eventuell weiter. Beispielhafte Daten und Auswertung sind dort vorhanden.</span>
<span id="cb77-897"><a href="#cb77-897" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb77-898"><a href="#cb77-898" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-899"><a href="#cb77-899" aria-hidden="true" tabindex="-1"></a>Die Erstellung ist sehr fehleranfällig, wenn wir das selber machen. Deshalb nutzen wir hier das R Paket <span class="in">`{agricolae}`</span>. Du musst eben sehr genau darauf achten, dass wirklich auch alle genetischen Linien in den Blöcken sind. Das macht aber die Funktion <span class="in">`design.dau()`</span> gleich für uns. Wir brauchen also einmal einen Faktor für unsere genetischen Linien, dann einmal die Anzahl an Linien sowie die Anzahl an Blöcken. Das definieren wir uns jetzt hier einmal in Objekten vor, dass macht die Arbeit später einfacher.</span>
<span id="cb77-900"><a href="#cb77-900" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-903"><a href="#cb77-903" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-904"><a href="#cb77-904" aria-hidden="true" tabindex="-1"></a>trt_gen <span class="ot">&lt;-</span> <span class="fu">str_c</span>(<span class="st">"G"</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>)   </span>
<span id="cb77-905"><a href="#cb77-905" aria-hidden="true" tabindex="-1"></a>n_trt_gen <span class="ot">&lt;-</span> <span class="fu">n_distinct</span>(trt_gen)</span>
<span id="cb77-906"><a href="#cb77-906" aria-hidden="true" tabindex="-1"></a>n_block <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb77-907"><a href="#cb77-907" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-908"><a href="#cb77-908" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-909"><a href="#cb77-909" aria-hidden="true" tabindex="-1"></a>Dann noch den Standard erschaffen. Hier ist wichtig, dass der Standard immer in jedem Block sein wird. Das wird nicht der Fall sein für die genetischen Linien. Daher haben wir dann für die Linien ein *incomplete block design* vorliegen.</span>
<span id="cb77-910"><a href="#cb77-910" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-913"><a href="#cb77-913" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-914"><a href="#cb77-914" aria-hidden="true" tabindex="-1"></a>standard <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Std_A"</span>, <span class="st">"Std_B"</span>)</span>
<span id="cb77-915"><a href="#cb77-915" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-916"><a href="#cb77-916" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-917"><a href="#cb77-917" aria-hidden="true" tabindex="-1"></a>Wir nutzen hier einal die Funktion <span class="in">`design.dau()`</span> aus dem R Paket <span class="in">`{agricolae}`</span> um uns das *augmented design* ersellen zu lassen. Das macht die Funktion auch einigermaßen gut, wir müssen gleich nur noch die Positionen auf dem Pflanzgrid ergänzen.</span>
<span id="cb77-918"><a href="#cb77-918" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-921"><a href="#cb77-921" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-922"><a href="#cb77-922" aria-hidden="true" tabindex="-1"></a>augmented_obj <span class="ot">&lt;-</span> <span class="fu">design.dau</span>(<span class="at">trt1 =</span> standard,</span>
<span id="cb77-923"><a href="#cb77-923" aria-hidden="true" tabindex="-1"></a>                            <span class="at">trt2 =</span> trt_gen,</span>
<span id="cb77-924"><a href="#cb77-924" aria-hidden="true" tabindex="-1"></a>                            <span class="at">r =</span> n_block,</span>
<span id="cb77-925"><a href="#cb77-925" aria-hidden="true" tabindex="-1"></a>                            <span class="at">seed =</span> <span class="dv">42</span>)</span>
<span id="cb77-926"><a href="#cb77-926" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-927"><a href="#cb77-927" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-928"><a href="#cb77-928" aria-hidden="true" tabindex="-1"></a>Jetzt nehmen wir das Feldbuch und ergänzen nochmal die Positionen <span class="in">`rows`</span> und <span class="in">`cols`</span>. Dabei müssen wir die <span class="in">`rows`</span> etwas komplizierter aus der letzten Ziffer der Variable <span class="in">`plots`</span> durch die Funktion <span class="in">`str_sub()`</span> extrahieren. Sonst passt es leider nicht ganz mit den jeweiligen Positionen. Die Spalten <span class="in">`cols`</span> sind unsere Blöcke.</span>
<span id="cb77-929"><a href="#cb77-929" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-932"><a href="#cb77-932" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-933"><a href="#cb77-933" aria-hidden="true" tabindex="-1"></a>augmented_book_tbl <span class="ot">&lt;-</span> augmented_obj<span class="sc">$</span>book <span class="sc">|&gt;</span> </span>
<span id="cb77-934"><a href="#cb77-934" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cols =</span> <span class="fu">as.numeric</span>(block),</span>
<span id="cb77-935"><a href="#cb77-935" aria-hidden="true" tabindex="-1"></a>         <span class="at">rows =</span> <span class="fu">as.numeric</span>(<span class="fu">str_sub</span>(plots, <span class="dv">3</span>,<span class="dv">3</span>)))</span>
<span id="cb77-936"><a href="#cb77-936" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-937"><a href="#cb77-937" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-938"><a href="#cb77-938" aria-hidden="true" tabindex="-1"></a>Es ist eine gute Idee sich die Linien und die Standards einmal unterschiedlich einzufärben. Ich nutze für die Linien einen Gradienten von Blau und für die Standardbehandlungen einen Gradienten von Orange. Wir erschaffen uns also einen Vektor mit Farbnamen gleich der Anzahl an Linien plus den zwei Standards.</span>
<span id="cb77-939"><a href="#cb77-939" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-942"><a href="#cb77-942" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-943"><a href="#cb77-943" aria-hidden="true" tabindex="-1"></a>blue_15 <span class="ot">&lt;-</span> <span class="fu">colorRampPalette</span>(<span class="at">colors=</span><span class="fu">c</span>(<span class="st">"#56B4E9"</span>, <span class="st">"#0072B2"</span>))(<span class="dv">15</span>) </span>
<span id="cb77-944"><a href="#cb77-944" aria-hidden="true" tabindex="-1"></a>orange_03 <span class="ot">&lt;-</span> <span class="fu">colorRampPalette</span>(<span class="at">colors=</span><span class="fu">c</span>(<span class="st">"#E69F00"</span>, <span class="st">"#D55E00"</span>))(<span class="dv">3</span>) </span>
<span id="cb77-945"><a href="#cb77-945" aria-hidden="true" tabindex="-1"></a>blue_15_and_orange_03 <span class="ot">&lt;-</span> <span class="fu">c</span>(blue_15, orange_03)</span>
<span id="cb77-946"><a href="#cb77-946" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-947"><a href="#cb77-947" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-948"><a href="#cb77-948" aria-hidden="true" tabindex="-1"></a>Dann müssen wir noch den Farbvektor korrekt benennen, so dass die Behandlung im Namen steht und darunter im Vektor dann der Farbwert.</span>
<span id="cb77-949"><a href="#cb77-949" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-952"><a href="#cb77-952" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-953"><a href="#cb77-953" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(blue_15_and_orange_03) <span class="ot">&lt;-</span> augmented_book_tbl <span class="sc">|&gt;</span> </span>
<span id="cb77-954"><a href="#cb77-954" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(trt) <span class="sc">|&gt;</span> <span class="fu">as.character</span>() <span class="sc">|&gt;</span> <span class="fu">sort</span>() <span class="sc">|&gt;</span> <span class="fu">unique</span>()</span>
<span id="cb77-955"><a href="#cb77-955" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-956"><a href="#cb77-956" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-957"><a href="#cb77-957" aria-hidden="true" tabindex="-1"></a>Dann können wir schon in der @fig-exp-basic-8 einmal das *augmented design* einmal anschauen. Es ist schön zu sehen, das pro Reihe und damit Block beide Standards zufällig auf der Parzelle auftauchen. Auf der anderen Seite sind nicht alle fünfzehn Linien in jedem Block enthalten. Wir sparen mit dem *augmented design* auf jeden Fall Platz auf dem Feld und können so mehr Linien testen, als wir es mit einem RCBD gekonnt hätten.</span>
<span id="cb77-958"><a href="#cb77-958" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-961"><a href="#cb77-961" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-962"><a href="#cb77-962" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb77-963"><a href="#cb77-963" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb77-964"><a href="#cb77-964" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-exp-basic-8</span></span>
<span id="cb77-965"><a href="#cb77-965" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-align: center</span></span>
<span id="cb77-966"><a href="#cb77-966" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 4</span></span>
<span id="cb77-967"><a href="#cb77-967" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 6</span></span>
<span id="cb77-968"><a href="#cb77-968" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Schema der Pflanzungen nach den Behandlungen für das *augmented design*. Die Standardbedingungen sind vollständig in den Blöcken randomisiert, die genetischen Linien nur nicht komplett."</span></span>
<span id="cb77-969"><a href="#cb77-969" aria-hidden="true" tabindex="-1"></a><span class="fu">desplot</span>(trt <span class="sc">~</span> rows <span class="sc">+</span> cols, <span class="at">flip =</span> <span class="cn">TRUE</span>,</span>
<span id="cb77-970"><a href="#cb77-970" aria-hidden="true" tabindex="-1"></a>        <span class="at">out1 =</span> block, <span class="at">out1.gpar =</span> <span class="fu">list</span>(<span class="at">col =</span> <span class="st">"black"</span>, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">lty =</span> <span class="dv">3</span>),</span>
<span id="cb77-971"><a href="#cb77-971" aria-hidden="true" tabindex="-1"></a>        <span class="at">col.regions =</span> blue_15_and_orange_03,  </span>
<span id="cb77-972"><a href="#cb77-972" aria-hidden="true" tabindex="-1"></a>        <span class="at">text =</span> trt, <span class="at">cex =</span> <span class="dv">1</span>, <span class="at">shorten =</span> <span class="st">"no"</span>,</span>
<span id="cb77-973"><a href="#cb77-973" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> augmented_book_tbl,</span>
<span id="cb77-974"><a href="#cb77-974" aria-hidden="true" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">"Pflanzschema für ein augmented design mit zwei Standards."</span>, </span>
<span id="cb77-975"><a href="#cb77-975" aria-hidden="true" tabindex="-1"></a>        <span class="at">show.key =</span> F)</span>
<span id="cb77-976"><a href="#cb77-976" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-977"><a href="#cb77-977" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-978"><a href="#cb77-978" aria-hidden="true" tabindex="-1"></a>Für die Erstellung des *augmented design* in der Shiny App schaue dir die Anleitung wie schon weiter oben unter [Generates an Augmented Randomized Complete Block Design (ARCBD) mit `{FielDHub}`](https://didiermurillof.github.io/FielDHub/reference/RCBD_augmented.html) einmal an. Hier fängt es wirklich an sinnvoll zu sein, eine Shiny App zu haben. So kannst du viel besser mit den Parametern des *augmented design* rumspielen und sehen was für dich passen würde. Hier einmal der Code für die Erstellung eines *augmented design* in R mit Code. Wir haben jetzt fünfzehn Linien vorliegen, aber das kennst du ja schon von dem obigen Beispiel in <span class="in">`{agricolae}`</span>. Auch hier haben wir dann fünf Blöcke vorliegen und zwei Standardbehandlungen. Damit erklärt sich der Code wir oben auch schon.</span>
<span id="cb77-979"><a href="#cb77-979" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-982"><a href="#cb77-982" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-983"><a href="#cb77-983" aria-hidden="true" tabindex="-1"></a>augmented_obj <span class="ot">&lt;-</span> <span class="fu">RCBD_augmented</span>(<span class="at">lines =</span> <span class="dv">15</span>,</span>
<span id="cb77-984"><a href="#cb77-984" aria-hidden="true" tabindex="-1"></a>                                <span class="at">checks =</span> <span class="dv">2</span>,</span>
<span id="cb77-985"><a href="#cb77-985" aria-hidden="true" tabindex="-1"></a>                                <span class="at">b =</span> <span class="dv">5</span>,</span>
<span id="cb77-986"><a href="#cb77-986" aria-hidden="true" tabindex="-1"></a>                                <span class="at">seed =</span> <span class="dv">2023</span>)</span>
<span id="cb77-987"><a href="#cb77-987" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-988"><a href="#cb77-988" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-989"><a href="#cb77-989" aria-hidden="true" tabindex="-1"></a>Spannenderweise müssen wir hier fünf Blöcke wählen und können nicht das Design von oben in <span class="in">`{agricolae}`</span> nachbauen. Dennoch erstellen wir uns auch schon das letzte Feldbuch in diesem Kapitel und können dann das Feldbuch für die Planung nutzen. Auch hier hilft dann wirklich die Shiny App mehr, dann kannst du besser mit den Werten spielen.</span>
<span id="cb77-990"><a href="#cb77-990" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-993"><a href="#cb77-993" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-994"><a href="#cb77-994" aria-hidden="true" tabindex="-1"></a>augmented_obj<span class="sc">$</span>fieldBook <span class="sc">|&gt;</span> </span>
<span id="cb77-995"><a href="#cb77-995" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">|&gt;</span> </span>
<span id="cb77-996"><a href="#cb77-996" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span>
<span id="cb77-997"><a href="#cb77-997" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-998"><a href="#cb77-998" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-999"><a href="#cb77-999" aria-hidden="true" tabindex="-1"></a>Abschließend haben wir dann die @fig-exp-basic-augmented-fieldhub, die sich dann auch von der obigen unterscheidet. Auch hier gefällt mir die Abbildung nicht so sehr und ich würde die andere @fig-exp-basic-8 mit dem <span class="in">`{desplot}`</span> Code vorziehen. Ich erkenne mit dem eigenen Farbdesign mehr als in dieser Variante. Aber auch hier musst du dann schauen was du wirklich brauchst. Erstmal das Design in <span class="in">`{FielDHub}`</span> erstellen und dann das Feldbuch in <span class="in">`{desplot}`</span> selber hübsch machen.</span>
<span id="cb77-1000"><a href="#cb77-1000" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-1003"><a href="#cb77-1003" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-1004"><a href="#cb77-1004" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb77-1005"><a href="#cb77-1005" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb77-1006"><a href="#cb77-1006" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-exp-basic-augmented-fieldhub</span></span>
<span id="cb77-1007"><a href="#cb77-1007" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-align: center</span></span>
<span id="cb77-1008"><a href="#cb77-1008" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 4</span></span>
<span id="cb77-1009"><a href="#cb77-1009" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 6</span></span>
<span id="cb77-1010"><a href="#cb77-1010" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Schema der Pflanzungen nach den Behandlungen für das *augmented design*. Die Standardbedingungen sind vollständig in den Blöcken randomisiert, die genetischen Linien nur nicht komplett."</span></span>
<span id="cb77-1011"><a href="#cb77-1011" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-1012"><a href="#cb77-1012" aria-hidden="true" tabindex="-1"></a>augmented_obj <span class="sc">|&gt;</span> <span class="fu">plot</span>()</span>
<span id="cb77-1013"><a href="#cb77-1013" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
</code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Bio Data Science wurde von <a href="https://www.hs-osnabrueck.de/prof-dr-jochen-kruppa/">Jochen Kruppa-Scheetz</a> geschrieben.</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/jkruppa/jkruppa.github.io/edit/master/experimental-design-basic.qmd" class="toc-action"><i class="bi bi-github"></i>Seite editieren</a></li><li><a href="https://github.com/jkruppa/jkruppa.github.io/issues/new" class="toc-action"><i class="bi empty"></i>Problem melden</a></li><li><a href="https://github.com/jkruppa/jkruppa.github.io/blob/master/experimental-design-basic.qmd" class="toc-action"><i class="bi empty"></i>Quellcode anzeigen</a></li></ul></div></div>
    <div class="nav-footer-right">
<p>Dieses Openbook wurde mit <a href="https://quarto.org/">Quarto</a> erstellt.</p>
</div>
  </div>
</footer>
<script>var lightboxQuarto = GLightbox({"selector":".lightbox","openEffect":"zoom","loop":false,"descPosition":"bottom","closeEffect":"zoom"});
window.onload = () => {
  lightboxQuarto.on('slide_before_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    const href = trigger.getAttribute('href');
    if (href !== null) {
      const imgEl = window.document.querySelector(`a[href="${href}"] img`);
      if (imgEl !== null) {
        const srcAttr = imgEl.getAttribute("src");
        if (srcAttr && srcAttr.startsWith("data:")) {
          slideConfig.href = srcAttr;
        }
      }
    } 
  });

  lightboxQuarto.on('slide_after_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    if (window.Quarto?.typesetMath) {
      window.Quarto.typesetMath(slideNode);
    }
  });

};
          </script>




</body></html>