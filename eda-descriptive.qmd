# Deskriptive Statistik

Wir nutzen die deskriptive Statistik um Zahlen zusammenzufassen. [Eigentlich *schätzen* wir die **Parameter einer Verteilung**. Aber das kommt nochmal später genauer, wenn wir wissen was Verteilungen sind..]{.aside} Wichtig ist zu wissen, dass wir *mehrere Zahlen* durch meist eine oder zwei Zahlen beschreiben wollen.

```{r }
#| echo: false
#| warning: false

pacman::p_load(tidyverse, readxl, knitr, kableExtra)

data_tbl <- read_excel("data/flea_dog_cat.xlsx")
y_dog <- data_tbl %>% 
  filter(animal == "dog") %>% 
  pull(jump_length)
## y_dog <- c(5.2, 4.9, 12.1, 8.2, 5.6, 9.1, 7.4) 
```

Nehmen wir nun das Beispiel von den Sprungweiten von Hundeflöhen. Wir messen sieben Sprungweiten von sieben Hundeflöhen und messen dabei folgende Werte in \[cm\]: `r pander::p(y_dog, wrap = "", copula = " und ")`. Wir schreiben nun y als einen Vektor in der Form

$$
y = \{`r str_c(y_dog, collapse = ", ")`\}.
$$

In R würde der Vektor wie etwas anders aussehen.

```{r }
y <- c(5.7, 8.9, 11.8, 8.2, 5.6, 9.1, 7.6) 
```

Wir wollen nun die Zahlen in $y$ beschrieben und durch wenige andere Zahlen zusammenfassen. Einige der statistischen Maßzahlen sind dir vermutlich schon bekannt, andere eher neu.

## Mittelwert

Der Mittelwert einer Zahlenreihe beschreibt den Schwerpunkt der Zahlen. Der Mittelwert wird auch als Lageparameter benannt. [Der **Mittelwert** und der **Median** sind zwei Lageparameter einer Verteilung. Beide beschreiben die Stelle, wo die Verteilungskurve am höchsten ist.]{.aside} Wir schreiben den Mittelwert mit einem Strich über den Vektor, der die Zahlen enthält. Im folgenden ist die Formel für den Mittelwert der Sprungweite in \[cm\] der Hunde gezeigt. Der Mittelwert ist in dem Sinne eine künstliche Zahl, da der Mittlwert häufig nicht in den beobachteten Zahlen vorkommt.

::: column-margin
![](images/angel_01.png){fig-align="center" width="50%"}

Wir werden immer mal wieder **Formeln vereinfachen**. Zum Beispiel nur $\sum$ schreiben anstatt $\sum_i^n$, wenn wir einen Vektor aufsummieren und uns die Indizes sparen...
:::

$$
\bar{y} = \sum_{i=1}^{n}\cfrac{x_i}{n} =
\cfrac{`r str_c(y, collapse = " + ")`}{`r length(y)`} =
`r round(mean(y),2)`
$$

Im Durchschnitt oder im Mittel springen Hundeflöhe `r round(mean(y),2)` cm weit.

In der @fig-index-drawn wollen wir die Formel nochmal visualisieren. Vielleicht fällt dir dann der Zusammenhang von dem Index $i$ und der gesamten Fallzahl $n$ leichter.

![Zusamenhang zwischen $y$ sowie dem Index $i$ in der Formel für den Mittelwert.](images/index-drawn.png){#fig-index-drawn fig-align="center" width="100%"}

In R können wir den Mittelwert einfach mit der Funktion `mean()` berechnen. Wir wollen dann den Mittelwert noch auf die zweite Kommastelle runden. Das machen wir dann mit der Funktion `round()`.

```{r }
y %>% mean %>% round(2)
```

Wir erhalten das gleiche Ergebnis wie oben in unserer händischen Rechnung. Die Hundeflöhe springen im Mittel `r round(mean(y),2)` cm weit.

Der Mittelwert ist eine bedeutende Maßzahl der Normalverteilung. Daher merken wir uns hier schon mal, dass wir den Mittelwert brauchen werden. Auch wenn wir darüber nachdenken ob sich zwei Gruppen unterscheiden, so nutzen wir hierzu den Mitelwert. Unterscheiden sich die *mittleren* Sprungweiten in \[cm\] von Hunde- und Katzenflöhen?

### Spannweite oder range

Die *Spannweite* erlaubt uns zu überprüfen was die kleinste Zahl und die größte Zahl ist. Also uns das Minimum und das Maximum einer Zahlenreihe anzuschauen. Auf den ersten Blick mag das nicht so sinnig sein, aber wenn wir uns hunderte von Beobachtungen anschauen, wollen wir wissen, ob wir nicht einen Fehler bei Eintragen der Daten gemacht haben. Wir wissen eigentlich, dass z.B keine negativen Zuwachsraten auftreten können.

[Die Spannweite dient dazu in einem Datensatz zu übersprüfen ob die **Spalte**, oder auch **Variable** genannt, den richtigen Zahlenraum aufweist. Das machen wir durch die Funktion `range()`.]{.aside}

$$
y_{range} = y_{max} - y_{min} = 12.1 - 4.9 = 7.2
$$ Die Hundeflöhe springen in einer Spannweite von 7.2 cm. Das kommt einem *normal* vor. Die Spannweite ist nicht übertrieben groß. Der minimale Wert ist 4.9 und der maximale Wert it 12.1 und somit sind beide Zahlen in Ordnung. Keine der beiden Zahlen ist übertrieben groß oder gar negativ.

In R können wir die Spannweite mit `range()` wie folgt berechnen. Wir erhalten den minmialen udn maximalen Wert.

```{r }
range(y) 
```

Wir merken uns, dass die Spannweite eine Maßzahl für die Validität der Daten ist. Hat das Experiment geklappt oder kamen da nur komische Zahlen bei raus, die wir so in der Realität nicht erwarten würden. Zum Beispiel negative Sprungweiten, weil wir einmalauf das Minuszeichen gekommen sind.

### Varianz

Bis jetzt können wirmit dem Mittelwert $\bar{y}$ die Lage oder den Mittelpunkt unserer Zahlenreihe beschreiben. Uns fehlt damit aber die Information über die Streuung der Zahlen. Sind die Zahlen alle eher gleich oder sehr verschieden? Liegen die Zahlen daher alle bei dem Mittelwert oder sind die Zahlen weit um den Mittelwert gestreut.

Die Streuung der Zahlen um den Mittelwert beschreibt die Varianz oder auch $s^2$. Wir berechnen die Varianz indem wir von jeder Zahl den Mittelwert aller Zahlen abziehen und dann das Ergebnis quadrieren. Das machen wir für alle Zahlen und addieren dann die Summe auf. Wir erhalten die *Quadratsumme* von $y$.

[**Abweichungsquadrate** sind ein wichtiges Konzept in der Statistik. Wenn wir wissen wollen, wie groß eine Abweichung von einer Zahl zu einer anderen ist, dann nutzen wir immer das Quadrat der Abweichung und bilden die Quadratsumme..]{.aside}

$$
s^2 = \sum_{i=1}^n\cfrac{(y_i - \bar{y})^2}{n-1} = \cfrac{(5.7 -
8.13)^2 + ... + (7.6 - 8.13)^2}{7-1} = 4.6
$$

Die Varianz berschreibt also die Streuung der Zahlen *im Quadrat* um den Mittelwert. Das heißt in unserem Beispiel, dass die Sprungweite eine Varianz von 4.6 cm$^2$ hat. Wir können Quadratzentimeter schlecht interpretieren. Deshalb führen wir gleich die Wuzel der Varianz ein: die Standardabweichung.

In R lässt sich die Varianz einfach durch die Funktion `var()` berechnen.

```{r }
y %>% var %>% round(2) 
```

Wir benötigen die Varianz häufig nur als Zwischenschritt um die Standardabweichung zu berechnen. Das Konzept der Abweichungsquadrate benötigen wir aber in der Varianzanalyse (ANOVA) und für die Beschreibung einer Normalverteilung.

### Standardabweichung

Die *Standardabweichugn* ist die Wurzel der Varianz. Wo die Varianz die Abweichung der Sprungweite in \[cm$^2$\] beschreibt, beschreibt die Standardabweichung die Streung der Sprungweite in \[cm\].

$$
s = \sqrt{s^2} = \sqrt{4.6} = 2.14
$$ [Wir schreiben immer den Mittelwert plusminus die Standardabweichung. Also immer $\bar{y} \pm s$.]{.aside}

Wir können also schreiben, dass die Flöhe im Mittel 8.13 $\pm$ 2.14cm weit springen. Somit haben wir die Lage und die Streuung der Zahlenreihe $y$ der Sprungweite in \[cm\] mit zwei Zahlen beschrieben.

In R können wir die Standardabweichung einfach mit der Funktion `sd()` berechnen.

```{r }
y %>% sd %>% round(2) 
```

### Standardfehler oder Standard Error (SE)

$$
SE = \cfrac{s}{\sqrt{n}} = \cfrac{2.58}{2.65} = 0.97
$$

```{r }
se <- sd(y)/sqrt(length(y))
se %>% round(2)
```

| Standardabweichung                                                           | Standardfehler                                                               |
|------------------------------------------------------------------------------|------------------------------------------------------------------------------|
| ... ist eine Aussage über die Streuung der erhobenen Werte einer Stichprobe. | ... ist eine Aussage über die Genauigkeit des Mittelwertes einer Stichprobe. |
| ... hängt von der biologischen Variabilität ab.                              | ... abhängig von der Messgenauigkeit                                         |
| ... ist ein beschreibendes Maß.                                              | ... ist ein statistisches Maß.                                               |
| ... ist nur wenig durch die Größe der Stichprobe beineinflussbar.            | ... steht im direkten Verhältnis zur Größe der Stichprobe.                   |

: test

### Mittelwert und Varianz - eine Herleitung

![kjasdsaddssd](images/mean-drawn.png){#fig-mean-drawn fig-align="center" width="100%"}

@fig-mean-drawn

| Grundgesamtheit                                           | Stichprobe                                           |
|-----------------------------------------------------------|------------------------------------------------------|
| ... $n$ ist unendlich groß.                               | ... $n$ ist klein.                                   |
| ... der Mittelwert wird mit $\mu_y$ beschrieben.          | ... der Mittelwert wird mit $\bar{y}$ beschrieben.   |
| ... die Varianz wird mit $\sigma^2$ beschrieben.          | ... die Varianz wird mit $s^2$ beschrieben.          |
| ... die Standardabweichung wird mit $\sigma$ beschrieben. | ... die Standardabweichung wird mit $s$ beschrieben. |

: tethhkkhdskha

### Median

$$
4.9,  5.2,  5.6,  \underbrace{7.4,}_{Median}  8.2,  9.1, 12.1
$$

```{r }
median(y) 
```

### Quartile

$$
4.9,  \underbrace{5.2,}_{1st\ Quartile}  5.6,  7.4,  8.2,  9.1, 12.1
$$

$$
4.9,  5.2,  5.6,  7.4,  8.2,  \underbrace{9.1,}_{3rd\ Quartile} 12.1
$$

```{r }
quantile(y, probs = c(0.25, 0.5, 0.75)) 
```

Warum unterscheiden sich die händisch berechneten Quartile von den Quartilen aus R? Es gibt verschiedene Arten der Berechnung. In der Klausur nutzen wir die Art und Weise wie die händische Berechnung hier beschrieben ist. Später in der Anwendung nehmen wir die Werte, die R ausgibt. Die Abweichungen sind so maginal, dass wir diese Abweichungen in der praktischen Anwendung ignorieren wollen.

### Interquartilesabstand (IQR)

$$
IQR = \mbox{3rd Quartile} - \mbox{1st Quartile} = 9.1 - 5.2 = 3.9
$$

## Zusammenfassen von Daten per Faktor

```{r }
data_tbl %>%
  gather(key = "animal", value = "jump_length") %>%
  mutate(animal = as_factor(animal)) %>%
  group_by(animal) %>%
  summarise(mean(jump_length),
            sd(jump_length))


```
