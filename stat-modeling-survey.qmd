```{r echo = FALSE}
pacman::p_load(tidyverse, readxl, knitr, kableExtra, see)
```

# Fragebogenanalyse {#sec-modeling-survey}

*Letzte Änderung am `r format(fs::file_info("stat-modeling-survey.qmd")$modification_time, '%d. %B %Y um %H:%M:%S')`*

> *"It’s always further than it looks. It’s always taller than it looks. And it’s always harder than it looks." --- The Three Rules of Mountaineering [@story2019survey]*

------------------------------------------------------------------------

![](images/caution.png){fig-align="center" width="50%"}

**Dieses Kapitel ist eine Baustelle und wird es vermutlich auch über das Sommersemester 2024 bleiben. Aktuell weiß ich nämlich noch nicht, wo ich mit dem Kapitel hin will und wo es stehen sollte. Daher können Teile des Codes und des Textes kurzfristig keinen Sinn ergeben oder nicht funktional sein. Es ist geplant eine fertige Version im Juni 2024 vorliegen zu haben.**

------------------------------------------------------------------------

Der Fragebogen. Ein kompliziertes Stück Statistik. Zum einen ist es die Auswertung der Fragebögen, die auf verschiedenen Methoden basiert. Viele der Methoden habe ich in den vorherigen Kapiteln vorgestellt. Zum anderen können wir hier auch das Design eines Fragebogens nicht unberücksichtigt lassen. Denn ein schlechter Fragebogen wird uns auch nur schlechte Erkenntnisse bringen. Dank der heutigen Technik ist ja ein Online-Query schnell erstellt. Der Fragebogen muss dann aber dennoch die Forschungsfragen beantworten können. Da fängt dann der komplizierte Teil an sich zu Überlegen, was mache ich jetzt eigentlich mit den ganzen Fragen und möglichen Antworten. Wir auch in anderen Kapiteln bin ich kein Experte für die Erstellung eines Fragebogens geschweige denn der Durchführung der Befragung in einem entsprechenden Labor. Dafür gibt es dann andere Experten, wie im folgenden Kasten für die Angehörigen der Hochschule Osnabrück. Sicherlich gibt es an deiner Einrichtung auch die entsprechenden Stellen. Hier soll es wie immer um einen ersten Überblick über verschiedene Themen und Herausforderungen der Fragebogenanalyse gehen.

::: callout-note
## Beratung für Agrarmarketing & Fragebogenerstellung

Ich bin kein Experte für die Untiefen der Fragebogenerstellung an der Hochschule Osnabrück. Hier empfehle ich auf jeden Fall nochmal eine Beratung im Team von [Prof. Dr. Ulrich Enneking](https://www.hs-osnabrueck.de/prof-dr-ulrich-enneking). Hier in diesem Kapitel kannst du dann die Einführung lesen.
:::

!["The reason to avois pie charts" Quelle: wumo.com](images/eda/cake_chart.jpg){#fig-wumo-pie fig-align="center" width="100%"}

@watson1998primer mit [A primer in survey research](https://web.archive.org/web/20170809134002id_/http://www.appstate.edu/~steelekm/classes/psy3100/Documents/PrimerOnSurveys.pdf)

Anzahl an Teilnehmer:innen

::: callout-tip
## Weitere Tutorien für die Fragebogenanalyse

Wir immer geht natürlich mehr als ich hier Vorstellen kann. Du findest im Folgenden Tutorien, die mich hier in dem Kapitel inspiriert haben.

-   [Survey analysis in R](https://r-survey.r-forge.r-project.org/survey/)
-   [Analyzing Complex Survey Data](https://www.bookdown.org/rwnahhas/RMPH/survey.html)
-   [Questionnaires and Surveys: Analyses with R](https://ladal.edu.au/surveys.html#1_Introduction)
-   [The Epidemiologist R Handbook \| Survey analysis](https://epirhandbook.com/en/survey-analysis.html)
-   [Analyzing Survey Data in R](https://rpubs.com/Onduma/surveydata)
-   Vignette des [R Pakets `{survey}`](https://cran.r-project.org/web/packages/survey/)
-   [Using R for Social Work Research \| Survey Research](https://bookdown.org/bean_jerry/using_r_for_social_work_research/survey-research.html)
-   [5 Ways to Effectively Visualize Survey Data Using R](https://towardsdatascience.com/5-ways-to-effectively-visualize-survey-data-using-r-89928bf08cb2)
:::

## Durchführung

### Wie fang ich's an? {.unnumbered}

@story2019survey [Survey Research](https://pubs.asahq.org/anesthesiology/article/130/2/192/20077/Survey-Research)

@gaur2020reporting [Reporting Survey Based Studies – a Primer for Authors](https://pdfs.semanticscholar.org/4404/87dddb44e19046d2481df661d0352176a002.pdf)

@synodinos2003art

@bruhlmann2020quality mit [The quality of data collected online: An investigation of careless responding in a crowdsourced sample](https://www.sciencedirect.com/science/article/pii/S2590260120300096)

### Wie lang soll es sein? {.unnumbered}

@rolstad2011response [Response Burden and Questionnaire Length: Is Shorter Better? A Review and Meta-analysis](https://www.sciencedirect.com/science/article/pii/S1098301511015245)

@roszkowski1990believe mit [Believe it or not! Longer questionnaires have lower response rates](https://www.researchgate.net/profile/Michael-Roszkowski/publication/225240332_Believe_It_or_Not_Longer_Questionnaires_Have_Lower_Response_Rates/links/0c96051d1ffb9a443c000000/Believe-It-or-Not-Longer-Questionnaires-Have-Lower-Response-Rates.pdf)

### Wie soll ich's bauen? {.unnumbered}

[The 4,5, and 7 Point Likert Scale](https://www.formpl.us/blog/point-likert-scale)

[Survey Response Scales: How to Choose the Right One for your Questionnaire](https://cxl.com/blog/survey-response-scales/)

@friedman1999rating mit [Ratung the rating scales](https://rangevoting.org/RateRatingScales.html)

### Wieviele antworten mir? {.unnumbered}

@edwards2009methods [Methods to increase response to postal and electronic questionnaires](https://www.cochranelibrary.com/cdsr/doi/10.1002/14651858.MR000008.pub4/abstract)

@edwards2002increasing [Increasing response rates to postal questionnaires: systematic review](https://www.bmj.com/content/324/7347/1183.full.pdf+html)

## Genutzte R Pakete

Wir wollen folgende R Pakete in diesem Kapitel nutzen.

```{r echo = TRUE}
#| message: false
pacman::p_load(tidyverse, gtsummary, janitor, FactoMineR,
               factoextra, conflicted)
```

Am Ende des Kapitels findest du nochmal den gesamten R Code in einem Rutsch zum selber durchführen oder aber kopieren.

## Daten

Der Druck im Markt auf Bauernhöfe ist groß. Neben den bekannten Erlebnishöfen muss sich in den Weiten Brandenburgs, Niedersachsens und Mecklenburg-Vorpommern jeder Hof was einfallen lassen um Gäste zu sich zu locken. Heutzutage reicht es einfach nicht mehr Rentnern auf Elektrofahrrädern überdimensionierte Sahnetorten anzubieten. Die Enkel wollen auch was sehen. Inspiriert von der Serie [Tiger King: Großkatzen und ihre Raubtiere](https://en.wikipedia.org/wiki/Tiger_King) gibt es nun immer mehr Höfe, dich sich den einen oder anderen Tiger oder Großkatze in den Hinterhof sperren. Aufgeschreckt durch den Zwischenfall mit der [Löwin von Kleinmachnow - oder wie eine Wildsau durchs Dorf getrieben wurde](https://www.rbb24.de/panorama/beitrag/2023/07/brandenburg-kleinmachnow-suche-loewin-raubkatze-wildschwein-polizei-video.html), gab der Verband "Erlebnishöfe mit Niveau e.V." eine Umfrage mit dem Titel *Nutzung von Großkatzen zur Steigerung der Attraktivität von Erlebnishöfen* unter den Mitgliedern in Auftrag. Gleichzeitig sollte auch die Zufriedenheit der Verbandsarbeit abgefragt werden und wie die betriebswirtschaftliche Struktur der 843 Betriebe um die Erlebnishöfe im Verband eigentlich so aussieht.

```{r}
tiger_tbl <- read_excel("data/survey-serengeti-tiger-king.xlsx", na = "NA") |>
  mutate(across(everything(), as_factor))
```

In der @tbl-survey-tiger sehen wir einen Auszug aus unseren Ergebnis der Umfrage. Wir haben insgesamt `r ncol(tiger_tbl)` Fragen gestellt und eine Rücklauf von 173 Fragebögen von den Erlebnishöfen erhalten. Das ist eigentlich gar nicht so schlecht, damit haben wir hier eine Rücklaufquote von gut $20.5\%$ der Fragebögen.

```{r}
#| echo: false
#| message: false
#| warning: false
#| label: tbl-survey-tiger
#| tbl-cap: "Auszug von fünf Fragen aus dem Fragebogen zur Nutzung von Großkatzen zur Steigerung der Attraktivität von Erlebnishöfen. Insgesamt haben 173 Erlebnishöfe den Fragebogen zurückgesendet."


tiger_raw_tbl <- tiger_tbl |> 
  mutate_all(as.character) |> 
  select("geschlecht",	"alter",	"haben_Sie_tiger",	"f1Soziodemografisch_erwerb",	"f2Soziodemografisch_nebenerwerb")
  

rbind(head(tiger_raw_tbl, 4),
      rep("...", times = ncol(tiger_raw_tbl)),
      tail(tiger_raw_tbl, 4)) |> 
  kable(align = "c", "pipe")

```

Gummibärchendaten?

## Daten preprocessing

Wenn wir uns mit Fragebögen beschäftigen, dann werten wir meisten *nicht* alle Fragen aus. Das macht auch meistens keinen Sinn. Denn wir stellen zwar recht viele Fragen, aber am Ende müssen wir auch schauen, ob alle Fragen sinnvoll beantwortet wurden oder aber ob wir sehr viele Nichtantworten haben. Davon hängt dann auch die weitere Analyse ab. Wir können uns auch überlegen einzelne Fragen zusammenzufassen, da wir feststellen, dass wir dann am Ende doch nicht so eine feingliedrige Aufteilung wollen.

### Flowchart oder Flussdiagramm

[Building a flowchart](https://cran.r-project.org/web/packages/Gmisc/vignettes/Grid-based_flowcharts.html)

[Data-driven flowcharts in R using DiagrammeR](https://mikeyharper.uk/flowcharts-in-r-using-diagrammer/)

[Introducing `{ggflowchart}`](https://nrennie.rbind.io/blog/introducing-ggflowchart/)

::: callout-caution
## Argh, warum alles in R?

Ist ein guter Punkt. Du musst natürlich deine Flowchart nicht in R bauen. Wahrscheinlich geht es in PowerPoint sogar schneller und einfacher. Da ich hier aber alles in R mache und dir nicht aufschreiben kann, wie es dann in PowerPoint geht, zeige ich hier auch die R Variante. Suche dir einfach aus was für dich besser passt. Ich löse gerne meine Probleme in R.
:::

### Univariater Überblick

[R Paket `{gtsummary}`](https://www.danieldsjoberg.com/gtsummary/articles/tbl_summary.html)

```{r}
#| echo: true
#| eval: false
#| message: false
#| warning: false
tiger_tbl |> 
  tbl_summary()
```

Ich habe dir jetzt die Ausgabe der Funktion `tbl_summary()` einmal in dem folgenden Kasten eingeklappt. Sonst sehen wir vor lauter Tabelle nichts mehr und so kannst du hier übersichtlich lesen.

Nach was wollen wir nun als erstes einmal Ausschau halten?

Fehlende Werte

:   Gibt es eine Frage, bei der fast keiner geantwortet hat?

Gleiche Einträge

:   Gibt es Fragen, bei denen alle das Gleiche geantwortet haben?

::: {.callout-note collapse="true"}
## Univariate Ausgabe der Funktion `tbl_summary()`

```{r}
#| echo: false
#| message: false
#| warning: false
#| label: tbl-survey-tiger-summary
#| tbl-cap: "Auszug von fünf Fragen aus dem Fragebogen zur Nutzung von Großkatzen zur Steigerung der Attraktivität von Erlebnishöfen. Insgesamt haben 173 Erlebnishöfe den Fragebogen zurückgesendet."
tiger_tbl |> 
  tbl_summary()
```
:::

::: {.callout-note collapse="true"}
## Vergleichende Ausgabe der Funktion `tbl_summary()` für Tigerbesitz

```{r}
#| echo: false
#| message: false
#| warning: false
#| label: tbl-survey-tiger-summary_by
#| tbl-cap: "Auszug von fünf Fragen aus dem Fragebogen zur Nutzung von Großkatzen zur Steigerung der Attraktivität von Erlebnishöfen. Insgesamt haben 173 Erlebnishöfe den Fragebogen zurückgesendet."
tiger_tbl |> 
  tbl_summary(by = haben_Sie_tiger) |> 
  add_p()
```
:::

### Zusammenfassen

#### ...von einzelnen Fragen {.unnumbered}

```{r}
feed_tbl <- tiger_tbl |>
  select(matches("Fuetterung")) |> 
  mutate(across(matches("Fuetterung"), \(x) as.numeric(x)-1)) |> 
  mutate(sum_feeding = rowSums(across(matches("Fuetterung"))))
feed_tbl |> 
  select(sum_feeding, everything())
```

```{r}
feed_tbl |> 
  tabyl(sum_feeding) |> 
  round(2)
```

Mit der R Funktion [`case_when()`](https://dplyr.tidyverse.org/reference/case_when.html) können wir uns jetzt neue Werte bauen.

#### ... von Antwortenmöglichkeiten {.unnumbered}

### Repräsentativer Teilnehmer

## Hauptkomponentenanalyse

```{r}
tiger_pca_tbl <- tiger_tbl |> 
  mutate_all(as.factor) |> 
  mutate_all(as.numeric)
```

```{r}
pca_tiger <- PCA(tiger_pca_tbl, scale.unit = TRUE, 
                   ncp = 5, graph = FALSE)
```

```{r}
#| warning: false
#| message: false
#| label: fig-survey-pca-1
#| fig-align: center
#| fig-height: 7
#| fig-width: 7
#| fig-cap: "."
fviz_pca_var(pca_tiger, col.var = "cos2",
             gradient.cols = c("#00AFBB", "#E7B800", "#FC4E07"), 
             repel = TRUE)
```

```{r}
#| warning: false
#| message: false
#| label: fig-survey-pca-2
#| fig-align: center
#| fig-height: 7
#| fig-width: 7
#| fig-cap: "."
fviz_pca_ind(pca_tiger,
             col.ind = "cos2", 
             gradient.cols = c("#00AFBB", "#E7B800", "#FC4E07"),
             repel = TRUE) +
  scale_x_continuous(expand = expansion(add = c(0.5, 1))) +
  scale_y_continuous(expand = expansion(add = c(0.5, 0.5))) 
```

```{r}
ind_tiger <- get_pca_ind(pca_tiger)
grp_tiger_ind <- kmeans(ind_tiger$coord, centers = 3, nstart = 25) %>% 
  pluck("cluster") %>% 
  as_factor()
```

```{r}
#| warning: false
#| message: false
#| label: fig-survey-pca-3
#| fig-align: center
#| fig-height: 7
#| fig-width: 7
#| fig-cap: "."
fviz_pca_ind(pca_tiger,
             geom.ind = "point", 
             col.ind = grp_tiger_ind, 
             palette = c("#F0E442", "#0072B2", "#D55E00", "#CC79A7"),
             addEllipses = TRUE, 
             legend.title = "Groups", mean.point = FALSE) +
  geom_label(aes(label = tiger_pca_tbl$haben_Sie_tiger))
```

## Lime Survey

[LifeSurvey](https://www.limesurvey.org/de)

## Referenzen {.unnumbered}
