<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="de" xml:lang="de"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="Ein Kochbuch mit Rezepten aus der Bio Data Science, Biostatistik, Biometrie und Statistik zum selber nachkochen!">

<title>20&nbsp; Transformieren von Daten – Bio Data Science</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./stat-tests-preface-theory.html" rel="next">
<link href="./eda-distribution.html" rel="prev">
<link href="./cover2024_favi.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-05fe91a66cf75bbbb8c9664867fe5124.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-05a8b96638736df272eeeeef67138371.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Keine Treffer",
    "search-matching-documents-text": "Treffer",
    "search-copy-link-title": "Link in die Suche kopieren",
    "search-hide-matches-text": "Zusätzliche Treffer verbergen",
    "search-more-match-text": "weitere Treffer in diesem Dokument",
    "search-more-matches-text": "weitere Treffer in diesem Dokument",
    "search-clear-button-title": "Zurücksetzen",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Abbrechen",
    "search-submit-button-title": "Abschicken",
    "search-label": "Suchen"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<meta property="og:title" content="20&nbsp; Transformieren von Daten – Bio Data Science">
<meta property="og:description" content="Ein Kochbuch mit Rezepten der Bio Data Science, Biostatistik, Biometrie und Statistik">
<meta property="og:image" content="https://github.com/jkruppa/jkruppa.github.io/raw/master/cover2024.png">
<meta property="og:site_name" content="Bio Data Science">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Seitenleiste umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./eda-preface.html">Explorative Datenanalyse</a></li><li class="breadcrumb-item"><a href="./eda-transform.html"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Transformieren von Daten</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Seitenleiste umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Suchen" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Bio Data Science</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/jkruppa/jkruppa.github.io/" title="Quellcode" class="quarto-navigation-tool px-1" aria-label="Quellcode"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" role="link" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=|url|">
              <i class="bi bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=|url|">
              <i class="bi bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=|url|">
              <i class="bi bi-linkedin pe-1"></i>
            LinkedIn
            </a>
          </li>
      </ul>
    </div>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Suchen"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Willkommen</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./organisation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Organisation</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./literature.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Bibliothek</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./forschungsprozess.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Forschungsprozess</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./abschlussarbeit.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Abschlussarbeit</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./example-preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Datenbeispiele</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./example-fleas-dogs-cats.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Von Flöhen auf Tieren</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./example-gummi-bears.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Von Gummibärchen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./example-complex.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Von komplexeren Daten</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./example-database.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Von Datenbanken</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./programing-preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Programmieren in R</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./programing-letters-numbers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Daten in R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./programing-basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Operatoren, Funktionen und Pakete</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./programing-import.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Daten einlesen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./programing-dplyr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Daten bearbeiten</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./programing-strings.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Reguläre Ausdrücke</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./programing-purrr-furrr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Ein <code>{purrr}</code> Cookbook</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./programing-ggplot.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Ein <code>{ggplot}</code> Cookbook</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./programing-quarto-shiny.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Quarto und Shiny App</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./eda-preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Explorative Datenanalyse</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./eda-descriptive.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Deskriptive Statistik</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./eda-ggplot.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Visualisierung von Daten</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./eda-distribution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Verteilung von Daten</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./eda-transform.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Transformieren von Daten</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./stat-tests-preface-theory.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Testen von Hypothesen</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-basic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Die Testentscheidung</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-theorie.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Die Testtheorie</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-effect.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Der Effektschätzer</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-pretest2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Der Pre-Test oder Vortest</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./experimental-design-preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Experimentelle Designs</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./experimental-design-r.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Versuchsplanung in R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./experimental-design-basic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Einfache Designs</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./experimental-design-advanced.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Fortgeschrittene Designs</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./experimental-design-samplesize.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Fallzahlplanung</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./stat-tests-preface-app.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Statistische Gruppenvergleiche</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Testen in R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-ttest.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">Der t-Test</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-anova2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">Die ANOVA</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-ancova2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">Die ANCOVA</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-anova-mixed.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">Die repeated / mixed ANOVA</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-anova-manova.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">Die MANOVA</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-utest.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">35</span>&nbsp; <span class="chapter-title">Der U-Test</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-kruskal.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">36</span>&nbsp; <span class="chapter-title">Der Kruskal-Wallis-Test</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-friedman.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">37</span>&nbsp; <span class="chapter-title">Der Friedman Test</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-chi-test.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">38</span>&nbsp; <span class="chapter-title">Der <span class="math inline">\(\mathcal{X}^2\)</span>-Test</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-anteil-test.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">39</span>&nbsp; <span class="chapter-title">Der Anteilstest</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-diagnostic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">40</span>&nbsp; <span class="chapter-title">Der diagnostische Test</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-trendtest.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">41</span>&nbsp; <span class="chapter-title">Der Trendtest</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-permutationstest.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">42</span>&nbsp; <span class="chapter-title">Der Permutationstest</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-tests-posthoc2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">43</span>&nbsp; <span class="chapter-title">Der Post-hoc Test</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./stat-linear-reg-preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Grundlagen des Modellierens</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-linear-reg-basic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">44</span>&nbsp; <span class="chapter-title">Simple lineare Regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-basic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">45</span>&nbsp; <span class="chapter-title">Multiple lineare Regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-linear-reg-quality.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">46</span>&nbsp; <span class="chapter-title">Modelgüte</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-linear-reg-corr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">47</span>&nbsp; <span class="chapter-title">Korrelation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-outlier.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">48</span>&nbsp; <span class="chapter-title">Ausreißer</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-variable-selection.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">49</span>&nbsp; <span class="chapter-title">Variablenselektion</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-missing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">50</span>&nbsp; <span class="chapter-title">Fehlende Werte</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-sensitivity.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">51</span>&nbsp; <span class="chapter-title">Sensitivitätsanalyse</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./stat-modeling-preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Statistisches Modellieren</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">52</span>&nbsp; <span class="chapter-title">Modellieren in R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-gaussian.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">53</span>&nbsp; <span class="chapter-title">Gaussian Regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-poisson.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">54</span>&nbsp; <span class="chapter-title">Poisson Regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-beta.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">55</span>&nbsp; <span class="chapter-title">Beta Regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-multinom.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">56</span>&nbsp; <span class="chapter-title">Multinomiale / Ordinale Regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-logistic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">57</span>&nbsp; <span class="chapter-title">Logistische Regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-prob-model.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">58</span>&nbsp; <span class="chapter-title">Linear Probability Model</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-mixed.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">59</span>&nbsp; <span class="chapter-title">Lineare gemischte Modelle</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-gee.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">60</span>&nbsp; <span class="chapter-title">Generalized Estimating Equations (GEE)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-non-linear.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">61</span>&nbsp; <span class="chapter-title">Nicht lineare Regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-robust-quantile.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">62</span>&nbsp; <span class="chapter-title">Robuste und Quantilesregression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-survival.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">63</span>&nbsp; <span class="chapter-title">Überlebenszeitanalysen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-noninferiority.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">64</span>&nbsp; <span class="chapter-title">Äquivalenz oder Nichtunterlegenheit</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-meta.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">65</span>&nbsp; <span class="chapter-title">Metaanalysen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-cluster.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">66</span>&nbsp; <span class="chapter-title">Clusteranalysen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-pca.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">67</span>&nbsp; <span class="chapter-title">Multivariate Verfahren</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat-modeling-survey.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">68</span>&nbsp; <span class="chapter-title">Fragebogenanalyse</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./time-space-preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Zeitliche und räumliche Analysen</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./time-space-pseudo-time-series.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">69</span>&nbsp; <span class="chapter-title">Pseudo Zeitreihen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./time-space-time-series.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">70</span>&nbsp; <span class="chapter-title">Zeitreihen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./time-space-spatial-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">71</span>&nbsp; <span class="chapter-title">Räumliche Daten</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./classification-preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Klassifikation oder maschinelles Lernen</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./classification-basic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">72</span>&nbsp; <span class="chapter-title">Grundlagen der Klassifikation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./classification-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">73</span>&nbsp; <span class="chapter-title">Data splitting</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./classification-pre-processing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">74</span>&nbsp; <span class="chapter-title">Data preprocessing</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./classification-model-compare.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">75</span>&nbsp; <span class="chapter-title">Vergleich von Algorithmen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./classification-knn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">76</span>&nbsp; <span class="chapter-title"><span class="math inline">\(k\)</span> nearest neighbor</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./classification-randomforest.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">77</span>&nbsp; <span class="chapter-title">Decision trees</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./classification-svm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">78</span>&nbsp; <span class="chapter-title">Support vector machines</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./classification-neural-networks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">79</span>&nbsp; <span class="chapter-title">Neural networks</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./abspann.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Abspann</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-11" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app-spielecke.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">80</span>&nbsp; <span class="chapter-title">Spielecke</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./construction-zone.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">81</span>&nbsp; <span class="chapter-title">Baustelle</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="2">
    <h2 id="toc-title">Inhaltsverzeichnis</h2>
   
  <ul>
  <li><a href="#allgemeiner-hintergrund" id="toc-allgemeiner-hintergrund" class="nav-link active" data-scroll-target="#allgemeiner-hintergrund"><span class="header-section-number">20.1</span> Allgemeiner Hintergrund</a></li>
  <li><a href="#genutzte-r-pakete" id="toc-genutzte-r-pakete" class="nav-link" data-scroll-target="#genutzte-r-pakete"><span class="header-section-number">20.2</span> Genutzte R Pakete</a></li>
  <li><a href="#daten" id="toc-daten" class="nav-link" data-scroll-target="#daten"><span class="header-section-number">20.3</span> Daten</a></li>
  <li><a href="#transformationen" id="toc-transformationen" class="nav-link" data-scroll-target="#transformationen"><span class="header-section-number">20.4</span> Transformationen</a>
  <ul class="collapse">
  <li><a href="#quadratwurzel" id="toc-quadratwurzel" class="nav-link" data-scroll-target="#quadratwurzel"><span class="header-section-number">20.4.1</span> Quadratwurzel</a></li>
  <li><a href="#logarithmus" id="toc-logarithmus" class="nav-link" data-scroll-target="#logarithmus"><span class="header-section-number">20.4.2</span> Logarithmus</a></li>
  <li><a href="#inverse" id="toc-inverse" class="nav-link" data-scroll-target="#inverse"><span class="header-section-number">20.4.3</span> Inverse</a></li>
  <li><a href="#inverse-normalverteilung" id="toc-inverse-normalverteilung" class="nav-link" data-scroll-target="#inverse-normalverteilung"><span class="header-section-number">20.4.4</span> Inverse Normalverteilung</a></li>
  <li><a href="#rangtransformation" id="toc-rangtransformation" class="nav-link" data-scroll-target="#rangtransformation"><span class="header-section-number">20.4.5</span> Rangtransformation</a></li>
  </ul></li>
  <li><a href="#skalierung" id="toc-skalierung" class="nav-link" data-scroll-target="#skalierung"><span class="header-section-number">20.5</span> Skalierung</a>
  <ul class="collapse">
  <li><a href="#standardisierung" id="toc-standardisierung" class="nav-link" data-scroll-target="#standardisierung"><span class="header-section-number">20.5.1</span> Standardisierung</a></li>
  <li><a href="#normalisierung" id="toc-normalisierung" class="nav-link" data-scroll-target="#normalisierung"><span class="header-section-number">20.5.2</span> Normalisierung</a></li>
  </ul></li>
  <li><a href="#automatische-transformationen" id="toc-automatische-transformationen" class="nav-link" data-scroll-target="#automatische-transformationen"><span class="header-section-number">20.6</span> Automatische Transformationen…</a>
  <ul class="collapse">
  <li><a href="#mit-bestnormalize" id="toc-mit-bestnormalize" class="nav-link" data-scroll-target="#mit-bestnormalize"><span class="header-section-number">20.6.1</span> … mit <code>{bestNormalize}</code></a></li>
  <li><a href="#mit-rcompanion" id="toc-mit-rcompanion" class="nav-link" data-scroll-target="#mit-rcompanion"><span class="header-section-number">20.6.2</span> … mit <code>{rcompanion}</code></a></li>
  <li><a href="#mit-lambertw" id="toc-mit-lambertw" class="nav-link" data-scroll-target="#mit-lambertw"><span class="header-section-number">20.6.3</span> … mit <code>{LambertW}</code></a></li>
  <li><a href="#mit-mass" id="toc-mit-mass" class="nav-link" data-scroll-target="#mit-mass"><span class="header-section-number">20.6.4</span> … mit <code>{MASS}</code></a></li>
  <li><a href="#mit-trafo" id="toc-mit-trafo" class="nav-link" data-scroll-target="#mit-trafo"><span class="header-section-number">20.6.5</span> … mit <code>{trafo}</code></a></li>
  <li><a href="#mit-dlookr" id="toc-mit-dlookr" class="nav-link" data-scroll-target="#mit-dlookr"><span class="header-section-number">20.6.6</span> … mit <code>{dlookr}</code></a></li>
  </ul></li>
  <li><a href="#referenzen" id="toc-referenzen" class="nav-link" data-scroll-target="#referenzen">Referenzen</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/jkruppa/jkruppa.github.io/edit/master/eda-transform.qmd" class="toc-action"><i class="bi bi-github"></i>Seite editieren</a></li><li><a href="https://github.com/jkruppa/jkruppa.github.io/issues/new" class="toc-action"><i class="bi empty"></i>Problem melden</a></li><li><a href="https://github.com/jkruppa/jkruppa.github.io/blob/master/eda-transform.qmd" class="toc-action"><i class="bi empty"></i>Quellcode anzeigen</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./eda-preface.html">Explorative Datenanalyse</a></li><li class="breadcrumb-item"><a href="./eda-transform.html"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Transformieren von Daten</span></a></li></ol></nav>
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title"><span id="sec-eda-transform" class="quarto-section-identifier"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Transformieren von Daten</span></span></h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Gesamten Code zeigen</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Gesamten Code verbergen</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">Quellcode anzeigen</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p><em>Letzte Änderung am 16. June 2025 um 11:00:32</em></p>
<blockquote class="blockquote">
<p><em>“It’s morphin’ time! I never get tired of that! Now, go, go Power Rangers!” — Power Rangers morphing phrase</em></p>
</blockquote>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="images/caution.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="images/caution.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></a></p>
</figure>
</div>
<div class="callout callout-style-simple callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Stand des Kapitels: Baustelle (seit 06.2025)
</div>
</div>
<div class="callout-body-container callout-body">
<p>Dieses Kapitel wird überarbeitet, da ich nochmal an den Kern der Transformation ran möchte. Daher kann es sein, dass es in den nächsten Wochen hier zu Problemen und nicht funktionierenden Code kommt. Das repariere ich dann aber meistens in den folgenden Tagen. Ziel ist es bis zum Start des WiSe 2025/26 das Kapitel neu aufgestellt zu haben.</p>
</div>
</div>
<p>text</p>
<section id="allgemeiner-hintergrund" class="level2" data-number="20.1">
<h2 data-number="20.1" class="anchored" data-anchor-id="allgemeiner-hintergrund"><span class="header-section-number">20.1</span> Allgemeiner Hintergrund</h2>
<p>Warum müssen wir Daten transformieren? Meistens hat dies drei Hauptgründe.</p>
<section id="das-modell" class="level4 unnumbered unlisted">
<h4 class="unnumbered unlisted anchored" data-anchor-id="das-modell">Das Modell</h4>
<ol type="1">
<li>Wir wollen eine ANOVA oder eine Gaussian lineare Regression rechen und benötigen ein normalverteiltes Outcome <span class="math inline">\(y\)</span>.</li>
<li>Wir wollen einen Algorithmus zur Prädiktion (deu. <em>Vorhersage</em>) nutzen und haben sehr viele Einflussvariablen <span class="math inline">\(x\)</span> in sehr unterschiedlichen Einheiten.</li>
<li>Wir wollen eine komplexere Analyse wie die Hauptkomponentenanalyse oder Clusteranalyse rechnen und brauchen Variablen, die alle eine ähnliche Spannweite haben.</li>
</ol>
<div id="fig-utest-intro" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-utest-intro-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="images/preface_transformation.jpeg" class="lightbox" data-gallery="quarto-lightbox-gallery-2" title="Abbildung&nbsp;20.1— foo. Quelle: @yang2014duration"><img src="images/preface_transformation.jpeg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-utest-intro-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;20.1— <em>foo.</em> Quelle: <span class="citation" data-cites="yang2014duration">Yang et al. (<a href="#ref-yang2014duration" role="doc-biblioref">2014</a>)</span>
</figcaption>
</figure>
</div>
<p>Im ersten Fall wollen wir meist unsere Daten <span class="math inline">\(log\)</span>-Transformieren um aus einem <em>nicht</em>-normalverteilten Outcome <span class="math inline">\(y\)</span> ein <span class="math inline">\(log\)</span>-normalverteiltes <span class="math inline">\(y\)</span> zu erschaffen. Im zweiten Fall wollen wir unsere Daten Standardisieren oder Normalisieren. Wir brauchen normalisierte Daten später beim Klassifizieren im Rahmen von maschinellen Lernverfahren. Bitte beachte auch, dass die Transformationen hier eher für kleine Datensätze geeignet sind. Im <a href="classification-pre-processing.html">Kapitel zur Klassifikation</a> gehe ich nochmal auf die Automatisierung über mehrere Variablen ein. Wenn du also einen großen Datensatz hast, den du vielleicht oft bearbeiten musst, dann mag dir dort mehr geholfen sein.</p>
<div id="tbl-tukey-ladder" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-tukey-ladder-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabelle&nbsp;20.1— test
</figcaption>
<div aria-describedby="tbl-tukey-ladder-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: center;"><span class="math inline">\(\boldsymbol{y}\)</span></th>
<th style="text-align: center;"><span class="math inline">\(\boldsymbol{\lambda}\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><span class="math inline">\(\cfrac{1}{x^2}\)</span></td>
<td style="text-align: center;"><span class="math inline">\(-2\)</span></td>
</tr>
<tr class="even">
<td style="text-align: center;"><span class="math inline">\(\cfrac{1}{x}\)</span></td>
<td style="text-align: center;"><span class="math inline">\(-1\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><span class="math inline">\(\cfrac{1}{\sqrt{x}}\)</span></td>
<td style="text-align: center;"><span class="math inline">\(-1/2\)</span></td>
</tr>
<tr class="even">
<td style="text-align: center;"><span class="math inline">\(\log{x}\)</span></td>
<td style="text-align: center;"><span class="math inline">\(0\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><span class="math inline">\(\sqrt{x}\)</span></td>
<td style="text-align: center;"><span class="math inline">\(1/2\)</span></td>
</tr>
<tr class="even">
<td style="text-align: center;"><span class="math inline">\(x\)</span></td>
<td style="text-align: center;"><span class="math inline">\(1\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><span class="math inline">\(x^2\)</span></td>
<td style="text-align: center;"><span class="math inline">\(2\)</span></td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>Ein Wort zum R Paket <code>{recipes}</code></p>
<p>Wir wollen uns nun die Verfahren zur Transformation von Daten in den folgenden Abschnitten einmal näher anschauen.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-ggplot-utest-intro-sim-02" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-ggplot-utest-intro-sim-02-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="eda-transform_files/figure-html/fig-ggplot-utest-intro-sim-02-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3" title="Abbildung&nbsp;20.2— foo. (A) br. (B) fff. [Zum Vergrößern anklicken]"><img src="eda-transform_files/figure-html/fig-ggplot-utest-intro-sim-02-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="768"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-ggplot-utest-intro-sim-02-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;20.2— foo. <strong>(A)</strong> br. <strong>(B)</strong> fff. <em>[Zum Vergrößern anklicken]</em>
</figcaption>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Weitere Tutorien für das Transformieren von Daten.
</div>
</div>
<div class="callout-body-container callout-body">
<p>Wir oben schon erwähnt, kann dieses Kapitel nicht die umfangreiche Literatur der Transformation von Daten abarbeiten. Daher präsentiere ich hier eine Liste von Literatur und Links, die mich für dieses Kapitel hier inspiriert haben. Nicht alles habe ich genutzt, aber vielleicht ist für dich was dabei.</p>
<ul>
<li>Ich verweise hier auch nochmal auf das tolle Tutorium von Matus Seci auf dem <a href="https://ourcodingclub.github.io/tutorials/data-scaling/">Coding Club - Transforming and scaling data: Understand the fundamental concepts of manipulating data distributions for modelling and visualization</a>. Du findest auch dort mehr Informationen zu der Rücktransformation und der Anwendung von Transformationen auf einen komplexeren Datensatz.</li>
<li><a href="https://onlinestatbook.com/2/transformations/contents.html">Transformations</a></li>
<li><a href="https://choonghyunryu.github.io/dlookr/articles/transformation.html#standardization-and-resolving-skewness">Data Transformation mit <code>dlookr</code></a></li>
<li><a href="https://rcompanion.org/handbook/I_12.html">Transforming Data</a></li>
</ul>
</div>
</div>
</section>
</section>
<section id="genutzte-r-pakete" class="level2" data-number="20.2">
<h2 data-number="20.2" class="anchored" data-anchor-id="genutzte-r-pakete"><span class="header-section-number">20.2</span> Genutzte R Pakete</h2>
<p>Wir wollen folgende R Pakete in diesem Kapitel nutzen.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(tidyverse, magrittr, scales, see, MASS, bestNormalize,</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>               rcompanion, LambertW, trafo, conflicted)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">conflicts_prefer</span>(MASS<span class="sc">::</span>boxcox)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">conflicts_prefer</span>(dplyr<span class="sc">::</span>select)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">conflicts_prefer</span>(dplyr<span class="sc">::</span>filter)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">conflicts_prefer</span>(parameters<span class="sc">::</span>skewness)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">conflicts_prefer</span>(parameters<span class="sc">::</span>kurtosis)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">conflicts_prefer</span>(bestNormalize<span class="sc">::</span>boxcox)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>cbbPalette <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"#000000"</span>, <span class="st">"#E69F00"</span>, <span class="st">"#56B4E9"</span>, </span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>                <span class="st">"#009E73"</span>, <span class="st">"#F0E442"</span>, <span class="st">"#F5C710"</span>, </span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>                <span class="st">"#0072B2"</span>, <span class="st">"#D55E00"</span>, <span class="st">"#CC79A7"</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Zwischenzeitlich musste ich das R Paket <code>{dlookr}</code> aus dem Code entfernt, da das Paket extra extern über GitHub installieren musstest. Das R Paket war zwischenzeitlich nicht mehr bei CRAN gelistet. Das führt bei mir zu Schluckauf im Code, so dass ich die Funktionen jetzt in einem Extraabschnitt bearbeite. Sollte das Paket sich mal nicht installieren lassen, dann gibt es hier noch einen alternativen Weg.</p>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Alternative Installation von <code>{dlookr}</code>
</div>
</div>
<div class="callout-body-container callout-body">
<p>Ist das R Paket <code>{dlookr}</code> mal nicht per Standard aus RStudio zu installieren kannst du das R Paket auch über GitHub installieren. Dafür einmal das R Paket <code>{devtools}</code> installieren und dann folgenden Code ausführen.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"choonghyunryu/dlookr"</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
<p>An der Seite des Kapitels findest du den Link <em>Quellcode anzeigen</em>, über den du Zugang zum gesamten R-Code dieses Kapitels erhältst.</p>
</section>
<section id="daten" class="level2" data-number="20.3">
<h2 data-number="20.3" class="anchored" data-anchor-id="daten"><span class="header-section-number">20.3</span> Daten</h2>
<section id="schlupfzeiten-von-flöhen" class="level4 unnumbered unlisted">
<h4 class="unnumbered unlisted anchored" data-anchor-id="schlupfzeiten-von-flöhen">Schlupfzeiten von Flöhen</h4>
<p>Wir wollen uns in diesem Kapitel mit der normalverteilten Variable <code>jump_length</code> gemessen in [cm] und der nicht-normalverteilten Variable <code>hatch_time</code> gemessen in [h] aus dem Datensatz <code>flea_dog_cat_length_weight.csv"</code> beschäftigen. Wir wählen über die Funktion <code>select()</code> nur die beiden Spalten aus dem Datensatz, die wir benötigen.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>fac1_tbl <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"data/flea_dog_cat_length_weight.xlsx"</span>) <span class="sc">|&gt;</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(animal, jump_length, weight, hatch_time) <span class="sc">|&gt;</span> </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(hatch_time <span class="sc">&lt;=</span> <span class="dv">1500</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>In der <a href="#tbl-trans-1" class="quarto-xref">Tabelle&nbsp;<span>20.2</span></a> ist der Datensatz <code>fac1_tbl</code> nochmal dargestellt. Wir zeigen hier nur die ersten sieben zeilen des Datensatzes.</p>
<div class="cell">
<div id="tbl-trans-1" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-trans-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabelle&nbsp;20.2— Selektierter Datensatz mit einer normalverteilten Variable <code>jump_length</code> und der nicht-normalverteilten Variable <code>hatch_time</code>. Wir betrachten die ersten sieben Zeilen des Datensatzes.
</figcaption>
<div aria-describedby="tbl-trans-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
 

  
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tinytable_r7zy9o7sao1we4nzgun5</title>
    <style>
    </style>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      },
      svg: {
        fontCache: 'global'
      }
    };
    </script>
  

  
    <div class="container">
      <table class="table table-striped" id="tinytable_r7zy9o7sao1we4nzgun5" style="table-layout: fixed; width: 67% !important; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col">animal</th>
                <th scope="col">jump_length</th>
                <th scope="col">hatch_time</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td>cat</td>
                  <td>15.79</td>
                  <td>483.6 </td>
                </tr>
                <tr>
                  <td>cat</td>
                  <td>18.33</td>
                  <td>82.56 </td>
                </tr>
                <tr>
                  <td>cat</td>
                  <td>17.58</td>
                  <td>296.73</td>
                </tr>
                <tr>
                  <td>...</td>
                  <td>...  </td>
                  <td>...   </td>
                </tr>
                <tr>
                  <td>fox</td>
                  <td>24.35</td>
                  <td>182.68</td>
                </tr>
                <tr>
                  <td>fox</td>
                  <td>24.36</td>
                  <td>104.89</td>
                </tr>
                <tr>
                  <td>fox</td>
                  <td>22.13</td>
                  <td>62.99 </td>
                </tr>
        </tbody>
      </table>
    </div>

    <script>
      function styleCell_tinytable_yjdw0y2p71gb2fzlfvkm(i, j, css_id) {
        var table = document.getElementById("tinytable_r7zy9o7sao1we4nzgun5");
        table.rows[i].cells[j].classList.add(css_id);
      }
      function insertSpanRow(i, colspan, content) {
        var table = document.getElementById('tinytable_r7zy9o7sao1we4nzgun5');
        var newRow = table.insertRow(i);
        var newCell = newRow.insertCell(0);
        newCell.setAttribute("colspan", colspan);
        // newCell.innerText = content;
        // this may be unsafe, but innerText does not interpret <br>
        newCell.innerHTML = content;
      }
      function spanCell_tinytable_yjdw0y2p71gb2fzlfvkm(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_r7zy9o7sao1we4nzgun5");
        const targetRow = table.rows[i];
        const targetCell = targetRow.cells[j];
        for (let r = 0; r < rowspan; r++) {
          // Only start deleting cells to the right for the first row (r == 0)
          if (r === 0) {
            // Delete cells to the right of the target cell in the first row
            for (let c = colspan - 1; c > 0; c--) {
              if (table.rows[i + r].cells[j + c]) {
                table.rows[i + r].deleteCell(j + c);
              }
            }
          }
          // For rows below the first, delete starting from the target column
          if (r > 0) {
            for (let c = colspan - 1; c >= 0; c--) {
              if (table.rows[i + r] && table.rows[i + r].cells[j]) {
                table.rows[i + r].deleteCell(j);
              }
            }
          }
        }
        // Set rowspan and colspan of the target cell
        targetCell.rowSpan = rowspan;
        targetCell.colSpan = colspan;
      }

    </script>

  


</div>
</div>
</figure>
</div>
</div>
<div>

</div>
<div class="cell quarto-layout-panel" data-layout-align="center" data-layout-nrow="1">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 100.0%;justify-content: center;">
<div id="fig-data-intro" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-data-intro-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="eda-transform_files/figure-html/fig-data-intro-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4" title="Abbildung&nbsp;20.3— foo. [Zum Vergrößern anklicken]"><img src="eda-transform_files/figure-html/fig-data-intro-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="768"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-data-intro-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;20.3— foo. <em>[Zum Vergrößern anklicken]</em>
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<p>Im Folgenden nutzen wir oft die Funktion <code>mutate()</code>. Schau dir im Zweifel nochmal im Kapitel zu Programmierung die Funktion <code>mutate()</code> an.</p>
</section>
<section id="das-alter-von-tieren" class="level4 unnumbered unlisted">
<h4 class="unnumbered unlisted anchored" data-anchor-id="das-alter-von-tieren">Das Alter von Tieren</h4>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>anage_tbl <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="st">"data/anage_data.txt"</span>, <span class="at">delim =</span> <span class="st">"</span><span class="sc">\t</span><span class="st">"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">name =</span> <span class="st">"Common name"</span>, <span class="at">weight =</span> <span class="st">"Adult weight (g)"</span>, </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">age =</span> <span class="st">"Maximum longevity (yrs)"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">weight =</span> weight<span class="sc">/</span><span class="dv">1000</span>) <span class="sc">|&gt;</span> </span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() </span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<div id="tbl-trans-weight-age" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-trans-weight-age-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabelle&nbsp;20.3— foo
</figcaption>
<div aria-describedby="tbl-trans-weight-age-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
 

  
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tinytable_nd5ql135jio4l8vkn0ml</title>
    <style>
    </style>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      },
      svg: {
        fontCache: 'global'
      }
    };
    </script>
  

  
    <div class="container">
      <table class="table table-striped" id="tinytable_nd5ql135jio4l8vkn0ml" style="table-layout: fixed; width: 67% !important; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col">Common name</th>
                <th scope="col">Adult weight (g)</th>
                <th scope="col">Maximum longevity (yrs)</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td>American toad     </td>
                  <td>21.7667</td>
                  <td>36  </td>
                </tr>
                <tr>
                  <td>Southern toad     </td>
                  <td>19.267 </td>
                  <td>10  </td>
                </tr>
                <tr>
                  <td>Cane toad         </td>
                  <td>106.25 </td>
                  <td>24.8</td>
                </tr>
                <tr>
                  <td>...               </td>
                  <td>...    </td>
                  <td>... </td>
                </tr>
                <tr>
                  <td>Spiky oreo        </td>
                  <td>1100   </td>
                  <td>100 </td>
                </tr>
                <tr>
                  <td>Smooth oreo       </td>
                  <td>2750   </td>
                  <td>100 </td>
                </tr>
                <tr>
                  <td>European john dory</td>
                  <td>4400   </td>
                  <td>12  </td>
                </tr>
        </tbody>
      </table>
    </div>

    <script>
      function styleCell_tinytable_4ikxkwt15xnoihqe3muh(i, j, css_id) {
        var table = document.getElementById("tinytable_nd5ql135jio4l8vkn0ml");
        table.rows[i].cells[j].classList.add(css_id);
      }
      function insertSpanRow(i, colspan, content) {
        var table = document.getElementById('tinytable_nd5ql135jio4l8vkn0ml');
        var newRow = table.insertRow(i);
        var newCell = newRow.insertCell(0);
        newCell.setAttribute("colspan", colspan);
        // newCell.innerText = content;
        // this may be unsafe, but innerText does not interpret <br>
        newCell.innerHTML = content;
      }
      function spanCell_tinytable_4ikxkwt15xnoihqe3muh(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_nd5ql135jio4l8vkn0ml");
        const targetRow = table.rows[i];
        const targetCell = targetRow.cells[j];
        for (let r = 0; r < rowspan; r++) {
          // Only start deleting cells to the right for the first row (r == 0)
          if (r === 0) {
            // Delete cells to the right of the target cell in the first row
            for (let c = colspan - 1; c > 0; c--) {
              if (table.rows[i + r].cells[j + c]) {
                table.rows[i + r].deleteCell(j + c);
              }
            }
          }
          // For rows below the first, delete starting from the target column
          if (r > 0) {
            for (let c = colspan - 1; c >= 0; c--) {
              if (table.rows[i + r] && table.rows[i + r].cells[j]) {
                table.rows[i + r].deleteCell(j);
              }
            }
          }
        }
        // Set rowspan and colspan of the target cell
        targetCell.rowSpan = rowspan;
        targetCell.colSpan = colspan;
      }

    </script>

  


</div>
</div>
</figure>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-ggplot-weight-age" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-ggplot-weight-age-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="eda-transform_files/figure-html/fig-ggplot-weight-age-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5" title="Abbildung&nbsp;20.4— foo. (A) br. (B) fff. [Zum Vergrößern anklicken]"><img src="eda-transform_files/figure-html/fig-ggplot-weight-age-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="768"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-ggplot-weight-age-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;20.4— foo. <strong>(A)</strong> br. <strong>(B)</strong> fff. <em>[Zum Vergrößern anklicken]</em>
</figcaption>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="transformationen" class="level2" data-number="20.4">
<h2 data-number="20.4" class="anchored" data-anchor-id="transformationen"><span class="header-section-number">20.4</span> Transformationen</h2>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-pretest-rank" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-pretest-rank-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="eda-transform_files/figure-html/fig-pretest-rank-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-6" title="Abbildung&nbsp;20.5— Zusammenhang vom Mittelwert, Median und dem Modus zur Feststellung einer Normalverteilung. Der Modus ist hierbei der häufigste Wert. (A) Linksschiefe Verteilung. Der Modus ist größer als der Median ist größer als der Mittelwert. (B) Symmetrische Normalverteilung. Der Mittelwert und Median sowie Modus sind gleich. (C) Rechtsschiefe Verteilung der Mittelwert ist größer als der Median ist größer als der Modus. [Zum Vergrößern anklicken]"><img src="eda-transform_files/figure-html/fig-pretest-rank-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="768"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-pretest-rank-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;20.5— Zusammenhang vom Mittelwert, Median und dem Modus zur Feststellung einer Normalverteilung. Der Modus ist hierbei der häufigste Wert. <strong>(A)</strong> Linksschiefe Verteilung. Der Modus ist größer als der Median ist größer als der Mittelwert. <strong>(B)</strong> Symmetrische Normalverteilung. Der Mittelwert und Median sowie Modus sind gleich. <strong>(C)</strong> Rechtsschiefe Verteilung der Mittelwert ist größer als der Median ist größer als der Modus. <em>[Zum Vergrößern anklicken]</em>
</figcaption>
</figure>
</div>
</div>
</div>
<p>Quadratwurzel moderat schiefe Messwerte:</p>
<ul>
<li><code>sqrt(y)</code> für positiv, schiefe Messwerte</li>
<li><code>sqrt(max(y+1) - y)</code> für negative, schiefe Messwerte</li>
</ul>
<p>Logarithmus für starke schiefe Messwerte:</p>
<ul>
<li><code>log10(y)</code> für positiv, schiefe Messwerte</li>
<li><code>log10(max(y+1) - y)</code> für negative, schiefe Messwerte</li>
</ul>
<p>Die Inverse für extrem, schiefe Messwerte:</p>
<ul>
<li><code>1/y</code> für positiv, schiefe Messwerte</li>
<li><code>1/(max(y+1) - y)</code> für negative, schiefe Messwerte</li>
</ul>
<p>Die Transformation mit Rängen <code>rank()</code></p>
<p>Schnelle Übersicht…</p>
<section id="quadratwurzel" class="level3" data-number="20.4.1">
<h3 data-number="20.4.1" class="anchored" data-anchor-id="quadratwurzel"><span class="header-section-number">20.4.1</span> Quadratwurzel</h3>
<p>Die Quadratwurzel-Transformationen ist eine etwas seltenere Transformation. Meist wird die Quadratwurzel-Transformationen als die schwächere <span class="math inline">\(log\)</span>-Transformation bezeichnet. Wir sehen in <span class="quarto-unresolved-ref">?fig-log-scale-2-2</span> den Grund dafür. Aber zuerst müssen wir aber über die Funktion <code>sqrt()</code> unsere Daten transformieren. Wir können auch die Funktion <code>transform()</code> aus dem R Paket <code>{dlookr}</code> verwenden und haben eine große Auswahl an möglichen Transformationen. Einfach mal die Hilfeseite von <code>transform()</code> aufrufen und nachschauen.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>sqrt_tbl <span class="ot">&lt;-</span> fac1_tbl <span class="sc">|&gt;</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sqrt_hatch_time =</span> <span class="fu">sqrt</span>(hatch_time))</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>In der folgenden Abbildung sehen wir die nicht transformierte, rohe Daten sowie die transformierten Daten mit der Quadratwurzel. Es gibt einen klaren Peak Schlüpfzeiten am Anfang. Dann läuft die Verteilung langsam nach rechts aus. Wir können nicht annehmen, dass die Schlüpfzeiten normalverteilt sind. Unser Ziel besser normalverteilte Daten vorliegen zu haben, haben wir aber mit der Quadratwurzel-Transformationen nicht erreicht. Die Daten sind immer noch rechtsschief.</p>
<div>

</div>
<div class="cell quarto-layout-panel" data-layout-align="center" data-layout-nrow="1">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 100.0%;justify-content: center;">
<div id="fig-trans-sqrt" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-trans-sqrt-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="eda-transform_files/figure-html/fig-trans-sqrt-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-7" title="Abbildung&nbsp;20.6— Histogramm der nicht transfomierten und transformierten Daten. (A) Nicht transformierte, rohe Daten. (B) sqrt-transformierte Daten. [Zum Vergrößern anklicken]"><img src="eda-transform_files/figure-html/fig-trans-sqrt-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="768"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-trans-sqrt-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;20.6— Histogramm der nicht transfomierten und transformierten Daten. <strong>(A)</strong> Nicht transformierte, rohe Daten. <strong>(B)</strong> <span class="math inline">\(sqrt\)</span>-transformierte Daten. <em>[Zum Vergrößern anklicken]</em>
</figcaption>
</figure>
</div>
</div>
</div>
</div>
</section>
<section id="logarithmus" class="level3" data-number="20.4.2">
<h3 data-number="20.4.2" class="anchored" data-anchor-id="logarithmus"><span class="header-section-number">20.4.2</span> Logarithmus</h3>
<p>Wir nutzen die <span class="math inline">\(log\)</span>-Transformation, wenn wir aus einem nicht-normalverteiltem Outcome <span class="math inline">\(y\)</span> ein approxomativ normalverteiltes Outcome <span class="math inline">\(y\)</span> machen wollen. Dabei ist wichtig, dass wir natürlich auch die Einheit mit <span class="math inline">\(log\)</span>-transformieren.</p>
<p>Im Folgenden sehen wir die <span class="math inline">\(log\)</span>-Transformation der Variable <code>hatch_time</code> mit der Funktion <code>log()</code>. Wir erschaffen eine neue Spalte im <code>tibble</code> damit wir die beiden Variable vor und nach der <span class="math inline">\(log\)</span>-Transformation miteinander vergleichen können.</p>
<p>Das <a href="https://yuzar-blog.netlify.app/posts/2021-01-30-r-package-reviews-dlookr-diagnose-explore-and-transform-your-data/#standardization-and-resolving-skewness">R Paket <code>{dlookr}</code></a> hat eine große Auswahl an implementierten Funktionen für <span class="math inline">\(y\)</span>-Transformationen.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>log_tbl <span class="ot">&lt;-</span> fac1_tbl <span class="sc">|&gt;</span> </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">log_hatch_time =</span> <span class="fu">log</span>(hatch_time))</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Wir können dann über ein Histogramm die beiden Verteilungen anschauen. In der folgenden Abbildung sehen wir die nicht transformierte, rohe Daten sowie die Log-transformierten Daten. Es gibt einen klaren Peak Schlüpfzeiten am Anfang. Dann läuft die Verteilung langsam aus. Wir können nicht annehmen, dass die Schlüpfzeiten normalverteilt sind. Die Log-Transformation hat einigermaßen funktioniert. Wir sehen in diesem Fall approximativ normalverteilte Daten. Wir haben also ein <span class="math inline">\(log\)</span> normalverteiltes Outcome <span class="math inline">\(y\)</span> mit dem wir jetzt weiterechnen können.</p>
<div>

</div>
<div class="cell quarto-layout-panel" data-layout-align="center" data-layout-nrow="1">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 100.0%;justify-content: center;">
<div id="fig-log" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-log-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="eda-transform_files/figure-html/fig-log-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-8" title="Abbildung&nbsp;20.7— Histogramm der nicht transfomierten und transformierten Daten. (A) Nicht transformierte, rohe Daten. (B) log-transformierte Daten. [Zum Vergrößern anklicken]"><img src="eda-transform_files/figure-html/fig-log-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="768"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-log-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;20.7— Histogramm der nicht transfomierten und transformierten Daten. <strong>(A)</strong> Nicht transformierte, rohe Daten. <strong>(B)</strong> <span class="math inline">\(log\)</span>-transformierte Daten. <em>[Zum Vergrößern anklicken]</em>
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<p>In der folgenden Abbildung siehst du nochmal die Anwendung der <span class="math inline">\(\log\)</span>-Skala in <code>{ggplot}</code> auf die Daten. Aber Achtung, die ursprünglichen Daten sind <em>nicht</em> transformiert. Du schaust dir hier nur an, wie die Daten transformiert aussehen würden. Es gibt auch hierzu ein kleines Tutorium zu <a href="https://www.datanovia.com/en/blog/ggplot-log-scale-transformation/">ggplot log scale transformation</a>. Da kannst du dann auch einmal nachschauen, wie die <span class="math inline">\(\log_2\)</span>-Skala in <code>{ggplot}</code> funktioniert.</p>
<div class="cell" data-layout-align="center">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="annotated-cell-6"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-6-1"><a href="#annotated-cell-6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(log_tbl, <span class="fu">aes</span>(hatch_time)) <span class="sc">+</span></span>
<span id="annotated-cell-6-2"><a href="#annotated-cell-6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">fill =</span> cbbPalette[<span class="dv">2</span>], <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="annotated-cell-6-3"><a href="#annotated-cell-6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="annotated-cell-6-4"><a href="#annotated-cell-6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="fu">expression</span>(<span class="st">"Zeit bis zum Schlüpfen in"</span> <span class="sc">~</span> log[<span class="dv">10</span>](h)), <span class="at">y =</span> <span class="st">"Anzahl"</span>) <span class="sc">+</span></span>
<span id="annotated-cell-6-5"><a href="#annotated-cell-6-5" aria-hidden="true" tabindex="-1"></a>  <span class="do">## here starts the log scale</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-6" data-target-annotation="1">1</button><span id="annotated-cell-6-6" class="code-annotation-target"><a href="#annotated-cell-6-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>(<span class="at">breaks =</span> <span class="fu">trans_breaks</span>(<span class="st">"log10"</span>, <span class="cf">function</span>(x) <span class="dv">10</span><span class="sc">^</span>x),</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-6" data-target-annotation="2">2</button><span id="annotated-cell-6-7" class="code-annotation-target"><a href="#annotated-cell-6-7" aria-hidden="true" tabindex="-1"></a>                <span class="at">labels =</span> <span class="fu">trans_format</span>(<span class="st">"log10"</span>, <span class="fu">math_format</span>(<span class="dv">10</span><span class="sc">^</span>.x))) <span class="sc">+</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-6" data-target-annotation="3">3</button><span id="annotated-cell-6-8" class="code-annotation-target"><a href="#annotated-cell-6-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotation_logticks</span>(<span class="at">sides =</span> <span class="st">"b"</span>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-6" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-6" data-code-lines="6" data-code-annotation="1">Hier wird die <span class="math inline">\(x\)</span>-Achse einmal auf die <span class="math inline">\(\log\)</span>-Skala gestellt und die <code>breaks</code> entsprechend angepasst.</span>
</dd>
<dt data-target-cell="annotated-cell-6" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-6" data-code-lines="7" data-code-annotation="2">Wir ergänzen noch die richtige Schreibweise.</span>
</dd>
<dt data-target-cell="annotated-cell-6" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-6" data-code-lines="8" data-code-annotation="3">Die Ticks werden auch richtig gezeichnet. Du kannst mit <code>l</code> auch auf der <span class="math inline">\(y\)</span>-Achse <span class="math inline">\(\log\)</span>-Ticks anzeigen lassen.</span>
</dd>
</dl>
</div>
<div class="cell-output-display">
<div id="fig-log-scale-ggplot" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-log-scale-ggplot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="eda-transform_files/figure-html/fig-log-scale-ggplot-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-9" title="Abbildung&nbsp;20.8— Histogramm der nicht transfomierten Daten einmal auf der log_{10}-Skala in ggplot dargestellt. Achtung, hier ist nur die Darstellung transformiert. Die ursprünglichen Daten bleiben von der Transformation in {ggplot} unberührt."><img src="eda-transform_files/figure-html/fig-log-scale-ggplot-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="768"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-log-scale-ggplot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;20.8— Histogramm der nicht transfomierten Daten einmal auf der <span class="math inline">\(log_{10}\)</span>-Skala in <code>ggplot</code> dargestellt. Achtung, hier ist nur die Darstellung transformiert. Die ursprünglichen Daten bleiben von der Transformation <em>in</em> <code>{ggplot}</code> unberührt.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="inverse" class="level3" data-number="20.4.3">
<h3 data-number="20.4.3" class="anchored" data-anchor-id="inverse"><span class="header-section-number">20.4.3</span> Inverse</h3>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>inverse_tbl <span class="ot">&lt;-</span> fac1_tbl <span class="sc">|&gt;</span> </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">inverse_hatch_time =</span> <span class="dv">1</span><span class="sc">/</span>hatch_time)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div>

</div>
<div class="cell quarto-layout-panel" data-layout-align="center" data-layout-nrow="1">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 100.0%;justify-content: center;">
<div id="fig-inverse" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-inverse-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="eda-transform_files/figure-html/fig-inverse-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-10" title="Abbildung&nbsp;20.9— Histogramm der nicht transfomierten und transformierten Daten. (A) Nicht transformierte, rohe Daten. (B) inverse-transformierte Daten. [Zum Vergrößern anklicken]"><img src="eda-transform_files/figure-html/fig-inverse-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="768"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-inverse-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;20.9— Histogramm der nicht transfomierten und transformierten Daten. <strong>(A)</strong> Nicht transformierte, rohe Daten. <strong>(B)</strong> <span class="math inline">\(inverse\)</span>-transformierte Daten. <em>[Zum Vergrößern anklicken]</em>
</figcaption>
</figure>
</div>
</div>
</div>
</div>
</section>
<section id="inverse-normalverteilung" class="level3" data-number="20.4.4">
<h3 data-number="20.4.4" class="anchored" data-anchor-id="inverse-normalverteilung"><span class="header-section-number">20.4.4</span> Inverse Normalverteilung</h3>
<p><a href="https://yingji15.github.io/2019-08-17-inverse-normal-transformation/">Inverse normal transformation – What is it and how to do it?</a></p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>invers_norm <span class="ot">&lt;-</span> <span class="cf">function</span>(x) <span class="fu">qnorm</span>((<span class="fu">rank</span>(x, <span class="at">na.last=</span><span class="st">"keep"</span>) <span class="sc">-</span> <span class="fl">0.5</span>)<span class="sc">/</span><span class="fu">sum</span>(<span class="sc">!</span><span class="fu">is.na</span>(x)))</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><a href="https://stats.stackexchange.com/questions/588992/what-is-the-inverse-normal-transformation-int-and-what-are-the-reasons-behind">What is the inverse normal transformation (INT) and what are the reasons behind using it?</a></p>
<p><a href="https://pmc.ncbi.nlm.nih.gov/articles/PMC2921808/">Rank-Based Inverse Normal Transformations are Increasingly Used, But are They Merited?</a> von <span class="citation" data-cites="beasley2009rank">Beasley et al. (<a href="#ref-beasley2009rank" role="doc-biblioref">2009</a>)</span></p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>invers_norm_tbl <span class="ot">&lt;-</span> fac1_tbl <span class="sc">|&gt;</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">inverse_hatch_time =</span> <span class="fu">invers_norm</span>(hatch_time))</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div>

</div>
<div class="cell quarto-layout-panel" data-layout-align="center" data-layout-nrow="1">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 100.0%;justify-content: center;">
<div id="fig-inverse-norm" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-inverse-norm-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="eda-transform_files/figure-html/fig-inverse-norm-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-11" title="Abbildung&nbsp;20.10— Histogramm der nicht transfomierten und transformierten Daten. (A) Nicht transformierte, rohe Daten. (B) inverse-transformierte Daten. [Zum Vergrößern anklicken]"><img src="eda-transform_files/figure-html/fig-inverse-norm-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="768"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-inverse-norm-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;20.10— Histogramm der nicht transfomierten und transformierten Daten. <strong>(A)</strong> Nicht transformierte, rohe Daten. <strong>(B)</strong> <span class="math inline">\(inverse\)</span>-transformierte Daten. <em>[Zum Vergrößern anklicken]</em>
</figcaption>
</figure>
</div>
</div>
</div>
</div>
</section>
<section id="rangtransformation" class="level3" data-number="20.4.5">
<h3 data-number="20.4.5" class="anchored" data-anchor-id="rangtransformation"><span class="header-section-number">20.4.5</span> Rangtransformation</h3>
<p>Der Ausweg schlechthin bis in die 90ziger Jahre war vermutlich die nichtparametrische Statistik, wenn es um nicht normalverteilte Messwerte ging. Es wird dann eben ein nichtparametrischer Test, wie der Wilcoxon oder eben Mann-Whitney gerechnet. Und hier kommt dann die Rangtransformations ins Spiel. <em>Eigentlich</em> ist die gesamte Nichtparametrik nur eine Rangtransformation auf der wir dann auch genauso gut dann einen t-Test oder eine ANOVA rechnen könnten. Dazu dann aber mehr in den jeweiligen Kapiteln zu den einzelnen nichtparametrischen Tests.</p>
<ul>
<li><a href="stat-tests-utest.html">Der Wilcoxon-Mann-Whitney-Test</a> oder auch U-Test ist der t-Test auf den Rängen eines Messwertes. Wir vergleichen hier zwei Gruppen miteinander. Wenn wir mehr Gruppen haben, die wir vergleichen wollen, dann brauchen wir mehrere paarweise Wilcoxon Tests um die signifikanten Unterschiede zu bestimmen.</li>
<li><a href="stat-tests-kruskal.html">Der Kruskal-Wallis-Test</a> ist die einfaktorielle ANOVA auf den Rängen eines Messwertes. Wir vergleichen hier drei oder mehr Gruppen simultan miteinander. Wenn wir dann wissen wollen, welcher paarweise Vergleich signifikant ist, brauchen wir dann einen Posthoc-Test.</li>
</ul>
<p>Was ist also die Rangtransformation? Wir geben einfach den sortierten Rang des Messwertes über alle Gruppen. Dann können wir auf dem rangierten Messwert weiterrechnen. In den folgenden Tabellen siehst du dann einmal die orginalen Sprungweiten gemessen in [cm] sowie deren rangierten Gegenstücke.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>signed_rank <span class="ot">&lt;-</span> <span class="cf">function</span>(x) <span class="fu">sign</span>(x) <span class="sc">*</span> <span class="fu">rank</span>(<span class="fu">abs</span>(x))</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><code>rank()</code></p>
</section>
</section>
<section id="skalierung" class="level2" data-number="20.5">
<h2 data-number="20.5" class="anchored" data-anchor-id="skalierung"><span class="header-section-number">20.5</span> Skalierung</h2>
<section id="standardisierung" class="level3" data-number="20.5.1">
<h3 data-number="20.5.1" class="anchored" data-anchor-id="standardisierung"><span class="header-section-number">20.5.1</span> Standardisierung</h3>
<p>Die Standardisierung wird auch <span class="math inline">\(z\)</span>-Transformation genannt. In dem Fall der Standardisierung schieben wir die Daten auf den Ursprung, in dem wir von jedem Datenpunkt <span class="math inline">\(y_i\)</span> den Mittelwert <span class="math inline">\(\bar{y}\)</span> abziehen. Dann setzen wir noch die Standardabweichung auf Eins in dem wir durch die Standardabweichung <span class="math inline">\(y_s\)</span> teilen. Unser standardisiertes <span class="math inline">\(y\)</span> ist nun standardnormalverteilt mit <span class="math inline">\(\mathcal{N(0,1)}\)</span>. Wir nutzen für die Standardisierung folgende Formel.</p>
<p><span class="math display">\[
y_z = \cfrac{y_i - \bar{y}}{s_y}
\]</span></p>
<p>In R können wir für die Standardisierung die Funktion <code>scale()</code> verwenden. Wir müssen auch nichts weiter in den Optionen von <code>scale()</code> angeben. Die Standardwerte der Funktion sind so eingestellt, dass eine Standardnormalverteilung berechnet wird. Wir können auch die Funktion <code>transform()</code> aus dem R Paket <code>{dlookr}</code> verwenden. Die Option wäre dann <code>zscore</code>.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>scale_tbl <span class="ot">&lt;-</span> fac1_tbl <span class="sc">|&gt;</span> </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">scale_jump_length =</span> <span class="fu">scale</span>(jump_length))</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>In <span class="quarto-unresolved-ref">?fig-log-scale-3-1</span> sehen wir nochmal die nicht transformierten, rohen Daten. Wir haben in diesem Beispiel die normalvertielte Variable <code>jump_length</code> gewählt. Der Mittelwert von <code>jump_length</code> ist 20.53 und die Standardabweichung ist 3.77. Ziehen wir nun von jedem Wert von <code>jump_length</code> den Mittelwert mit 19.3 ab, so haben wir einen neuen Schwerpunkt bei Null. Teilen wir dann jede Zahl durch 3.36 so haben wir eine reduzierte Spannweite der Verteilung. Es ergibt sich die <span class="quarto-unresolved-ref">?fig-log-scale-3-2</span> als Standardnormalverteilung. Die Zahlen der auf der x-Achse haben jetzt aber keine Bedeutung mehr. Wie können die Sprungweite auf der <span class="math inline">\(z\)</span>-Skala nicht mehr biologisch interpretieren.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-log-scale-3" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-log-scale-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="eda-transform_files/figure-html/fig-log-scale-3-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-12" title="Abbildung&nbsp;20.11— Histogramm der nicht transfomierten und transformierten Daten. (A) Nicht transformierte, rohe Daten. (B) inverse-transformierte Daten. [Zum Vergrößern anklicken]"><img src="eda-transform_files/figure-html/fig-log-scale-3-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="768"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-log-scale-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;20.11— Histogramm der nicht transfomierten und transformierten Daten. <strong>(A)</strong> Nicht transformierte, rohe Daten. <strong>(B)</strong> <span class="math inline">\(inverse\)</span>-transformierte Daten. <em>[Zum Vergrößern anklicken]</em>
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="normalisierung" class="level3" data-number="20.5.2">
<h3 data-number="20.5.2" class="anchored" data-anchor-id="normalisierung"><span class="header-section-number">20.5.2</span> Normalisierung</h3>
<p>Abschließend wollen wir uns nochmal die Normalisierung anschauen. In diesem Fall wollen wir die Daten so transformieren, dass die Daten nur noch in der Spannweite 0 bis 1 vorkommen. Egal wie die Einheiten vorher waren, alle Variablen haben jetzt nur noch eine Ausprägung von 0 bis 1. Das ist besonders wichtig wenn wir viele Variablen haben und anhand der Variablen eine Vorhersage machen wollen. Uns interessieren die Werte in den Variablen an sich nicht, sondern wir wollen ein Outcome vorhersagen. Wir brauchen die Normalisierung später für das maschinelle Lernen und die Klassifikation. Die Formel für die Normalisierung lautet wie folgt.</p>
<p><span class="math display">\[
y_n = \cfrac{y_i - \min(y)}{\max(y) - \min(y)}
\]</span></p>
<p>In R gibt es die Normalisierungsfunktion nicht direkt. Wir könnten hier ein extra Paket laden, aber bei so einer simplen Formel können wir auch gleich die Berechnung in der Funktion <code>mutate()</code> machen. Wir müssen nur etwas mit den Klammern aufpassen. Wir können auch die Funktion <code>transform()</code> aus dem R Paket <code>{dlookr}</code> mit der Option <code>minmax</code> verwenden.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>norm_tbl <span class="ot">&lt;-</span> fac1_tbl <span class="sc">|&gt;</span> </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">norm_jump_length =</span> (jump_length <span class="sc">-</span> <span class="fu">min</span>(jump_length))<span class="sc">/</span>(<span class="fu">max</span>(jump_length) <span class="sc">-</span> <span class="fu">min</span>(jump_length)))</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>In <span class="quarto-unresolved-ref">?fig-log-scale-4-1</span> sehen wir nochmal die nicht transformierten, rohen Daten. In <span class="quarto-unresolved-ref">?fig-log-scale-4-2</span> sehen wir die normalisierten Daten. Hier fällt dann auf, dass die normalisierten Sprungweiten nur noch Werte zwischen Null und Eins annehmen. Die Zahlen der auf der x-Achse haben jetzt aber keine Bedeutung mehr. Wie können die normalisierten Sprungweiten nicht mehr biologisch interpretieren.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-log-scale-4" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-log-scale-4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="eda-transform_files/figure-html/fig-log-scale-4-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-13" title="Abbildung&nbsp;20.12— Histogramm der nicht transfomierten und transformierten Daten. (A) Nicht transformierte, rohe Daten. (B) inverse-transformierte Daten. [Zum Vergrößern anklicken]"><img src="eda-transform_files/figure-html/fig-log-scale-4-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="768"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-log-scale-4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;20.12— Histogramm der nicht transfomierten und transformierten Daten. <strong>(A)</strong> Nicht transformierte, rohe Daten. <strong>(B)</strong> <span class="math inline">\(inverse\)</span>-transformierte Daten. <em>[Zum Vergrößern anklicken]</em>
</figcaption>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="automatische-transformationen" class="level2" data-number="20.6">
<h2 data-number="20.6" class="anchored" data-anchor-id="automatische-transformationen"><span class="header-section-number">20.6</span> Automatische Transformationen…</h2>
<p><a href="https://www.datacamp.com/de/tutorial/normalization-vs-standardization">Normalisierung vs.&nbsp;Standardisierung: Wie man den Unterschied erkennt</a></p>
<p>Die Standardisierung versucht auch, die Symmetrie mit dem Mittelwert 0 und der Standardabweichung 1 zu erzwingen. Bei der Normalisierung ist die Wahrscheinlichkeit einer Schiefe größer, da Ihre Skalierungsfaktoren die beiden extremsten Datenpunkte sind.</p>
<section id="mit-bestnormalize" class="level3" data-number="20.6.1">
<h3 data-number="20.6.1" class="anchored" data-anchor-id="mit-bestnormalize"><span class="header-section-number">20.6.1</span> … mit <code>{bestNormalize}</code></h3>
<p>Dann sind wir bis hierher gekommen und fragen uns nun welche ist den jetzt die beste Transformation für unsere Daten um einigermaßen eine Normalverteilung hinzubekommen? Da hilft uns jetzt das <a href="https://cran.r-project.org/web/packages/bestNormalize/vignettes/bestNormalize.html">R Paket <code>{bestNormalize}</code></a>. Die <a href="https://petersonr.github.io/bestNormalize/index.html">Kurzanleitung zum Paket</a> erlaubt es automatisiert auf einem Datenvektor die beste Transformation zu finden um die Daten in eine Normalverteilung zu verwandeln.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-trans-bestNorm-1" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-trans-bestNorm-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="eda-transform_files/figure-html/fig-trans-bestNorm-1-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-14" title="Abbildung&nbsp;20.13— Histogramm."><img src="eda-transform_files/figure-html/fig-trans-bestNorm-1-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="768"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-trans-bestNorm-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;20.13— Histogramm.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Jetzt können wir die Funktion <code>bestNormalize()</code> nutzen um uns die beste Transformationsmethode wiedergeben zu lassen. Das ist super praktisch in der Anwendung. Wir können uns theoretisch noch verschiedene Gütekriterien aussuchen aber für hier reicht die Standardimplementierung. Wichtig ist noch, dass wir hier eine Kreuzvalidierung durchführen, so dass die Ergebnisse und die Auswahl des Algorithmus robust sein sollte.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>bn_obj <span class="ot">&lt;-</span> <span class="fu">bestNormalize</span>(fac1_tbl<span class="sc">$</span>hatch_time)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>bn_obj</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Best Normalizing transformation with 598 Observations
 Estimated Normality Statistics (Pearson P / df, lower =&gt; more normal):
 - arcsinh(x): 1.0646
 - Box-Cox: 1.0946
 - Center+scale: 6.1441
 - Double Reversed Log_b(x+a): 9.8917
 - Log_b(x+a): 1.0646
 - orderNorm (ORQ): 1.1241
 - sqrt(x + a): 2.2218
 - Yeo-Johnson: 1.067
Estimation method: Out-of-sample via CV with 10 folds and 5 repeats
 
Based off these, bestNormalize chose:
Standardized asinh(x) Transformation with 598 nonmissing obs.:
 Relevant statistics:
 - mean (before standardization) = 5.634908 
 - sd (before standardization) = 0.9703858 </code></pre>
</div>
</div>
<p>Laut dem Algorithmus sollen wir eine <code>Box Cox Transformation</code> durchführen. Okay, wie machen wir das jetzt? Wir hätten zwar die Parameter in der Ausgabe angegeben und die könnten wir dann auch in einer Veröffentlichung angeben, aber wenn es schneller gehen soll, dann können wir die Funktion <code>predict()</code> nutzen, die uns die transformierten <code>x</code> Werte wiedergibt.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>x_trans <span class="ot">&lt;-</span> <span class="fu">predict</span>(bn_obj)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Dann nochmal schnell gucken, ob das auch mit der Rücktransformation klappen würde.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>x_trans_back <span class="ot">&lt;-</span> <span class="fu">predict</span>(bn_obj, <span class="at">newdata =</span> x_trans, <span class="at">inverse =</span> <span class="cn">TRUE</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Einmal dann der Vergleich ob alle <code>x_trans_back</code> Werte den ursprünglichen <code>x</code> Werten entsprechen. Ja, das sieht gut aus.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">all.equal</span>(x_trans_back, fac1_tbl<span class="sc">$</span>hatch_time)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>Und zum Abschluss nochmal eine Abbildung der transformierten <code>x</code> Werte.In der folgenden Abbildung siehst du dann einmal das entsprechende Histogramm. Das sieht doch sehr gut aus und wir mussten nicht zig verschiedene Algorithmen selber testen.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-trans-bestNorm-2" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-trans-bestNorm-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="eda-transform_files/figure-html/fig-trans-bestNorm-2-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-15" title="Abbildung&nbsp;20.14— Histogramm der transformierten x Werte mit der Box-Cos Transformation aus dem R Paket {bestNormalize}."><img src="eda-transform_files/figure-html/fig-trans-bestNorm-2-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="768"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-trans-bestNorm-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;20.14— Histogramm der transformierten <code>x</code> Werte mit der Box-Cos Transformation aus dem R Paket <code>{bestNormalize}</code>.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="mit-rcompanion" class="level3" data-number="20.6.2">
<h3 data-number="20.6.2" class="anchored" data-anchor-id="mit-rcompanion"><span class="header-section-number">20.6.2</span> … mit <code>{rcompanion}</code></h3>
<p><code>transformTukey()</code> aus dem R Paket <code>{rcompanion}</code></p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>tt_obj <span class="ot">&lt;-</span> <span class="fu">transformTukey</span>(fac1_tbl<span class="sc">$</span>hatch_time,</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>                         <span class="at">plotit =</span> <span class="cn">FALSE</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    lambda      W Shapiro.p.value
403   0.05 0.9966           0.243

if (lambda &gt;  0){TRANS = x ^ lambda} 
if (lambda == 0){TRANS = log(x)} 
if (lambda &lt;  0){TRANS = -1 * x ^ lambda} </code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-trans-transformTukey" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-trans-transformTukey-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="eda-transform_files/figure-html/fig-trans-transformTukey-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-16" title="Abbildung&nbsp;20.15— Histogramm ."><img src="eda-transform_files/figure-html/fig-trans-transformTukey-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="768"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-trans-transformTukey-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;20.15— Histogramm .
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="mit-lambertw" class="level3" data-number="20.6.3">
<h3 data-number="20.6.3" class="anchored" data-anchor-id="mit-lambertw"><span class="header-section-number">20.6.3</span> … mit <code>{LambertW}</code></h3>
<p><code>Gaussianize()</code> aus dem <a href="https://cran.r-project.org/web/packages/LambertW/index.html">R Paket <code>{LambertW}</code></a></p>
<ul>
<li>type: what type of non-normality: symmetric heavy-tails “h” (default), skewed heavy-tails “hh”, or just skewed “s”.</li>
</ul>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>gaus_obj <span class="ot">&lt;-</span> <span class="fu">Gaussianize</span>(fac1_tbl<span class="sc">$</span>hatch_time, <span class="at">type =</span> <span class="st">"s"</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-trans-Gaussianize" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-trans-Gaussianize-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="eda-transform_files/figure-html/fig-trans-Gaussianize-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-17" title="Abbildung&nbsp;20.16— Histogramm ."><img src="eda-transform_files/figure-html/fig-trans-Gaussianize-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="768"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-trans-Gaussianize-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;20.16— Histogramm .
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="mit-mass" class="level3" data-number="20.6.4">
<h3 data-number="20.6.4" class="anchored" data-anchor-id="mit-mass"><span class="header-section-number">20.6.4</span> … mit <code>{MASS}</code></h3>
<p>Die Box-Cox-Transformation ist ein statistisches Verfahren zur Umwandlung von nicht normalverteilten Daten in eine Normalverteilung. Die Transformation ist nicht so einfach wie die logarithmische Transformation oder die Quadratwurzeltransformation und erfordert etwas mehr Erklärung. Beginnen wir zunächst die Gleichung zu verstehen, die die Transformation beschreibt. Die grundsätzliche Idee ist, dass wir unser <span class="math inline">\(y\)</span> als Outcome mit einem <span class="math inline">\(\lambda\)</span>-Exponenten transformieren. Die Frage ist jetzt, welches <span class="math inline">\(\lambda\)</span> produziert die besten normalverteilten Daten? Wenn wir ein <span class="math inline">\(\lambda\)</span> von Null finden sollten, dann rechnen wir einfach eine <span class="math inline">\(\log\)</span>-Transformation. Die Idee ist also recht simpel.</p>
<p><span class="math display">\[
y(\lambda)=\left\{\begin{matrix} \dfrac{y^{\lambda}-1} {\lambda} &amp; \quad  \mathrm{f\ddot ur\;\;}\lambda \ne 0 \\[10pt] \log(y) &amp;\quad  \mathrm{f\ddot ur\;\;}\lambda = 0\end{matrix}\right.
\]</span></p>
<p>Wir werden natürlich jetzt nicht händisch alle möglichen <span class="math inline">\(\lambda\)</span> durchprobieren bis wir das beste <span class="math inline">\(\lambda\)</span> gefunden haben. Dafür gibt es die Funktion <code>boxcox</code> aus dem R Paket <code>{MASS}</code>, die ein lineares Modell benötigt. Daher bauen wir usn erst unser lineares Modell und dann stecken wir das Modell in die Funktion <code>boxcox()</code>.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>jump_mod <span class="ot">&lt;-</span> <span class="fu">lm</span>(jump_length <span class="sc">~</span> <span class="dv">1</span>, <span class="at">data =</span> fac1_tbl)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Jetzt einmal die Funktion <code>boxcox()</code> ausführen und danach das <span class="math inline">\(\lambda\)</span> extrahieren. Hier ist es etwas umständlicher, da das <span class="math inline">\(\lambda\)</span> in der Ausgabe der Funktion etwas vergraben ist. Dafür ist das R Paket <code>{MASS}</code> einfach nicht mehr das jüngste Paket und hat keine so guten Funktionen zum Erhalten von wichtigen Parametern. Ich möchte die Abbildung nicht haben, daher die Option <code>plotit = FALSE</code>.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>bc_obj <span class="ot">&lt;-</span> MASS<span class="sc">::</span><span class="fu">boxcox</span>(jump_mod, <span class="at">plotit =</span> <span class="cn">FALSE</span>)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>lambda <span class="ot">&lt;-</span> bc_obj<span class="sc">$</span>x[<span class="fu">which.max</span>(bc_obj<span class="sc">$</span>y)]</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>lambda</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.9</code></pre>
</div>
</div>
<p>Wir erhalten also ein <span class="math inline">\(\lambda\)</span> von 0.9 wieder. Dieses <span class="math inline">\(\lambda\)</span> können wir dann nutzen um unsere Daten nach Box-Cox zu transformieren. Dafür übersetzen wir dann die obige Matheformel einmal in R Code.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>fac1_tbl <span class="ot">&lt;-</span> fac1_tbl <span class="sc">|&gt;</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">jump_boxcox =</span> ((jump_length <span class="sc">^</span> lambda <span class="sc">-</span> <span class="dv">1</span>)<span class="sc">/</span>lambda))</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>In der <a href="#fig-boxcox-ggplot" class="quarto-xref">Abbildung&nbsp;<span>20.17</span></a> sehen wir dann einmal das Ergebnis der Transformation. Sieht gar nicht mal so schlecht aus und noch besser als die reine <span class="math inline">\(\log\)</span>-Transformation. Wie immer musst du aber auch hier rumprobieren, was dann am besten einer Normalverteilung folgt.</p>
<div class="cell" data-layout-align="center">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> fac1_tbl) <span class="sc">+</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x =</span> jump_boxcox), <span class="at">alpha =</span> <span class="fl">0.9</span>,</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">fill =</span> cbbPalette[<span class="dv">3</span>], <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">'Box-Cox transformierte Sprungweiten'</span>, <span class="at">y =</span> <span class="st">'Anzahl'</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-boxcox-ggplot" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-boxcox-ggplot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="eda-transform_files/figure-html/fig-boxcox-ggplot-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-18" title="Abbildung&nbsp;20.17— Histogramm der Box-Cox transfomierten Daten in ggplot dargestellt."><img src="eda-transform_files/figure-html/fig-boxcox-ggplot-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="480"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-boxcox-ggplot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;20.17— Histogramm der Box-Cox transfomierten Daten in <code>ggplot</code> dargestellt.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="mit-trafo" class="level3" data-number="20.6.5">
<h3 data-number="20.6.5" class="anchored" data-anchor-id="mit-trafo"><span class="header-section-number">20.6.5</span> … mit <code>{trafo}</code></h3>
<p><a href="https://cran.r-project.org/web/packages/trafo/vignettes/vignette_trafo.pdf">The R Package trafo for Transforming Linear Regression Models</a></p>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>lm_fit <span class="ot">&lt;-</span> <span class="fu">lm</span>(hatch_time <span class="sc">~</span> weight, <span class="at">data =</span> fac1_tbl)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">assumptions</span>(lm_fit)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>The default lambdarange for the Log shift opt transformation is calculated dependent on the data range. The lower value is set to -2.17 and the upper value to 1405.92

The default lambdarange for the Square-root shift transformation is calculated dependent on the data range. The lower value is set to -2.17 and the upper value to 1405.92

Test normality assumption 
              Skewness Kurtosis Shapiro_W Shapiro_p
modulus        -0.0047   2.8150    0.9969    0.3026
yeojohnson     -0.0047   2.8150    0.9969    0.3026
dual           -0.0038   2.8945    0.9969    0.2997
gpower         -0.0045   2.8544    0.9969    0.2990
boxcox         -0.0045   2.8587    0.9968    0.2954
bickeldoksum   -0.0045   2.8587    0.9968    0.2954
logshiftopt    -0.0544   2.7527    0.9966    0.2349
neglog         -0.1409   2.9117    0.9959    0.1258
glog           -0.1810   3.0073    0.9952    0.0630
log            -0.1833   3.0166    0.9952    0.0593
untransformed   2.1894   8.6119    0.7618    0.0000
manly           0.3797   2.1275    0.9570    0.0000
sqrtshift       1.0427   3.9744    0.9308    0.0000
reciprocal     -9.0069 130.4978    0.4459    0.0000

Test homoscedasticity assumption 
              BreuschPagan_V BreuschPagan_p
reciprocal            0.0726         0.7876
glog                  0.2216         0.6378
log                   0.2218         0.6377
neglog                0.2338         0.6287
logshiftopt           0.2709         0.6027
modulus               0.3308         0.5652
yeojohnson            0.3308         0.5652
gpower                0.3406         0.5595
boxcox                0.3420         0.5587
bickeldoksum          0.3420         0.5587
dual                  0.3471         0.5558
untransformed         0.6350         0.4255
sqrtshift             0.9869         0.3205
manly                 1.0652         0.3020

Test linearity assumption 
Press [enter] to continue</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in par(usr): argument 1 does not name a graphical parameter</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="eda-transform_files/figure-html/unnamed-chunk-43-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-19"><img src="eda-transform_files/figure-html/unnamed-chunk-43-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Press [enter] to continue</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in par(usr): argument 1 does not name a graphical parameter</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="eda-transform_files/figure-html/unnamed-chunk-43-2.png" class="lightbox" data-gallery="quarto-lightbox-gallery-20"><img src="eda-transform_files/figure-html/unnamed-chunk-43-2.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Press [enter] to continue</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in par(usr): argument 1 does not name a graphical parameter</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="eda-transform_files/figure-html/unnamed-chunk-43-3.png" class="lightbox" data-gallery="quarto-lightbox-gallery-21"><img src="eda-transform_files/figure-html/unnamed-chunk-43-3.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Press [enter] to continue</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in par(usr): argument 1 does not name a graphical parameter</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="eda-transform_files/figure-html/unnamed-chunk-43-4.png" class="lightbox" data-gallery="quarto-lightbox-gallery-22"><img src="eda-transform_files/figure-html/unnamed-chunk-43-4.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Press [enter] to continue</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in par(usr): argument 1 does not name a graphical parameter</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="eda-transform_files/figure-html/unnamed-chunk-43-5.png" class="lightbox" data-gallery="quarto-lightbox-gallery-23"><img src="eda-transform_files/figure-html/unnamed-chunk-43-5.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Press [enter] to continue</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in par(usr): argument 1 does not name a graphical parameter</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="eda-transform_files/figure-html/unnamed-chunk-43-6.png" class="lightbox" data-gallery="quarto-lightbox-gallery-24"><img src="eda-transform_files/figure-html/unnamed-chunk-43-6.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Press [enter] to continue</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in par(usr): argument 1 does not name a graphical parameter</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="eda-transform_files/figure-html/unnamed-chunk-43-7.png" class="lightbox" data-gallery="quarto-lightbox-gallery-25"><img src="eda-transform_files/figure-html/unnamed-chunk-43-7.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Press [enter] to continue</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in par(usr): argument 1 does not name a graphical parameter</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="eda-transform_files/figure-html/unnamed-chunk-43-8.png" class="lightbox" data-gallery="quarto-lightbox-gallery-26"><img src="eda-transform_files/figure-html/unnamed-chunk-43-8.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Press [enter] to continue</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in par(usr): argument 1 does not name a graphical parameter</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="eda-transform_files/figure-html/unnamed-chunk-43-9.png" class="lightbox" data-gallery="quarto-lightbox-gallery-27"><img src="eda-transform_files/figure-html/unnamed-chunk-43-9.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Press [enter] to continue</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in par(usr): argument 1 does not name a graphical parameter</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="eda-transform_files/figure-html/unnamed-chunk-43-10.png" class="lightbox" data-gallery="quarto-lightbox-gallery-28"><img src="eda-transform_files/figure-html/unnamed-chunk-43-10.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Press [enter] to continue</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in par(usr): argument 1 does not name a graphical parameter</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="eda-transform_files/figure-html/unnamed-chunk-43-11.png" class="lightbox" data-gallery="quarto-lightbox-gallery-29"><img src="eda-transform_files/figure-html/unnamed-chunk-43-11.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Press [enter] to continue</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in par(usr): argument 1 does not name a graphical parameter</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="eda-transform_files/figure-html/unnamed-chunk-43-12.png" class="lightbox" data-gallery="quarto-lightbox-gallery-30"><img src="eda-transform_files/figure-html/unnamed-chunk-43-12.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Press [enter] to continue</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in par(usr): argument 1 does not name a graphical parameter</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="eda-transform_files/figure-html/unnamed-chunk-43-13.png" class="lightbox" data-gallery="quarto-lightbox-gallery-31"><img src="eda-transform_files/figure-html/unnamed-chunk-43-13.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Press [enter] to continue</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in par(usr): argument 1 does not name a graphical parameter</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="eda-transform_files/figure-html/unnamed-chunk-43-14.png" class="lightbox" data-gallery="quarto-lightbox-gallery-32"><img src="eda-transform_files/figure-html/unnamed-chunk-43-14.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
</section>
<section id="mit-dlookr" class="level3" data-number="20.6.6">
<h3 data-number="20.6.6" class="anchored" data-anchor-id="mit-dlookr"><span class="header-section-number">20.6.6</span> … mit <code>{dlookr}</code></h3>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Achtung, bitte beachten!
</div>
</div>
<div class="callout-body-container callout-body">
<p>Das R Paket <code>{dlookr}</code> lies sich eine Zeit nicht über CRAN einfach installieren.</p>
</div>
</div>
<div class="cell">
<details open="" class="code-fold">
<summary>R Code [zeigen / verbergen]</summary>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(dlookr)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div>

</div>
<div class="quarto-layout-panel" data-layout="[15,85]">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 15.0%;justify-content: center;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="images/personal_opinion.png" class="lightbox" data-gallery="quarto-lightbox-gallery-33"><img src="images/personal_opinion.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></a></p>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 85.0%;justify-content: flex-start;">
<blockquote class="blockquote">
<p><em>“foo.” — Jochen Kruppa-Scheetz, meiner bescheidener Meinung nach.</em></p>
</blockquote>
</div>
</div>
</div>
</section>
</section>
<section id="referenzen" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="referenzen">Referenzen</h2>


<!-- -->

<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" data-line-spacing="2" role="list">
<div id="ref-beasley2009rank" class="csl-entry" role="listitem">
Beasley, T. M., Erickson, S., &amp; Allison, D. B. (2009). Rank-based inverse normal transformations are increasingly used, but are they merited? <em>Behavior genetics</em>, <em>39</em>, 580–595.
</div>
<div id="ref-yang2014duration" class="csl-entry" role="listitem">
Yang, P. J., Pham, J., Choo, J., &amp; Hu, D. L. (2014). Duration of urination does not change with body size. <em>Proceedings of the National Academy of Sciences</em>, <em>111</em>(33), 11932–11937.
</div>
</div>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Kopiert");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Kopiert");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      const annoteTargets = window.document.querySelectorAll('.code-annotation-anchor');
      for (let i=0; i<annoteTargets.length; i++) {
        const annoteTarget = annoteTargets[i];
        const targetCell = annoteTarget.getAttribute("data-target-cell");
        const targetAnnotation = annoteTarget.getAttribute("data-target-annotation");
        const contentFn = () => {
          const content = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          if (content) {
            const tipContent = content.cloneNode(true);
            tipContent.classList.add("code-annotation-tip-content");
            return tipContent.outerHTML;
          }
        }
        const config = {
          allowHTML: true,
          content: contentFn,
          onShow: (instance) => {
            selectCodeLines(instance.reference);
            instance.reference.classList.add('code-annotation-active');
            window.tippy.hideAll();
          },
          onHide: (instance) => {
            unselectCodeLines();
            instance.reference.classList.remove('code-annotation-active');
          },
          maxWidth: 300,
          delay: [50, 0],
          duration: [200, 0],
          offset: [5, 10],
          arrow: true,
          appendTo: function(el) {
            return el.parentElement.parentElement.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto',
          placement: 'right',
          popperOptions: {
            modifiers: [
            {
              name: 'flip',
              options: {
                flipVariations: false, // true by default
                allowedAutoPlacements: ['right'],
                fallbackPlacements: ['right', 'top', 'top-start', 'top-end', 'bottom', 'bottom-start', 'bottom-end', 'left'],
              },
            },
            {
              name: 'preventOverflow',
              options: {
                mainAxis: false,
                altAxis: false
              }
            }
            ]        
          }      
        };
        window.tippy(annoteTarget, config); 
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./eda-distribution.html" class="pagination-link" aria-label="Verteilung von Daten">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Verteilung von Daten</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./stat-tests-preface-theory.html" class="pagination-link" aria-label="Testen von Hypothesen">
        <span class="nav-page-text">Testen von Hypothesen</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Quellcode</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb58" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo = FALSE}</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="in">#| message: false</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a><span class="in">#| warning: false</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a><span class="in">pacman::p_load(tidyverse, readxl, knitr, kableExtra, Hmisc, quantreg,</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a><span class="in">               multcomp, emmeans, ggpubr, multcompView, nlme, tinytable,</span></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a><span class="in">               see, patchwork, ggrepel, conflicted)</span></span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a><span class="in">conflicts_prefer(dplyr::filter)</span></span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a><span class="in">conflicts_prefer(dplyr::select)</span></span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb58-10"><a href="#cb58-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-13"><a href="#cb58-13" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb58-14"><a href="#cb58-14" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb58-15"><a href="#cb58-15" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb58-16"><a href="#cb58-16" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb58-17"><a href="#cb58-17" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"images/R/eda-transform.R"</span>)</span>
<span id="cb58-18"><a href="#cb58-18" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb58-19"><a href="#cb58-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-20"><a href="#cb58-20" aria-hidden="true" tabindex="-1"></a><span class="fu"># Transformieren von Daten {#sec-eda-transform}</span></span>
<span id="cb58-21"><a href="#cb58-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-22"><a href="#cb58-22" aria-hidden="true" tabindex="-1"></a>*Letzte Änderung am `r format(fs::file_info("eda-transform.qmd")$modification_time, '%d. %B %Y um %H:%M:%S')`*</span>
<span id="cb58-23"><a href="#cb58-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-24"><a href="#cb58-24" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; *"It's morphin' time! I never get tired of that! Now, go, go Power Rangers!" --- Power Rangers morphing phrase*</span></span>
<span id="cb58-25"><a href="#cb58-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-26"><a href="#cb58-26" aria-hidden="true" tabindex="-1"></a><span class="al">![](images/caution.png)</span>{fig-align="center" width="100%"}</span>
<span id="cb58-27"><a href="#cb58-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-28"><a href="#cb58-28" aria-hidden="true" tabindex="-1"></a>::: {.callout-caution appearance="simple"}</span>
<span id="cb58-29"><a href="#cb58-29" aria-hidden="true" tabindex="-1"></a><span class="fu">## Stand des Kapitels: Baustelle (seit 06.2025)</span></span>
<span id="cb58-30"><a href="#cb58-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-31"><a href="#cb58-31" aria-hidden="true" tabindex="-1"></a>Dieses Kapitel wird überarbeitet, da ich nochmal an den Kern der Transformation ran möchte. Daher kann es sein, dass es in den nächsten Wochen hier zu Problemen und nicht funktionierenden Code kommt. Das repariere ich dann aber meistens in den folgenden Tagen. Ziel ist es bis zum Start des WiSe 2025/26 das Kapitel neu aufgestellt zu haben.</span>
<span id="cb58-32"><a href="#cb58-32" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb58-33"><a href="#cb58-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-34"><a href="#cb58-34" aria-hidden="true" tabindex="-1"></a>text</span>
<span id="cb58-35"><a href="#cb58-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-36"><a href="#cb58-36" aria-hidden="true" tabindex="-1"></a><span class="fu">## Allgemeiner Hintergrund</span></span>
<span id="cb58-37"><a href="#cb58-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-38"><a href="#cb58-38" aria-hidden="true" tabindex="-1"></a>Warum müssen wir Daten transformieren? Meistens hat dies drei Hauptgründe.</span>
<span id="cb58-39"><a href="#cb58-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-40"><a href="#cb58-40" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Das Modell {.unnumbered .unlisted}</span></span>
<span id="cb58-41"><a href="#cb58-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-42"><a href="#cb58-42" aria-hidden="true" tabindex="-1"></a>1)  Wir wollen eine ANOVA oder eine Gaussian lineare Regression rechen und benötigen ein normalverteiltes Outcome $y$.</span>
<span id="cb58-43"><a href="#cb58-43" aria-hidden="true" tabindex="-1"></a>2)  Wir wollen einen Algorithmus zur Prädiktion (deu. *Vorhersage*) nutzen und haben sehr viele Einflussvariablen $x$ in sehr unterschiedlichen Einheiten.</span>
<span id="cb58-44"><a href="#cb58-44" aria-hidden="true" tabindex="-1"></a>3)  Wir wollen eine komplexere Analyse wie die Hauptkomponentenanalyse oder Clusteranalyse rechnen und brauchen Variablen, die alle eine ähnliche Spannweite haben.</span>
<span id="cb58-45"><a href="#cb58-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-46"><a href="#cb58-46" aria-hidden="true" tabindex="-1"></a><span class="al">![*foo.* Quelle: @yang2014duration](images/preface_transformation.jpeg)</span>{#fig-utest-intro fig-align="center" width="100%"}</span>
<span id="cb58-47"><a href="#cb58-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-48"><a href="#cb58-48" aria-hidden="true" tabindex="-1"></a>Im ersten Fall wollen wir meist unsere Daten $log$-Transformieren um aus einem *nicht*-normalverteilten Outcome $y$ ein $log$-normalverteiltes $y$ zu erschaffen. Im zweiten Fall wollen wir unsere Daten Standardisieren oder Normalisieren. Wir brauchen normalisierte Daten später beim Klassifizieren im Rahmen von maschinellen Lernverfahren. Bitte beachte auch, dass die Transformationen hier eher für kleine Datensätze geeignet sind. Im <span class="co">[</span><span class="ot">Kapitel zur Klassifikation</span><span class="co">](#sec-pre-processing)</span> gehe ich nochmal auf die Automatisierung über mehrere Variablen ein. Wenn du also einen großen Datensatz hast, den du vielleicht oft bearbeiten musst, dann mag dir dort mehr geholfen sein.</span>
<span id="cb58-49"><a href="#cb58-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-50"><a href="#cb58-50" aria-hidden="true" tabindex="-1"></a>|   $\boldsymbol{y}$    | $\boldsymbol{\lambda}$ |</span>
<span id="cb58-51"><a href="#cb58-51" aria-hidden="true" tabindex="-1"></a>|:---------------------:|:----------------------:|</span>
<span id="cb58-52"><a href="#cb58-52" aria-hidden="true" tabindex="-1"></a>|   $\cfrac{1}{x^2}$    |          $-2$          |</span>
<span id="cb58-53"><a href="#cb58-53" aria-hidden="true" tabindex="-1"></a>|    $\cfrac{1}{x}$     |          $-1$          |</span>
<span id="cb58-54"><a href="#cb58-54" aria-hidden="true" tabindex="-1"></a>| $\cfrac{1}{\sqrt{x}}$ |         $-1/2$         |</span>
<span id="cb58-55"><a href="#cb58-55" aria-hidden="true" tabindex="-1"></a>|       $\log{x}$       |          $0$           |</span>
<span id="cb58-56"><a href="#cb58-56" aria-hidden="true" tabindex="-1"></a>|      $\sqrt{x}$       |         $1/2$          |</span>
<span id="cb58-57"><a href="#cb58-57" aria-hidden="true" tabindex="-1"></a>|          $x$          |          $1$           |</span>
<span id="cb58-58"><a href="#cb58-58" aria-hidden="true" tabindex="-1"></a>|         $x^2$         |          $2$           |</span>
<span id="cb58-59"><a href="#cb58-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-60"><a href="#cb58-60" aria-hidden="true" tabindex="-1"></a>: test {#tbl-tukey-ladder}</span>
<span id="cb58-61"><a href="#cb58-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-62"><a href="#cb58-62" aria-hidden="true" tabindex="-1"></a>Ein Wort zum R Paket <span class="in">`{recipes}`</span></span>
<span id="cb58-63"><a href="#cb58-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-64"><a href="#cb58-64" aria-hidden="true" tabindex="-1"></a>Wir wollen uns nun die Verfahren zur Transformation von Daten in den folgenden Abschnitten einmal näher anschauen.</span>
<span id="cb58-65"><a href="#cb58-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-68"><a href="#cb58-68" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb58-69"><a href="#cb58-69" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb58-70"><a href="#cb58-70" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb58-71"><a href="#cb58-71" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb58-72"><a href="#cb58-72" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-ggplot-utest-intro-sim-02</span></span>
<span id="cb58-73"><a href="#cb58-73" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-align: center</span></span>
<span id="cb58-74"><a href="#cb58-74" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 3.5</span></span>
<span id="cb58-75"><a href="#cb58-75" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 8</span></span>
<span id="cb58-76"><a href="#cb58-76" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "foo. **(A)** br. **(B)** fff. *[Zum Vergrößern anklicken]*"</span></span>
<span id="cb58-77"><a href="#cb58-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-78"><a href="#cb58-78" aria-hidden="true" tabindex="-1"></a>p1_intro_pop <span class="sc">+</span> p2_intro_pop <span class="sc">+</span></span>
<span id="cb58-79"><a href="#cb58-79" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_layout</span>(<span class="at">ncol =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb58-80"><a href="#cb58-80" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_annotation</span>(<span class="at">tag_levels =</span> <span class="st">'A'</span>, <span class="at">tag_prefix =</span> <span class="st">'('</span>, <span class="at">tag_suffix =</span> <span class="st">')'</span>) <span class="sc">&amp;</span></span>
<span id="cb58-81"><a href="#cb58-81" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.tag =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">16</span>, <span class="at">face =</span> <span class="st">"bold"</span>))</span>
<span id="cb58-82"><a href="#cb58-82" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb58-83"><a href="#cb58-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-84"><a href="#cb58-84" aria-hidden="true" tabindex="-1"></a>::: callout-tip</span>
<span id="cb58-85"><a href="#cb58-85" aria-hidden="true" tabindex="-1"></a><span class="fu">## Weitere Tutorien für das Transformieren von Daten.</span></span>
<span id="cb58-86"><a href="#cb58-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-87"><a href="#cb58-87" aria-hidden="true" tabindex="-1"></a>Wir oben schon erwähnt, kann dieses Kapitel nicht die umfangreiche Literatur der Transformation von Daten abarbeiten. Daher präsentiere ich hier eine Liste von Literatur und Links, die mich für dieses Kapitel hier inspiriert haben. Nicht alles habe ich genutzt, aber vielleicht ist für dich was dabei.</span>
<span id="cb58-88"><a href="#cb58-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-89"><a href="#cb58-89" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Ich verweise hier auch nochmal auf das tolle Tutorium von Matus Seci auf dem <span class="co">[</span><span class="ot">Coding Club - Transforming and scaling data: Understand the fundamental concepts of manipulating data distributions for modelling and visualization</span><span class="co">](https://ourcodingclub.github.io/tutorials/data-scaling/)</span>. Du findest auch dort mehr Informationen zu der Rücktransformation und der Anwendung von Transformationen auf einen komplexeren Datensatz.</span>
<span id="cb58-90"><a href="#cb58-90" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">Transformations</span><span class="co">](https://onlinestatbook.com/2/transformations/contents.html)</span></span>
<span id="cb58-91"><a href="#cb58-91" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">Data Transformation mit `dlookr`</span><span class="co">](https://choonghyunryu.github.io/dlookr/articles/transformation.html#standardization-and-resolving-skewness)</span></span>
<span id="cb58-92"><a href="#cb58-92" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">Transforming Data</span><span class="co">](https://rcompanion.org/handbook/I_12.html)</span></span>
<span id="cb58-93"><a href="#cb58-93" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb58-94"><a href="#cb58-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-95"><a href="#cb58-95" aria-hidden="true" tabindex="-1"></a><span class="fu">## Genutzte R Pakete</span></span>
<span id="cb58-96"><a href="#cb58-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-97"><a href="#cb58-97" aria-hidden="true" tabindex="-1"></a>Wir wollen folgende R Pakete in diesem Kapitel nutzen.</span>
<span id="cb58-98"><a href="#cb58-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-101"><a href="#cb58-101" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb58-102"><a href="#cb58-102" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb58-103"><a href="#cb58-103" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb58-104"><a href="#cb58-104" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb58-105"><a href="#cb58-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-106"><a href="#cb58-106" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(tidyverse, magrittr, scales, see, MASS, bestNormalize,</span>
<span id="cb58-107"><a href="#cb58-107" aria-hidden="true" tabindex="-1"></a>               rcompanion, LambertW, trafo, conflicted)</span>
<span id="cb58-108"><a href="#cb58-108" aria-hidden="true" tabindex="-1"></a><span class="fu">conflicts_prefer</span>(MASS<span class="sc">::</span>boxcox)</span>
<span id="cb58-109"><a href="#cb58-109" aria-hidden="true" tabindex="-1"></a><span class="fu">conflicts_prefer</span>(dplyr<span class="sc">::</span>select)</span>
<span id="cb58-110"><a href="#cb58-110" aria-hidden="true" tabindex="-1"></a><span class="fu">conflicts_prefer</span>(dplyr<span class="sc">::</span>filter)</span>
<span id="cb58-111"><a href="#cb58-111" aria-hidden="true" tabindex="-1"></a><span class="fu">conflicts_prefer</span>(parameters<span class="sc">::</span>skewness)</span>
<span id="cb58-112"><a href="#cb58-112" aria-hidden="true" tabindex="-1"></a><span class="fu">conflicts_prefer</span>(parameters<span class="sc">::</span>kurtosis)</span>
<span id="cb58-113"><a href="#cb58-113" aria-hidden="true" tabindex="-1"></a><span class="fu">conflicts_prefer</span>(bestNormalize<span class="sc">::</span>boxcox)</span>
<span id="cb58-114"><a href="#cb58-114" aria-hidden="true" tabindex="-1"></a>cbbPalette <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"#000000"</span>, <span class="st">"#E69F00"</span>, <span class="st">"#56B4E9"</span>, </span>
<span id="cb58-115"><a href="#cb58-115" aria-hidden="true" tabindex="-1"></a>                <span class="st">"#009E73"</span>, <span class="st">"#F0E442"</span>, <span class="st">"#F5C710"</span>, </span>
<span id="cb58-116"><a href="#cb58-116" aria-hidden="true" tabindex="-1"></a>                <span class="st">"#0072B2"</span>, <span class="st">"#D55E00"</span>, <span class="st">"#CC79A7"</span>)</span>
<span id="cb58-117"><a href="#cb58-117" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb58-118"><a href="#cb58-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-119"><a href="#cb58-119" aria-hidden="true" tabindex="-1"></a>Zwischenzeitlich musste ich das R Paket <span class="in">`{dlookr}`</span> aus dem Code entfernt, da das Paket extra extern über GitHub installieren musstest. Das R Paket war zwischenzeitlich nicht mehr bei CRAN gelistet. Das führt bei mir zu Schluckauf im Code, so dass ich die Funktionen jetzt in einem Extraabschnitt bearbeite. Sollte das Paket sich mal nicht installieren lassen, dann gibt es hier noch einen alternativen Weg.</span>
<span id="cb58-120"><a href="#cb58-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-121"><a href="#cb58-121" aria-hidden="true" tabindex="-1"></a>::: callout-caution</span>
<span id="cb58-122"><a href="#cb58-122" aria-hidden="true" tabindex="-1"></a><span class="fu">## Alternative Installation von `{dlookr}`</span></span>
<span id="cb58-123"><a href="#cb58-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-124"><a href="#cb58-124" aria-hidden="true" tabindex="-1"></a>Ist das R Paket <span class="in">`{dlookr}`</span> mal nicht per Standard aus RStudio zu installieren kannst du das R Paket auch über GitHub installieren. Dafür einmal das R Paket <span class="in">`{devtools}`</span> installieren und dann folgenden Code ausführen.</span>
<span id="cb58-125"><a href="#cb58-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-128"><a href="#cb58-128" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb58-129"><a href="#cb58-129" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb58-130"><a href="#cb58-130" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"choonghyunryu/dlookr"</span>)</span>
<span id="cb58-131"><a href="#cb58-131" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb58-132"><a href="#cb58-132" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb58-133"><a href="#cb58-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-134"><a href="#cb58-134" aria-hidden="true" tabindex="-1"></a>An der Seite des Kapitels findest du den Link *Quellcode anzeigen*, über den du Zugang zum gesamten R-Code dieses Kapitels erhältst.</span>
<span id="cb58-135"><a href="#cb58-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-136"><a href="#cb58-136" aria-hidden="true" tabindex="-1"></a><span class="fu">## Daten</span></span>
<span id="cb58-137"><a href="#cb58-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-138"><a href="#cb58-138" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Schlupfzeiten von Flöhen {.unnumbered .unlisted}</span></span>
<span id="cb58-139"><a href="#cb58-139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-140"><a href="#cb58-140" aria-hidden="true" tabindex="-1"></a>Wir wollen uns in diesem Kapitel mit der normalverteilten Variable <span class="in">`jump_length`</span> gemessen in <span class="sc">\[</span>cm<span class="sc">\]</span> und der nicht-normalverteilten Variable <span class="in">`hatch_time`</span> gemessen in <span class="sc">\[</span>h<span class="sc">\]</span> aus dem Datensatz <span class="in">`flea_dog_cat_length_weight.csv"`</span> beschäftigen. Wir wählen über die Funktion <span class="in">`select()`</span> nur die beiden Spalten aus dem Datensatz, die wir benötigen.</span>
<span id="cb58-141"><a href="#cb58-141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-144"><a href="#cb58-144" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb58-145"><a href="#cb58-145" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb58-146"><a href="#cb58-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-147"><a href="#cb58-147" aria-hidden="true" tabindex="-1"></a>fac1_tbl <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"data/flea_dog_cat_length_weight.xlsx"</span>) <span class="sc">|&gt;</span></span>
<span id="cb58-148"><a href="#cb58-148" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(animal, jump_length, weight, hatch_time) <span class="sc">|&gt;</span> </span>
<span id="cb58-149"><a href="#cb58-149" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(hatch_time <span class="sc">&lt;=</span> <span class="dv">1500</span>)</span>
<span id="cb58-150"><a href="#cb58-150" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb58-151"><a href="#cb58-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-152"><a href="#cb58-152" aria-hidden="true" tabindex="-1"></a>In der @tbl-trans-1 ist der Datensatz <span class="in">`fac1_tbl`</span> nochmal dargestellt. Wir zeigen hier nur die ersten sieben zeilen des Datensatzes.</span>
<span id="cb58-153"><a href="#cb58-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-156"><a href="#cb58-156" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb58-157"><a href="#cb58-157" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb58-158"><a href="#cb58-158" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb58-159"><a href="#cb58-159" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb58-160"><a href="#cb58-160" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-trans-1</span></span>
<span id="cb58-161"><a href="#cb58-161" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Selektierter Datensatz mit einer normalverteilten Variable `jump_length` und der nicht-normalverteilten Variable `hatch_time`. Wir betrachten die ersten sieben Zeilen des Datensatzes."</span></span>
<span id="cb58-162"><a href="#cb58-162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-163"><a href="#cb58-163" aria-hidden="true" tabindex="-1"></a>fac1_raw_tbl <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"data/flea_dog_cat_length_weight.xlsx"</span>) <span class="sc">|&gt;</span></span>
<span id="cb58-164"><a href="#cb58-164" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(animal, jump_length, hatch_time) </span>
<span id="cb58-165"><a href="#cb58-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-166"><a href="#cb58-166" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(<span class="fu">head</span>(fac1_raw_tbl, <span class="at">n =</span> <span class="dv">3</span>),</span>
<span id="cb58-167"><a href="#cb58-167" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rep</span>(<span class="st">"..."</span>, <span class="at">times =</span> <span class="fu">ncol</span>(fac1_raw_tbl)),</span>
<span id="cb58-168"><a href="#cb58-168" aria-hidden="true" tabindex="-1"></a>      <span class="fu">tail</span>(fac1_raw_tbl, <span class="at">n =</span> <span class="dv">3</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb58-169"><a href="#cb58-169" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tt</span>(<span class="at">width =</span> <span class="dv">2</span><span class="sc">/</span><span class="dv">3</span>, <span class="at">align =</span> <span class="st">"c"</span>, <span class="at">theme =</span> <span class="st">"striped"</span>)</span>
<span id="cb58-170"><a href="#cb58-170" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb58-171"><a href="#cb58-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-174"><a href="#cb58-174" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb58-175"><a href="#cb58-175" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb58-176"><a href="#cb58-176" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb58-177"><a href="#cb58-177" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb58-178"><a href="#cb58-178" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-data-intro</span></span>
<span id="cb58-179"><a href="#cb58-179" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-align: center</span></span>
<span id="cb58-180"><a href="#cb58-180" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 3.5</span></span>
<span id="cb58-181"><a href="#cb58-181" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 8</span></span>
<span id="cb58-182"><a href="#cb58-182" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "foo. *[Zum Vergrößern anklicken]*"</span></span>
<span id="cb58-183"><a href="#cb58-183" aria-hidden="true" tabindex="-1"></a><span class="co">#| layout-nrow: 1</span></span>
<span id="cb58-184"><a href="#cb58-184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-185"><a href="#cb58-185" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(fac1_tbl, <span class="fu">aes</span>(jump_length)) <span class="sc">+</span></span>
<span id="cb58-186"><a href="#cb58-186" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb58-187"><a href="#cb58-187" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">fill =</span> cbbPalette[<span class="dv">2</span>], <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb58-188"><a href="#cb58-188" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Sprungweiten in [cm]"</span>, <span class="at">y =</span> <span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb58-189"><a href="#cb58-189" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="dv">8</span>, <span class="dv">33</span>)</span>
<span id="cb58-190"><a href="#cb58-190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-191"><a href="#cb58-191" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(fac1_tbl, <span class="fu">aes</span>(hatch_time)) <span class="sc">+</span></span>
<span id="cb58-192"><a href="#cb58-192" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb58-193"><a href="#cb58-193" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">fill =</span> cbbPalette[<span class="dv">3</span>], <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb58-194"><a href="#cb58-194" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Zeit bis zum Schlüpfen in sqrt(h)"</span>, <span class="at">y =</span> <span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb58-195"><a href="#cb58-195" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="sc">-</span><span class="dv">100</span>, <span class="dv">1500</span>)</span>
<span id="cb58-196"><a href="#cb58-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-197"><a href="#cb58-197" aria-hidden="true" tabindex="-1"></a>p1 <span class="sc">+</span> p2 <span class="sc">+</span></span>
<span id="cb58-198"><a href="#cb58-198" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid.minor.x =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb58-199"><a href="#cb58-199" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_annotation</span>(<span class="at">tag_levels =</span> <span class="st">'A'</span>, <span class="at">tag_prefix =</span> <span class="st">'('</span>, <span class="at">tag_suffix =</span> <span class="st">')'</span>) <span class="sc">&amp;</span></span>
<span id="cb58-200"><a href="#cb58-200" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.tag =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">16</span>, <span class="at">face =</span> <span class="st">"bold"</span>))</span>
<span id="cb58-201"><a href="#cb58-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-202"><a href="#cb58-202" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb58-203"><a href="#cb58-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-204"><a href="#cb58-204" aria-hidden="true" tabindex="-1"></a>Im Folgenden nutzen wir oft die Funktion <span class="in">`mutate()`</span>. Schau dir im Zweifel nochmal im Kapitel zu Programmierung die Funktion <span class="in">`mutate()`</span> an.</span>
<span id="cb58-205"><a href="#cb58-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-206"><a href="#cb58-206" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Das Alter von Tieren {.unnumbered .unlisted}</span></span>
<span id="cb58-207"><a href="#cb58-207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-210"><a href="#cb58-210" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb58-211"><a href="#cb58-211" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb58-212"><a href="#cb58-212" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb58-213"><a href="#cb58-213" aria-hidden="true" tabindex="-1"></a>anage_tbl <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="st">"data/anage_data.txt"</span>, <span class="at">delim =</span> <span class="st">"</span><span class="sc">\t</span><span class="st">"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb58-214"><a href="#cb58-214" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">name =</span> <span class="st">"Common name"</span>, <span class="at">weight =</span> <span class="st">"Adult weight (g)"</span>, </span>
<span id="cb58-215"><a href="#cb58-215" aria-hidden="true" tabindex="-1"></a>         <span class="at">age =</span> <span class="st">"Maximum longevity (yrs)"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb58-216"><a href="#cb58-216" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">weight =</span> weight<span class="sc">/</span><span class="dv">1000</span>) <span class="sc">|&gt;</span> </span>
<span id="cb58-217"><a href="#cb58-217" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() </span>
<span id="cb58-218"><a href="#cb58-218" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb58-219"><a href="#cb58-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-222"><a href="#cb58-222" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb58-223"><a href="#cb58-223" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb58-224"><a href="#cb58-224" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb58-225"><a href="#cb58-225" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb58-226"><a href="#cb58-226" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-trans-weight-age</span></span>
<span id="cb58-227"><a href="#cb58-227" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "foo"</span></span>
<span id="cb58-228"><a href="#cb58-228" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-229"><a href="#cb58-229" aria-hidden="true" tabindex="-1"></a>anage_raw_tbl <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="st">"data/anage_data.txt"</span>, <span class="at">delim =</span> <span class="st">"</span><span class="sc">\t</span><span class="st">"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb58-230"><a href="#cb58-230" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="st">"Common name"</span>, <span class="st">"Adult weight (g)"</span>, </span>
<span id="cb58-231"><a href="#cb58-231" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Maximum longevity (yrs)"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb58-232"><a href="#cb58-232" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>()</span>
<span id="cb58-233"><a href="#cb58-233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-234"><a href="#cb58-234" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(<span class="fu">head</span>(anage_raw_tbl, <span class="at">n =</span> <span class="dv">3</span>),</span>
<span id="cb58-235"><a href="#cb58-235" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rep</span>(<span class="st">"..."</span>, <span class="at">times =</span> <span class="fu">ncol</span>(anage_raw_tbl)),</span>
<span id="cb58-236"><a href="#cb58-236" aria-hidden="true" tabindex="-1"></a>      <span class="fu">tail</span>(anage_raw_tbl, <span class="at">n =</span> <span class="dv">3</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb58-237"><a href="#cb58-237" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tt</span>(<span class="at">width =</span> <span class="dv">2</span><span class="sc">/</span><span class="dv">3</span>, <span class="at">align =</span> <span class="st">"c"</span>, <span class="at">theme =</span> <span class="st">"striped"</span>)</span>
<span id="cb58-238"><a href="#cb58-238" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb58-239"><a href="#cb58-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-242"><a href="#cb58-242" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb58-243"><a href="#cb58-243" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb58-244"><a href="#cb58-244" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb58-245"><a href="#cb58-245" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb58-246"><a href="#cb58-246" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-ggplot-weight-age</span></span>
<span id="cb58-247"><a href="#cb58-247" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-align: center</span></span>
<span id="cb58-248"><a href="#cb58-248" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 5</span></span>
<span id="cb58-249"><a href="#cb58-249" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 8</span></span>
<span id="cb58-250"><a href="#cb58-250" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "foo. **(A)** br. **(B)** fff. *[Zum Vergrößern anklicken]*"</span></span>
<span id="cb58-251"><a href="#cb58-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-252"><a href="#cb58-252" aria-hidden="true" tabindex="-1"></a>anage_tbl <span class="sc">|&gt;</span> </span>
<span id="cb58-253"><a href="#cb58-253" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(weight, age)) <span class="sc">+</span></span>
<span id="cb58-254"><a href="#cb58-254" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb58-255"><a href="#cb58-255" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb58-256"><a href="#cb58-256" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="fl">1e4</span>, <span class="at">color =</span> <span class="st">"gray"</span>) <span class="sc">+</span></span>
<span id="cb58-257"><a href="#cb58-257" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">150</span>, <span class="at">color =</span> <span class="st">"gray"</span>) <span class="sc">+</span></span>
<span id="cb58-258"><a href="#cb58-258" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text_repel</span>(<span class="at">data =</span> <span class="fu">filter</span>(anage_tbl, weight <span class="sc">&gt;</span> <span class="fl">1e4</span>),</span>
<span id="cb58-259"><a href="#cb58-259" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">aes</span>(<span class="at">label =</span> name), <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb58-260"><a href="#cb58-260" aria-hidden="true" tabindex="-1"></a>                  <span class="at">min.segment.length =</span> <span class="fu">unit</span>(<span class="dv">0</span>, <span class="st">'lines'</span>)) <span class="sc">+</span></span>
<span id="cb58-261"><a href="#cb58-261" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text_repel</span>(<span class="at">data =</span> <span class="fu">filter</span>(anage_tbl, age <span class="sc">&gt;</span> <span class="dv">150</span> <span class="sc">&amp;</span> weight <span class="sc">&lt;</span> <span class="fl">1e4</span>),</span>
<span id="cb58-262"><a href="#cb58-262" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">aes</span>(<span class="at">label =</span> name), <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb58-263"><a href="#cb58-263" aria-hidden="true" tabindex="-1"></a>                  <span class="at">min.segment.length =</span> <span class="fu">unit</span>(<span class="dv">0</span>, <span class="st">'lines'</span>)) <span class="sc">+</span></span>
<span id="cb58-264"><a href="#cb58-264" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Gewicht in [kg]"</span>, <span class="at">y =</span> <span class="st">"Alter in [yrs]"</span>) <span class="sc">+</span></span>
<span id="cb58-265"><a href="#cb58-265" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>comma,</span>
<span id="cb58-266"><a href="#cb58-266" aria-hidden="true" tabindex="-1"></a>                     <span class="at">breaks =</span> <span class="fu">c</span>(<span class="fl">1e4</span>, <span class="fl">5e4</span>, <span class="fl">1e5</span>)) <span class="sc">+</span></span>
<span id="cb58-267"><a href="#cb58-267" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">16</span>, <span class="at">face =</span> <span class="dv">2</span>),</span>
<span id="cb58-268"><a href="#cb58-268" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb58-269"><a href="#cb58-269" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">16</span>, <span class="at">face =</span> <span class="dv">2</span>),</span>
<span id="cb58-270"><a href="#cb58-270" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>),  </span>
<span id="cb58-271"><a href="#cb58-271" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">17</span>),</span>
<span id="cb58-272"><a href="#cb58-272" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>, <span class="at">face =</span> <span class="st">"italic"</span>),</span>
<span id="cb58-273"><a href="#cb58-273" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb58-274"><a href="#cb58-274" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid.minor.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb58-275"><a href="#cb58-275" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid.minor.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb58-276"><a href="#cb58-276" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">"top"</span>)</span>
<span id="cb58-277"><a href="#cb58-277" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb58-278"><a href="#cb58-278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-279"><a href="#cb58-279" aria-hidden="true" tabindex="-1"></a><span class="fu">## Transformationen</span></span>
<span id="cb58-280"><a href="#cb58-280" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-283"><a href="#cb58-283" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb58-284"><a href="#cb58-284" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb58-285"><a href="#cb58-285" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb58-286"><a href="#cb58-286" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb58-287"><a href="#cb58-287" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-pretest-rank</span></span>
<span id="cb58-288"><a href="#cb58-288" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-align: center</span></span>
<span id="cb58-289"><a href="#cb58-289" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 4</span></span>
<span id="cb58-290"><a href="#cb58-290" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 8</span></span>
<span id="cb58-291"><a href="#cb58-291" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Zusammenhang vom Mittelwert, Median und dem Modus zur Feststellung einer Normalverteilung. Der Modus ist hierbei der häufigste Wert. **(A)** Linksschiefe Verteilung. Der Modus ist größer als der Median ist größer als der Mittelwert. **(B)** Symmetrische Normalverteilung. Der Mittelwert und Median sowie Modus sind gleich. **(C)** Rechtsschiefe Verteilung der Mittelwert ist größer als der Median ist größer als der Modus. *[Zum Vergrößern anklicken]*"</span></span>
<span id="cb58-292"><a href="#cb58-292" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-293"><a href="#cb58-293" aria-hidden="true" tabindex="-1"></a>p2kurt <span class="sc">+</span> p1kurt <span class="sc">+</span> p3kurt <span class="sc">+</span></span>
<span id="cb58-294"><a href="#cb58-294" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_layout</span>(<span class="at">ncol =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb58-295"><a href="#cb58-295" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_annotation</span>(<span class="at">tag_levels =</span> <span class="st">'A'</span>, <span class="at">tag_prefix =</span> <span class="st">'('</span>, <span class="at">tag_suffix =</span> <span class="st">')'</span>) <span class="sc">&amp;</span></span>
<span id="cb58-296"><a href="#cb58-296" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.tag =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">16</span>, <span class="at">face =</span> <span class="st">"bold"</span>))</span>
<span id="cb58-297"><a href="#cb58-297" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb58-298"><a href="#cb58-298" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-299"><a href="#cb58-299" aria-hidden="true" tabindex="-1"></a>Quadratwurzel moderat schiefe Messwerte:</span>
<span id="cb58-300"><a href="#cb58-300" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-301"><a href="#cb58-301" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`sqrt(y)`</span> für positiv, schiefe Messwerte</span>
<span id="cb58-302"><a href="#cb58-302" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`sqrt(max(y+1) - y)`</span> für negative, schiefe Messwerte</span>
<span id="cb58-303"><a href="#cb58-303" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-304"><a href="#cb58-304" aria-hidden="true" tabindex="-1"></a>Logarithmus für starke schiefe Messwerte:</span>
<span id="cb58-305"><a href="#cb58-305" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-306"><a href="#cb58-306" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`log10(y)`</span> für positiv, schiefe Messwerte</span>
<span id="cb58-307"><a href="#cb58-307" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`log10(max(y+1) - y)`</span> für negative, schiefe Messwerte</span>
<span id="cb58-308"><a href="#cb58-308" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-309"><a href="#cb58-309" aria-hidden="true" tabindex="-1"></a>Die Inverse für extrem, schiefe Messwerte:</span>
<span id="cb58-310"><a href="#cb58-310" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-311"><a href="#cb58-311" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`1/y`</span> für positiv, schiefe Messwerte</span>
<span id="cb58-312"><a href="#cb58-312" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`1/(max(y+1) - y)`</span> für negative, schiefe Messwerte</span>
<span id="cb58-313"><a href="#cb58-313" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-314"><a href="#cb58-314" aria-hidden="true" tabindex="-1"></a>Die Transformation mit Rängen <span class="in">`rank()`</span></span>
<span id="cb58-315"><a href="#cb58-315" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-316"><a href="#cb58-316" aria-hidden="true" tabindex="-1"></a>Schnelle Übersicht...</span>
<span id="cb58-317"><a href="#cb58-317" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-318"><a href="#cb58-318" aria-hidden="true" tabindex="-1"></a><span class="fu">### Quadratwurzel</span></span>
<span id="cb58-319"><a href="#cb58-319" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-320"><a href="#cb58-320" aria-hidden="true" tabindex="-1"></a>Die Quadratwurzel-Transformationen ist eine etwas seltenere Transformation. Meist wird die Quadratwurzel-Transformationen als die schwächere $log$-Transformation bezeichnet. Wir sehen in @fig-log-scale-2-2 den Grund dafür. Aber zuerst müssen wir aber über die Funktion <span class="in">`sqrt()`</span> unsere Daten transformieren. Wir können auch die Funktion <span class="in">`transform()`</span> aus dem R Paket <span class="in">`{dlookr}`</span> verwenden und haben eine große Auswahl an möglichen Transformationen. Einfach mal die Hilfeseite von <span class="in">`transform()`</span> aufrufen und nachschauen.</span>
<span id="cb58-321"><a href="#cb58-321" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-324"><a href="#cb58-324" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb58-325"><a href="#cb58-325" aria-hidden="true" tabindex="-1"></a>sqrt_tbl <span class="ot">&lt;-</span> fac1_tbl <span class="sc">|&gt;</span> </span>
<span id="cb58-326"><a href="#cb58-326" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sqrt_hatch_time =</span> <span class="fu">sqrt</span>(hatch_time))</span>
<span id="cb58-327"><a href="#cb58-327" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb58-328"><a href="#cb58-328" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-329"><a href="#cb58-329" aria-hidden="true" tabindex="-1"></a>In der folgenden Abbildung sehen wir die nicht transformierte, rohe Daten sowie die transformierten Daten mit der Quadratwurzel. Es gibt einen klaren Peak Schlüpfzeiten am Anfang. Dann läuft die Verteilung langsam nach rechts aus. Wir können nicht annehmen, dass die Schlüpfzeiten normalverteilt sind. Unser Ziel besser normalverteilte Daten vorliegen zu haben, haben wir aber mit der Quadratwurzel-Transformationen nicht erreicht. Die Daten sind immer noch rechtsschief.</span>
<span id="cb58-330"><a href="#cb58-330" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-333"><a href="#cb58-333" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb58-334"><a href="#cb58-334" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb58-335"><a href="#cb58-335" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb58-336"><a href="#cb58-336" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-trans-sqrt</span></span>
<span id="cb58-337"><a href="#cb58-337" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-align: center</span></span>
<span id="cb58-338"><a href="#cb58-338" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 3.5</span></span>
<span id="cb58-339"><a href="#cb58-339" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 8</span></span>
<span id="cb58-340"><a href="#cb58-340" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Histogramm der nicht transfomierten und transformierten Daten. **(A)** Nicht transformierte, rohe Daten. **(B)** $sqrt$-transformierte Daten. *[Zum Vergrößern anklicken]*"</span></span>
<span id="cb58-341"><a href="#cb58-341" aria-hidden="true" tabindex="-1"></a><span class="co">#| layout-nrow: 1</span></span>
<span id="cb58-342"><a href="#cb58-342" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-343"><a href="#cb58-343" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(sqrt_tbl, <span class="fu">aes</span>(hatch_time)) <span class="sc">+</span></span>
<span id="cb58-344"><a href="#cb58-344" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb58-345"><a href="#cb58-345" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">fill =</span> cbbPalette[<span class="dv">2</span>], <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb58-346"><a href="#cb58-346" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Zeit bis zum Schlüpfen in [h]"</span>, <span class="at">y =</span> <span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb58-347"><a href="#cb58-347" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="sc">-</span><span class="dv">100</span>, <span class="cn">NA</span>)</span>
<span id="cb58-348"><a href="#cb58-348" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-349"><a href="#cb58-349" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(sqrt_tbl, <span class="fu">aes</span>(sqrt_hatch_time)) <span class="sc">+</span></span>
<span id="cb58-350"><a href="#cb58-350" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb58-351"><a href="#cb58-351" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">fill =</span> cbbPalette[<span class="dv">3</span>], <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb58-352"><a href="#cb58-352" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Zeit bis zum Schlüpfen in sqrt(h)"</span>, <span class="at">y =</span> <span class="st">""</span>)</span>
<span id="cb58-353"><a href="#cb58-353" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-354"><a href="#cb58-354" aria-hidden="true" tabindex="-1"></a>p1 <span class="sc">+</span> p2 <span class="sc">+</span></span>
<span id="cb58-355"><a href="#cb58-355" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid.minor.x =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb58-356"><a href="#cb58-356" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_annotation</span>(<span class="at">tag_levels =</span> <span class="st">'A'</span>, <span class="at">tag_prefix =</span> <span class="st">'('</span>, <span class="at">tag_suffix =</span> <span class="st">')'</span>) <span class="sc">&amp;</span></span>
<span id="cb58-357"><a href="#cb58-357" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.tag =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">16</span>, <span class="at">face =</span> <span class="st">"bold"</span>))</span>
<span id="cb58-358"><a href="#cb58-358" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-359"><a href="#cb58-359" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb58-360"><a href="#cb58-360" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-361"><a href="#cb58-361" aria-hidden="true" tabindex="-1"></a><span class="fu">### Logarithmus</span></span>
<span id="cb58-362"><a href="#cb58-362" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-363"><a href="#cb58-363" aria-hidden="true" tabindex="-1"></a>Wir nutzen die $log$-Transformation, wenn wir aus einem nicht-normalverteiltem Outcome $y$ ein approxomativ normalverteiltes Outcome $y$ machen wollen. Dabei ist wichtig, dass wir natürlich auch die Einheit mit $log$-transformieren.</span>
<span id="cb58-364"><a href="#cb58-364" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-365"><a href="#cb58-365" aria-hidden="true" tabindex="-1"></a>Im Folgenden sehen wir die $log$-Transformation der Variable <span class="in">`hatch_time`</span> mit der Funktion <span class="in">`log()`</span>. Wir erschaffen eine neue Spalte im <span class="in">`tibble`</span> damit wir die beiden Variable vor und nach der $log$-Transformation miteinander vergleichen können.</span>
<span id="cb58-366"><a href="#cb58-366" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-367"><a href="#cb58-367" aria-hidden="true" tabindex="-1"></a>Das <span class="co">[</span><span class="ot">R Paket `{dlookr}`</span><span class="co">](https://yuzar-blog.netlify.app/posts/2021-01-30-r-package-reviews-dlookr-diagnose-explore-and-transform-your-data/#standardization-and-resolving-skewness)</span> hat eine große Auswahl an implementierten Funktionen für $y$-Transformationen.</span>
<span id="cb58-368"><a href="#cb58-368" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-371"><a href="#cb58-371" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb58-372"><a href="#cb58-372" aria-hidden="true" tabindex="-1"></a>log_tbl <span class="ot">&lt;-</span> fac1_tbl <span class="sc">|&gt;</span> </span>
<span id="cb58-373"><a href="#cb58-373" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">log_hatch_time =</span> <span class="fu">log</span>(hatch_time))</span>
<span id="cb58-374"><a href="#cb58-374" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-375"><a href="#cb58-375" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb58-376"><a href="#cb58-376" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-377"><a href="#cb58-377" aria-hidden="true" tabindex="-1"></a>Wir können dann über ein Histogramm die beiden Verteilungen anschauen. In der folgenden Abbildung sehen wir die nicht transformierte, rohe Daten sowie die Log-transformierten Daten. Es gibt einen klaren Peak Schlüpfzeiten am Anfang. Dann läuft die Verteilung langsam aus. Wir können nicht annehmen, dass die Schlüpfzeiten normalverteilt sind. Die Log-Transformation hat einigermaßen funktioniert. Wir sehen in diesem Fall approximativ normalverteilte Daten. Wir haben also ein $log$ normalverteiltes Outcome $y$ mit dem wir jetzt weiterechnen können.</span>
<span id="cb58-378"><a href="#cb58-378" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-381"><a href="#cb58-381" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb58-382"><a href="#cb58-382" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb58-383"><a href="#cb58-383" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb58-384"><a href="#cb58-384" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-log</span></span>
<span id="cb58-385"><a href="#cb58-385" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-align: center</span></span>
<span id="cb58-386"><a href="#cb58-386" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 3.5</span></span>
<span id="cb58-387"><a href="#cb58-387" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 8</span></span>
<span id="cb58-388"><a href="#cb58-388" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Histogramm der nicht transfomierten und transformierten Daten. **(A)** Nicht transformierte, rohe Daten. **(B)** $log$-transformierte Daten. *[Zum Vergrößern anklicken]*"</span></span>
<span id="cb58-389"><a href="#cb58-389" aria-hidden="true" tabindex="-1"></a><span class="co">#| layout-nrow: 1</span></span>
<span id="cb58-390"><a href="#cb58-390" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-391"><a href="#cb58-391" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(log_tbl, <span class="fu">aes</span>(hatch_time)) <span class="sc">+</span></span>
<span id="cb58-392"><a href="#cb58-392" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb58-393"><a href="#cb58-393" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">fill =</span> cbbPalette[<span class="dv">2</span>], <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb58-394"><a href="#cb58-394" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Zeit bis zum Schlüpfen in [h]"</span>, <span class="at">y =</span> <span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb58-395"><a href="#cb58-395" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="sc">-</span><span class="dv">100</span>, <span class="cn">NA</span>) </span>
<span id="cb58-396"><a href="#cb58-396" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-397"><a href="#cb58-397" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(log_tbl, <span class="fu">aes</span>(log_hatch_time)) <span class="sc">+</span></span>
<span id="cb58-398"><a href="#cb58-398" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb58-399"><a href="#cb58-399" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">fill =</span> cbbPalette[<span class="dv">3</span>], <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb58-400"><a href="#cb58-400" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Zeit bis zum Schlüpfen in log(h)"</span>, <span class="at">y =</span> <span class="st">""</span>)  </span>
<span id="cb58-401"><a href="#cb58-401" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-402"><a href="#cb58-402" aria-hidden="true" tabindex="-1"></a>p1 <span class="sc">+</span> p2 <span class="sc">+</span></span>
<span id="cb58-403"><a href="#cb58-403" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid.minor.x =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb58-404"><a href="#cb58-404" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_annotation</span>(<span class="at">tag_levels =</span> <span class="st">'A'</span>, <span class="at">tag_prefix =</span> <span class="st">'('</span>, <span class="at">tag_suffix =</span> <span class="st">')'</span>) <span class="sc">&amp;</span></span>
<span id="cb58-405"><a href="#cb58-405" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.tag =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">16</span>, <span class="at">face =</span> <span class="st">"bold"</span>))</span>
<span id="cb58-406"><a href="#cb58-406" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-407"><a href="#cb58-407" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb58-408"><a href="#cb58-408" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-409"><a href="#cb58-409" aria-hidden="true" tabindex="-1"></a>In der folgenden Abbildung siehst du nochmal die Anwendung der $\log$-Skala in <span class="in">`{ggplot}`</span> auf die Daten. Aber Achtung, die ursprünglichen Daten sind *nicht* transformiert. Du schaust dir hier nur an, wie die Daten transformiert aussehen würden. Es gibt auch hierzu ein kleines Tutorium zu <span class="co">[</span><span class="ot">ggplot log scale transformation</span><span class="co">](https://www.datanovia.com/en/blog/ggplot-log-scale-transformation/)</span>. Da kannst du dann auch einmal nachschauen, wie die $\log_2$-Skala in <span class="in">`{ggplot}`</span> funktioniert.</span>
<span id="cb58-410"><a href="#cb58-410" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-413"><a href="#cb58-413" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb58-414"><a href="#cb58-414" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb58-415"><a href="#cb58-415" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb58-416"><a href="#cb58-416" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-log-scale-ggplot</span></span>
<span id="cb58-417"><a href="#cb58-417" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-align: center</span></span>
<span id="cb58-418"><a href="#cb58-418" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 3.5</span></span>
<span id="cb58-419"><a href="#cb58-419" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 8</span></span>
<span id="cb58-420"><a href="#cb58-420" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Histogramm der nicht transfomierten Daten einmal auf der $log_{10}$-Skala in `ggplot` dargestellt. Achtung, hier ist nur die Darstellung transformiert. Die ursprünglichen Daten bleiben von der Transformation *in* `{ggplot}` unberührt."</span></span>
<span id="cb58-421"><a href="#cb58-421" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-422"><a href="#cb58-422" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(log_tbl, <span class="fu">aes</span>(hatch_time)) <span class="sc">+</span></span>
<span id="cb58-423"><a href="#cb58-423" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">fill =</span> cbbPalette[<span class="dv">2</span>], <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb58-424"><a href="#cb58-424" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb58-425"><a href="#cb58-425" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="fu">expression</span>(<span class="st">"Zeit bis zum Schlüpfen in"</span> <span class="sc">~</span> log[<span class="dv">10</span>](h)), <span class="at">y =</span> <span class="st">"Anzahl"</span>) <span class="sc">+</span></span>
<span id="cb58-426"><a href="#cb58-426" aria-hidden="true" tabindex="-1"></a>  <span class="do">## here starts the log scale</span></span>
<span id="cb58-427"><a href="#cb58-427" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>(<span class="at">breaks =</span> <span class="fu">trans_breaks</span>(<span class="st">"log10"</span>, <span class="cf">function</span>(x) <span class="dv">10</span><span class="sc">^</span>x), <span class="co"># &lt;1&gt;</span></span>
<span id="cb58-428"><a href="#cb58-428" aria-hidden="true" tabindex="-1"></a>                <span class="at">labels =</span> <span class="fu">trans_format</span>(<span class="st">"log10"</span>, <span class="fu">math_format</span>(<span class="dv">10</span><span class="sc">^</span>.x))) <span class="sc">+</span> <span class="co"># &lt;2&gt;</span></span>
<span id="cb58-429"><a href="#cb58-429" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotation_logticks</span>(<span class="at">sides =</span> <span class="st">"b"</span>)  <span class="co"># &lt;3&gt;</span></span>
<span id="cb58-430"><a href="#cb58-430" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-431"><a href="#cb58-431" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb58-432"><a href="#cb58-432" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-433"><a href="#cb58-433" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>Hier wird die $x$-Achse einmal auf die $\log$-Skala gestellt und die <span class="in">`breaks`</span> entsprechend angepasst.</span>
<span id="cb58-434"><a href="#cb58-434" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>Wir ergänzen noch die richtige Schreibweise.</span>
<span id="cb58-435"><a href="#cb58-435" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>Die Ticks werden auch richtig gezeichnet. Du kannst mit <span class="in">`l`</span> auch auf der $y$-Achse $\log$-Ticks anzeigen lassen.</span>
<span id="cb58-436"><a href="#cb58-436" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-437"><a href="#cb58-437" aria-hidden="true" tabindex="-1"></a><span class="fu">### Inverse</span></span>
<span id="cb58-438"><a href="#cb58-438" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-441"><a href="#cb58-441" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb58-442"><a href="#cb58-442" aria-hidden="true" tabindex="-1"></a>inverse_tbl <span class="ot">&lt;-</span> fac1_tbl <span class="sc">|&gt;</span> </span>
<span id="cb58-443"><a href="#cb58-443" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">inverse_hatch_time =</span> <span class="dv">1</span><span class="sc">/</span>hatch_time)</span>
<span id="cb58-444"><a href="#cb58-444" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb58-445"><a href="#cb58-445" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-448"><a href="#cb58-448" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb58-449"><a href="#cb58-449" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb58-450"><a href="#cb58-450" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb58-451"><a href="#cb58-451" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-inverse</span></span>
<span id="cb58-452"><a href="#cb58-452" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-align: center</span></span>
<span id="cb58-453"><a href="#cb58-453" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 3.5</span></span>
<span id="cb58-454"><a href="#cb58-454" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 8</span></span>
<span id="cb58-455"><a href="#cb58-455" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Histogramm der nicht transfomierten und transformierten Daten. **(A)** Nicht transformierte, rohe Daten. **(B)** $inverse$-transformierte Daten. *[Zum Vergrößern anklicken]*"</span></span>
<span id="cb58-456"><a href="#cb58-456" aria-hidden="true" tabindex="-1"></a><span class="co">#| layout-nrow: 1</span></span>
<span id="cb58-457"><a href="#cb58-457" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-458"><a href="#cb58-458" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(inverse_tbl, <span class="fu">aes</span>(hatch_time)) <span class="sc">+</span></span>
<span id="cb58-459"><a href="#cb58-459" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb58-460"><a href="#cb58-460" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">fill =</span> cbbPalette[<span class="dv">2</span>], <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb58-461"><a href="#cb58-461" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Zeit bis zum Schlüpfen in [h]"</span>, <span class="at">y =</span> <span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb58-462"><a href="#cb58-462" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="sc">-</span><span class="dv">100</span>, <span class="cn">NA</span>) </span>
<span id="cb58-463"><a href="#cb58-463" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-464"><a href="#cb58-464" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(inverse_tbl, <span class="fu">aes</span>(inverse_hatch_time)) <span class="sc">+</span></span>
<span id="cb58-465"><a href="#cb58-465" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb58-466"><a href="#cb58-466" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">fill =</span> cbbPalette[<span class="dv">3</span>], <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb58-467"><a href="#cb58-467" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Zeit bis zum Schlüpfen in (1/h)"</span>, <span class="at">y =</span> <span class="st">""</span>)  </span>
<span id="cb58-468"><a href="#cb58-468" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-469"><a href="#cb58-469" aria-hidden="true" tabindex="-1"></a>p1 <span class="sc">+</span> p2 <span class="sc">+</span></span>
<span id="cb58-470"><a href="#cb58-470" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid.minor.x =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb58-471"><a href="#cb58-471" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_annotation</span>(<span class="at">tag_levels =</span> <span class="st">'A'</span>, <span class="at">tag_prefix =</span> <span class="st">'('</span>, <span class="at">tag_suffix =</span> <span class="st">')'</span>) <span class="sc">&amp;</span></span>
<span id="cb58-472"><a href="#cb58-472" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.tag =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">16</span>, <span class="at">face =</span> <span class="st">"bold"</span>))</span>
<span id="cb58-473"><a href="#cb58-473" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-474"><a href="#cb58-474" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb58-475"><a href="#cb58-475" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-476"><a href="#cb58-476" aria-hidden="true" tabindex="-1"></a><span class="fu">### Inverse Normalverteilung</span></span>
<span id="cb58-477"><a href="#cb58-477" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-478"><a href="#cb58-478" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">Inverse normal transformation -- What is it and how to do it?</span><span class="co">](https://yingji15.github.io/2019-08-17-inverse-normal-transformation/)</span></span>
<span id="cb58-479"><a href="#cb58-479" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-482"><a href="#cb58-482" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb58-483"><a href="#cb58-483" aria-hidden="true" tabindex="-1"></a>invers_norm <span class="ot">&lt;-</span> <span class="cf">function</span>(x) <span class="fu">qnorm</span>((<span class="fu">rank</span>(x, <span class="at">na.last=</span><span class="st">"keep"</span>) <span class="sc">-</span> <span class="fl">0.5</span>)<span class="sc">/</span><span class="fu">sum</span>(<span class="sc">!</span><span class="fu">is.na</span>(x)))</span>
<span id="cb58-484"><a href="#cb58-484" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb58-485"><a href="#cb58-485" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-486"><a href="#cb58-486" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">What is the inverse normal transformation (INT) and what are the reasons behind using it?</span><span class="co">](https://stats.stackexchange.com/questions/588992/what-is-the-inverse-normal-transformation-int-and-what-are-the-reasons-behind)</span></span>
<span id="cb58-487"><a href="#cb58-487" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-488"><a href="#cb58-488" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">Rank-Based Inverse Normal Transformations are Increasingly Used, But are They Merited?</span><span class="co">](https://pmc.ncbi.nlm.nih.gov/articles/PMC2921808/)</span> von @beasley2009rank</span>
<span id="cb58-489"><a href="#cb58-489" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-492"><a href="#cb58-492" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb58-493"><a href="#cb58-493" aria-hidden="true" tabindex="-1"></a>invers_norm_tbl <span class="ot">&lt;-</span> fac1_tbl <span class="sc">|&gt;</span> </span>
<span id="cb58-494"><a href="#cb58-494" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">inverse_hatch_time =</span> <span class="fu">invers_norm</span>(hatch_time))</span>
<span id="cb58-495"><a href="#cb58-495" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb58-496"><a href="#cb58-496" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-499"><a href="#cb58-499" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb58-500"><a href="#cb58-500" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb58-501"><a href="#cb58-501" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb58-502"><a href="#cb58-502" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-inverse-norm</span></span>
<span id="cb58-503"><a href="#cb58-503" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-align: center</span></span>
<span id="cb58-504"><a href="#cb58-504" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 3.5</span></span>
<span id="cb58-505"><a href="#cb58-505" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 8</span></span>
<span id="cb58-506"><a href="#cb58-506" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Histogramm der nicht transfomierten und transformierten Daten. **(A)** Nicht transformierte, rohe Daten. **(B)** $inverse$-transformierte Daten. *[Zum Vergrößern anklicken]*"</span></span>
<span id="cb58-507"><a href="#cb58-507" aria-hidden="true" tabindex="-1"></a><span class="co">#| layout-nrow: 1</span></span>
<span id="cb58-508"><a href="#cb58-508" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-509"><a href="#cb58-509" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(invers_norm_tbl, <span class="fu">aes</span>(hatch_time)) <span class="sc">+</span></span>
<span id="cb58-510"><a href="#cb58-510" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb58-511"><a href="#cb58-511" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">fill =</span> cbbPalette[<span class="dv">2</span>], <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb58-512"><a href="#cb58-512" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Zeit bis zum Schlüpfen in [h]"</span>, <span class="at">y =</span> <span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb58-513"><a href="#cb58-513" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="sc">-</span><span class="dv">100</span>, <span class="cn">NA</span>) </span>
<span id="cb58-514"><a href="#cb58-514" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-515"><a href="#cb58-515" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(invers_norm_tbl, <span class="fu">aes</span>(inverse_hatch_time)) <span class="sc">+</span></span>
<span id="cb58-516"><a href="#cb58-516" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb58-517"><a href="#cb58-517" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">fill =</span> cbbPalette[<span class="dv">3</span>], <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb58-518"><a href="#cb58-518" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Zeit bis zum Schlüpfen in (1/h)"</span>, <span class="at">y =</span> <span class="st">""</span>)  </span>
<span id="cb58-519"><a href="#cb58-519" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-520"><a href="#cb58-520" aria-hidden="true" tabindex="-1"></a>p1 <span class="sc">+</span> p2 <span class="sc">+</span></span>
<span id="cb58-521"><a href="#cb58-521" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid.minor.x =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb58-522"><a href="#cb58-522" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_annotation</span>(<span class="at">tag_levels =</span> <span class="st">'A'</span>, <span class="at">tag_prefix =</span> <span class="st">'('</span>, <span class="at">tag_suffix =</span> <span class="st">')'</span>) <span class="sc">&amp;</span></span>
<span id="cb58-523"><a href="#cb58-523" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.tag =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">16</span>, <span class="at">face =</span> <span class="st">"bold"</span>))</span>
<span id="cb58-524"><a href="#cb58-524" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-525"><a href="#cb58-525" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb58-526"><a href="#cb58-526" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-527"><a href="#cb58-527" aria-hidden="true" tabindex="-1"></a><span class="fu">### Rangtransformation</span></span>
<span id="cb58-528"><a href="#cb58-528" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-529"><a href="#cb58-529" aria-hidden="true" tabindex="-1"></a>Der Ausweg schlechthin bis in die 90ziger Jahre war vermutlich die nichtparametrische Statistik, wenn es um nicht normalverteilte Messwerte ging. Es wird dann eben ein nichtparametrischer Test, wie der Wilcoxon oder eben Mann-Whitney gerechnet. Und hier kommt dann die Rangtransformations ins Spiel. *Eigentlich* ist die gesamte Nichtparametrik nur eine Rangtransformation auf der wir dann auch genauso gut dann einen t-Test oder eine ANOVA rechnen könnten. Dazu dann aber mehr in den jeweiligen Kapiteln zu den einzelnen nichtparametrischen Tests.</span>
<span id="cb58-530"><a href="#cb58-530" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-531"><a href="#cb58-531" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">Der Wilcoxon-Mann-Whitney-Test</span><span class="co">](#sec-utest)</span> oder auch U-Test ist der t-Test auf den Rängen eines Messwertes. Wir vergleichen hier zwei Gruppen miteinander. Wenn wir mehr Gruppen haben, die wir vergleichen wollen, dann brauchen wir mehrere paarweise Wilcoxon Tests um die signifikanten Unterschiede zu bestimmen.</span>
<span id="cb58-532"><a href="#cb58-532" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">Der Kruskal-Wallis-Test</span><span class="co">](#sec-kruskal)</span> ist die einfaktorielle ANOVA auf den Rängen eines Messwertes. Wir vergleichen hier drei oder mehr Gruppen simultan miteinander. Wenn wir dann wissen wollen, welcher paarweise Vergleich signifikant ist, brauchen wir dann einen Posthoc-Test.</span>
<span id="cb58-533"><a href="#cb58-533" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-534"><a href="#cb58-534" aria-hidden="true" tabindex="-1"></a>Was ist also die Rangtransformation? Wir geben einfach den sortierten Rang des Messwertes über alle Gruppen. Dann können wir auf dem rangierten Messwert weiterrechnen. In den folgenden Tabellen siehst du dann einmal die orginalen Sprungweiten gemessen in <span class="sc">\[</span>cm<span class="sc">\]</span> sowie deren rangierten Gegenstücke.</span>
<span id="cb58-535"><a href="#cb58-535" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-538"><a href="#cb58-538" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb58-539"><a href="#cb58-539" aria-hidden="true" tabindex="-1"></a>signed_rank <span class="ot">&lt;-</span> <span class="cf">function</span>(x) <span class="fu">sign</span>(x) <span class="sc">*</span> <span class="fu">rank</span>(<span class="fu">abs</span>(x))</span>
<span id="cb58-540"><a href="#cb58-540" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb58-541"><a href="#cb58-541" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-542"><a href="#cb58-542" aria-hidden="true" tabindex="-1"></a><span class="in">`rank()`</span></span>
<span id="cb58-543"><a href="#cb58-543" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-544"><a href="#cb58-544" aria-hidden="true" tabindex="-1"></a><span class="fu">## Skalierung</span></span>
<span id="cb58-545"><a href="#cb58-545" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-546"><a href="#cb58-546" aria-hidden="true" tabindex="-1"></a><span class="fu">### Standardisierung</span></span>
<span id="cb58-547"><a href="#cb58-547" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-548"><a href="#cb58-548" aria-hidden="true" tabindex="-1"></a>Die Standardisierung wird auch $z$-Transformation genannt. In dem Fall der Standardisierung schieben wir die Daten auf den Ursprung, in dem wir von jedem Datenpunkt $y_i$ den Mittelwert $\bar{y}$ abziehen. Dann setzen wir noch die Standardabweichung auf Eins in dem wir durch die Standardabweichung $y_s$ teilen. Unser standardisiertes $y$ ist nun standardnormalverteilt mit $\mathcal{N(0,1)}$. Wir nutzen für die Standardisierung folgende Formel.</span>
<span id="cb58-549"><a href="#cb58-549" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-550"><a href="#cb58-550" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb58-551"><a href="#cb58-551" aria-hidden="true" tabindex="-1"></a>y_z = \cfrac{y_i - \bar{y}}{s_y} </span>
<span id="cb58-552"><a href="#cb58-552" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb58-553"><a href="#cb58-553" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-554"><a href="#cb58-554" aria-hidden="true" tabindex="-1"></a>In R können wir für die Standardisierung die Funktion <span class="in">`scale()`</span> verwenden. Wir müssen auch nichts weiter in den Optionen von <span class="in">`scale()`</span> angeben. Die Standardwerte der Funktion sind so eingestellt, dass eine Standardnormalverteilung berechnet wird. Wir können auch die Funktion <span class="in">`transform()`</span> aus dem R Paket <span class="in">`{dlookr}`</span> verwenden. Die Option wäre dann <span class="in">`zscore`</span>.</span>
<span id="cb58-555"><a href="#cb58-555" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-558"><a href="#cb58-558" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb58-559"><a href="#cb58-559" aria-hidden="true" tabindex="-1"></a>scale_tbl <span class="ot">&lt;-</span> fac1_tbl <span class="sc">|&gt;</span> </span>
<span id="cb58-560"><a href="#cb58-560" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">scale_jump_length =</span> <span class="fu">scale</span>(jump_length))</span>
<span id="cb58-561"><a href="#cb58-561" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb58-562"><a href="#cb58-562" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-563"><a href="#cb58-563" aria-hidden="true" tabindex="-1"></a>In @fig-log-scale-3-1 sehen wir nochmal die nicht transformierten, rohen Daten. Wir haben in diesem Beispiel die normalvertielte Variable <span class="in">`jump_length`</span> gewählt. Der Mittelwert von <span class="in">`jump_length`</span> ist <span class="in">`r round(mean(fac1_tbl$jump_length), 2)`</span> und die Standardabweichung ist <span class="in">`r round(sd(fac1_tbl$jump_length), 2)`</span>. Ziehen wir nun von jedem Wert von <span class="in">`jump_length`</span> den Mittelwert mit 19.3 ab, so haben wir einen neuen Schwerpunkt bei Null. Teilen wir dann jede Zahl durch 3.36 so haben wir eine reduzierte Spannweite der Verteilung. Es ergibt sich die @fig-log-scale-3-2 als Standardnormalverteilung. Die Zahlen der auf der x-Achse haben jetzt aber keine Bedeutung mehr. Wie können die Sprungweite auf der $z$-Skala nicht mehr biologisch interpretieren.</span>
<span id="cb58-564"><a href="#cb58-564" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-567"><a href="#cb58-567" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb58-568"><a href="#cb58-568" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb58-569"><a href="#cb58-569" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb58-570"><a href="#cb58-570" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-log-scale-3</span></span>
<span id="cb58-571"><a href="#cb58-571" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-align: center</span></span>
<span id="cb58-572"><a href="#cb58-572" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 3.5</span></span>
<span id="cb58-573"><a href="#cb58-573" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 8</span></span>
<span id="cb58-574"><a href="#cb58-574" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Histogramm der nicht transfomierten und transformierten Daten. **(A)** Nicht transformierte, rohe Daten. **(B)** $inverse$-transformierte Daten. *[Zum Vergrößern anklicken]*"</span></span>
<span id="cb58-575"><a href="#cb58-575" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-576"><a href="#cb58-576" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(scale_tbl, <span class="fu">aes</span>(jump_length)) <span class="sc">+</span></span>
<span id="cb58-577"><a href="#cb58-577" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">fill =</span> cbbPalette[<span class="dv">2</span>], <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb58-578"><a href="#cb58-578" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb58-579"><a href="#cb58-579" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Sprungweite in [cm]"</span>, <span class="at">y =</span> <span class="st">"Anzahl"</span>)</span>
<span id="cb58-580"><a href="#cb58-580" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-581"><a href="#cb58-581" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(scale_tbl, <span class="fu">aes</span>(scale_jump_length)) <span class="sc">+</span></span>
<span id="cb58-582"><a href="#cb58-582" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">fill =</span> cbbPalette[<span class="dv">3</span>], <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb58-583"><a href="#cb58-583" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb58-584"><a href="#cb58-584" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Sprungweite auf der z-Skala"</span>, <span class="at">y =</span> <span class="st">"Anzahl"</span>)</span>
<span id="cb58-585"><a href="#cb58-585" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-586"><a href="#cb58-586" aria-hidden="true" tabindex="-1"></a>p1 <span class="sc">+</span> p2 <span class="sc">+</span></span>
<span id="cb58-587"><a href="#cb58-587" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid.minor.x =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb58-588"><a href="#cb58-588" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_annotation</span>(<span class="at">tag_levels =</span> <span class="st">'A'</span>, <span class="at">tag_prefix =</span> <span class="st">'('</span>, <span class="at">tag_suffix =</span> <span class="st">')'</span>) <span class="sc">&amp;</span></span>
<span id="cb58-589"><a href="#cb58-589" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.tag =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">16</span>, <span class="at">face =</span> <span class="st">"bold"</span>))</span>
<span id="cb58-590"><a href="#cb58-590" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb58-591"><a href="#cb58-591" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-592"><a href="#cb58-592" aria-hidden="true" tabindex="-1"></a><span class="fu">### Normalisierung</span></span>
<span id="cb58-593"><a href="#cb58-593" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-594"><a href="#cb58-594" aria-hidden="true" tabindex="-1"></a>Abschließend wollen wir uns nochmal die Normalisierung anschauen. In diesem Fall wollen wir die Daten so transformieren, dass die Daten nur noch in der Spannweite 0 bis 1 vorkommen. Egal wie die Einheiten vorher waren, alle Variablen haben jetzt nur noch eine Ausprägung von 0 bis 1. Das ist besonders wichtig wenn wir viele Variablen haben und anhand der Variablen eine Vorhersage machen wollen. Uns interessieren die Werte in den Variablen an sich nicht, sondern wir wollen ein Outcome vorhersagen. Wir brauchen die Normalisierung später für das maschinelle Lernen und die Klassifikation. Die Formel für die Normalisierung lautet wie folgt.</span>
<span id="cb58-595"><a href="#cb58-595" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-596"><a href="#cb58-596" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb58-597"><a href="#cb58-597" aria-hidden="true" tabindex="-1"></a>y_n = \cfrac{y_i - \min(y)}{\max(y) - \min(y)} </span>
<span id="cb58-598"><a href="#cb58-598" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb58-599"><a href="#cb58-599" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-600"><a href="#cb58-600" aria-hidden="true" tabindex="-1"></a>In R gibt es die Normalisierungsfunktion nicht direkt. Wir könnten hier ein extra Paket laden, aber bei so einer simplen Formel können wir auch gleich die Berechnung in der Funktion <span class="in">`mutate()`</span> machen. Wir müssen nur etwas mit den Klammern aufpassen. Wir können auch die Funktion <span class="in">`transform()`</span> aus dem R Paket <span class="in">`{dlookr}`</span> mit der Option <span class="in">`minmax`</span> verwenden.</span>
<span id="cb58-601"><a href="#cb58-601" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-604"><a href="#cb58-604" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb58-605"><a href="#cb58-605" aria-hidden="true" tabindex="-1"></a>norm_tbl <span class="ot">&lt;-</span> fac1_tbl <span class="sc">|&gt;</span> </span>
<span id="cb58-606"><a href="#cb58-606" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">norm_jump_length =</span> (jump_length <span class="sc">-</span> <span class="fu">min</span>(jump_length))<span class="sc">/</span>(<span class="fu">max</span>(jump_length) <span class="sc">-</span> <span class="fu">min</span>(jump_length)))</span>
<span id="cb58-607"><a href="#cb58-607" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb58-608"><a href="#cb58-608" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-609"><a href="#cb58-609" aria-hidden="true" tabindex="-1"></a>In @fig-log-scale-4-1 sehen wir nochmal die nicht transformierten, rohen Daten. In @fig-log-scale-4-2 sehen wir die normalisierten Daten. Hier fällt dann auf, dass die normalisierten Sprungweiten nur noch Werte zwischen Null und Eins annehmen. Die Zahlen der auf der x-Achse haben jetzt aber keine Bedeutung mehr. Wie können die normalisierten Sprungweiten nicht mehr biologisch interpretieren.</span>
<span id="cb58-610"><a href="#cb58-610" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-613"><a href="#cb58-613" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb58-614"><a href="#cb58-614" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb58-615"><a href="#cb58-615" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb58-616"><a href="#cb58-616" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-log-scale-4</span></span>
<span id="cb58-617"><a href="#cb58-617" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-align: center</span></span>
<span id="cb58-618"><a href="#cb58-618" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 3.5</span></span>
<span id="cb58-619"><a href="#cb58-619" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 8</span></span>
<span id="cb58-620"><a href="#cb58-620" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Histogramm der nicht transfomierten und transformierten Daten. **(A)** Nicht transformierte, rohe Daten. **(B)** $inverse$-transformierte Daten. *[Zum Vergrößern anklicken]*"</span></span>
<span id="cb58-621"><a href="#cb58-621" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-622"><a href="#cb58-622" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(norm_tbl, <span class="fu">aes</span>(jump_length)) <span class="sc">+</span></span>
<span id="cb58-623"><a href="#cb58-623" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">fill =</span> cbbPalette[<span class="dv">2</span>], <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb58-624"><a href="#cb58-624" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb58-625"><a href="#cb58-625" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Sprungweite in [cm]"</span>, <span class="at">y =</span> <span class="st">"Anzahl"</span>)</span>
<span id="cb58-626"><a href="#cb58-626" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-627"><a href="#cb58-627" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(norm_tbl, <span class="fu">aes</span>(norm_jump_length)) <span class="sc">+</span></span>
<span id="cb58-628"><a href="#cb58-628" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">fill =</span> cbbPalette[<span class="dv">3</span>], <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb58-629"><a href="#cb58-629" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb58-630"><a href="#cb58-630" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Normalisierte Sprungweite"</span>, <span class="at">y =</span> <span class="st">"Anzahl"</span>)</span>
<span id="cb58-631"><a href="#cb58-631" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-632"><a href="#cb58-632" aria-hidden="true" tabindex="-1"></a>p1 <span class="sc">+</span> p2 <span class="sc">+</span></span>
<span id="cb58-633"><a href="#cb58-633" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid.minor.x =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb58-634"><a href="#cb58-634" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_annotation</span>(<span class="at">tag_levels =</span> <span class="st">'A'</span>, <span class="at">tag_prefix =</span> <span class="st">'('</span>, <span class="at">tag_suffix =</span> <span class="st">')'</span>) <span class="sc">&amp;</span></span>
<span id="cb58-635"><a href="#cb58-635" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.tag =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">16</span>, <span class="at">face =</span> <span class="st">"bold"</span>))</span>
<span id="cb58-636"><a href="#cb58-636" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb58-637"><a href="#cb58-637" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-638"><a href="#cb58-638" aria-hidden="true" tabindex="-1"></a><span class="fu">## Automatische Transformationen...</span></span>
<span id="cb58-639"><a href="#cb58-639" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-640"><a href="#cb58-640" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">Normalisierung vs. Standardisierung: Wie man den Unterschied erkennt</span><span class="co">](https://www.datacamp.com/de/tutorial/normalization-vs-standardization)</span></span>
<span id="cb58-641"><a href="#cb58-641" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-642"><a href="#cb58-642" aria-hidden="true" tabindex="-1"></a>Die Standardisierung versucht auch, die Symmetrie mit dem Mittelwert 0 und der Standardabweichung 1 zu erzwingen. Bei der Normalisierung ist die Wahrscheinlichkeit einer Schiefe größer, da Ihre Skalierungsfaktoren die beiden extremsten Datenpunkte sind.</span>
<span id="cb58-643"><a href="#cb58-643" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-644"><a href="#cb58-644" aria-hidden="true" tabindex="-1"></a><span class="fu">### ... mit `{bestNormalize}`</span></span>
<span id="cb58-645"><a href="#cb58-645" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-646"><a href="#cb58-646" aria-hidden="true" tabindex="-1"></a>Dann sind wir bis hierher gekommen und fragen uns nun welche ist den jetzt die beste Transformation für unsere Daten um einigermaßen eine Normalverteilung hinzubekommen? Da hilft uns jetzt das <span class="co">[</span><span class="ot">R Paket `{bestNormalize}`</span><span class="co">](https://cran.r-project.org/web/packages/bestNormalize/vignettes/bestNormalize.html)</span>. Die <span class="co">[</span><span class="ot">Kurzanleitung zum Paket</span><span class="co">](https://petersonr.github.io/bestNormalize/index.html)</span> erlaubt es automatisiert auf einem Datenvektor die beste Transformation zu finden um die Daten in eine Normalverteilung zu verwandeln.</span>
<span id="cb58-647"><a href="#cb58-647" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-650"><a href="#cb58-650" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb58-651"><a href="#cb58-651" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb58-652"><a href="#cb58-652" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb58-653"><a href="#cb58-653" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-trans-bestNorm-1</span></span>
<span id="cb58-654"><a href="#cb58-654" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-align: center</span></span>
<span id="cb58-655"><a href="#cb58-655" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 3.5</span></span>
<span id="cb58-656"><a href="#cb58-656" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 8</span></span>
<span id="cb58-657"><a href="#cb58-657" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Histogramm."</span></span>
<span id="cb58-658"><a href="#cb58-658" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(fac1_tbl, <span class="fu">aes</span>(hatch_time)) <span class="sc">+</span></span>
<span id="cb58-659"><a href="#cb58-659" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">fill =</span> cbbPalette[<span class="dv">4</span>], <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb58-660"><a href="#cb58-660" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() </span>
<span id="cb58-661"><a href="#cb58-661" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb58-662"><a href="#cb58-662" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-663"><a href="#cb58-663" aria-hidden="true" tabindex="-1"></a>Jetzt können wir die Funktion <span class="in">`bestNormalize()`</span> nutzen um uns die beste Transformationsmethode wiedergeben zu lassen. Das ist super praktisch in der Anwendung. Wir können uns theoretisch noch verschiedene Gütekriterien aussuchen aber für hier reicht die Standardimplementierung. Wichtig ist noch, dass wir hier eine Kreuzvalidierung durchführen, so dass die Ergebnisse und die Auswahl des Algorithmus robust sein sollte.</span>
<span id="cb58-664"><a href="#cb58-664" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-667"><a href="#cb58-667" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb58-668"><a href="#cb58-668" aria-hidden="true" tabindex="-1"></a>bn_obj <span class="ot">&lt;-</span> <span class="fu">bestNormalize</span>(fac1_tbl<span class="sc">$</span>hatch_time)</span>
<span id="cb58-669"><a href="#cb58-669" aria-hidden="true" tabindex="-1"></a>bn_obj</span>
<span id="cb58-670"><a href="#cb58-670" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb58-671"><a href="#cb58-671" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-672"><a href="#cb58-672" aria-hidden="true" tabindex="-1"></a>Laut dem Algorithmus sollen wir eine <span class="in">`Box Cox Transformation`</span> durchführen. Okay, wie machen wir das jetzt? Wir hätten zwar die Parameter in der Ausgabe angegeben und die könnten wir dann auch in einer Veröffentlichung angeben, aber wenn es schneller gehen soll, dann können wir die Funktion <span class="in">`predict()`</span> nutzen, die uns die transformierten <span class="in">`x`</span> Werte wiedergibt.</span>
<span id="cb58-673"><a href="#cb58-673" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-676"><a href="#cb58-676" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb58-677"><a href="#cb58-677" aria-hidden="true" tabindex="-1"></a>x_trans <span class="ot">&lt;-</span> <span class="fu">predict</span>(bn_obj)</span>
<span id="cb58-678"><a href="#cb58-678" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb58-679"><a href="#cb58-679" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-680"><a href="#cb58-680" aria-hidden="true" tabindex="-1"></a>Dann nochmal schnell gucken, ob das auch mit der Rücktransformation klappen würde.</span>
<span id="cb58-681"><a href="#cb58-681" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-684"><a href="#cb58-684" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb58-685"><a href="#cb58-685" aria-hidden="true" tabindex="-1"></a>x_trans_back <span class="ot">&lt;-</span> <span class="fu">predict</span>(bn_obj, <span class="at">newdata =</span> x_trans, <span class="at">inverse =</span> <span class="cn">TRUE</span>)</span>
<span id="cb58-686"><a href="#cb58-686" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb58-687"><a href="#cb58-687" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-688"><a href="#cb58-688" aria-hidden="true" tabindex="-1"></a>Einmal dann der Vergleich ob alle <span class="in">`x_trans_back`</span> Werte den ursprünglichen <span class="in">`x`</span> Werten entsprechen. Ja, das sieht gut aus.</span>
<span id="cb58-689"><a href="#cb58-689" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-692"><a href="#cb58-692" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb58-693"><a href="#cb58-693" aria-hidden="true" tabindex="-1"></a><span class="fu">all.equal</span>(x_trans_back, fac1_tbl<span class="sc">$</span>hatch_time)</span>
<span id="cb58-694"><a href="#cb58-694" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb58-695"><a href="#cb58-695" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-696"><a href="#cb58-696" aria-hidden="true" tabindex="-1"></a>Und zum Abschluss nochmal eine Abbildung der transformierten <span class="in">`x`</span> Werte.In der folgenden Abbildung siehst du dann einmal das entsprechende Histogramm. Das sieht doch sehr gut aus und wir mussten nicht zig verschiedene Algorithmen selber testen.</span>
<span id="cb58-697"><a href="#cb58-697" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-700"><a href="#cb58-700" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb58-701"><a href="#cb58-701" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb58-702"><a href="#cb58-702" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb58-703"><a href="#cb58-703" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-trans-bestNorm-2</span></span>
<span id="cb58-704"><a href="#cb58-704" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-align: center</span></span>
<span id="cb58-705"><a href="#cb58-705" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 3.5</span></span>
<span id="cb58-706"><a href="#cb58-706" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 8</span></span>
<span id="cb58-707"><a href="#cb58-707" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Histogramm der transformierten `x` Werte mit der Box-Cos Transformation aus dem R Paket `{bestNormalize}`."</span></span>
<span id="cb58-708"><a href="#cb58-708" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-709"><a href="#cb58-709" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(log_tbl, <span class="fu">aes</span>(hatch_time)) <span class="sc">+</span></span>
<span id="cb58-710"><a href="#cb58-710" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb58-711"><a href="#cb58-711" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">fill =</span> cbbPalette[<span class="dv">2</span>], <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb58-712"><a href="#cb58-712" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Zeit bis zum Schlüpfen in [h]"</span>, <span class="at">y =</span> <span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb58-713"><a href="#cb58-713" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="sc">-</span><span class="dv">100</span>, <span class="cn">NA</span>) </span>
<span id="cb58-714"><a href="#cb58-714" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-715"><a href="#cb58-715" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="fu">as_tibble</span>(x_trans), <span class="fu">aes</span>(x_trans)) <span class="sc">+</span></span>
<span id="cb58-716"><a href="#cb58-716" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb58-717"><a href="#cb58-717" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">fill =</span> cbbPalette[<span class="dv">3</span>], <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb58-718"><a href="#cb58-718" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Zeit bis zum Schlüpfen in log(h)"</span>, <span class="at">y =</span> <span class="st">""</span>)  </span>
<span id="cb58-719"><a href="#cb58-719" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-720"><a href="#cb58-720" aria-hidden="true" tabindex="-1"></a>p1 <span class="sc">+</span> p2 <span class="sc">+</span></span>
<span id="cb58-721"><a href="#cb58-721" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid.minor.x =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb58-722"><a href="#cb58-722" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_annotation</span>(<span class="at">tag_levels =</span> <span class="st">'A'</span>, <span class="at">tag_prefix =</span> <span class="st">'('</span>, <span class="at">tag_suffix =</span> <span class="st">')'</span>) <span class="sc">&amp;</span></span>
<span id="cb58-723"><a href="#cb58-723" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.tag =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">16</span>, <span class="at">face =</span> <span class="st">"bold"</span>))</span>
<span id="cb58-724"><a href="#cb58-724" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb58-725"><a href="#cb58-725" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-726"><a href="#cb58-726" aria-hidden="true" tabindex="-1"></a><span class="fu">### ... mit `{rcompanion}`</span></span>
<span id="cb58-727"><a href="#cb58-727" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-728"><a href="#cb58-728" aria-hidden="true" tabindex="-1"></a><span class="in">`transformTukey()`</span> aus dem R Paket <span class="in">`{rcompanion}`</span></span>
<span id="cb58-729"><a href="#cb58-729" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-732"><a href="#cb58-732" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb58-733"><a href="#cb58-733" aria-hidden="true" tabindex="-1"></a>tt_obj <span class="ot">&lt;-</span> <span class="fu">transformTukey</span>(fac1_tbl<span class="sc">$</span>hatch_time,</span>
<span id="cb58-734"><a href="#cb58-734" aria-hidden="true" tabindex="-1"></a>                         <span class="at">plotit =</span> <span class="cn">FALSE</span>)</span>
<span id="cb58-735"><a href="#cb58-735" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb58-736"><a href="#cb58-736" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-739"><a href="#cb58-739" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb58-740"><a href="#cb58-740" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb58-741"><a href="#cb58-741" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb58-742"><a href="#cb58-742" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-trans-transformTukey</span></span>
<span id="cb58-743"><a href="#cb58-743" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-align: center</span></span>
<span id="cb58-744"><a href="#cb58-744" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 3.5</span></span>
<span id="cb58-745"><a href="#cb58-745" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 8</span></span>
<span id="cb58-746"><a href="#cb58-746" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Histogramm ."</span></span>
<span id="cb58-747"><a href="#cb58-747" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-748"><a href="#cb58-748" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(log_tbl, <span class="fu">aes</span>(hatch_time)) <span class="sc">+</span></span>
<span id="cb58-749"><a href="#cb58-749" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb58-750"><a href="#cb58-750" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">fill =</span> cbbPalette[<span class="dv">2</span>], <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb58-751"><a href="#cb58-751" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Zeit bis zum Schlüpfen in [h]"</span>, <span class="at">y =</span> <span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb58-752"><a href="#cb58-752" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="sc">-</span><span class="dv">100</span>, <span class="cn">NA</span>) </span>
<span id="cb58-753"><a href="#cb58-753" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-754"><a href="#cb58-754" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="fu">as_tibble</span>(tt_obj), <span class="fu">aes</span>(tt_obj)) <span class="sc">+</span></span>
<span id="cb58-755"><a href="#cb58-755" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb58-756"><a href="#cb58-756" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">fill =</span> cbbPalette[<span class="dv">3</span>], <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb58-757"><a href="#cb58-757" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Zeit bis zum Schlüpfen in log(h)"</span>, <span class="at">y =</span> <span class="st">""</span>)  </span>
<span id="cb58-758"><a href="#cb58-758" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-759"><a href="#cb58-759" aria-hidden="true" tabindex="-1"></a>p1 <span class="sc">+</span> p2 <span class="sc">+</span></span>
<span id="cb58-760"><a href="#cb58-760" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid.minor.x =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb58-761"><a href="#cb58-761" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_annotation</span>(<span class="at">tag_levels =</span> <span class="st">'A'</span>, <span class="at">tag_prefix =</span> <span class="st">'('</span>, <span class="at">tag_suffix =</span> <span class="st">')'</span>) <span class="sc">&amp;</span></span>
<span id="cb58-762"><a href="#cb58-762" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.tag =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">16</span>, <span class="at">face =</span> <span class="st">"bold"</span>))</span>
<span id="cb58-763"><a href="#cb58-763" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-764"><a href="#cb58-764" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb58-765"><a href="#cb58-765" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-766"><a href="#cb58-766" aria-hidden="true" tabindex="-1"></a><span class="fu">### ... mit `{LambertW}`</span></span>
<span id="cb58-767"><a href="#cb58-767" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-768"><a href="#cb58-768" aria-hidden="true" tabindex="-1"></a><span class="in">`Gaussianize()`</span> aus dem <span class="co">[</span><span class="ot">R Paket `{LambertW}`</span><span class="co">](https://cran.r-project.org/web/packages/LambertW/index.html)</span></span>
<span id="cb58-769"><a href="#cb58-769" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-770"><a href="#cb58-770" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>type: what type of non-normality: symmetric heavy-tails "h" (default), skewed heavy-tails "hh", or just skewed "s".</span>
<span id="cb58-771"><a href="#cb58-771" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-774"><a href="#cb58-774" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb58-775"><a href="#cb58-775" aria-hidden="true" tabindex="-1"></a>gaus_obj <span class="ot">&lt;-</span> <span class="fu">Gaussianize</span>(fac1_tbl<span class="sc">$</span>hatch_time, <span class="at">type =</span> <span class="st">"s"</span>)</span>
<span id="cb58-776"><a href="#cb58-776" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb58-777"><a href="#cb58-777" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-780"><a href="#cb58-780" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb58-781"><a href="#cb58-781" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb58-782"><a href="#cb58-782" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb58-783"><a href="#cb58-783" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-trans-Gaussianize</span></span>
<span id="cb58-784"><a href="#cb58-784" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-align: center</span></span>
<span id="cb58-785"><a href="#cb58-785" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 3.5</span></span>
<span id="cb58-786"><a href="#cb58-786" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 8</span></span>
<span id="cb58-787"><a href="#cb58-787" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Histogramm ."</span></span>
<span id="cb58-788"><a href="#cb58-788" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-789"><a href="#cb58-789" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(log_tbl, <span class="fu">aes</span>(hatch_time)) <span class="sc">+</span></span>
<span id="cb58-790"><a href="#cb58-790" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb58-791"><a href="#cb58-791" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">fill =</span> cbbPalette[<span class="dv">2</span>], <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb58-792"><a href="#cb58-792" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Zeit bis zum Schlüpfen in [h]"</span>, <span class="at">y =</span> <span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb58-793"><a href="#cb58-793" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="sc">-</span><span class="dv">100</span>, <span class="cn">NA</span>) </span>
<span id="cb58-794"><a href="#cb58-794" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-795"><a href="#cb58-795" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="fu">as_tibble</span>(gaus_obj), <span class="fu">aes</span>(gaus_obj)) <span class="sc">+</span></span>
<span id="cb58-796"><a href="#cb58-796" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb58-797"><a href="#cb58-797" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">fill =</span> cbbPalette[<span class="dv">3</span>], <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb58-798"><a href="#cb58-798" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Zeit bis zum Schlüpfen in log(h)"</span>, <span class="at">y =</span> <span class="st">""</span>)  </span>
<span id="cb58-799"><a href="#cb58-799" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-800"><a href="#cb58-800" aria-hidden="true" tabindex="-1"></a>p1 <span class="sc">+</span> p2 <span class="sc">+</span></span>
<span id="cb58-801"><a href="#cb58-801" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid.minor.x =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb58-802"><a href="#cb58-802" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_annotation</span>(<span class="at">tag_levels =</span> <span class="st">'A'</span>, <span class="at">tag_prefix =</span> <span class="st">'('</span>, <span class="at">tag_suffix =</span> <span class="st">')'</span>) <span class="sc">&amp;</span></span>
<span id="cb58-803"><a href="#cb58-803" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.tag =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">16</span>, <span class="at">face =</span> <span class="st">"bold"</span>))</span>
<span id="cb58-804"><a href="#cb58-804" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-805"><a href="#cb58-805" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb58-806"><a href="#cb58-806" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-807"><a href="#cb58-807" aria-hidden="true" tabindex="-1"></a><span class="fu">### ... mit `{MASS}`</span></span>
<span id="cb58-808"><a href="#cb58-808" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-809"><a href="#cb58-809" aria-hidden="true" tabindex="-1"></a>Die Box-Cox-Transformation ist ein statistisches Verfahren zur Umwandlung von nicht normalverteilten Daten in eine Normalverteilung. Die Transformation ist nicht so einfach wie die logarithmische Transformation oder die Quadratwurzeltransformation und erfordert etwas mehr Erklärung. Beginnen wir zunächst die Gleichung zu verstehen, die die Transformation beschreibt. Die grundsätzliche Idee ist, dass wir unser $y$ als Outcome mit einem $\lambda$-Exponenten transformieren. Die Frage ist jetzt, welches $\lambda$ produziert die besten normalverteilten Daten? Wenn wir ein $\lambda$ von Null finden sollten, dann rechnen wir einfach eine $\log$-Transformation. Die Idee ist also recht simpel.</span>
<span id="cb58-810"><a href="#cb58-810" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-811"><a href="#cb58-811" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb58-812"><a href="#cb58-812" aria-hidden="true" tabindex="-1"></a>y(\lambda)=\left<span class="sc">\{</span>\begin{matrix} \dfrac{y^{\lambda}-1} {\lambda} &amp; \quad  \mathrm{f\ddot ur\;\;}\lambda \ne 0 <span class="sc">\\</span><span class="co">[</span><span class="ot">10pt</span><span class="co">]</span> \log(y) &amp;\quad  \mathrm{f\ddot ur\;\;}\lambda = 0\end{matrix}\right.</span>
<span id="cb58-813"><a href="#cb58-813" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb58-814"><a href="#cb58-814" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-815"><a href="#cb58-815" aria-hidden="true" tabindex="-1"></a>Wir werden natürlich jetzt nicht händisch alle möglichen $\lambda$ durchprobieren bis wir das beste $\lambda$ gefunden haben. Dafür gibt es die Funktion <span class="in">`boxcox`</span> aus dem R Paket <span class="in">`{MASS}`</span>, die ein lineares Modell benötigt. Daher bauen wir usn erst unser lineares Modell und dann stecken wir das Modell in die Funktion <span class="in">`boxcox()`</span>.</span>
<span id="cb58-816"><a href="#cb58-816" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-819"><a href="#cb58-819" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb58-820"><a href="#cb58-820" aria-hidden="true" tabindex="-1"></a>jump_mod <span class="ot">&lt;-</span> <span class="fu">lm</span>(jump_length <span class="sc">~</span> <span class="dv">1</span>, <span class="at">data =</span> fac1_tbl)</span>
<span id="cb58-821"><a href="#cb58-821" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb58-822"><a href="#cb58-822" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-823"><a href="#cb58-823" aria-hidden="true" tabindex="-1"></a>Jetzt einmal die Funktion <span class="in">`boxcox()`</span> ausführen und danach das $\lambda$ extrahieren. Hier ist es etwas umständlicher, da das $\lambda$ in der Ausgabe der Funktion etwas vergraben ist. Dafür ist das R Paket <span class="in">`{MASS}`</span> einfach nicht mehr das jüngste Paket und hat keine so guten Funktionen zum Erhalten von wichtigen Parametern. Ich möchte die Abbildung nicht haben, daher die Option <span class="in">`plotit = FALSE`</span>.</span>
<span id="cb58-824"><a href="#cb58-824" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-827"><a href="#cb58-827" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb58-828"><a href="#cb58-828" aria-hidden="true" tabindex="-1"></a>bc_obj <span class="ot">&lt;-</span> MASS<span class="sc">::</span><span class="fu">boxcox</span>(jump_mod, <span class="at">plotit =</span> <span class="cn">FALSE</span>)</span>
<span id="cb58-829"><a href="#cb58-829" aria-hidden="true" tabindex="-1"></a>lambda <span class="ot">&lt;-</span> bc_obj<span class="sc">$</span>x[<span class="fu">which.max</span>(bc_obj<span class="sc">$</span>y)]</span>
<span id="cb58-830"><a href="#cb58-830" aria-hidden="true" tabindex="-1"></a>lambda</span>
<span id="cb58-831"><a href="#cb58-831" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb58-832"><a href="#cb58-832" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-833"><a href="#cb58-833" aria-hidden="true" tabindex="-1"></a>Wir erhalten also ein $\lambda$ von <span class="in">`r lambda`</span> wieder. Dieses $\lambda$ können wir dann nutzen um unsere Daten nach Box-Cox zu transformieren. Dafür übersetzen wir dann die obige Matheformel einmal in R Code.</span>
<span id="cb58-834"><a href="#cb58-834" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-837"><a href="#cb58-837" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb58-838"><a href="#cb58-838" aria-hidden="true" tabindex="-1"></a>fac1_tbl <span class="ot">&lt;-</span> fac1_tbl <span class="sc">|&gt;</span></span>
<span id="cb58-839"><a href="#cb58-839" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">jump_boxcox =</span> ((jump_length <span class="sc">^</span> lambda <span class="sc">-</span> <span class="dv">1</span>)<span class="sc">/</span>lambda))</span>
<span id="cb58-840"><a href="#cb58-840" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb58-841"><a href="#cb58-841" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-842"><a href="#cb58-842" aria-hidden="true" tabindex="-1"></a>In der @fig-boxcox-ggplot sehen wir dann einmal das Ergebnis der Transformation. Sieht gar nicht mal so schlecht aus und noch besser als die reine $\log$-Transformation. Wie immer musst du aber auch hier rumprobieren, was dann am besten einer Normalverteilung folgt.</span>
<span id="cb58-843"><a href="#cb58-843" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-846"><a href="#cb58-846" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb58-847"><a href="#cb58-847" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb58-848"><a href="#cb58-848" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb58-849"><a href="#cb58-849" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-boxcox-ggplot</span></span>
<span id="cb58-850"><a href="#cb58-850" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-align: center</span></span>
<span id="cb58-851"><a href="#cb58-851" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 5</span></span>
<span id="cb58-852"><a href="#cb58-852" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 5</span></span>
<span id="cb58-853"><a href="#cb58-853" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Histogramm der Box-Cox transfomierten Daten in `ggplot` dargestellt."</span></span>
<span id="cb58-854"><a href="#cb58-854" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> fac1_tbl) <span class="sc">+</span></span>
<span id="cb58-855"><a href="#cb58-855" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb58-856"><a href="#cb58-856" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x =</span> jump_boxcox), <span class="at">alpha =</span> <span class="fl">0.9</span>,</span>
<span id="cb58-857"><a href="#cb58-857" aria-hidden="true" tabindex="-1"></a>                 <span class="at">fill =</span> cbbPalette[<span class="dv">3</span>], <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb58-858"><a href="#cb58-858" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">'Box-Cox transformierte Sprungweiten'</span>, <span class="at">y =</span> <span class="st">'Anzahl'</span>)</span>
<span id="cb58-859"><a href="#cb58-859" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-860"><a href="#cb58-860" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb58-861"><a href="#cb58-861" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-862"><a href="#cb58-862" aria-hidden="true" tabindex="-1"></a><span class="fu">### ... mit `{trafo}`</span></span>
<span id="cb58-863"><a href="#cb58-863" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-864"><a href="#cb58-864" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">The R Package trafo for Transforming Linear Regression Models</span><span class="co">](https://cran.r-project.org/web/packages/trafo/vignettes/vignette_trafo.pdf)</span></span>
<span id="cb58-865"><a href="#cb58-865" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-868"><a href="#cb58-868" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb58-869"><a href="#cb58-869" aria-hidden="true" tabindex="-1"></a>lm_fit <span class="ot">&lt;-</span> <span class="fu">lm</span>(hatch_time <span class="sc">~</span> weight, <span class="at">data =</span> fac1_tbl)</span>
<span id="cb58-870"><a href="#cb58-870" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb58-871"><a href="#cb58-871" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-874"><a href="#cb58-874" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb58-875"><a href="#cb58-875" aria-hidden="true" tabindex="-1"></a><span class="fu">assumptions</span>(lm_fit)</span>
<span id="cb58-876"><a href="#cb58-876" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb58-877"><a href="#cb58-877" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-878"><a href="#cb58-878" aria-hidden="true" tabindex="-1"></a><span class="fu">### ... mit `{dlookr}`</span></span>
<span id="cb58-879"><a href="#cb58-879" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-880"><a href="#cb58-880" aria-hidden="true" tabindex="-1"></a>::: callout-warning</span>
<span id="cb58-881"><a href="#cb58-881" aria-hidden="true" tabindex="-1"></a><span class="fu">## Achtung, bitte beachten!</span></span>
<span id="cb58-882"><a href="#cb58-882" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-883"><a href="#cb58-883" aria-hidden="true" tabindex="-1"></a>Das R Paket <span class="in">`{dlookr}`</span> lies sich eine Zeit nicht über CRAN einfach installieren.</span>
<span id="cb58-884"><a href="#cb58-884" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb58-885"><a href="#cb58-885" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-888"><a href="#cb58-888" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb58-889"><a href="#cb58-889" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb58-890"><a href="#cb58-890" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb58-891"><a href="#cb58-891" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb58-892"><a href="#cb58-892" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(dlookr)</span>
<span id="cb58-893"><a href="#cb58-893" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb58-894"><a href="#cb58-894" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-895"><a href="#cb58-895" aria-hidden="true" tabindex="-1"></a>::: {layout="<span class="co">[</span><span class="ot">15,85</span><span class="co">]</span>" layout-valign="top"}</span>
<span id="cb58-896"><a href="#cb58-896" aria-hidden="true" tabindex="-1"></a><span class="al">![](images/personal_opinion.png)</span>{fig-align="center" width="100%"}</span>
<span id="cb58-897"><a href="#cb58-897" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-898"><a href="#cb58-898" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; *"foo." --- Jochen Kruppa-Scheetz, meiner bescheidener Meinung nach.*</span></span>
<span id="cb58-899"><a href="#cb58-899" aria-hidden="true" tabindex="-1"></a><span class="at">:::</span></span>
<span id="cb58-900"><a href="#cb58-900" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-901"><a href="#cb58-901" aria-hidden="true" tabindex="-1"></a><span class="fu">## Referenzen {.unnumbered}</span></span>
</code><button title="In die Zwischenablage kopieren" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Bio Data Science wurde von <a href="https://www.hs-osnabrueck.de/prof-dr-jochen-kruppa/">Jochen Kruppa-Scheetz</a> geschrieben.</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/jkruppa/jkruppa.github.io/edit/master/eda-transform.qmd" class="toc-action"><i class="bi bi-github"></i>Seite editieren</a></li><li><a href="https://github.com/jkruppa/jkruppa.github.io/issues/new" class="toc-action"><i class="bi empty"></i>Problem melden</a></li><li><a href="https://github.com/jkruppa/jkruppa.github.io/blob/master/eda-transform.qmd" class="toc-action"><i class="bi empty"></i>Quellcode anzeigen</a></li></ul></div></div>
    <div class="nav-footer-right">
<p>Dieses Openbook wurde mit <a href="https://quarto.org/">Quarto</a> erstellt.</p>
</div>
  </div>
</footer>
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




</body></html>