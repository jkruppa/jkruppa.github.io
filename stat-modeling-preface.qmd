```{r echo = FALSE}
pacman::p_load(tidyverse, readxl, knitr, kableExtra, Hmisc)
```

# Statistisches Modellieren

![](images/caution.png){fig-align="center" width="50%"}

[Tidy Modeling with R](https://www.tmwr.org/)

[R Pakettidymodels](https://tidymodels.tidymodels.org/)

[R Paketparameters](https://easystats.github.io/parameters/index.html)

[R Paket performance](https://easystats.github.io/performance/)

## Genutzte R Pakete für das Kapitel

Wir wollen folgende R Pakete in diesem Kapitel nutzen.

```{r echo = TRUE}
#| message: false
pacman::p_load(tidyverse, magrittr, conflicted, broom,
               multcomp, emmeans, ggpubr)
conflict_prefer("select", "dplyr")
conflict_prefer("filter", "dplyr")
conflict_prefer("mutate", "dplyr")
```

Am Ende des Kapitels findest du nochmal den gesamten R Code in einem Rutsch zum selber durchführen oder aber kopieren.

## Daten

```{r}
#| message: false

model_tbl <- read_csv2("data/flea_dog_cat_length_weight.csv") %>%
  mutate(animal = as_factor(animal))
```

In der @tbl-model-1 ist der Datensatz `model_tbl` nochmal dargestellt.

```{r}
#| message: false
#| echo: false
#| tbl-cap: Selektierter Datensatz mit einer normalverteilten Variable `jump_length` sowie der multinominalverteilten Variable `grade` und einem Faktor `animal` mit drei Leveln.
#| label: tbl-model-1

model_tbl %>% head(15) %>% kable(align = "c", "pipe")
```

## Multiple lineare Regression

$$
y \sim x_1 + x_2 + ... + x_p
$$

$$
y \sim \beta_0 + \beta_1 x_1 + \beta_2 x_2 + ... + \beta_p x_p + \epsilon
$$

$$
\epsilon \sim \mathcal{N}(0, s^2_y)
$$

```{r}

sim_tbl <- tibble(dog = rnorm(100, 10, 2),
                  cat = rnorm(100, 15, 2),
                  fox = rnorm(100, 20, 2)) %>% 
  gather(animal, jump_length) %>% 
  mutate(animal = as_factor(animal))

lm(jump_length ~ animal, data = sim_tbl)

model.matrix(jump_length ~ animal, data = sim_tbl)
```

## Schlangen Beispiel

Modell matrix?

::: callout-tip
## Modellierung in der Statistik

Du findest auf YouTube [Statistik und Data Science - Teil 15.0 - Modellierung in der Statistik](https://youtu.be/2fXExWzipDI) als Video Reihe. Ich werde zwar alles nochmal hier als Text aufschreiben, aber manchmal ist das Sehen und Hören dann einfacher.
:::

::: {.callout-caution collapse="true"}
## Ein Wort zur Klausur

Wir nutzen folgende
:::

## Abhänig vs. unabhänige Daten

## Das Regressionskreuz

::: column-page
![Das Regressionskreuz](images/Regressionskreut_advanced.png){#fig-reg-cross fig-align="center" width="100%"}
:::

## tidymodels

https://www.tmwr.org/models.html

## Package see

https://easystats.github.io/see/articles/performance.html
